function Ip(t,n){for(var i=0;i<n.length;i++){const a=n[i];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in t)){const A=Object.getOwnPropertyDescriptor(a,l);A&&Object.defineProperty(t,l,A.get?A:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const A of l)if(A.type==="childList")for(const u of A.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function i(l){const A={};return l.integrity&&(A.integrity=l.integrity),l.referrerPolicy&&(A.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?A.credentials="include":l.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function a(l){if(l.ep)return;l.ep=!0;const A=i(l);fetch(l.href,A)}})();function gs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $A={exports:{}},Wo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C;function sy(){if($C)return Wo;$C=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(a,l,A){var u=null;if(A!==void 0&&(u=""+A),l.key!==void 0&&(u=""+l.key),"key"in l){A={};for(var f in l)f!=="key"&&(A[f]=l[f])}else A=l;return l=A.ref,{$$typeof:t,type:a,key:u,ref:l!==void 0?l:null,props:A}}return Wo.Fragment=n,Wo.jsx=i,Wo.jsxs=i,Wo}var ZC;function ly(){return ZC||(ZC=1,$A.exports=sy()),$A.exports}var h=ly();const Ay=gs(h),cy=Ip({__proto__:null,default:Ay},[h]);var ZA={exports:{}},Go={},KA={exports:{}},XA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KC;function uy(){return KC||(KC=1,function(t){function n(I,V){var Q=I.length;I.push(V);e:for(;0<Q;){var Z=Q-1>>>1,M=I[Z];if(0<l(M,V))I[Z]=V,I[Q]=M,Q=Z;else break e}}function i(I){return I.length===0?null:I[0]}function a(I){if(I.length===0)return null;var V=I[0],Q=I.pop();if(Q!==V){I[0]=Q;e:for(var Z=0,M=I.length,X=M>>>1;Z<X;){var e2=2*(Z+1)-1,o2=I[e2],f2=e2+1,x2=I[f2];if(0>l(o2,Q))f2<M&&0>l(x2,o2)?(I[Z]=x2,I[f2]=Q,Z=f2):(I[Z]=o2,I[e2]=Q,Z=e2);else if(f2<M&&0>l(x2,Q))I[Z]=x2,I[f2]=Q,Z=f2;else break e}}return V}function l(I,V){var Q=I.sortIndex-V.sortIndex;return Q!==0?Q:I.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var A=performance;t.unstable_now=function(){return A.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var C=[],m=[],D=1,p=null,v=3,B=!1,y=!1,x=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function P(I){for(var V=i(m);V!==null;){if(V.callback===null)a(m);else if(V.startTime<=I)a(m),V.sortIndex=V.expirationTime,n(C,V);else break;V=i(m)}}function N(I){if(x=!1,P(I),!y)if(i(C)!==null)y=!0,E||(E=!0,s2());else{var V=i(m);V!==null&&u2(N,V.startTime-I)}}var E=!1,L=-1,H=5,z=-1;function r2(){return S?!0:!(t.unstable_now()-z<H)}function c2(){if(S=!1,E){var I=t.unstable_now();z=I;var V=!0;try{e:{y=!1,x&&(x=!1,w(L),L=-1),B=!0;var Q=v;try{t:{for(P(I),p=i(C);p!==null&&!(p.expirationTime>I&&r2());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,v=p.priorityLevel;var M=Z(p.expirationTime<=I);if(I=t.unstable_now(),typeof M=="function"){p.callback=M,P(I),V=!0;break t}p===i(C)&&a(C),P(I)}else a(C);p=i(C)}if(p!==null)V=!0;else{var X=i(m);X!==null&&u2(N,X.startTime-I),V=!1}}break e}finally{p=null,v=Q,B=!1}V=void 0}}finally{V?s2():E=!1}}}var s2;if(typeof R=="function")s2=function(){R(c2)};else if(typeof MessageChannel<"u"){var i2=new MessageChannel,K=i2.port2;i2.port1.onmessage=c2,s2=function(){K.postMessage(null)}}else s2=function(){T(c2,0)};function u2(I,V){L=T(function(){I(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(I){switch(v){case 1:case 2:case 3:var V=3;break;default:V=v}var Q=v;v=V;try{return I()}finally{v=Q}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(I,V){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Q=v;v=I;try{return V()}finally{v=Q}},t.unstable_scheduleCallback=function(I,V,Q){var Z=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Z+Q:Z):Q=Z,I){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=Q+M,I={id:D++,callback:V,priorityLevel:I,startTime:Q,expirationTime:M,sortIndex:-1},Q>Z?(I.sortIndex=Q,n(m,I),i(C)===null&&I===i(m)&&(x?(w(L),L=-1):x=!0,u2(N,Q-Z))):(I.sortIndex=M,n(C,I),y||B||(y=!0,E||(E=!0,s2()))),I},t.unstable_shouldYield=r2,t.unstable_wrapCallback=function(I){var V=v;return function(){var Q=v;v=V;try{return I.apply(this,arguments)}finally{v=Q}}}}(XA)),XA}var XC;function fy(){return XC||(XC=1,KA.exports=uy()),KA.exports}var QA={exports:{}},P2={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QC;function dy(){if(QC)return P2;QC=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),p=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=p&&M[p]||M["@@iterator"],typeof M=="function"?M:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function S(M,X,e2){this.props=M,this.context=X,this.refs=x,this.updater=e2||B}S.prototype.isReactComponent={},S.prototype.setState=function(M,X){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,X,"setState")},S.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function T(){}T.prototype=S.prototype;function w(M,X,e2){this.props=M,this.context=X,this.refs=x,this.updater=e2||B}var R=w.prototype=new T;R.constructor=w,y(R,S.prototype),R.isPureReactComponent=!0;var P=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function L(M,X,e2,o2,f2,x2){return e2=x2.ref,{$$typeof:t,type:M,key:X,ref:e2!==void 0?e2:null,props:x2}}function H(M,X){return L(M.type,X,void 0,void 0,void 0,M.props)}function z(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function r2(M){var X={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(e2){return X[e2]})}var c2=/\/+/g;function s2(M,X){return typeof M=="object"&&M!==null&&M.key!=null?r2(""+M.key):X.toString(36)}function i2(){}function K(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(i2,i2):(M.status="pending",M.then(function(X){M.status==="pending"&&(M.status="fulfilled",M.value=X)},function(X){M.status==="pending"&&(M.status="rejected",M.reason=X)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function u2(M,X,e2,o2,f2){var x2=typeof M;(x2==="undefined"||x2==="boolean")&&(M=null);var p2=!1;if(M===null)p2=!0;else switch(x2){case"bigint":case"string":case"number":p2=!0;break;case"object":switch(M.$$typeof){case t:case n:p2=!0;break;case D:return p2=M._init,u2(p2(M._payload),X,e2,o2,f2)}}if(p2)return f2=f2(M),p2=o2===""?"."+s2(M,0):o2,P(f2)?(e2="",p2!=null&&(e2=p2.replace(c2,"$&/")+"/"),u2(f2,X,e2,"",function(M2){return M2})):f2!=null&&(z(f2)&&(f2=H(f2,e2+(f2.key==null||M&&M.key===f2.key?"":(""+f2.key).replace(c2,"$&/")+"/")+p2)),X.push(f2)),1;p2=0;var G2=o2===""?".":o2+":";if(P(M))for(var y2=0;y2<M.length;y2++)o2=M[y2],x2=G2+s2(o2,y2),p2+=u2(o2,X,e2,x2,f2);else if(y2=v(M),typeof y2=="function")for(M=y2.call(M),y2=0;!(o2=M.next()).done;)o2=o2.value,x2=G2+s2(o2,y2++),p2+=u2(o2,X,e2,x2,f2);else if(x2==="object"){if(typeof M.then=="function")return u2(K(M),X,e2,o2,f2);throw X=String(M),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return p2}function I(M,X,e2){if(M==null)return M;var o2=[],f2=0;return u2(M,o2,"","",function(x2){return X.call(e2,x2,f2++)}),o2}function V(M){if(M._status===-1){var X=M._result;X=X(),X.then(function(e2){(M._status===0||M._status===-1)&&(M._status=1,M._result=e2)},function(e2){(M._status===0||M._status===-1)&&(M._status=2,M._result=e2)}),M._status===-1&&(M._status=0,M._result=X)}if(M._status===1)return M._result.default;throw M._result}var Q=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Z(){}return P2.Children={map:I,forEach:function(M,X,e2){I(M,function(){X.apply(this,arguments)},e2)},count:function(M){var X=0;return I(M,function(){X++}),X},toArray:function(M){return I(M,function(X){return X})||[]},only:function(M){if(!z(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},P2.Component=S,P2.Fragment=i,P2.Profiler=l,P2.PureComponent=w,P2.StrictMode=a,P2.Suspense=C,P2.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,P2.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},P2.cache=function(M){return function(){return M.apply(null,arguments)}},P2.cloneElement=function(M,X,e2){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var o2=y({},M.props),f2=M.key,x2=void 0;if(X!=null)for(p2 in X.ref!==void 0&&(x2=void 0),X.key!==void 0&&(f2=""+X.key),X)!E.call(X,p2)||p2==="key"||p2==="__self"||p2==="__source"||p2==="ref"&&X.ref===void 0||(o2[p2]=X[p2]);var p2=arguments.length-2;if(p2===1)o2.children=e2;else if(1<p2){for(var G2=Array(p2),y2=0;y2<p2;y2++)G2[y2]=arguments[y2+2];o2.children=G2}return L(M.type,f2,void 0,void 0,x2,o2)},P2.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:A,_context:M},M},P2.createElement=function(M,X,e2){var o2,f2={},x2=null;if(X!=null)for(o2 in X.key!==void 0&&(x2=""+X.key),X)E.call(X,o2)&&o2!=="key"&&o2!=="__self"&&o2!=="__source"&&(f2[o2]=X[o2]);var p2=arguments.length-2;if(p2===1)f2.children=e2;else if(1<p2){for(var G2=Array(p2),y2=0;y2<p2;y2++)G2[y2]=arguments[y2+2];f2.children=G2}if(M&&M.defaultProps)for(o2 in p2=M.defaultProps,p2)f2[o2]===void 0&&(f2[o2]=p2[o2]);return L(M,x2,void 0,void 0,null,f2)},P2.createRef=function(){return{current:null}},P2.forwardRef=function(M){return{$$typeof:f,render:M}},P2.isValidElement=z,P2.lazy=function(M){return{$$typeof:D,_payload:{_status:-1,_result:M},_init:V}},P2.memo=function(M,X){return{$$typeof:m,type:M,compare:X===void 0?null:X}},P2.startTransition=function(M){var X=N.T,e2={};N.T=e2;try{var o2=M(),f2=N.S;f2!==null&&f2(e2,o2),typeof o2=="object"&&o2!==null&&typeof o2.then=="function"&&o2.then(Z,Q)}catch(x2){Q(x2)}finally{N.T=X}},P2.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},P2.use=function(M){return N.H.use(M)},P2.useActionState=function(M,X,e2){return N.H.useActionState(M,X,e2)},P2.useCallback=function(M,X){return N.H.useCallback(M,X)},P2.useContext=function(M){return N.H.useContext(M)},P2.useDebugValue=function(){},P2.useDeferredValue=function(M,X){return N.H.useDeferredValue(M,X)},P2.useEffect=function(M,X,e2){var o2=N.H;if(typeof e2=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return o2.useEffect(M,X)},P2.useId=function(){return N.H.useId()},P2.useImperativeHandle=function(M,X,e2){return N.H.useImperativeHandle(M,X,e2)},P2.useInsertionEffect=function(M,X){return N.H.useInsertionEffect(M,X)},P2.useLayoutEffect=function(M,X){return N.H.useLayoutEffect(M,X)},P2.useMemo=function(M,X){return N.H.useMemo(M,X)},P2.useOptimistic=function(M,X){return N.H.useOptimistic(M,X)},P2.useReducer=function(M,X,e2){return N.H.useReducer(M,X,e2)},P2.useRef=function(M){return N.H.useRef(M)},P2.useState=function(M){return N.H.useState(M)},P2.useSyncExternalStore=function(M,X,e2){return N.H.useSyncExternalStore(M,X,e2)},P2.useTransition=function(){return N.H.useTransition()},P2.version="19.1.0",P2}var JC;function fu(){return JC||(JC=1,QA.exports=dy()),QA.exports}var JA={exports:{}},L0={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e3;function my(){if(e3)return L0;e3=1;var t=fu();function n(C){var m="https://react.dev/errors/"+C;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)m+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+C+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function A(C,m,D){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:p==null?null:""+p,children:C,containerInfo:m,implementation:D}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(C,m){if(C==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return L0.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,L0.createPortal=function(C,m){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(n(299));return A(C,m,null,D)},L0.flushSync=function(C){var m=u.T,D=a.p;try{if(u.T=null,a.p=2,C)return C()}finally{u.T=m,a.p=D,a.d.f()}},L0.preconnect=function(C,m){typeof C=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,a.d.C(C,m))},L0.prefetchDNS=function(C){typeof C=="string"&&a.d.D(C)},L0.preinit=function(C,m){if(typeof C=="string"&&m&&typeof m.as=="string"){var D=m.as,p=f(D,m.crossOrigin),v=typeof m.integrity=="string"?m.integrity:void 0,B=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;D==="style"?a.d.S(C,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:B}):D==="script"&&a.d.X(C,{crossOrigin:p,integrity:v,fetchPriority:B,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},L0.preinitModule=function(C,m){if(typeof C=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var D=f(m.as,m.crossOrigin);a.d.M(C,{crossOrigin:D,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&a.d.M(C)},L0.preload=function(C,m){if(typeof C=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var D=m.as,p=f(D,m.crossOrigin);a.d.L(C,D,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},L0.preloadModule=function(C,m){if(typeof C=="string")if(m){var D=f(m.as,m.crossOrigin);a.d.m(C,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:D,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else a.d.m(C)},L0.requestFormReset=function(C){a.d.r(C)},L0.unstable_batchedUpdates=function(C,m){return C(m)},L0.useFormState=function(C,m,D){return u.H.useFormState(C,m,D)},L0.useFormStatus=function(){return u.H.useHostTransitionStatus()},L0.version="19.1.0",L0}var t3;function Op(){if(t3)return JA.exports;t3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),JA.exports=my(),JA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r3;function Cy(){if(r3)return Go;r3=1;var t=fy(),n=fu(),i=Op();function a(e){var r="https://react.dev/errors/"+e;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function A(e){var r=e,o=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(o=r.return),e=r.return;while(e)}return r.tag===3?o:null}function u(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function f(e){if(A(e)!==e)throw Error(a(188))}function C(e){var r=e.alternate;if(!r){if(r=A(e),r===null)throw Error(a(188));return r!==e?null:e}for(var o=e,s=r;;){var c=o.return;if(c===null)break;var d=c.alternate;if(d===null){if(s=c.return,s!==null){o=s;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===o)return f(c),e;if(d===s)return f(c),r;d=d.sibling}throw Error(a(188))}if(o.return!==s.return)o=c,s=d;else{for(var F=!1,b=c.child;b;){if(b===o){F=!0,o=c,s=d;break}if(b===s){F=!0,s=c,o=d;break}b=b.sibling}if(!F){for(b=d.child;b;){if(b===o){F=!0,o=d,s=c;break}if(b===s){F=!0,s=d,o=c;break}b=b.sibling}if(!F)throw Error(a(189))}}if(o.alternate!==s)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?e:r}function m(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e;for(e=e.child;e!==null;){if(r=m(e),r!==null)return r;e=e.sibling}return null}var D=Object.assign,p=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),R=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),r2=Symbol.for("react.memo_cache_sentinel"),c2=Symbol.iterator;function s2(e){return e===null||typeof e!="object"?null:(e=c2&&e[c2]||e["@@iterator"],typeof e=="function"?e:null)}var i2=Symbol.for("react.client.reference");function K(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===i2?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case y:return"Fragment";case S:return"Profiler";case x:return"StrictMode";case N:return"Suspense";case E:return"SuspenseList";case z:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case R:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case P:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return r=e.displayName||null,r!==null?r:K(e.type)||"Memo";case H:r=e._payload,e=e._init;try{return K(e(r))}catch{}}return null}var u2=Array.isArray,I=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},Z=[],M=-1;function X(e){return{current:e}}function e2(e){0>M||(e.current=Z[M],Z[M]=null,M--)}function o2(e,r){M++,Z[M]=e.current,e.current=r}var f2=X(null),x2=X(null),p2=X(null),G2=X(null);function y2(e,r){switch(o2(p2,r),o2(x2,e),o2(f2,null),r.nodeType){case 9:case 11:e=(e=r.documentElement)&&(e=e.namespaceURI)?yC(e):0;break;default:if(e=r.tagName,r=r.namespaceURI)r=yC(r),e=xC(r,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}e2(f2),o2(f2,e)}function M2(){e2(f2),e2(x2),e2(p2)}function z2(e){e.memoizedState!==null&&o2(G2,e);var r=f2.current,o=xC(r,e.type);r!==o&&(o2(x2,e),o2(f2,o))}function f0(e){x2.current===e&&(e2(f2),e2(x2)),G2.current===e&&(e2(G2),qo._currentValue=Q)}var N0=Object.prototype.hasOwnProperty,be=t.unstable_scheduleCallback,W0=t.unstable_cancelCallback,zn=t.unstable_shouldYield,Wn=t.unstable_requestPaint,q0=t.unstable_now,Gn=t.unstable_getCurrentPriorityLevel,et=t.unstable_ImmediatePriority,gi=t.unstable_UserBlockingPriority,Hr=t.unstable_NormalPriority,tt=t.unstable_LowPriority,xt=t.unstable_IdlePriority,vi=t.log,Vn=t.unstable_setDisableYieldValue,G0=null,A0=null;function we(e){if(typeof vi=="function"&&Vn(e),A0&&typeof A0.setStrictMode=="function")try{A0.setStrictMode(G0,e)}catch{}}var b0=Math.clz32?Math.clz32:Bi,Ws=Math.log,je=Math.LN2;function Bi(e){return e>>>=0,e===0?32:31-(Ws(e)/je|0)|0}var ir=256,ar=4194304;function rt(e){var r=e&42;if(r!==0)return r;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function sr(e,r,o){var s=e.pendingLanes;if(s===0)return 0;var c=0,d=e.suspendedLanes,F=e.pingedLanes;e=e.warmLanes;var b=s&134217727;return b!==0?(s=b&~d,s!==0?c=rt(s):(F&=b,F!==0?c=rt(F):o||(o=b&~e,o!==0&&(c=rt(o))))):(b=s&~d,b!==0?c=rt(b):F!==0?c=rt(F):o||(o=s&~e,o!==0&&(c=rt(o)))),c===0?0:r!==0&&r!==c&&(r&d)===0&&(d=c&-c,o=r&-r,d>=o||d===32&&(o&4194048)!==0)?r:c}function Ue(e,r){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&r)===0}function yi(e,r){switch(e){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jr(){var e=ir;return ir<<=1,(ir&4194048)===0&&(ir=256),e}function xi(){var e=ar;return ar<<=1,(ar&62914560)===0&&(ar=4194304),e}function Ur(e){for(var r=[],o=0;31>o;o++)r.push(e);return r}function lr(e,r){e.pendingLanes|=r,r!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Fi(e,r,o,s,c,d){var F=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var b=e.entanglements,_=e.expirationTimes,W=e.hiddenUpdates;for(o=F&~o;0<o;){var J=31-b0(o),n2=1<<J;b[J]=0,_[J]=-1;var G=W[J];if(G!==null)for(W[J]=null,J=0;J<G.length;J++){var Y=G[J];Y!==null&&(Y.lane&=-536870913)}o&=~n2}s!==0&&Ar(e,s,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(F&~r))}function Ar(e,r,o){e.pendingLanes|=r,e.suspendedLanes&=~r;var s=31-b0(r);e.entangledLanes|=r,e.entanglements[s]=e.entanglements[s]|1073741824|o&4194090}function cr(e,r){var o=e.entangledLanes|=r;for(e=e.entanglements;o;){var s=31-b0(o),c=1<<s;c&r|e[s]&r&&(e[s]|=r),o&=~c}}function Yn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function $n(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function k(){var e=V.p;return e!==0?e:(e=window.event,e===void 0?32:UC(e.type))}function j(e,r){var o=V.p;try{return V.p=e,r()}finally{V.p=o}}var $=Math.random().toString(36).slice(2),a2="__reactFiber$"+$,A2="__reactProps$"+$,h2="__reactContainer$"+$,F2="__reactEvents$"+$,d2="__reactListeners$"+$,v2="__reactHandles$"+$,B2="__reactResources$"+$,R2="__reactMarker$"+$;function D2(e){delete e[a2],delete e[A2],delete e[F2],delete e[d2],delete e[v2]}function w2(e){var r=e[a2];if(r)return r;for(var o=e.parentNode;o;){if(r=o[h2]||o[a2]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(e=RC(e);e!==null;){if(o=e[a2])return o;e=RC(e)}return r}e=o,o=e.parentNode}return null}function W2(e){if(e=e[a2]||e[h2]){var r=e.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return e}return null}function a0(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e.stateNode;throw Error(a(33))}function c0(e){var r=e[B2];return r||(r=e[B2]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function V2(e){e[R2]=!0}var j2=new Set,Ft={};function H0(e,r){ce(e,r),ce(e+"Capture",r)}function ce(e,r){for(Ft[e]=r,e=0;e<r.length;e++)j2.add(r[e])}var V0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),St={},Tt={};function Zn(e){return N0.call(Tt,e)?!0:N0.call(St,e)?!1:V0.test(e)?Tt[e]=!0:(St[e]=!0,!1)}function ue(e,r,o){if(Zn(r))if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(r);return;case"boolean":var s=r.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(r);return}}e.setAttribute(r,""+o)}}function nt(e,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttribute(r,""+o)}}function L2(e,r,o,s){if(s===null)e.removeAttribute(o);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(r,o,""+s)}}var _0,Ee;function Pe(e){if(_0===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);_0=r&&r[1]||"",Ee=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_0+e+Ee}var ur=!1;function s0(e,r){if(!e||ur)return"";ur=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(r){var n2=function(){throw Error()};if(Object.defineProperty(n2.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n2,[])}catch(Y){var G=Y}Reflect.construct(e,[],n2)}else{try{n2.call()}catch(Y){G=Y}e.call(n2.prototype)}}else{try{throw Error()}catch(Y){G=Y}(n2=e())&&typeof n2.catch=="function"&&n2.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=s.DetermineComponentFrameRoot(),F=d[0],b=d[1];if(F&&b){var _=F.split(`
`),W=b.split(`
`);for(c=s=0;s<_.length&&!_[s].includes("DetermineComponentFrameRoot");)s++;for(;c<W.length&&!W[c].includes("DetermineComponentFrameRoot");)c++;if(s===_.length||c===W.length)for(s=_.length-1,c=W.length-1;1<=s&&0<=c&&_[s]!==W[c];)c--;for(;1<=s&&0<=c;s--,c--)if(_[s]!==W[c]){if(s!==1||c!==1)do if(s--,c--,0>c||_[s]!==W[c]){var J=`
`+_[s].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=s&&0<=c);break}}}finally{ur=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?Pe(o):""}function Rt(e){switch(e.tag){case 26:case 27:case 5:return Pe(e.type);case 16:return Pe("Lazy");case 13:return Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 15:return s0(e.type,!1);case 11:return s0(e.type.render,!1);case 1:return s0(e.type,!0);case 31:return Pe("Activity");default:return""}}function Kn(e){try{var r="";do r+=Rt(e),e=e.return;while(e);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Y0(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hf(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function rv(e){var r=hf(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),s=""+e[r];if(!e.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,d=o.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return c.call(this)},set:function(F){s=""+F,d.call(this,F)}}),Object.defineProperty(e,r,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(F){s=""+F},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function Si(e){e._valueTracker||(e._valueTracker=rv(e))}function Df(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var o=r.getValue(),s="";return e&&(s=hf(e)?e.checked?"true":"false":e.value),e=s,e!==o?(r.setValue(e),!0):!1}function Ti(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var nv=/[\n"\\]/g;function fe(e){return e.replace(nv,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Gs(e,r,o,s,c,d,F,b){e.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?e.type=F:e.removeAttribute("type"),r!=null?F==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+Y0(r)):e.value!==""+Y0(r)&&(e.value=""+Y0(r)):F!=="submit"&&F!=="reset"||e.removeAttribute("value"),r!=null?Vs(e,F,Y0(r)):o!=null?Vs(e,F,Y0(o)):s!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Y0(b):e.removeAttribute("name")}function gf(e,r,o,s,c,d,F,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),r!=null||o!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;o=o!=null?""+Y0(o):"",r=r!=null?""+Y0(r):o,b||r===e.value||(e.value=r),e.defaultValue=r}s=s??c,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=b?e.checked:!!s,e.defaultChecked=!!s,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(e.name=F)}function Vs(e,r,o){r==="number"&&Ti(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function zr(e,r,o,s){if(e=e.options,r){r={};for(var c=0;c<o.length;c++)r["$"+o[c]]=!0;for(o=0;o<e.length;o++)c=r.hasOwnProperty("$"+e[o].value),e[o].selected!==c&&(e[o].selected=c),c&&s&&(e[o].defaultSelected=!0)}else{for(o=""+Y0(o),r=null,c=0;c<e.length;c++){if(e[c].value===o){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}r!==null||e[c].disabled||(r=e[c])}r!==null&&(r.selected=!0)}}function vf(e,r,o){if(r!=null&&(r=""+Y0(r),r!==e.value&&(e.value=r),o==null)){e.defaultValue!==r&&(e.defaultValue=r);return}e.defaultValue=o!=null?""+Y0(o):""}function Bf(e,r,o,s){if(r==null){if(s!=null){if(o!=null)throw Error(a(92));if(u2(s)){if(1<s.length)throw Error(a(93));s=s[0]}o=s}o==null&&(o=""),r=o}o=Y0(r),e.defaultValue=o,s=e.textContent,s===o&&s!==""&&s!==null&&(e.value=s)}function Wr(e,r){if(r){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=r;return}}e.textContent=r}var ov=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yf(e,r,o){var s=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?s?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="":s?e.setProperty(r,o):typeof o!="number"||o===0||ov.has(r)?r==="float"?e.cssFloat=o:e[r]=(""+o).trim():e[r]=o+"px"}function xf(e,r,o){if(r!=null&&typeof r!="object")throw Error(a(62));if(e=e.style,o!=null){for(var s in o)!o.hasOwnProperty(s)||r!=null&&r.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var c in r)s=r[c],r.hasOwnProperty(c)&&o[c]!==s&&yf(e,c,s)}else for(var d in r)r.hasOwnProperty(d)&&yf(e,d,r[d])}function Ys(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),av=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ri(e){return av.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var $s=null;function Zs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gr=null,Vr=null;function Ff(e){var r=W2(e);if(r&&(e=r.stateNode)){var o=e[A2]||null;e:switch(e=r.stateNode,r.type){case"input":if(Gs(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+fe(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var s=o[r];if(s!==e&&s.form===e.form){var c=s[A2]||null;if(!c)throw Error(a(90));Gs(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(r=0;r<o.length;r++)s=o[r],s.form===e.form&&Df(s)}break e;case"textarea":vf(e,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&zr(e,!!o.multiple,r,!1)}}}var Ks=!1;function Sf(e,r,o){if(Ks)return e(r,o);Ks=!0;try{var s=e(r);return s}finally{if(Ks=!1,(Gr!==null||Vr!==null)&&(fa(),Gr&&(r=Gr,e=Vr,Vr=Gr=null,Ff(r),e)))for(r=0;r<e.length;r++)Ff(e[r])}}function Xn(e,r){var o=e.stateNode;if(o===null)return null;var s=o[A2]||null;if(s===null)return null;o=s[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(a(231,r,typeof o));return o}var ot=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xs=!1;if(ot)try{var Qn={};Object.defineProperty(Qn,"passive",{get:function(){Xs=!0}}),window.addEventListener("test",Qn,Qn),window.removeEventListener("test",Qn,Qn)}catch{Xs=!1}var bt=null,Qs=null,bi=null;function Tf(){if(bi)return bi;var e,r=Qs,o=r.length,s,c="value"in bt?bt.value:bt.textContent,d=c.length;for(e=0;e<o&&r[e]===c[e];e++);var F=o-e;for(s=1;s<=F&&r[o-s]===c[d-s];s++);return bi=c.slice(e,1<s?1-s:void 0)}function wi(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Ei(){return!0}function Rf(){return!1}function $0(e){function r(o,s,c,d,F){this._reactName=o,this._targetInst=c,this.type=s,this.nativeEvent=d,this.target=F,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(o=e[b],this[b]=o?o(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ei:Rf,this.isPropagationStopped=Rf,this}return D(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),r}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pi=$0(fr),Jn=D({},fr,{view:0,detail:0}),sv=$0(Jn),Js,el,eo,Mi=D({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==eo&&(eo&&e.type==="mousemove"?(Js=e.screenX-eo.screenX,el=e.screenY-eo.screenY):el=Js=0,eo=e),Js)},movementY:function(e){return"movementY"in e?e.movementY:el}}),bf=$0(Mi),lv=D({},Mi,{dataTransfer:0}),Av=$0(lv),cv=D({},Jn,{relatedTarget:0}),tl=$0(cv),uv=D({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),fv=$0(uv),dv=D({},fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mv=$0(dv),Cv=D({},fr,{data:0}),wf=$0(Cv),pv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gv(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=Dv[e])?!!r[e]:!1}function rl(){return gv}var vv=D({},Jn,{key:function(e){if(e.key){var r=pv[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=wi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rl,charCode:function(e){return e.type==="keypress"?wi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Bv=$0(vv),yv=D({},Mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ef=$0(yv),xv=D({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rl}),Fv=$0(xv),Sv=D({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tv=$0(Sv),Rv=D({},Mi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bv=$0(Rv),wv=D({},fr,{newState:0,oldState:0}),Ev=$0(wv),Pv=[9,13,27,32],nl=ot&&"CompositionEvent"in window,to=null;ot&&"documentMode"in document&&(to=document.documentMode);var Mv=ot&&"TextEvent"in window&&!to,Pf=ot&&(!nl||to&&8<to&&11>=to),Mf=" ",Nf=!1;function _f(e,r){switch(e){case"keyup":return Pv.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yr=!1;function Nv(e,r){switch(e){case"compositionend":return kf(r);case"keypress":return r.which!==32?null:(Nf=!0,Mf);case"textInput":return e=r.data,e===Mf&&Nf?null:e;default:return null}}function _v(e,r){if(Yr)return e==="compositionend"||!nl&&_f(e,r)?(e=Tf(),bi=Qs=bt=null,Yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Pf&&r.locale!=="ko"?null:r.data;default:return null}}var kv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lf(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!kv[e.type]:r==="textarea"}function If(e,r,o,s){Gr?Vr?Vr.push(s):Vr=[s]:Gr=s,r=Da(r,"onChange"),0<r.length&&(o=new Pi("onChange","change",null,o,s),e.push({event:o,listeners:r}))}var ro=null,no=null;function Lv(e){hC(e,0)}function Ni(e){var r=a0(e);if(Df(r))return e}function Of(e,r){if(e==="change")return r}var qf=!1;if(ot){var ol;if(ot){var il="oninput"in document;if(!il){var Hf=document.createElement("div");Hf.setAttribute("oninput","return;"),il=typeof Hf.oninput=="function"}ol=il}else ol=!1;qf=ol&&(!document.documentMode||9<document.documentMode)}function jf(){ro&&(ro.detachEvent("onpropertychange",Uf),no=ro=null)}function Uf(e){if(e.propertyName==="value"&&Ni(no)){var r=[];If(r,no,e,Zs(e)),Sf(Lv,r)}}function Iv(e,r,o){e==="focusin"?(jf(),ro=r,no=o,ro.attachEvent("onpropertychange",Uf)):e==="focusout"&&jf()}function Ov(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ni(no)}function qv(e,r){if(e==="click")return Ni(r)}function Hv(e,r){if(e==="input"||e==="change")return Ni(r)}function jv(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Q0=typeof Object.is=="function"?Object.is:jv;function oo(e,r){if(Q0(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var o=Object.keys(e),s=Object.keys(r);if(o.length!==s.length)return!1;for(s=0;s<o.length;s++){var c=o[s];if(!N0.call(r,c)||!Q0(e[c],r[c]))return!1}return!0}function zf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wf(e,r){var o=zf(e);e=0;for(var s;o;){if(o.nodeType===3){if(s=e+o.textContent.length,e<=r&&s>=r)return{node:o,offset:r-e};e=s}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zf(o)}}function Gf(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Gf(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Vf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var r=Ti(e.document);r instanceof e.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)e=r.contentWindow;else break;r=Ti(e.document)}return r}function al(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}var Uv=ot&&"documentMode"in document&&11>=document.documentMode,$r=null,sl=null,io=null,ll=!1;function Yf(e,r,o){var s=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;ll||$r==null||$r!==Ti(s)||(s=$r,"selectionStart"in s&&al(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),io&&oo(io,s)||(io=s,s=Da(sl,"onSelect"),0<s.length&&(r=new Pi("onSelect","select",null,r,o),e.push({event:r,listeners:s}),r.target=$r)))}function dr(e,r){var o={};return o[e.toLowerCase()]=r.toLowerCase(),o["Webkit"+e]="webkit"+r,o["Moz"+e]="moz"+r,o}var Zr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},Al={},$f={};ot&&($f=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function mr(e){if(Al[e])return Al[e];if(!Zr[e])return e;var r=Zr[e],o;for(o in r)if(r.hasOwnProperty(o)&&o in $f)return Al[e]=r[o];return e}var Zf=mr("animationend"),Kf=mr("animationiteration"),Xf=mr("animationstart"),zv=mr("transitionrun"),Wv=mr("transitionstart"),Gv=mr("transitioncancel"),Qf=mr("transitionend"),Jf=new Map,cl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cl.push("scrollEnd");function Me(e,r){Jf.set(e,r),H0(r,[e])}var ed=new WeakMap;function de(e,r){if(typeof e=="object"&&e!==null){var o=ed.get(e);return o!==void 0?o:(r={value:e,source:r,stack:Kn(r)},ed.set(e,r),r)}return{value:e,source:r,stack:Kn(r)}}var me=[],Kr=0,ul=0;function _i(){for(var e=Kr,r=ul=Kr=0;r<e;){var o=me[r];me[r++]=null;var s=me[r];me[r++]=null;var c=me[r];me[r++]=null;var d=me[r];if(me[r++]=null,s!==null&&c!==null){var F=s.pending;F===null?c.next=c:(c.next=F.next,F.next=c),s.pending=c}d!==0&&td(o,c,d)}}function ki(e,r,o,s){me[Kr++]=e,me[Kr++]=r,me[Kr++]=o,me[Kr++]=s,ul|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function fl(e,r,o,s){return ki(e,r,o,s),Li(e)}function Xr(e,r){return ki(e,null,null,r),Li(e)}function td(e,r,o){e.lanes|=o;var s=e.alternate;s!==null&&(s.lanes|=o);for(var c=!1,d=e.return;d!==null;)d.childLanes|=o,s=d.alternate,s!==null&&(s.childLanes|=o),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&r!==null&&(c=31-b0(o),e=d.hiddenUpdates,s=e[c],s===null?e[c]=[r]:s.push(r),r.lane=o|536870912),d):null}function Li(e){if(50<Po)throw Po=0,DA=null,Error(a(185));for(var r=e.return;r!==null;)e=r,r=e.return;return e.tag===3?e.stateNode:null}var Qr={};function Vv(e,r,o,s){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function J0(e,r,o,s){return new Vv(e,r,o,s)}function dl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function it(e,r){var o=e.alternate;return o===null?(o=J0(e.tag,r,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=r,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,r=e.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function rd(e,r){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=r,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,r=o.dependencies,e.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e}function Ii(e,r,o,s,c,d){var F=0;if(s=e,typeof e=="function")dl(e)&&(F=1);else if(typeof e=="string")F=$B(e,o,f2.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case z:return e=J0(31,o,r,c),e.elementType=z,e.lanes=d,e;case y:return Cr(o.children,c,d,r);case x:F=8,c|=24;break;case S:return e=J0(12,o,r,c|2),e.elementType=S,e.lanes=d,e;case N:return e=J0(13,o,r,c),e.elementType=N,e.lanes=d,e;case E:return e=J0(19,o,r,c),e.elementType=E,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T:case R:F=10;break e;case w:F=9;break e;case P:F=11;break e;case L:F=14;break e;case H:F=16,s=null;break e}F=29,o=Error(a(130,e===null?"null":typeof e,"")),s=null}return r=J0(F,o,r,c),r.elementType=e,r.type=s,r.lanes=d,r}function Cr(e,r,o,s){return e=J0(7,e,s,r),e.lanes=o,e}function ml(e,r,o){return e=J0(6,e,null,r),e.lanes=o,e}function Cl(e,r,o){return r=J0(4,e.children!==null?e.children:[],e.key,r),r.lanes=o,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}var Jr=[],en=0,Oi=null,qi=0,Ce=[],pe=0,pr=null,at=1,st="";function hr(e,r){Jr[en++]=qi,Jr[en++]=Oi,Oi=e,qi=r}function nd(e,r,o){Ce[pe++]=at,Ce[pe++]=st,Ce[pe++]=pr,pr=e;var s=at;e=st;var c=32-b0(s)-1;s&=~(1<<c),o+=1;var d=32-b0(r)+c;if(30<d){var F=c-c%5;d=(s&(1<<F)-1).toString(32),s>>=F,c-=F,at=1<<32-b0(r)+c|o<<c|s,st=d+e}else at=1<<d|o<<c|s,st=e}function pl(e){e.return!==null&&(hr(e,1),nd(e,1,0))}function hl(e){for(;e===Oi;)Oi=Jr[--en],Jr[en]=null,qi=Jr[--en],Jr[en]=null;for(;e===pr;)pr=Ce[--pe],Ce[pe]=null,st=Ce[--pe],Ce[pe]=null,at=Ce[--pe],Ce[pe]=null}var j0=null,d0=null,$2=!1,Dr=null,ze=!1,Dl=Error(a(519));function gr(e){var r=Error(a(418,""));throw lo(de(r,e)),Dl}function od(e){var r=e.stateNode,o=e.type,s=e.memoizedProps;switch(r[a2]=e,r[A2]=s,o){case"dialog":q2("cancel",r),q2("close",r);break;case"iframe":case"object":case"embed":q2("load",r);break;case"video":case"audio":for(o=0;o<No.length;o++)q2(No[o],r);break;case"source":q2("error",r);break;case"img":case"image":case"link":q2("error",r),q2("load",r);break;case"details":q2("toggle",r);break;case"input":q2("invalid",r),gf(r,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),Si(r);break;case"select":q2("invalid",r);break;case"textarea":q2("invalid",r),Bf(r,s.value,s.defaultValue,s.children),Si(r)}o=s.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||s.suppressHydrationWarning===!0||BC(r.textContent,o)?(s.popover!=null&&(q2("beforetoggle",r),q2("toggle",r)),s.onScroll!=null&&q2("scroll",r),s.onScrollEnd!=null&&q2("scrollend",r),s.onClick!=null&&(r.onclick=ga),r=!0):r=!1,r||gr(e)}function id(e){for(j0=e.return;j0;)switch(j0.tag){case 5:case 13:ze=!1;return;case 27:case 3:ze=!0;return;default:j0=j0.return}}function ao(e){if(e!==j0)return!1;if(!$2)return id(e),$2=!0,!1;var r=e.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||_A(e.type,e.memoizedProps)),o=!o),o&&d0&&gr(e),id(e),r===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8)if(o=e.data,o==="/$"){if(r===0){d0=_e(e.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;e=e.nextSibling}d0=null}}else r===27?(r=d0,Wt(e.type)?(e=OA,OA=null,d0=e):d0=r):d0=j0?_e(e.stateNode.nextSibling):null;return!0}function so(){d0=j0=null,$2=!1}function ad(){var e=Dr;return e!==null&&(X0===null?X0=e:X0.push.apply(X0,e),Dr=null),e}function lo(e){Dr===null?Dr=[e]:Dr.push(e)}var gl=X(null),vr=null,lt=null;function wt(e,r,o){o2(gl,r._currentValue),r._currentValue=o}function At(e){e._currentValue=gl.current,e2(gl)}function vl(e,r,o){for(;e!==null;){var s=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,s!==null&&(s.childLanes|=r)):s!==null&&(s.childLanes&r)!==r&&(s.childLanes|=r),e===o)break;e=e.return}}function Bl(e,r,o,s){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var F=c.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=c;for(var _=0;_<r.length;_++)if(b.context===r[_]){d.lanes|=o,b=d.alternate,b!==null&&(b.lanes|=o),vl(d.return,o,e),s||(F=null);break e}d=b.next}}else if(c.tag===18){if(F=c.return,F===null)throw Error(a(341));F.lanes|=o,d=F.alternate,d!==null&&(d.lanes|=o),vl(F,o,e),F=null}else F=c.child;if(F!==null)F.return=c;else for(F=c;F!==null;){if(F===e){F=null;break}if(c=F.sibling,c!==null){c.return=F.return,F=c;break}F=F.return}c=F}}function Ao(e,r,o,s){e=null;for(var c=r,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var F=c.alternate;if(F===null)throw Error(a(387));if(F=F.memoizedProps,F!==null){var b=c.type;Q0(c.pendingProps.value,F.value)||(e!==null?e.push(b):e=[b])}}else if(c===G2.current){if(F=c.alternate,F===null)throw Error(a(387));F.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(qo):e=[qo])}c=c.return}e!==null&&Bl(r,e,o,s),r.flags|=262144}function Hi(e){for(e=e.firstContext;e!==null;){if(!Q0(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Br(e){vr=e,lt=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function k0(e){return sd(vr,e)}function ji(e,r){return vr===null&&Br(e),sd(e,r)}function sd(e,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},lt===null){if(e===null)throw Error(a(308));lt=r,e.dependencies={lanes:0,firstContext:r},e.flags|=524288}else lt=lt.next=r;return o}var Yv=typeof AbortController<"u"?AbortController:function(){var e=[],r=this.signal={aborted:!1,addEventListener:function(o,s){e.push(s)}};this.abort=function(){r.aborted=!0,e.forEach(function(o){return o()})}},$v=t.unstable_scheduleCallback,Zv=t.unstable_NormalPriority,y0={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yl(){return{controller:new Yv,data:new Map,refCount:0}}function co(e){e.refCount--,e.refCount===0&&$v(Zv,function(){e.controller.abort()})}var uo=null,xl=0,tn=0,rn=null;function Kv(e,r){if(uo===null){var o=uo=[];xl=0,tn=SA(),rn={status:"pending",value:void 0,then:function(s){o.push(s)}}}return xl++,r.then(ld,ld),r}function ld(){if(--xl===0&&uo!==null){rn!==null&&(rn.status="fulfilled");var e=uo;uo=null,tn=0,rn=null;for(var r=0;r<e.length;r++)(0,e[r])()}}function Xv(e,r){var o=[],s={status:"pending",value:null,reason:null,then:function(c){o.push(c)}};return e.then(function(){s.status="fulfilled",s.value=r;for(var c=0;c<o.length;c++)(0,o[c])(r)},function(c){for(s.status="rejected",s.reason=c,c=0;c<o.length;c++)(0,o[c])(void 0)}),s}var Ad=I.S;I.S=function(e,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Kv(e,r),Ad!==null&&Ad(e,r)};var yr=X(null);function Fl(){var e=yr.current;return e!==null?e:t0.pooledCache}function Ui(e,r){r===null?o2(yr,yr.current):o2(yr,r.pool)}function cd(){var e=Fl();return e===null?null:{parent:y0._currentValue,pool:e}}var fo=Error(a(460)),ud=Error(a(474)),zi=Error(a(542)),Sl={then:function(){}};function fd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Wi(){}function dd(e,r,o){switch(o=e[o],o===void 0?e.push(r):o!==r&&(r.then(Wi,Wi),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,Cd(e),e;default:if(typeof r.status=="string")r.then(Wi,Wi);else{if(e=t0,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=r,e.status="pending",e.then(function(s){if(r.status==="pending"){var c=r;c.status="fulfilled",c.value=s}},function(s){if(r.status==="pending"){var c=r;c.status="rejected",c.reason=s}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,Cd(e),e}throw mo=r,fo}}var mo=null;function md(){if(mo===null)throw Error(a(459));var e=mo;return mo=null,e}function Cd(e){if(e===fo||e===zi)throw Error(a(483))}var Et=!1;function Tl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rl(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Pt(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Mt(e,r,o){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Z2&2)!==0){var c=s.pending;return c===null?r.next=r:(r.next=c.next,c.next=r),s.pending=r,r=Li(e),td(e,null,o),r}return ki(e,s,r,o),Li(e)}function Co(e,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var s=r.lanes;s&=e.pendingLanes,o|=s,r.lanes=o,cr(e,o)}}function bl(e,r){var o=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,o===s)){var c=null,d=null;if(o=o.firstBaseUpdate,o!==null){do{var F={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};d===null?c=d=F:d=d.next=F,o=o.next}while(o!==null);d===null?c=d=r:d=d.next=r}else c=d=r;o={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:s.shared,callbacks:s.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=r:e.next=r,o.lastBaseUpdate=r}var wl=!1;function po(){if(wl){var e=rn;if(e!==null)throw e}}function ho(e,r,o,s){wl=!1;var c=e.updateQueue;Et=!1;var d=c.firstBaseUpdate,F=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var _=b,W=_.next;_.next=null,F===null?d=W:F.next=W,F=_;var J=e.alternate;J!==null&&(J=J.updateQueue,b=J.lastBaseUpdate,b!==F&&(b===null?J.firstBaseUpdate=W:b.next=W,J.lastBaseUpdate=_))}if(d!==null){var n2=c.baseState;F=0,J=W=_=null,b=d;do{var G=b.lane&-536870913,Y=G!==b.lane;if(Y?(U2&G)===G:(s&G)===G){G!==0&&G===tn&&(wl=!0),J!==null&&(J=J.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var b2=e,S2=b;G=r;var J2=o;switch(S2.tag){case 1:if(b2=S2.payload,typeof b2=="function"){n2=b2.call(J2,n2,G);break e}n2=b2;break e;case 3:b2.flags=b2.flags&-65537|128;case 0:if(b2=S2.payload,G=typeof b2=="function"?b2.call(J2,n2,G):b2,G==null)break e;n2=D({},n2,G);break e;case 2:Et=!0}}G=b.callback,G!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=c.callbacks,Y===null?c.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},J===null?(W=J=Y,_=n2):J=J.next=Y,F|=G;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;Y=b,b=Y.next,Y.next=null,c.lastBaseUpdate=Y,c.shared.pending=null}}while(!0);J===null&&(_=n2),c.baseState=_,c.firstBaseUpdate=W,c.lastBaseUpdate=J,d===null&&(c.shared.lanes=0),Ht|=F,e.lanes=F,e.memoizedState=n2}}function pd(e,r){if(typeof e!="function")throw Error(a(191,e));e.call(r)}function hd(e,r){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)pd(o[e],r)}var nn=X(null),Gi=X(0);function Dd(e,r){e=pt,o2(Gi,e),o2(nn,r),pt=e|r.baseLanes}function El(){o2(Gi,pt),o2(nn,nn.current)}function Pl(){pt=Gi.current,e2(nn),e2(Gi)}var Nt=0,N2=null,X2=null,v0=null,Vi=!1,on=!1,xr=!1,Yi=0,Do=0,an=null,Qv=0;function p0(){throw Error(a(321))}function Ml(e,r){if(r===null)return!1;for(var o=0;o<r.length&&o<e.length;o++)if(!Q0(e[o],r[o]))return!1;return!0}function Nl(e,r,o,s,c,d){return Nt=d,N2=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,I.H=e===null||e.memoizedState===null?tm:rm,xr=!1,d=o(s,c),xr=!1,on&&(d=vd(r,o,s,c)),gd(e),d}function gd(e){I.H=Ji;var r=X2!==null&&X2.next!==null;if(Nt=0,v0=X2=N2=null,Vi=!1,Do=0,an=null,r)throw Error(a(300));e===null||F0||(e=e.dependencies,e!==null&&Hi(e)&&(F0=!0))}function vd(e,r,o,s){N2=e;var c=0;do{if(on&&(an=null),Do=0,on=!1,25<=c)throw Error(a(301));if(c+=1,v0=X2=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}I.H=iB,d=r(o,s)}while(on);return d}function Jv(){var e=I.H,r=e.useState()[0];return r=typeof r.then=="function"?go(r):r,e=e.useState()[0],(X2!==null?X2.memoizedState:null)!==e&&(N2.flags|=1024),r}function _l(){var e=Yi!==0;return Yi=0,e}function kl(e,r,o){r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~o}function Ll(e){if(Vi){for(e=e.memoizedState;e!==null;){var r=e.queue;r!==null&&(r.pending=null),e=e.next}Vi=!1}Nt=0,v0=X2=N2=null,on=!1,Do=Yi=0,an=null}function Z0(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return v0===null?N2.memoizedState=v0=e:v0=v0.next=e,v0}function B0(){if(X2===null){var e=N2.alternate;e=e!==null?e.memoizedState:null}else e=X2.next;var r=v0===null?N2.memoizedState:v0.next;if(r!==null)v0=r,X2=e;else{if(e===null)throw N2.alternate===null?Error(a(467)):Error(a(310));X2=e,e={memoizedState:X2.memoizedState,baseState:X2.baseState,baseQueue:X2.baseQueue,queue:X2.queue,next:null},v0===null?N2.memoizedState=v0=e:v0=v0.next=e}return v0}function Il(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function go(e){var r=Do;return Do+=1,an===null&&(an=[]),e=dd(an,e,r),r=N2,(v0===null?r.memoizedState:v0.next)===null&&(r=r.alternate,I.H=r===null||r.memoizedState===null?tm:rm),e}function $i(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return go(e);if(e.$$typeof===R)return k0(e)}throw Error(a(438,String(e)))}function Ol(e){var r=null,o=N2.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var s=N2.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(r={data:s.data.map(function(c){return c.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Il(),N2.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(e),s=0;s<e;s++)o[s]=r2;return r.index++,o}function ct(e,r){return typeof r=="function"?r(e):r}function Zi(e){var r=B0();return ql(r,X2,e)}function ql(e,r,o){var s=e.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=o;var c=e.baseQueue,d=s.pending;if(d!==null){if(c!==null){var F=c.next;c.next=d.next,d.next=F}r.baseQueue=c=d,s.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{r=c.next;var b=F=null,_=null,W=r,J=!1;do{var n2=W.lane&-536870913;if(n2!==W.lane?(U2&n2)===n2:(Nt&n2)===n2){var G=W.revertLane;if(G===0)_!==null&&(_=_.next={lane:0,revertLane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),n2===tn&&(J=!0);else if((Nt&G)===G){W=W.next,G===tn&&(J=!0);continue}else n2={lane:0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},_===null?(b=_=n2,F=d):_=_.next=n2,N2.lanes|=G,Ht|=G;n2=W.action,xr&&o(d,n2),d=W.hasEagerState?W.eagerState:o(d,n2)}else G={lane:n2,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},_===null?(b=_=G,F=d):_=_.next=G,N2.lanes|=n2,Ht|=n2;W=W.next}while(W!==null&&W!==r);if(_===null?F=d:_.next=b,!Q0(d,e.memoizedState)&&(F0=!0,J&&(o=rn,o!==null)))throw o;e.memoizedState=d,e.baseState=F,e.baseQueue=_,s.lastRenderedState=d}return c===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Hl(e){var r=B0(),o=r.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=e;var s=o.dispatch,c=o.pending,d=r.memoizedState;if(c!==null){o.pending=null;var F=c=c.next;do d=e(d,F.action),F=F.next;while(F!==c);Q0(d,r.memoizedState)||(F0=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),o.lastRenderedState=d}return[d,s]}function Bd(e,r,o){var s=N2,c=B0(),d=$2;if(d){if(o===void 0)throw Error(a(407));o=o()}else o=r();var F=!Q0((X2||c).memoizedState,o);F&&(c.memoizedState=o,F0=!0),c=c.queue;var b=Fd.bind(null,s,c,e);if(vo(2048,8,b,[e]),c.getSnapshot!==r||F||v0!==null&&v0.memoizedState.tag&1){if(s.flags|=2048,sn(9,Ki(),xd.bind(null,s,c,o,r),null),t0===null)throw Error(a(349));d||(Nt&124)!==0||yd(s,r,o)}return o}function yd(e,r,o){e.flags|=16384,e={getSnapshot:r,value:o},r=N2.updateQueue,r===null?(r=Il(),N2.updateQueue=r,r.stores=[e]):(o=r.stores,o===null?r.stores=[e]:o.push(e))}function xd(e,r,o,s){r.value=o,r.getSnapshot=s,Sd(r)&&Td(e)}function Fd(e,r,o){return o(function(){Sd(r)&&Td(e)})}function Sd(e){var r=e.getSnapshot;e=e.value;try{var o=r();return!Q0(e,o)}catch{return!0}}function Td(e){var r=Xr(e,2);r!==null&&oe(r,e,2)}function jl(e){var r=Z0();if(typeof e=="function"){var o=e;if(e=o(),xr){we(!0);try{o()}finally{we(!1)}}}return r.memoizedState=r.baseState=e,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ct,lastRenderedState:e},r}function Rd(e,r,o,s){return e.baseState=o,ql(e,X2,typeof s=="function"?s:ct)}function eB(e,r,o,s,c){if(Qi(e))throw Error(a(485));if(e=r.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){d.listeners.push(F)}};I.T!==null?o(!0):d.isTransition=!1,s(d),o=r.pending,o===null?(d.next=r.pending=d,bd(r,d)):(d.next=o.next,r.pending=o.next=d)}}function bd(e,r){var o=r.action,s=r.payload,c=e.state;if(r.isTransition){var d=I.T,F={};I.T=F;try{var b=o(c,s),_=I.S;_!==null&&_(F,b),wd(e,r,b)}catch(W){Ul(e,r,W)}finally{I.T=d}}else try{d=o(c,s),wd(e,r,d)}catch(W){Ul(e,r,W)}}function wd(e,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(s){Ed(e,r,s)},function(s){return Ul(e,r,s)}):Ed(e,r,o)}function Ed(e,r,o){r.status="fulfilled",r.value=o,Pd(r),e.state=o,r=e.pending,r!==null&&(o=r.next,o===r?e.pending=null:(o=o.next,r.next=o,bd(e,o)))}function Ul(e,r,o){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do r.status="rejected",r.reason=o,Pd(r),r=r.next;while(r!==s)}e.action=null}function Pd(e){e=e.listeners;for(var r=0;r<e.length;r++)(0,e[r])()}function Md(e,r){return r}function Nd(e,r){if($2){var o=t0.formState;if(o!==null){e:{var s=N2;if($2){if(d0){t:{for(var c=d0,d=ze;c.nodeType!==8;){if(!d){c=null;break t}if(c=_e(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){d0=_e(c.nextSibling),s=c.data==="F!";break e}}gr(s)}s=!1}s&&(r=o[0])}}return o=Z0(),o.memoizedState=o.baseState=r,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Md,lastRenderedState:r},o.queue=s,o=Qd.bind(null,N2,s),s.dispatch=o,s=jl(!1),d=Yl.bind(null,N2,!1,s.queue),s=Z0(),c={state:r,dispatch:null,action:e,pending:null},s.queue=c,o=eB.bind(null,N2,c,d,o),c.dispatch=o,s.memoizedState=e,[r,o,!1]}function _d(e){var r=B0();return kd(r,X2,e)}function kd(e,r,o){if(r=ql(e,r,Md)[0],e=Zi(ct)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var s=go(r)}catch(F){throw F===fo?zi:F}else s=r;r=B0();var c=r.queue,d=c.dispatch;return o!==r.memoizedState&&(N2.flags|=2048,sn(9,Ki(),tB.bind(null,c,o),null)),[s,d,e]}function tB(e,r){e.action=r}function Ld(e){var r=B0(),o=X2;if(o!==null)return kd(r,o,e);B0(),r=r.memoizedState,o=B0();var s=o.queue.dispatch;return o.memoizedState=e,[r,s,!1]}function sn(e,r,o,s){return e={tag:e,create:o,deps:s,inst:r,next:null},r=N2.updateQueue,r===null&&(r=Il(),N2.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=e.next=e:(s=o.next,o.next=e,e.next=s,r.lastEffect=e),e}function Ki(){return{destroy:void 0,resource:void 0}}function Id(){return B0().memoizedState}function Xi(e,r,o,s){var c=Z0();s=s===void 0?null:s,N2.flags|=e,c.memoizedState=sn(1|r,Ki(),o,s)}function vo(e,r,o,s){var c=B0();s=s===void 0?null:s;var d=c.memoizedState.inst;X2!==null&&s!==null&&Ml(s,X2.memoizedState.deps)?c.memoizedState=sn(r,d,o,s):(N2.flags|=e,c.memoizedState=sn(1|r,d,o,s))}function Od(e,r){Xi(8390656,8,e,r)}function qd(e,r){vo(2048,8,e,r)}function Hd(e,r){return vo(4,2,e,r)}function jd(e,r){return vo(4,4,e,r)}function Ud(e,r){if(typeof r=="function"){e=e();var o=r(e);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function zd(e,r,o){o=o!=null?o.concat([e]):null,vo(4,4,Ud.bind(null,r,e),o)}function zl(){}function Wd(e,r){var o=B0();r=r===void 0?null:r;var s=o.memoizedState;return r!==null&&Ml(r,s[1])?s[0]:(o.memoizedState=[e,r],e)}function Gd(e,r){var o=B0();r=r===void 0?null:r;var s=o.memoizedState;if(r!==null&&Ml(r,s[1]))return s[0];if(s=e(),xr){we(!0);try{e()}finally{we(!1)}}return o.memoizedState=[s,r],s}function Wl(e,r,o){return o===void 0||(Nt&1073741824)!==0?e.memoizedState=r:(e.memoizedState=o,e=$m(),N2.lanes|=e,Ht|=e,o)}function Vd(e,r,o,s){return Q0(o,r)?o:nn.current!==null?(e=Wl(e,o,s),Q0(e,r)||(F0=!0),e):(Nt&42)===0?(F0=!0,e.memoizedState=o):(e=$m(),N2.lanes|=e,Ht|=e,r)}function Yd(e,r,o,s,c){var d=V.p;V.p=d!==0&&8>d?d:8;var F=I.T,b={};I.T=b,Yl(e,!1,r,o);try{var _=c(),W=I.S;if(W!==null&&W(b,_),_!==null&&typeof _=="object"&&typeof _.then=="function"){var J=Xv(_,s);Bo(e,r,J,ne(e))}else Bo(e,r,s,ne(e))}catch(n2){Bo(e,r,{then:function(){},status:"rejected",reason:n2},ne())}finally{V.p=d,I.T=F}}function rB(){}function Gl(e,r,o,s){if(e.tag!==5)throw Error(a(476));var c=$d(e).queue;Yd(e,c,r,Q,o===null?rB:function(){return Zd(e),o(s)})}function $d(e){var r=e.memoizedState;if(r!==null)return r;r={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ct,lastRenderedState:Q},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ct,lastRenderedState:o},next:null},e.memoizedState=r,e=e.alternate,e!==null&&(e.memoizedState=r),r}function Zd(e){var r=$d(e).next.queue;Bo(e,r,{},ne())}function Vl(){return k0(qo)}function Kd(){return B0().memoizedState}function Xd(){return B0().memoizedState}function nB(e){for(var r=e.return;r!==null;){switch(r.tag){case 24:case 3:var o=ne();e=Pt(o);var s=Mt(r,e,o);s!==null&&(oe(s,r,o),Co(s,r,o)),r={cache:yl()},e.payload=r;return}r=r.return}}function oB(e,r,o){var s=ne();o={lane:s,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Qi(e)?Jd(r,o):(o=fl(e,r,o,s),o!==null&&(oe(o,e,s),em(o,r,s)))}function Qd(e,r,o){var s=ne();Bo(e,r,o,s)}function Bo(e,r,o,s){var c={lane:s,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Qi(e))Jd(r,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var F=r.lastRenderedState,b=d(F,o);if(c.hasEagerState=!0,c.eagerState=b,Q0(b,F))return ki(e,r,c,0),t0===null&&_i(),!1}catch{}finally{}if(o=fl(e,r,c,s),o!==null)return oe(o,e,s),em(o,r,s),!0}return!1}function Yl(e,r,o,s){if(s={lane:2,revertLane:SA(),action:s,hasEagerState:!1,eagerState:null,next:null},Qi(e)){if(r)throw Error(a(479))}else r=fl(e,o,s,2),r!==null&&oe(r,e,2)}function Qi(e){var r=e.alternate;return e===N2||r!==null&&r===N2}function Jd(e,r){on=Vi=!0;var o=e.pending;o===null?r.next=r:(r.next=o.next,o.next=r),e.pending=r}function em(e,r,o){if((o&4194048)!==0){var s=r.lanes;s&=e.pendingLanes,o|=s,r.lanes=o,cr(e,o)}}var Ji={readContext:k0,use:$i,useCallback:p0,useContext:p0,useEffect:p0,useImperativeHandle:p0,useLayoutEffect:p0,useInsertionEffect:p0,useMemo:p0,useReducer:p0,useRef:p0,useState:p0,useDebugValue:p0,useDeferredValue:p0,useTransition:p0,useSyncExternalStore:p0,useId:p0,useHostTransitionStatus:p0,useFormState:p0,useActionState:p0,useOptimistic:p0,useMemoCache:p0,useCacheRefresh:p0},tm={readContext:k0,use:$i,useCallback:function(e,r){return Z0().memoizedState=[e,r===void 0?null:r],e},useContext:k0,useEffect:Od,useImperativeHandle:function(e,r,o){o=o!=null?o.concat([e]):null,Xi(4194308,4,Ud.bind(null,r,e),o)},useLayoutEffect:function(e,r){return Xi(4194308,4,e,r)},useInsertionEffect:function(e,r){Xi(4,2,e,r)},useMemo:function(e,r){var o=Z0();r=r===void 0?null:r;var s=e();if(xr){we(!0);try{e()}finally{we(!1)}}return o.memoizedState=[s,r],s},useReducer:function(e,r,o){var s=Z0();if(o!==void 0){var c=o(r);if(xr){we(!0);try{o(r)}finally{we(!1)}}}else c=r;return s.memoizedState=s.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},s.queue=e,e=e.dispatch=oB.bind(null,N2,e),[s.memoizedState,e]},useRef:function(e){var r=Z0();return e={current:e},r.memoizedState=e},useState:function(e){e=jl(e);var r=e.queue,o=Qd.bind(null,N2,r);return r.dispatch=o,[e.memoizedState,o]},useDebugValue:zl,useDeferredValue:function(e,r){var o=Z0();return Wl(o,e,r)},useTransition:function(){var e=jl(!1);return e=Yd.bind(null,N2,e.queue,!0,!1),Z0().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,r,o){var s=N2,c=Z0();if($2){if(o===void 0)throw Error(a(407));o=o()}else{if(o=r(),t0===null)throw Error(a(349));(U2&124)!==0||yd(s,r,o)}c.memoizedState=o;var d={value:o,getSnapshot:r};return c.queue=d,Od(Fd.bind(null,s,d,e),[e]),s.flags|=2048,sn(9,Ki(),xd.bind(null,s,d,o,r),null),o},useId:function(){var e=Z0(),r=t0.identifierPrefix;if($2){var o=st,s=at;o=(s&~(1<<32-b0(s)-1)).toString(32)+o,r="«"+r+"R"+o,o=Yi++,0<o&&(r+="H"+o.toString(32)),r+="»"}else o=Qv++,r="«"+r+"r"+o.toString(32)+"»";return e.memoizedState=r},useHostTransitionStatus:Vl,useFormState:Nd,useActionState:Nd,useOptimistic:function(e){var r=Z0();r.memoizedState=r.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Yl.bind(null,N2,!0,o),o.dispatch=r,[e,r]},useMemoCache:Ol,useCacheRefresh:function(){return Z0().memoizedState=nB.bind(null,N2)}},rm={readContext:k0,use:$i,useCallback:Wd,useContext:k0,useEffect:qd,useImperativeHandle:zd,useInsertionEffect:Hd,useLayoutEffect:jd,useMemo:Gd,useReducer:Zi,useRef:Id,useState:function(){return Zi(ct)},useDebugValue:zl,useDeferredValue:function(e,r){var o=B0();return Vd(o,X2.memoizedState,e,r)},useTransition:function(){var e=Zi(ct)[0],r=B0().memoizedState;return[typeof e=="boolean"?e:go(e),r]},useSyncExternalStore:Bd,useId:Kd,useHostTransitionStatus:Vl,useFormState:_d,useActionState:_d,useOptimistic:function(e,r){var o=B0();return Rd(o,X2,e,r)},useMemoCache:Ol,useCacheRefresh:Xd},iB={readContext:k0,use:$i,useCallback:Wd,useContext:k0,useEffect:qd,useImperativeHandle:zd,useInsertionEffect:Hd,useLayoutEffect:jd,useMemo:Gd,useReducer:Hl,useRef:Id,useState:function(){return Hl(ct)},useDebugValue:zl,useDeferredValue:function(e,r){var o=B0();return X2===null?Wl(o,e,r):Vd(o,X2.memoizedState,e,r)},useTransition:function(){var e=Hl(ct)[0],r=B0().memoizedState;return[typeof e=="boolean"?e:go(e),r]},useSyncExternalStore:Bd,useId:Kd,useHostTransitionStatus:Vl,useFormState:Ld,useActionState:Ld,useOptimistic:function(e,r){var o=B0();return X2!==null?Rd(o,X2,e,r):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:Ol,useCacheRefresh:Xd},ln=null,yo=0;function ea(e){var r=yo;return yo+=1,ln===null&&(ln=[]),dd(ln,e,r)}function xo(e,r){r=r.props.ref,e.ref=r!==void 0?r:null}function ta(e,r){throw r.$$typeof===p?Error(a(525)):(e=Object.prototype.toString.call(r),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)))}function nm(e){var r=e._init;return r(e._payload)}function om(e){function r(q,O){if(e){var U=q.deletions;U===null?(q.deletions=[O],q.flags|=16):U.push(O)}}function o(q,O){if(!e)return null;for(;O!==null;)r(q,O),O=O.sibling;return null}function s(q){for(var O=new Map;q!==null;)q.key!==null?O.set(q.key,q):O.set(q.index,q),q=q.sibling;return O}function c(q,O){return q=it(q,O),q.index=0,q.sibling=null,q}function d(q,O,U){return q.index=U,e?(U=q.alternate,U!==null?(U=U.index,U<O?(q.flags|=67108866,O):U):(q.flags|=67108866,O)):(q.flags|=1048576,O)}function F(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function b(q,O,U,t2){return O===null||O.tag!==6?(O=ml(U,q.mode,t2),O.return=q,O):(O=c(O,U),O.return=q,O)}function _(q,O,U,t2){var m2=U.type;return m2===y?J(q,O,U.props.children,t2,U.key):O!==null&&(O.elementType===m2||typeof m2=="object"&&m2!==null&&m2.$$typeof===H&&nm(m2)===O.type)?(O=c(O,U.props),xo(O,U),O.return=q,O):(O=Ii(U.type,U.key,U.props,null,q.mode,t2),xo(O,U),O.return=q,O)}function W(q,O,U,t2){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=Cl(U,q.mode,t2),O.return=q,O):(O=c(O,U.children||[]),O.return=q,O)}function J(q,O,U,t2,m2){return O===null||O.tag!==7?(O=Cr(U,q.mode,t2,m2),O.return=q,O):(O=c(O,U),O.return=q,O)}function n2(q,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=ml(""+O,q.mode,U),O.return=q,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case v:return U=Ii(O.type,O.key,O.props,null,q.mode,U),xo(U,O),U.return=q,U;case B:return O=Cl(O,q.mode,U),O.return=q,O;case H:var t2=O._init;return O=t2(O._payload),n2(q,O,U)}if(u2(O)||s2(O))return O=Cr(O,q.mode,U,null),O.return=q,O;if(typeof O.then=="function")return n2(q,ea(O),U);if(O.$$typeof===R)return n2(q,ji(q,O),U);ta(q,O)}return null}function G(q,O,U,t2){var m2=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return m2!==null?null:b(q,O,""+U,t2);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case v:return U.key===m2?_(q,O,U,t2):null;case B:return U.key===m2?W(q,O,U,t2):null;case H:return m2=U._init,U=m2(U._payload),G(q,O,U,t2)}if(u2(U)||s2(U))return m2!==null?null:J(q,O,U,t2,null);if(typeof U.then=="function")return G(q,O,ea(U),t2);if(U.$$typeof===R)return G(q,O,ji(q,U),t2);ta(q,U)}return null}function Y(q,O,U,t2,m2){if(typeof t2=="string"&&t2!==""||typeof t2=="number"||typeof t2=="bigint")return q=q.get(U)||null,b(O,q,""+t2,m2);if(typeof t2=="object"&&t2!==null){switch(t2.$$typeof){case v:return q=q.get(t2.key===null?U:t2.key)||null,_(O,q,t2,m2);case B:return q=q.get(t2.key===null?U:t2.key)||null,W(O,q,t2,m2);case H:var I2=t2._init;return t2=I2(t2._payload),Y(q,O,U,t2,m2)}if(u2(t2)||s2(t2))return q=q.get(U)||null,J(O,q,t2,m2,null);if(typeof t2.then=="function")return Y(q,O,U,ea(t2),m2);if(t2.$$typeof===R)return Y(q,O,U,ji(O,t2),m2);ta(O,t2)}return null}function b2(q,O,U,t2){for(var m2=null,I2=null,g2=O,T2=O=0,T0=null;g2!==null&&T2<U.length;T2++){g2.index>T2?(T0=g2,g2=null):T0=g2.sibling;var Y2=G(q,g2,U[T2],t2);if(Y2===null){g2===null&&(g2=T0);break}e&&g2&&Y2.alternate===null&&r(q,g2),O=d(Y2,O,T2),I2===null?m2=Y2:I2.sibling=Y2,I2=Y2,g2=T0}if(T2===U.length)return o(q,g2),$2&&hr(q,T2),m2;if(g2===null){for(;T2<U.length;T2++)g2=n2(q,U[T2],t2),g2!==null&&(O=d(g2,O,T2),I2===null?m2=g2:I2.sibling=g2,I2=g2);return $2&&hr(q,T2),m2}for(g2=s(g2);T2<U.length;T2++)T0=Y(g2,q,T2,U[T2],t2),T0!==null&&(e&&T0.alternate!==null&&g2.delete(T0.key===null?T2:T0.key),O=d(T0,O,T2),I2===null?m2=T0:I2.sibling=T0,I2=T0);return e&&g2.forEach(function(Zt){return r(q,Zt)}),$2&&hr(q,T2),m2}function S2(q,O,U,t2){if(U==null)throw Error(a(151));for(var m2=null,I2=null,g2=O,T2=O=0,T0=null,Y2=U.next();g2!==null&&!Y2.done;T2++,Y2=U.next()){g2.index>T2?(T0=g2,g2=null):T0=g2.sibling;var Zt=G(q,g2,Y2.value,t2);if(Zt===null){g2===null&&(g2=T0);break}e&&g2&&Zt.alternate===null&&r(q,g2),O=d(Zt,O,T2),I2===null?m2=Zt:I2.sibling=Zt,I2=Zt,g2=T0}if(Y2.done)return o(q,g2),$2&&hr(q,T2),m2;if(g2===null){for(;!Y2.done;T2++,Y2=U.next())Y2=n2(q,Y2.value,t2),Y2!==null&&(O=d(Y2,O,T2),I2===null?m2=Y2:I2.sibling=Y2,I2=Y2);return $2&&hr(q,T2),m2}for(g2=s(g2);!Y2.done;T2++,Y2=U.next())Y2=Y(g2,q,T2,Y2.value,t2),Y2!==null&&(e&&Y2.alternate!==null&&g2.delete(Y2.key===null?T2:Y2.key),O=d(Y2,O,T2),I2===null?m2=Y2:I2.sibling=Y2,I2=Y2);return e&&g2.forEach(function(ay){return r(q,ay)}),$2&&hr(q,T2),m2}function J2(q,O,U,t2){if(typeof U=="object"&&U!==null&&U.type===y&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case v:e:{for(var m2=U.key;O!==null;){if(O.key===m2){if(m2=U.type,m2===y){if(O.tag===7){o(q,O.sibling),t2=c(O,U.props.children),t2.return=q,q=t2;break e}}else if(O.elementType===m2||typeof m2=="object"&&m2!==null&&m2.$$typeof===H&&nm(m2)===O.type){o(q,O.sibling),t2=c(O,U.props),xo(t2,U),t2.return=q,q=t2;break e}o(q,O);break}else r(q,O);O=O.sibling}U.type===y?(t2=Cr(U.props.children,q.mode,t2,U.key),t2.return=q,q=t2):(t2=Ii(U.type,U.key,U.props,null,q.mode,t2),xo(t2,U),t2.return=q,q=t2)}return F(q);case B:e:{for(m2=U.key;O!==null;){if(O.key===m2)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){o(q,O.sibling),t2=c(O,U.children||[]),t2.return=q,q=t2;break e}else{o(q,O);break}else r(q,O);O=O.sibling}t2=Cl(U,q.mode,t2),t2.return=q,q=t2}return F(q);case H:return m2=U._init,U=m2(U._payload),J2(q,O,U,t2)}if(u2(U))return b2(q,O,U,t2);if(s2(U)){if(m2=s2(U),typeof m2!="function")throw Error(a(150));return U=m2.call(U),S2(q,O,U,t2)}if(typeof U.then=="function")return J2(q,O,ea(U),t2);if(U.$$typeof===R)return J2(q,O,ji(q,U),t2);ta(q,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(o(q,O.sibling),t2=c(O,U),t2.return=q,q=t2):(o(q,O),t2=ml(U,q.mode,t2),t2.return=q,q=t2),F(q)):o(q,O)}return function(q,O,U,t2){try{yo=0;var m2=J2(q,O,U,t2);return ln=null,m2}catch(g2){if(g2===fo||g2===zi)throw g2;var I2=J0(29,g2,null,q.mode);return I2.lanes=t2,I2.return=q,I2}finally{}}}var An=om(!0),im=om(!1),he=X(null),We=null;function _t(e){var r=e.alternate;o2(x0,x0.current&1),o2(he,e),We===null&&(r===null||nn.current!==null||r.memoizedState!==null)&&(We=e)}function am(e){if(e.tag===22){if(o2(x0,x0.current),o2(he,e),We===null){var r=e.alternate;r!==null&&r.memoizedState!==null&&(We=e)}}else kt()}function kt(){o2(x0,x0.current),o2(he,he.current)}function ut(e){e2(he),We===e&&(We=null),e2(x0)}var x0=X(0);function ra(e){for(var r=e;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||IA(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function $l(e,r,o,s){r=e.memoizedState,o=o(s,r),o=o==null?r:D({},r,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Zl={enqueueSetState:function(e,r,o){e=e._reactInternals;var s=ne(),c=Pt(s);c.payload=r,o!=null&&(c.callback=o),r=Mt(e,c,s),r!==null&&(oe(r,e,s),Co(r,e,s))},enqueueReplaceState:function(e,r,o){e=e._reactInternals;var s=ne(),c=Pt(s);c.tag=1,c.payload=r,o!=null&&(c.callback=o),r=Mt(e,c,s),r!==null&&(oe(r,e,s),Co(r,e,s))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var o=ne(),s=Pt(o);s.tag=2,r!=null&&(s.callback=r),r=Mt(e,s,o),r!==null&&(oe(r,e,o),Co(r,e,o))}};function sm(e,r,o,s,c,d,F){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,F):r.prototype&&r.prototype.isPureReactComponent?!oo(o,s)||!oo(c,d):!0}function lm(e,r,o,s){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,s),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,s),r.state!==e&&Zl.enqueueReplaceState(r,r.state,null)}function Fr(e,r){var o=r;if("ref"in r){o={};for(var s in r)s!=="ref"&&(o[s]=r[s])}if(e=e.defaultProps){o===r&&(o=D({},o));for(var c in e)o[c]===void 0&&(o[c]=e[c])}return o}var na=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Am(e){na(e)}function cm(e){console.error(e)}function um(e){na(e)}function oa(e,r){try{var o=e.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(s){setTimeout(function(){throw s})}}function fm(e,r,o){try{var s=e.onCaughtError;s(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Kl(e,r,o){return o=Pt(o),o.tag=3,o.payload={element:null},o.callback=function(){oa(e,r)},o}function dm(e){return e=Pt(e),e.tag=3,e}function mm(e,r,o,s){var c=o.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;e.payload=function(){return c(d)},e.callback=function(){fm(r,o,s)}}var F=o.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(e.callback=function(){fm(r,o,s),typeof c!="function"&&(jt===null?jt=new Set([this]):jt.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})})}function aB(e,r,o,s,c){if(o.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(r=o.alternate,r!==null&&Ao(r,o,c,!0),o=he.current,o!==null){switch(o.tag){case 13:return We===null?vA():o.alternate===null&&m0===0&&(m0=3),o.flags&=-257,o.flags|=65536,o.lanes=c,s===Sl?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([s]):r.add(s),yA(e,s,c)),!1;case 22:return o.flags|=65536,s===Sl?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([s])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([s]):o.add(s)),yA(e,s,c)),!1}throw Error(a(435,o.tag))}return yA(e,s,c),vA(),!1}if($2)return r=he.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=c,s!==Dl&&(e=Error(a(422),{cause:s}),lo(de(e,o)))):(s!==Dl&&(r=Error(a(423),{cause:s}),lo(de(r,o))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,s=de(s,o),c=Kl(e.stateNode,s,c),bl(e,c),m0!==4&&(m0=2)),!1;var d=Error(a(520),{cause:s});if(d=de(d,o),Eo===null?Eo=[d]:Eo.push(d),m0!==4&&(m0=2),r===null)return!0;s=de(s,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,e=c&-c,o.lanes|=e,e=Kl(o.stateNode,s,e),bl(o,e),!1;case 1:if(r=o.type,d=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(jt===null||!jt.has(d))))return o.flags|=65536,c&=-c,o.lanes|=c,c=dm(c),mm(c,e,o,s),bl(o,c),!1}o=o.return}while(o!==null);return!1}var Cm=Error(a(461)),F0=!1;function w0(e,r,o,s){r.child=e===null?im(r,null,o,s):An(r,e.child,o,s)}function pm(e,r,o,s,c){o=o.render;var d=r.ref;if("ref"in s){var F={};for(var b in s)b!=="ref"&&(F[b]=s[b])}else F=s;return Br(r),s=Nl(e,r,o,F,d,c),b=_l(),e!==null&&!F0?(kl(e,r,c),ft(e,r,c)):($2&&b&&pl(r),r.flags|=1,w0(e,r,s,c),r.child)}function hm(e,r,o,s,c){if(e===null){var d=o.type;return typeof d=="function"&&!dl(d)&&d.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=d,Dm(e,r,d,s,c)):(e=Ii(o.type,null,s,r,r.mode,c),e.ref=r.ref,e.return=r,r.child=e)}if(d=e.child,!oA(e,c)){var F=d.memoizedProps;if(o=o.compare,o=o!==null?o:oo,o(F,s)&&e.ref===r.ref)return ft(e,r,c)}return r.flags|=1,e=it(d,s),e.ref=r.ref,e.return=r,r.child=e}function Dm(e,r,o,s,c){if(e!==null){var d=e.memoizedProps;if(oo(d,s)&&e.ref===r.ref)if(F0=!1,r.pendingProps=s=d,oA(e,c))(e.flags&131072)!==0&&(F0=!0);else return r.lanes=e.lanes,ft(e,r,c)}return Xl(e,r,o,s,c)}function gm(e,r,o){var s=r.pendingProps,c=s.children,d=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if((r.flags&128)!==0){if(s=d!==null?d.baseLanes|o:o,e!==null){for(c=r.child=e.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;r.childLanes=d&~s}else r.childLanes=0,r.child=null;return vm(e,r,s,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ui(r,d!==null?d.cachePool:null),d!==null?Dd(r,d):El(),am(r);else return r.lanes=r.childLanes=536870912,vm(e,r,d!==null?d.baseLanes|o:o,o)}else d!==null?(Ui(r,d.cachePool),Dd(r,d),kt(),r.memoizedState=null):(e!==null&&Ui(r,null),El(),kt());return w0(e,r,c,o),r.child}function vm(e,r,o,s){var c=Fl();return c=c===null?null:{parent:y0._currentValue,pool:c},r.memoizedState={baseLanes:o,cachePool:c},e!==null&&Ui(r,null),El(),am(r),e!==null&&Ao(e,r,s,!0),null}function ia(e,r){var o=r.ref;if(o===null)e!==null&&e.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(e===null||e.ref!==o)&&(r.flags|=4194816)}}function Xl(e,r,o,s,c){return Br(r),o=Nl(e,r,o,s,void 0,c),s=_l(),e!==null&&!F0?(kl(e,r,c),ft(e,r,c)):($2&&s&&pl(r),r.flags|=1,w0(e,r,o,c),r.child)}function Bm(e,r,o,s,c,d){return Br(r),r.updateQueue=null,o=vd(r,s,o,c),gd(e),s=_l(),e!==null&&!F0?(kl(e,r,d),ft(e,r,d)):($2&&s&&pl(r),r.flags|=1,w0(e,r,o,d),r.child)}function ym(e,r,o,s,c){if(Br(r),r.stateNode===null){var d=Qr,F=o.contextType;typeof F=="object"&&F!==null&&(d=k0(F)),d=new o(s,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Zl,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=s,d.state=r.memoizedState,d.refs={},Tl(r),F=o.contextType,d.context=typeof F=="object"&&F!==null?k0(F):Qr,d.state=r.memoizedState,F=o.getDerivedStateFromProps,typeof F=="function"&&($l(r,o,F,s),d.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(F=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),F!==d.state&&Zl.enqueueReplaceState(d,d.state,null),ho(r,s,d,c),po(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),s=!0}else if(e===null){d=r.stateNode;var b=r.memoizedProps,_=Fr(o,b);d.props=_;var W=d.context,J=o.contextType;F=Qr,typeof J=="object"&&J!==null&&(F=k0(J));var n2=o.getDerivedStateFromProps;J=typeof n2=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,J||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||W!==F)&&lm(r,d,s,F),Et=!1;var G=r.memoizedState;d.state=G,ho(r,s,d,c),po(),W=r.memoizedState,b||G!==W||Et?(typeof n2=="function"&&($l(r,o,n2,s),W=r.memoizedState),(_=Et||sm(r,o,_,s,G,W,F))?(J||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=s,r.memoizedState=W),d.props=s,d.state=W,d.context=F,s=_):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),s=!1)}else{d=r.stateNode,Rl(e,r),F=r.memoizedProps,J=Fr(o,F),d.props=J,n2=r.pendingProps,G=d.context,W=o.contextType,_=Qr,typeof W=="object"&&W!==null&&(_=k0(W)),b=o.getDerivedStateFromProps,(W=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(F!==n2||G!==_)&&lm(r,d,s,_),Et=!1,G=r.memoizedState,d.state=G,ho(r,s,d,c),po();var Y=r.memoizedState;F!==n2||G!==Y||Et||e!==null&&e.dependencies!==null&&Hi(e.dependencies)?(typeof b=="function"&&($l(r,o,b,s),Y=r.memoizedState),(J=Et||sm(r,o,J,s,G,Y,_)||e!==null&&e.dependencies!==null&&Hi(e.dependencies))?(W||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,Y,_),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,Y,_)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||F===e.memoizedProps&&G===e.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&G===e.memoizedState||(r.flags|=1024),r.memoizedProps=s,r.memoizedState=Y),d.props=s,d.state=Y,d.context=_,s=J):(typeof d.componentDidUpdate!="function"||F===e.memoizedProps&&G===e.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&G===e.memoizedState||(r.flags|=1024),s=!1)}return d=s,ia(e,r),s=(r.flags&128)!==0,d||s?(d=r.stateNode,o=s&&typeof o.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,e!==null&&s?(r.child=An(r,e.child,null,c),r.child=An(r,null,o,c)):w0(e,r,o,c),r.memoizedState=d.state,e=r.child):e=ft(e,r,c),e}function xm(e,r,o,s){return so(),r.flags|=256,w0(e,r,o,s),r.child}var Ql={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jl(e){return{baseLanes:e,cachePool:cd()}}function eA(e,r,o){return e=e!==null?e.childLanes&~o:0,r&&(e|=De),e}function Fm(e,r,o){var s=r.pendingProps,c=!1,d=(r.flags&128)!==0,F;if((F=d)||(F=e!==null&&e.memoizedState===null?!1:(x0.current&2)!==0),F&&(c=!0,r.flags&=-129),F=(r.flags&32)!==0,r.flags&=-33,e===null){if($2){if(c?_t(r):kt(),$2){var b=d0,_;if(_=b){e:{for(_=b,b=ze;_.nodeType!==8;){if(!b){b=null;break e}if(_=_e(_.nextSibling),_===null){b=null;break e}}b=_}b!==null?(r.memoizedState={dehydrated:b,treeContext:pr!==null?{id:at,overflow:st}:null,retryLane:536870912,hydrationErrors:null},_=J0(18,null,null,0),_.stateNode=b,_.return=r,r.child=_,j0=r,d0=null,_=!0):_=!1}_||gr(r)}if(b=r.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return IA(b)?r.lanes=32:r.lanes=536870912,null;ut(r)}return b=s.children,s=s.fallback,c?(kt(),c=r.mode,b=aa({mode:"hidden",children:b},c),s=Cr(s,c,o,null),b.return=r,s.return=r,b.sibling=s,r.child=b,c=r.child,c.memoizedState=Jl(o),c.childLanes=eA(e,F,o),r.memoizedState=Ql,s):(_t(r),tA(r,b))}if(_=e.memoizedState,_!==null&&(b=_.dehydrated,b!==null)){if(d)r.flags&256?(_t(r),r.flags&=-257,r=rA(e,r,o)):r.memoizedState!==null?(kt(),r.child=e.child,r.flags|=128,r=null):(kt(),c=s.fallback,b=r.mode,s=aa({mode:"visible",children:s.children},b),c=Cr(c,b,o,null),c.flags|=2,s.return=r,c.return=r,s.sibling=c,r.child=s,An(r,e.child,null,o),s=r.child,s.memoizedState=Jl(o),s.childLanes=eA(e,F,o),r.memoizedState=Ql,r=c);else if(_t(r),IA(b)){if(F=b.nextSibling&&b.nextSibling.dataset,F)var W=F.dgst;F=W,s=Error(a(419)),s.stack="",s.digest=F,lo({value:s,source:null,stack:null}),r=rA(e,r,o)}else if(F0||Ao(e,r,o,!1),F=(o&e.childLanes)!==0,F0||F){if(F=t0,F!==null&&(s=o&-o,s=(s&42)!==0?1:Yn(s),s=(s&(F.suspendedLanes|o))!==0?0:s,s!==0&&s!==_.retryLane))throw _.retryLane=s,Xr(e,s),oe(F,e,s),Cm;b.data==="$?"||vA(),r=rA(e,r,o)}else b.data==="$?"?(r.flags|=192,r.child=e.child,r=null):(e=_.treeContext,d0=_e(b.nextSibling),j0=r,$2=!0,Dr=null,ze=!1,e!==null&&(Ce[pe++]=at,Ce[pe++]=st,Ce[pe++]=pr,at=e.id,st=e.overflow,pr=r),r=tA(r,s.children),r.flags|=4096);return r}return c?(kt(),c=s.fallback,b=r.mode,_=e.child,W=_.sibling,s=it(_,{mode:"hidden",children:s.children}),s.subtreeFlags=_.subtreeFlags&65011712,W!==null?c=it(W,c):(c=Cr(c,b,o,null),c.flags|=2),c.return=r,s.return=r,s.sibling=c,r.child=s,s=c,c=r.child,b=e.child.memoizedState,b===null?b=Jl(o):(_=b.cachePool,_!==null?(W=y0._currentValue,_=_.parent!==W?{parent:W,pool:W}:_):_=cd(),b={baseLanes:b.baseLanes|o,cachePool:_}),c.memoizedState=b,c.childLanes=eA(e,F,o),r.memoizedState=Ql,s):(_t(r),o=e.child,e=o.sibling,o=it(o,{mode:"visible",children:s.children}),o.return=r,o.sibling=null,e!==null&&(F=r.deletions,F===null?(r.deletions=[e],r.flags|=16):F.push(e)),r.child=o,r.memoizedState=null,o)}function tA(e,r){return r=aa({mode:"visible",children:r},e.mode),r.return=e,e.child=r}function aa(e,r){return e=J0(22,e,null,r),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function rA(e,r,o){return An(r,e.child,null,o),e=tA(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function Sm(e,r,o){e.lanes|=r;var s=e.alternate;s!==null&&(s.lanes|=r),vl(e.return,r,o)}function nA(e,r,o,s,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:s,tail:o,tailMode:c}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=o,d.tailMode=c)}function Tm(e,r,o){var s=r.pendingProps,c=s.revealOrder,d=s.tail;if(w0(e,r,s.children,o),s=x0.current,(s&2)!==0)s=s&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sm(e,o,r);else if(e.tag===19)Sm(e,o,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(o2(x0,s),c){case"forwards":for(o=r.child,c=null;o!==null;)e=o.alternate,e!==null&&ra(e)===null&&(c=o),o=o.sibling;o=c,o===null?(c=r.child,r.child=null):(c=o.sibling,o.sibling=null),nA(r,!1,c,o,d);break;case"backwards":for(o=null,c=r.child,r.child=null;c!==null;){if(e=c.alternate,e!==null&&ra(e)===null){r.child=c;break}e=c.sibling,c.sibling=o,o=c,c=e}nA(r,!0,o,null,d);break;case"together":nA(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ft(e,r,o){if(e!==null&&(r.dependencies=e.dependencies),Ht|=r.lanes,(o&r.childLanes)===0)if(e!==null){if(Ao(e,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(e!==null&&r.child!==e.child)throw Error(a(153));if(r.child!==null){for(e=r.child,o=it(e,e.pendingProps),r.child=o,o.return=r;e.sibling!==null;)e=e.sibling,o=o.sibling=it(e,e.pendingProps),o.return=r;o.sibling=null}return r.child}function oA(e,r){return(e.lanes&r)!==0?!0:(e=e.dependencies,!!(e!==null&&Hi(e)))}function sB(e,r,o){switch(r.tag){case 3:y2(r,r.stateNode.containerInfo),wt(r,y0,e.memoizedState.cache),so();break;case 27:case 5:z2(r);break;case 4:y2(r,r.stateNode.containerInfo);break;case 10:wt(r,r.type,r.memoizedProps.value);break;case 13:var s=r.memoizedState;if(s!==null)return s.dehydrated!==null?(_t(r),r.flags|=128,null):(o&r.child.childLanes)!==0?Fm(e,r,o):(_t(r),e=ft(e,r,o),e!==null?e.sibling:null);_t(r);break;case 19:var c=(e.flags&128)!==0;if(s=(o&r.childLanes)!==0,s||(Ao(e,r,o,!1),s=(o&r.childLanes)!==0),c){if(s)return Tm(e,r,o);r.flags|=128}if(c=r.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),o2(x0,x0.current),s)break;return null;case 22:case 23:return r.lanes=0,gm(e,r,o);case 24:wt(r,y0,e.memoizedState.cache)}return ft(e,r,o)}function Rm(e,r,o){if(e!==null)if(e.memoizedProps!==r.pendingProps)F0=!0;else{if(!oA(e,o)&&(r.flags&128)===0)return F0=!1,sB(e,r,o);F0=(e.flags&131072)!==0}else F0=!1,$2&&(r.flags&1048576)!==0&&nd(r,qi,r.index);switch(r.lanes=0,r.tag){case 16:e:{e=r.pendingProps;var s=r.elementType,c=s._init;if(s=c(s._payload),r.type=s,typeof s=="function")dl(s)?(e=Fr(s,e),r.tag=1,r=ym(null,r,s,e,o)):(r.tag=0,r=Xl(null,r,s,e,o));else{if(s!=null){if(c=s.$$typeof,c===P){r.tag=11,r=pm(null,r,s,e,o);break e}else if(c===L){r.tag=14,r=hm(null,r,s,e,o);break e}}throw r=K(s)||s,Error(a(306,r,""))}}return r;case 0:return Xl(e,r,r.type,r.pendingProps,o);case 1:return s=r.type,c=Fr(s,r.pendingProps),ym(e,r,s,c,o);case 3:e:{if(y2(r,r.stateNode.containerInfo),e===null)throw Error(a(387));s=r.pendingProps;var d=r.memoizedState;c=d.element,Rl(e,r),ho(r,s,null,o);var F=r.memoizedState;if(s=F.cache,wt(r,y0,s),s!==d.cache&&Bl(r,[y0],o,!0),po(),s=F.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:F.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=xm(e,r,s,o);break e}else if(s!==c){c=de(Error(a(424)),r),lo(c),r=xm(e,r,s,o);break e}else{switch(e=r.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(d0=_e(e.firstChild),j0=r,$2=!0,Dr=null,ze=!0,o=im(r,null,s,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(so(),s===c){r=ft(e,r,o);break e}w0(e,r,s,o)}r=r.child}return r;case 26:return ia(e,r),e===null?(o=PC(r.type,null,r.pendingProps,null))?r.memoizedState=o:$2||(o=r.type,e=r.pendingProps,s=va(p2.current).createElement(o),s[a2]=r,s[A2]=e,P0(s,o,e),V2(s),r.stateNode=s):r.memoizedState=PC(r.type,e.memoizedProps,r.pendingProps,e.memoizedState),null;case 27:return z2(r),e===null&&$2&&(s=r.stateNode=bC(r.type,r.pendingProps,p2.current),j0=r,ze=!0,c=d0,Wt(r.type)?(OA=c,d0=_e(s.firstChild)):d0=c),w0(e,r,r.pendingProps.children,o),ia(e,r),e===null&&(r.flags|=4194304),r.child;case 5:return e===null&&$2&&((c=s=d0)&&(s=kB(s,r.type,r.pendingProps,ze),s!==null?(r.stateNode=s,j0=r,d0=_e(s.firstChild),ze=!1,c=!0):c=!1),c||gr(r)),z2(r),c=r.type,d=r.pendingProps,F=e!==null?e.memoizedProps:null,s=d.children,_A(c,d)?s=null:F!==null&&_A(c,F)&&(r.flags|=32),r.memoizedState!==null&&(c=Nl(e,r,Jv,null,null,o),qo._currentValue=c),ia(e,r),w0(e,r,s,o),r.child;case 6:return e===null&&$2&&((e=o=d0)&&(o=LB(o,r.pendingProps,ze),o!==null?(r.stateNode=o,j0=r,d0=null,e=!0):e=!1),e||gr(r)),null;case 13:return Fm(e,r,o);case 4:return y2(r,r.stateNode.containerInfo),s=r.pendingProps,e===null?r.child=An(r,null,s,o):w0(e,r,s,o),r.child;case 11:return pm(e,r,r.type,r.pendingProps,o);case 7:return w0(e,r,r.pendingProps,o),r.child;case 8:return w0(e,r,r.pendingProps.children,o),r.child;case 12:return w0(e,r,r.pendingProps.children,o),r.child;case 10:return s=r.pendingProps,wt(r,r.type,s.value),w0(e,r,s.children,o),r.child;case 9:return c=r.type._context,s=r.pendingProps.children,Br(r),c=k0(c),s=s(c),r.flags|=1,w0(e,r,s,o),r.child;case 14:return hm(e,r,r.type,r.pendingProps,o);case 15:return Dm(e,r,r.type,r.pendingProps,o);case 19:return Tm(e,r,o);case 31:return s=r.pendingProps,o=r.mode,s={mode:s.mode,children:s.children},e===null?(o=aa(s,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=it(e.child,s),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return gm(e,r,o);case 24:return Br(r),s=k0(y0),e===null?(c=Fl(),c===null&&(c=t0,d=yl(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=o),c=d),r.memoizedState={parent:s,cache:c},Tl(r),wt(r,y0,c)):((e.lanes&o)!==0&&(Rl(e,r),ho(r,null,null,o),po()),c=e.memoizedState,d=r.memoizedState,c.parent!==s?(c={parent:s,cache:s},r.memoizedState=c,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=c),wt(r,y0,s)):(s=d.cache,wt(r,y0,s),s!==c.cache&&Bl(r,[y0],o,!0))),w0(e,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function dt(e){e.flags|=4}function bm(e,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!LC(r)){if(r=he.current,r!==null&&((U2&4194048)===U2?We!==null:(U2&62914560)!==U2&&(U2&536870912)===0||r!==We))throw mo=Sl,ud;e.flags|=8192}}function sa(e,r){r!==null&&(e.flags|=4),e.flags&16384&&(r=e.tag!==22?xi():536870912,e.lanes|=r,dn|=r)}function Fo(e,r){if(!$2)switch(e.tailMode){case"hidden":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function u0(e){var r=e.alternate!==null&&e.alternate.child===e.child,o=0,s=0;if(r)for(var c=e.child;c!==null;)o|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)o|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=o,r}function lB(e,r,o){var s=r.pendingProps;switch(hl(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return u0(r),null;case 1:return u0(r),null;case 3:return o=r.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),r.memoizedState.cache!==s&&(r.flags|=2048),At(y0),M2(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(ao(r)?dt(r):e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ad())),u0(r),null;case 26:return o=r.memoizedState,e===null?(dt(r),o!==null?(u0(r),bm(r,o)):(u0(r),r.flags&=-16777217)):o?o!==e.memoizedState?(dt(r),u0(r),bm(r,o)):(u0(r),r.flags&=-16777217):(e.memoizedProps!==s&&dt(r),u0(r),r.flags&=-16777217),null;case 27:f0(r),o=p2.current;var c=r.type;if(e!==null&&r.stateNode!=null)e.memoizedProps!==s&&dt(r);else{if(!s){if(r.stateNode===null)throw Error(a(166));return u0(r),null}e=f2.current,ao(r)?od(r):(e=bC(c,s,o),r.stateNode=e,dt(r))}return u0(r),null;case 5:if(f0(r),o=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==s&&dt(r);else{if(!s){if(r.stateNode===null)throw Error(a(166));return u0(r),null}if(e=f2.current,ao(r))od(r);else{switch(c=va(p2.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?c.createElement("select",{is:s.is}):c.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?c.createElement(o,{is:s.is}):c.createElement(o)}}e[a2]=r,e[A2]=s;e:for(c=r.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===r)break e;for(;c.sibling===null;){if(c.return===null||c.return===r)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r.stateNode=e;e:switch(P0(e,o,s),o){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&dt(r)}}return u0(r),r.flags&=-16777217,null;case 6:if(e&&r.stateNode!=null)e.memoizedProps!==s&&dt(r);else{if(typeof s!="string"&&r.stateNode===null)throw Error(a(166));if(e=p2.current,ao(r)){if(e=r.stateNode,o=r.memoizedProps,s=null,c=j0,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}e[a2]=r,e=!!(e.nodeValue===o||s!==null&&s.suppressHydrationWarning===!0||BC(e.nodeValue,o)),e||gr(r)}else e=va(e).createTextNode(s),e[a2]=r,r.stateNode=e}return u0(r),null;case 13:if(s=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=ao(r),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(a(318));if(c=r.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[a2]=r}else so(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;u0(r),c=!1}else c=ad(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return r.flags&256?(ut(r),r):(ut(r),null)}if(ut(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=s!==null,e=e!==null&&e.memoizedState!==null,o){s=r.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool);var d=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048)}return o!==e&&o&&(r.child.flags|=8192),sa(r,r.updateQueue),u0(r),null;case 4:return M2(),e===null&&wA(r.stateNode.containerInfo),u0(r),null;case 10:return At(r.type),u0(r),null;case 19:if(e2(x0),c=r.memoizedState,c===null)return u0(r),null;if(s=(r.flags&128)!==0,d=c.rendering,d===null)if(s)Fo(c,!1);else{if(m0!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(d=ra(e),d!==null){for(r.flags|=128,Fo(c,!1),e=d.updateQueue,r.updateQueue=e,sa(r,e),r.subtreeFlags=0,e=o,o=r.child;o!==null;)rd(o,e),o=o.sibling;return o2(x0,x0.current&1|2),r.child}e=e.sibling}c.tail!==null&&q0()>ca&&(r.flags|=128,s=!0,Fo(c,!1),r.lanes=4194304)}else{if(!s)if(e=ra(d),e!==null){if(r.flags|=128,s=!0,e=e.updateQueue,r.updateQueue=e,sa(r,e),Fo(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!$2)return u0(r),null}else 2*q0()-c.renderingStartTime>ca&&o!==536870912&&(r.flags|=128,s=!0,Fo(c,!1),r.lanes=4194304);c.isBackwards?(d.sibling=r.child,r.child=d):(e=c.last,e!==null?e.sibling=d:r.child=d,c.last=d)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=q0(),r.sibling=null,e=x0.current,o2(x0,s?e&1|2:e&1),r):(u0(r),null);case 22:case 23:return ut(r),Pl(),s=r.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(r.flags|=8192):s&&(r.flags|=8192),s?(o&536870912)!==0&&(r.flags&128)===0&&(u0(r),r.subtreeFlags&6&&(r.flags|=8192)):u0(r),o=r.updateQueue,o!==null&&sa(r,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==o&&(r.flags|=2048),e!==null&&e2(yr),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),At(y0),u0(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function AB(e,r){switch(hl(r),r.tag){case 1:return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return At(y0),M2(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 26:case 27:case 5:return f0(r),null;case 13:if(ut(r),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(a(340));so()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return e2(x0),null;case 4:return M2(),null;case 10:return At(r.type),null;case 22:case 23:return ut(r),Pl(),e!==null&&e2(yr),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 24:return At(y0),null;case 25:return null;default:return null}}function wm(e,r){switch(hl(r),r.tag){case 3:At(y0),M2();break;case 26:case 27:case 5:f0(r);break;case 4:M2();break;case 13:ut(r);break;case 19:e2(x0);break;case 10:At(r.type);break;case 22:case 23:ut(r),Pl(),e!==null&&e2(yr);break;case 24:At(y0)}}function So(e,r){try{var o=r.updateQueue,s=o!==null?o.lastEffect:null;if(s!==null){var c=s.next;o=c;do{if((o.tag&e)===e){s=void 0;var d=o.create,F=o.inst;s=d(),F.destroy=s}o=o.next}while(o!==c)}}catch(b){e0(r,r.return,b)}}function Lt(e,r,o){try{var s=r.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var d=c.next;s=d;do{if((s.tag&e)===e){var F=s.inst,b=F.destroy;if(b!==void 0){F.destroy=void 0,c=r;var _=o,W=b;try{W()}catch(J){e0(c,_,J)}}}s=s.next}while(s!==d)}}catch(J){e0(r,r.return,J)}}function Em(e){var r=e.updateQueue;if(r!==null){var o=e.stateNode;try{hd(r,o)}catch(s){e0(e,e.return,s)}}}function Pm(e,r,o){o.props=Fr(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(s){e0(e,r,s)}}function To(e,r){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof o=="function"?e.refCleanup=o(s):o.current=s}}catch(c){e0(e,r,c)}}function Ge(e,r){var o=e.ref,s=e.refCleanup;if(o!==null)if(typeof s=="function")try{s()}catch(c){e0(e,r,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(c){e0(e,r,c)}else o.current=null}function Mm(e){var r=e.type,o=e.memoizedProps,s=e.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&s.focus();break e;case"img":o.src?s.src=o.src:o.srcSet&&(s.srcset=o.srcSet)}}catch(c){e0(e,e.return,c)}}function iA(e,r,o){try{var s=e.stateNode;EB(s,e.type,o,r),s[A2]=r}catch(c){e0(e,e.return,c)}}function Nm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Wt(e.type)||e.tag===4}function aA(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Wt(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sA(e,r,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(e),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ga));else if(s!==4&&(s===27&&Wt(e.type)&&(o=e.stateNode,r=null),e=e.child,e!==null))for(sA(e,r,o),e=e.sibling;e!==null;)sA(e,r,o),e=e.sibling}function la(e,r,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,r?o.insertBefore(e,r):o.appendChild(e);else if(s!==4&&(s===27&&Wt(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(la(e,r,o),e=e.sibling;e!==null;)la(e,r,o),e=e.sibling}function _m(e){var r=e.stateNode,o=e.memoizedProps;try{for(var s=e.type,c=r.attributes;c.length;)r.removeAttributeNode(c[0]);P0(r,s,o),r[a2]=e,r[A2]=o}catch(d){e0(e,e.return,d)}}var mt=!1,h0=!1,lA=!1,km=typeof WeakSet=="function"?WeakSet:Set,S0=null;function cB(e,r){if(e=e.containerInfo,MA=Ta,e=Vf(e),al(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var s=o.getSelection&&o.getSelection();if(s&&s.rangeCount!==0){o=s.anchorNode;var c=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{o.nodeType,d.nodeType}catch{o=null;break e}var F=0,b=-1,_=-1,W=0,J=0,n2=e,G=null;t:for(;;){for(var Y;n2!==o||c!==0&&n2.nodeType!==3||(b=F+c),n2!==d||s!==0&&n2.nodeType!==3||(_=F+s),n2.nodeType===3&&(F+=n2.nodeValue.length),(Y=n2.firstChild)!==null;)G=n2,n2=Y;for(;;){if(n2===e)break t;if(G===o&&++W===c&&(b=F),G===d&&++J===s&&(_=F),(Y=n2.nextSibling)!==null)break;n2=G,G=n2.parentNode}n2=Y}o=b===-1||_===-1?null:{start:b,end:_}}else o=null}o=o||{start:0,end:0}}else o=null;for(NA={focusedElem:e,selectionRange:o},Ta=!1,S0=r;S0!==null;)if(r=S0,e=r.child,(r.subtreeFlags&1024)!==0&&e!==null)e.return=r,S0=e;else for(;S0!==null;){switch(r=S0,d=r.alternate,e=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,o=r,c=d.memoizedProps,d=d.memoizedState,s=o.stateNode;try{var b2=Fr(o.type,c,o.elementType===o.type);e=s.getSnapshotBeforeUpdate(b2,d),s.__reactInternalSnapshotBeforeUpdate=e}catch(S2){e0(o,o.return,S2)}}break;case 3:if((e&1024)!==0){if(e=r.stateNode.containerInfo,o=e.nodeType,o===9)LA(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":LA(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=r.sibling,e!==null){e.return=r.return,S0=e;break}S0=r.return}}function Lm(e,r,o){var s=o.flags;switch(o.tag){case 0:case 11:case 15:It(e,o),s&4&&So(5,o);break;case 1:if(It(e,o),s&4)if(e=o.stateNode,r===null)try{e.componentDidMount()}catch(F){e0(o,o.return,F)}else{var c=Fr(o.type,r.memoizedProps);r=r.memoizedState;try{e.componentDidUpdate(c,r,e.__reactInternalSnapshotBeforeUpdate)}catch(F){e0(o,o.return,F)}}s&64&&Em(o),s&512&&To(o,o.return);break;case 3:if(It(e,o),s&64&&(e=o.updateQueue,e!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{hd(e,r)}catch(F){e0(o,o.return,F)}}break;case 27:r===null&&s&4&&_m(o);case 26:case 5:It(e,o),r===null&&s&4&&Mm(o),s&512&&To(o,o.return);break;case 12:It(e,o);break;case 13:It(e,o),s&4&&qm(e,o),s&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=gB.bind(null,o),IB(e,o))));break;case 22:if(s=o.memoizedState!==null||mt,!s){r=r!==null&&r.memoizedState!==null||h0,c=mt;var d=h0;mt=s,(h0=r)&&!d?Ot(e,o,(o.subtreeFlags&8772)!==0):It(e,o),mt=c,h0=d}break;case 30:break;default:It(e,o)}}function Im(e){var r=e.alternate;r!==null&&(e.alternate=null,Im(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&D2(r)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var l0=null,K0=!1;function Ct(e,r,o){for(o=o.child;o!==null;)Om(e,r,o),o=o.sibling}function Om(e,r,o){if(A0&&typeof A0.onCommitFiberUnmount=="function")try{A0.onCommitFiberUnmount(G0,o)}catch{}switch(o.tag){case 26:h0||Ge(o,r),Ct(e,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:h0||Ge(o,r);var s=l0,c=K0;Wt(o.type)&&(l0=o.stateNode,K0=!1),Ct(e,r,o),ko(o.stateNode),l0=s,K0=c;break;case 5:h0||Ge(o,r);case 6:if(s=l0,c=K0,l0=null,Ct(e,r,o),l0=s,K0=c,l0!==null)if(K0)try{(l0.nodeType===9?l0.body:l0.nodeName==="HTML"?l0.ownerDocument.body:l0).removeChild(o.stateNode)}catch(d){e0(o,r,d)}else try{l0.removeChild(o.stateNode)}catch(d){e0(o,r,d)}break;case 18:l0!==null&&(K0?(e=l0,TC(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),zo(e)):TC(l0,o.stateNode));break;case 4:s=l0,c=K0,l0=o.stateNode.containerInfo,K0=!0,Ct(e,r,o),l0=s,K0=c;break;case 0:case 11:case 14:case 15:h0||Lt(2,o,r),h0||Lt(4,o,r),Ct(e,r,o);break;case 1:h0||(Ge(o,r),s=o.stateNode,typeof s.componentWillUnmount=="function"&&Pm(o,r,s)),Ct(e,r,o);break;case 21:Ct(e,r,o);break;case 22:h0=(s=h0)||o.memoizedState!==null,Ct(e,r,o),h0=s;break;default:Ct(e,r,o)}}function qm(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{zo(e)}catch(o){e0(r,r.return,o)}}function uB(e){switch(e.tag){case 13:case 19:var r=e.stateNode;return r===null&&(r=e.stateNode=new km),r;case 22:return e=e.stateNode,r=e._retryCache,r===null&&(r=e._retryCache=new km),r;default:throw Error(a(435,e.tag))}}function AA(e,r){var o=uB(e);r.forEach(function(s){var c=vB.bind(null,e,s);o.has(s)||(o.add(s),s.then(c,c))})}function ee(e,r){var o=r.deletions;if(o!==null)for(var s=0;s<o.length;s++){var c=o[s],d=e,F=r,b=F;e:for(;b!==null;){switch(b.tag){case 27:if(Wt(b.type)){l0=b.stateNode,K0=!1;break e}break;case 5:l0=b.stateNode,K0=!1;break e;case 3:case 4:l0=b.stateNode.containerInfo,K0=!0;break e}b=b.return}if(l0===null)throw Error(a(160));Om(d,F,c),l0=null,K0=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Hm(r,e),r=r.sibling}var Ne=null;function Hm(e,r){var o=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ee(r,e),te(e),s&4&&(Lt(3,e,e.return),So(3,e),Lt(5,e,e.return));break;case 1:ee(r,e),te(e),s&512&&(h0||o===null||Ge(o,o.return)),s&64&&mt&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?s:o.concat(s))));break;case 26:var c=Ne;if(ee(r,e),te(e),s&512&&(h0||o===null||Ge(o,o.return)),s&4){var d=o!==null?o.memoizedState:null;if(s=e.memoizedState,o===null)if(s===null)if(e.stateNode===null){e:{s=e.type,o=e.memoizedProps,c=c.ownerDocument||c;t:switch(s){case"title":d=c.getElementsByTagName("title")[0],(!d||d[R2]||d[a2]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(s),c.head.insertBefore(d,c.querySelector("head > title"))),P0(d,s,o),d[a2]=e,V2(d),s=d;break e;case"link":var F=_C("link","href",c).get(s+(o.href||""));if(F){for(var b=0;b<F.length;b++)if(d=F[b],d.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&d.getAttribute("rel")===(o.rel==null?null:o.rel)&&d.getAttribute("title")===(o.title==null?null:o.title)&&d.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){F.splice(b,1);break t}}d=c.createElement(s),P0(d,s,o),c.head.appendChild(d);break;case"meta":if(F=_C("meta","content",c).get(s+(o.content||""))){for(b=0;b<F.length;b++)if(d=F[b],d.getAttribute("content")===(o.content==null?null:""+o.content)&&d.getAttribute("name")===(o.name==null?null:o.name)&&d.getAttribute("property")===(o.property==null?null:o.property)&&d.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&d.getAttribute("charset")===(o.charSet==null?null:o.charSet)){F.splice(b,1);break t}}d=c.createElement(s),P0(d,s,o),c.head.appendChild(d);break;default:throw Error(a(468,s))}d[a2]=e,V2(d),s=d}e.stateNode=s}else kC(c,e.type,e.stateNode);else e.stateNode=NC(c,s,e.memoizedProps);else d!==s?(d===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):d.count--,s===null?kC(c,e.type,e.stateNode):NC(c,s,e.memoizedProps)):s===null&&e.stateNode!==null&&iA(e,e.memoizedProps,o.memoizedProps)}break;case 27:ee(r,e),te(e),s&512&&(h0||o===null||Ge(o,o.return)),o!==null&&s&4&&iA(e,e.memoizedProps,o.memoizedProps);break;case 5:if(ee(r,e),te(e),s&512&&(h0||o===null||Ge(o,o.return)),e.flags&32){c=e.stateNode;try{Wr(c,"")}catch(Y){e0(e,e.return,Y)}}s&4&&e.stateNode!=null&&(c=e.memoizedProps,iA(e,c,o!==null?o.memoizedProps:c)),s&1024&&(lA=!0);break;case 6:if(ee(r,e),te(e),s&4){if(e.stateNode===null)throw Error(a(162));s=e.memoizedProps,o=e.stateNode;try{o.nodeValue=s}catch(Y){e0(e,e.return,Y)}}break;case 3:if(xa=null,c=Ne,Ne=Ba(r.containerInfo),ee(r,e),Ne=c,te(e),s&4&&o!==null&&o.memoizedState.isDehydrated)try{zo(r.containerInfo)}catch(Y){e0(e,e.return,Y)}lA&&(lA=!1,jm(e));break;case 4:s=Ne,Ne=Ba(e.stateNode.containerInfo),ee(r,e),te(e),Ne=s;break;case 12:ee(r,e),te(e);break;case 13:ee(r,e),te(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(CA=q0()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,AA(e,s)));break;case 22:c=e.memoizedState!==null;var _=o!==null&&o.memoizedState!==null,W=mt,J=h0;if(mt=W||c,h0=J||_,ee(r,e),h0=J,mt=W,te(e),s&8192)e:for(r=e.stateNode,r._visibility=c?r._visibility&-2:r._visibility|1,c&&(o===null||_||mt||h0||Sr(e)),o=null,r=e;;){if(r.tag===5||r.tag===26){if(o===null){_=o=r;try{if(d=_.stateNode,c)F=d.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{b=_.stateNode;var n2=_.memoizedProps.style,G=n2!=null&&n2.hasOwnProperty("display")?n2.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Y){e0(_,_.return,Y)}}}else if(r.tag===6){if(o===null){_=r;try{_.stateNode.nodeValue=c?"":_.memoizedProps}catch(Y){e0(_,_.return,Y)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}s&4&&(s=e.updateQueue,s!==null&&(o=s.retryQueue,o!==null&&(s.retryQueue=null,AA(e,o))));break;case 19:ee(r,e),te(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,AA(e,s)));break;case 30:break;case 21:break;default:ee(r,e),te(e)}}function te(e){var r=e.flags;if(r&2){try{for(var o,s=e.return;s!==null;){if(Nm(s)){o=s;break}s=s.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var c=o.stateNode,d=aA(e);la(e,d,c);break;case 5:var F=o.stateNode;o.flags&32&&(Wr(F,""),o.flags&=-33);var b=aA(e);la(e,b,F);break;case 3:case 4:var _=o.stateNode.containerInfo,W=aA(e);sA(e,W,_);break;default:throw Error(a(161))}}catch(J){e0(e,e.return,J)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function jm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var r=e;jm(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),e=e.sibling}}function It(e,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Lm(e,r.alternate,r),r=r.sibling}function Sr(e){for(e=e.child;e!==null;){var r=e;switch(r.tag){case 0:case 11:case 14:case 15:Lt(4,r,r.return),Sr(r);break;case 1:Ge(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Pm(r,r.return,o),Sr(r);break;case 27:ko(r.stateNode);case 26:case 5:Ge(r,r.return),Sr(r);break;case 22:r.memoizedState===null&&Sr(r);break;case 30:Sr(r);break;default:Sr(r)}e=e.sibling}}function Ot(e,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var s=r.alternate,c=e,d=r,F=d.flags;switch(d.tag){case 0:case 11:case 15:Ot(c,d,o),So(4,d);break;case 1:if(Ot(c,d,o),s=d,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(W){e0(s,s.return,W)}if(s=d,c=s.updateQueue,c!==null){var b=s.stateNode;try{var _=c.shared.hiddenCallbacks;if(_!==null)for(c.shared.hiddenCallbacks=null,c=0;c<_.length;c++)pd(_[c],b)}catch(W){e0(s,s.return,W)}}o&&F&64&&Em(d),To(d,d.return);break;case 27:_m(d);case 26:case 5:Ot(c,d,o),o&&s===null&&F&4&&Mm(d),To(d,d.return);break;case 12:Ot(c,d,o);break;case 13:Ot(c,d,o),o&&F&4&&qm(c,d);break;case 22:d.memoizedState===null&&Ot(c,d,o),To(d,d.return);break;case 30:break;default:Ot(c,d,o)}r=r.sibling}}function cA(e,r){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(e=r.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&co(o))}function uA(e,r){e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&co(e))}function Ve(e,r,o,s){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Um(e,r,o,s),r=r.sibling}function Um(e,r,o,s){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Ve(e,r,o,s),c&2048&&So(9,r);break;case 1:Ve(e,r,o,s);break;case 3:Ve(e,r,o,s),c&2048&&(e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&co(e)));break;case 12:if(c&2048){Ve(e,r,o,s),e=r.stateNode;try{var d=r.memoizedProps,F=d.id,b=d.onPostCommit;typeof b=="function"&&b(F,r.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(_){e0(r,r.return,_)}}else Ve(e,r,o,s);break;case 13:Ve(e,r,o,s);break;case 23:break;case 22:d=r.stateNode,F=r.alternate,r.memoizedState!==null?d._visibility&2?Ve(e,r,o,s):Ro(e,r):d._visibility&2?Ve(e,r,o,s):(d._visibility|=2,cn(e,r,o,s,(r.subtreeFlags&10256)!==0)),c&2048&&cA(F,r);break;case 24:Ve(e,r,o,s),c&2048&&uA(r.alternate,r);break;default:Ve(e,r,o,s)}}function cn(e,r,o,s,c){for(c=c&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=e,F=r,b=o,_=s,W=F.flags;switch(F.tag){case 0:case 11:case 15:cn(d,F,b,_,c),So(8,F);break;case 23:break;case 22:var J=F.stateNode;F.memoizedState!==null?J._visibility&2?cn(d,F,b,_,c):Ro(d,F):(J._visibility|=2,cn(d,F,b,_,c)),c&&W&2048&&cA(F.alternate,F);break;case 24:cn(d,F,b,_,c),c&&W&2048&&uA(F.alternate,F);break;default:cn(d,F,b,_,c)}r=r.sibling}}function Ro(e,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=e,s=r,c=s.flags;switch(s.tag){case 22:Ro(o,s),c&2048&&cA(s.alternate,s);break;case 24:Ro(o,s),c&2048&&uA(s.alternate,s);break;default:Ro(o,s)}r=r.sibling}}var bo=8192;function un(e){if(e.subtreeFlags&bo)for(e=e.child;e!==null;)zm(e),e=e.sibling}function zm(e){switch(e.tag){case 26:un(e),e.flags&bo&&e.memoizedState!==null&&KB(Ne,e.memoizedState,e.memoizedProps);break;case 5:un(e);break;case 3:case 4:var r=Ne;Ne=Ba(e.stateNode.containerInfo),un(e),Ne=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=bo,bo=16777216,un(e),bo=r):un(e));break;default:un(e)}}function Wm(e){var r=e.alternate;if(r!==null&&(e=r.child,e!==null)){r.child=null;do r=e.sibling,e.sibling=null,e=r;while(e!==null)}}function wo(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var s=r[o];S0=s,Vm(s,e)}Wm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Gm(e),e=e.sibling}function Gm(e){switch(e.tag){case 0:case 11:case 15:wo(e),e.flags&2048&&Lt(9,e,e.return);break;case 3:wo(e);break;case 12:wo(e);break;case 22:var r=e.stateNode;e.memoizedState!==null&&r._visibility&2&&(e.return===null||e.return.tag!==13)?(r._visibility&=-3,Aa(e)):wo(e);break;default:wo(e)}}function Aa(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var s=r[o];S0=s,Vm(s,e)}Wm(e)}for(e=e.child;e!==null;){switch(r=e,r.tag){case 0:case 11:case 15:Lt(8,r,r.return),Aa(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Aa(r));break;default:Aa(r)}e=e.sibling}}function Vm(e,r){for(;S0!==null;){var o=S0;switch(o.tag){case 0:case 11:case 15:Lt(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var s=o.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:co(o.memoizedState.cache)}if(s=o.child,s!==null)s.return=o,S0=s;else e:for(o=e;S0!==null;){s=S0;var c=s.sibling,d=s.return;if(Im(s),s===o){S0=null;break e}if(c!==null){c.return=d,S0=c;break e}S0=d}}}var fB={getCacheForType:function(e){var r=k0(y0),o=r.data.get(e);return o===void 0&&(o=e(),r.data.set(e,o)),o}},dB=typeof WeakMap=="function"?WeakMap:Map,Z2=0,t0=null,O2=null,U2=0,K2=0,re=null,qt=!1,fn=!1,fA=!1,pt=0,m0=0,Ht=0,Tr=0,dA=0,De=0,dn=0,Eo=null,X0=null,mA=!1,CA=0,ca=1/0,ua=null,jt=null,E0=0,Ut=null,mn=null,Cn=0,pA=0,hA=null,Ym=null,Po=0,DA=null;function ne(){if((Z2&2)!==0&&U2!==0)return U2&-U2;if(I.T!==null){var e=tn;return e!==0?e:SA()}return k()}function $m(){De===0&&(De=(U2&536870912)===0||$2?jr():536870912);var e=he.current;return e!==null&&(e.flags|=32),De}function oe(e,r,o){(e===t0&&(K2===2||K2===9)||e.cancelPendingCommit!==null)&&(pn(e,0),zt(e,U2,De,!1)),lr(e,o),((Z2&2)===0||e!==t0)&&(e===t0&&((Z2&2)===0&&(Tr|=o),m0===4&&zt(e,U2,De,!1)),Ye(e))}function Zm(e,r,o){if((Z2&6)!==0)throw Error(a(327));var s=!o&&(r&124)===0&&(r&e.expiredLanes)===0||Ue(e,r),c=s?pB(e,r):BA(e,r,!0),d=s;do{if(c===0){fn&&!s&&zt(e,r,0,!1);break}else{if(o=e.current.alternate,d&&!mB(o)){c=BA(e,r,!1),d=!1;continue}if(c===2){if(d=r,e.errorRecoveryDisabledLanes&d)var F=0;else F=e.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){r=F;e:{var b=e;c=Eo;var _=b.current.memoizedState.isDehydrated;if(_&&(pn(b,F).flags|=256),F=BA(b,F,!1),F!==2){if(fA&&!_){b.errorRecoveryDisabledLanes|=d,Tr|=d,c=4;break e}d=X0,X0=c,d!==null&&(X0===null?X0=d:X0.push.apply(X0,d))}c=F}if(d=!1,c!==2)continue}}if(c===1){pn(e,0),zt(e,r,0,!0);break}e:{switch(s=e,d=c,d){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:zt(s,r,De,!qt);break e;case 2:X0=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(c=CA+300-q0(),10<c)){if(zt(s,r,De,!qt),sr(s,0,!0)!==0)break e;s.timeoutHandle=FC(Km.bind(null,s,o,X0,ua,mA,r,De,Tr,dn,qt,d,2,-0,0),c);break e}Km(s,o,X0,ua,mA,r,De,Tr,dn,qt,d,0,-0,0)}}break}while(!0);Ye(e)}function Km(e,r,o,s,c,d,F,b,_,W,J,n2,G,Y){if(e.timeoutHandle=-1,n2=r.subtreeFlags,(n2&8192||(n2&16785408)===16785408)&&(Oo={stylesheets:null,count:0,unsuspend:ZB},zm(r),n2=XB(),n2!==null)){e.cancelPendingCommit=n2(nC.bind(null,e,r,d,o,s,c,F,b,_,J,1,G,Y)),zt(e,d,F,!W);return}nC(e,r,d,o,s,c,F,b,_)}function mB(e){for(var r=e;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var s=0;s<o.length;s++){var c=o[s],d=c.getSnapshot;c=c.value;try{if(!Q0(d(),c))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function zt(e,r,o,s){r&=~dA,r&=~Tr,e.suspendedLanes|=r,e.pingedLanes&=~r,s&&(e.warmLanes|=r),s=e.expirationTimes;for(var c=r;0<c;){var d=31-b0(c),F=1<<d;s[d]=-1,c&=~F}o!==0&&Ar(e,o,r)}function fa(){return(Z2&6)===0?(Mo(0),!1):!0}function gA(){if(O2!==null){if(K2===0)var e=O2.return;else e=O2,lt=vr=null,Ll(e),ln=null,yo=0,e=O2;for(;e!==null;)wm(e.alternate,e),e=e.return;O2=null}}function pn(e,r){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,MB(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),gA(),t0=e,O2=o=it(e.current,null),U2=r,K2=0,re=null,qt=!1,fn=Ue(e,r),fA=!1,dn=De=dA=Tr=Ht=m0=0,X0=Eo=null,mA=!1,(r&8)!==0&&(r|=r&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=r;0<s;){var c=31-b0(s),d=1<<c;r|=e[c],s&=~d}return pt=r,_i(),o}function Xm(e,r){N2=null,I.H=Ji,r===fo||r===zi?(r=md(),K2=3):r===ud?(r=md(),K2=4):K2=r===Cm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,re=r,O2===null&&(m0=1,oa(e,de(r,e.current)))}function Qm(){var e=I.H;return I.H=Ji,e===null?Ji:e}function Jm(){var e=I.A;return I.A=fB,e}function vA(){m0=4,qt||(U2&4194048)!==U2&&he.current!==null||(fn=!0),(Ht&134217727)===0&&(Tr&134217727)===0||t0===null||zt(t0,U2,De,!1)}function BA(e,r,o){var s=Z2;Z2|=2;var c=Qm(),d=Jm();(t0!==e||U2!==r)&&(ua=null,pn(e,r)),r=!1;var F=m0;e:do try{if(K2!==0&&O2!==null){var b=O2,_=re;switch(K2){case 8:gA(),F=6;break e;case 3:case 2:case 9:case 6:he.current===null&&(r=!0);var W=K2;if(K2=0,re=null,hn(e,b,_,W),o&&fn){F=0;break e}break;default:W=K2,K2=0,re=null,hn(e,b,_,W)}}CB(),F=m0;break}catch(J){Xm(e,J)}while(!0);return r&&e.shellSuspendCounter++,lt=vr=null,Z2=s,I.H=c,I.A=d,O2===null&&(t0=null,U2=0,_i()),F}function CB(){for(;O2!==null;)eC(O2)}function pB(e,r){var o=Z2;Z2|=2;var s=Qm(),c=Jm();t0!==e||U2!==r?(ua=null,ca=q0()+500,pn(e,r)):fn=Ue(e,r);e:do try{if(K2!==0&&O2!==null){r=O2;var d=re;t:switch(K2){case 1:K2=0,re=null,hn(e,r,d,1);break;case 2:case 9:if(fd(d)){K2=0,re=null,tC(r);break}r=function(){K2!==2&&K2!==9||t0!==e||(K2=7),Ye(e)},d.then(r,r);break e;case 3:K2=7;break e;case 4:K2=5;break e;case 7:fd(d)?(K2=0,re=null,tC(r)):(K2=0,re=null,hn(e,r,d,7));break;case 5:var F=null;switch(O2.tag){case 26:F=O2.memoizedState;case 5:case 27:var b=O2;if(!F||LC(F)){K2=0,re=null;var _=b.sibling;if(_!==null)O2=_;else{var W=b.return;W!==null?(O2=W,da(W)):O2=null}break t}}K2=0,re=null,hn(e,r,d,5);break;case 6:K2=0,re=null,hn(e,r,d,6);break;case 8:gA(),m0=6;break e;default:throw Error(a(462))}}hB();break}catch(J){Xm(e,J)}while(!0);return lt=vr=null,I.H=s,I.A=c,Z2=o,O2!==null?0:(t0=null,U2=0,_i(),m0)}function hB(){for(;O2!==null&&!zn();)eC(O2)}function eC(e){var r=Rm(e.alternate,e,pt);e.memoizedProps=e.pendingProps,r===null?da(e):O2=r}function tC(e){var r=e,o=r.alternate;switch(r.tag){case 15:case 0:r=Bm(o,r,r.pendingProps,r.type,void 0,U2);break;case 11:r=Bm(o,r,r.pendingProps,r.type.render,r.ref,U2);break;case 5:Ll(r);default:wm(o,r),r=O2=rd(r,pt),r=Rm(o,r,pt)}e.memoizedProps=e.pendingProps,r===null?da(e):O2=r}function hn(e,r,o,s){lt=vr=null,Ll(r),ln=null,yo=0;var c=r.return;try{if(aB(e,c,r,o,U2)){m0=1,oa(e,de(o,e.current)),O2=null;return}}catch(d){if(c!==null)throw O2=c,d;m0=1,oa(e,de(o,e.current)),O2=null;return}r.flags&32768?($2||s===1?e=!0:fn||(U2&536870912)!==0?e=!1:(qt=e=!0,(s===2||s===9||s===3||s===6)&&(s=he.current,s!==null&&s.tag===13&&(s.flags|=16384))),rC(r,e)):da(r)}function da(e){var r=e;do{if((r.flags&32768)!==0){rC(r,qt);return}e=r.return;var o=lB(r.alternate,r,pt);if(o!==null){O2=o;return}if(r=r.sibling,r!==null){O2=r;return}O2=r=e}while(r!==null);m0===0&&(m0=5)}function rC(e,r){do{var o=AB(e.alternate,e);if(o!==null){o.flags&=32767,O2=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(e=e.sibling,e!==null)){O2=e;return}O2=e=o}while(e!==null);m0=6,O2=null}function nC(e,r,o,s,c,d,F,b,_){e.cancelPendingCommit=null;do ma();while(E0!==0);if((Z2&6)!==0)throw Error(a(327));if(r!==null){if(r===e.current)throw Error(a(177));if(d=r.lanes|r.childLanes,d|=ul,Fi(e,o,d,F,b,_),e===t0&&(O2=t0=null,U2=0),mn=r,Ut=e,Cn=o,pA=d,hA=c,Ym=s,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,BB(Hr,function(){return lC(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||s){s=I.T,I.T=null,c=V.p,V.p=2,F=Z2,Z2|=4;try{cB(e,r,o)}finally{Z2=F,V.p=c,I.T=s}}E0=1,oC(),iC(),aC()}}function oC(){if(E0===1){E0=0;var e=Ut,r=mn,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=I.T,I.T=null;var s=V.p;V.p=2;var c=Z2;Z2|=4;try{Hm(r,e);var d=NA,F=Vf(e.containerInfo),b=d.focusedElem,_=d.selectionRange;if(F!==b&&b&&b.ownerDocument&&Gf(b.ownerDocument.documentElement,b)){if(_!==null&&al(b)){var W=_.start,J=_.end;if(J===void 0&&(J=W),"selectionStart"in b)b.selectionStart=W,b.selectionEnd=Math.min(J,b.value.length);else{var n2=b.ownerDocument||document,G=n2&&n2.defaultView||window;if(G.getSelection){var Y=G.getSelection(),b2=b.textContent.length,S2=Math.min(_.start,b2),J2=_.end===void 0?S2:Math.min(_.end,b2);!Y.extend&&S2>J2&&(F=J2,J2=S2,S2=F);var q=Wf(b,S2),O=Wf(b,J2);if(q&&O&&(Y.rangeCount!==1||Y.anchorNode!==q.node||Y.anchorOffset!==q.offset||Y.focusNode!==O.node||Y.focusOffset!==O.offset)){var U=n2.createRange();U.setStart(q.node,q.offset),Y.removeAllRanges(),S2>J2?(Y.addRange(U),Y.extend(O.node,O.offset)):(U.setEnd(O.node,O.offset),Y.addRange(U))}}}}for(n2=[],Y=b;Y=Y.parentNode;)Y.nodeType===1&&n2.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<n2.length;b++){var t2=n2[b];t2.element.scrollLeft=t2.left,t2.element.scrollTop=t2.top}}Ta=!!MA,NA=MA=null}finally{Z2=c,V.p=s,I.T=o}}e.current=r,E0=2}}function iC(){if(E0===2){E0=0;var e=Ut,r=mn,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=I.T,I.T=null;var s=V.p;V.p=2;var c=Z2;Z2|=4;try{Lm(e,r.alternate,r)}finally{Z2=c,V.p=s,I.T=o}}E0=3}}function aC(){if(E0===4||E0===3){E0=0,Wn();var e=Ut,r=mn,o=Cn,s=Ym;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?E0=5:(E0=0,mn=Ut=null,sC(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(jt=null),$n(o),r=r.stateNode,A0&&typeof A0.onCommitFiberRoot=="function")try{A0.onCommitFiberRoot(G0,r,void 0,(r.current.flags&128)===128)}catch{}if(s!==null){r=I.T,c=V.p,V.p=2,I.T=null;try{for(var d=e.onRecoverableError,F=0;F<s.length;F++){var b=s[F];d(b.value,{componentStack:b.stack})}}finally{I.T=r,V.p=c}}(Cn&3)!==0&&ma(),Ye(e),c=e.pendingLanes,(o&4194090)!==0&&(c&42)!==0?e===DA?Po++:(Po=0,DA=e):Po=0,Mo(0)}}function sC(e,r){(e.pooledCacheLanes&=r)===0&&(r=e.pooledCache,r!=null&&(e.pooledCache=null,co(r)))}function ma(e){return oC(),iC(),aC(),lC()}function lC(){if(E0!==5)return!1;var e=Ut,r=pA;pA=0;var o=$n(Cn),s=I.T,c=V.p;try{V.p=32>o?32:o,I.T=null,o=hA,hA=null;var d=Ut,F=Cn;if(E0=0,mn=Ut=null,Cn=0,(Z2&6)!==0)throw Error(a(331));var b=Z2;if(Z2|=4,Gm(d.current),Um(d,d.current,F,o),Z2=b,Mo(0,!1),A0&&typeof A0.onPostCommitFiberRoot=="function")try{A0.onPostCommitFiberRoot(G0,d)}catch{}return!0}finally{V.p=c,I.T=s,sC(e,r)}}function AC(e,r,o){r=de(o,r),r=Kl(e.stateNode,r,2),e=Mt(e,r,2),e!==null&&(lr(e,2),Ye(e))}function e0(e,r,o){if(e.tag===3)AC(e,e,o);else for(;r!==null;){if(r.tag===3){AC(r,e,o);break}else if(r.tag===1){var s=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(jt===null||!jt.has(s))){e=de(o,e),o=dm(2),s=Mt(r,o,2),s!==null&&(mm(o,s,r,e),lr(s,2),Ye(s));break}}r=r.return}}function yA(e,r,o){var s=e.pingCache;if(s===null){s=e.pingCache=new dB;var c=new Set;s.set(r,c)}else c=s.get(r),c===void 0&&(c=new Set,s.set(r,c));c.has(o)||(fA=!0,c.add(o),e=DB.bind(null,e,r,o),r.then(e,e))}function DB(e,r,o){var s=e.pingCache;s!==null&&s.delete(r),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,t0===e&&(U2&o)===o&&(m0===4||m0===3&&(U2&62914560)===U2&&300>q0()-CA?(Z2&2)===0&&pn(e,0):dA|=o,dn===U2&&(dn=0)),Ye(e)}function cC(e,r){r===0&&(r=xi()),e=Xr(e,r),e!==null&&(lr(e,r),Ye(e))}function gB(e){var r=e.memoizedState,o=0;r!==null&&(o=r.retryLane),cC(e,o)}function vB(e,r){var o=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(o=c.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(a(314))}s!==null&&s.delete(r),cC(e,o)}function BB(e,r){return be(e,r)}var Ca=null,Dn=null,xA=!1,pa=!1,FA=!1,Rr=0;function Ye(e){e!==Dn&&e.next===null&&(Dn===null?Ca=Dn=e:Dn=Dn.next=e),pa=!0,xA||(xA=!0,xB())}function Mo(e,r){if(!FA&&pa){FA=!0;do for(var o=!1,s=Ca;s!==null;){if(e!==0){var c=s.pendingLanes;if(c===0)var d=0;else{var F=s.suspendedLanes,b=s.pingedLanes;d=(1<<31-b0(42|e)+1)-1,d&=c&~(F&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(o=!0,mC(s,d))}else d=U2,d=sr(s,s===t0?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(d&3)===0||Ue(s,d)||(o=!0,mC(s,d));s=s.next}while(o);FA=!1}}function yB(){uC()}function uC(){pa=xA=!1;var e=0;Rr!==0&&(PB()&&(e=Rr),Rr=0);for(var r=q0(),o=null,s=Ca;s!==null;){var c=s.next,d=fC(s,r);d===0?(s.next=null,o===null?Ca=c:o.next=c,c===null&&(Dn=o)):(o=s,(e!==0||(d&3)!==0)&&(pa=!0)),s=c}Mo(e)}function fC(e,r){for(var o=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var F=31-b0(d),b=1<<F,_=c[F];_===-1?((b&o)===0||(b&s)!==0)&&(c[F]=yi(b,r)):_<=r&&(e.expiredLanes|=b),d&=~b}if(r=t0,o=U2,o=sr(e,e===r?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,o===0||e===r&&(K2===2||K2===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&W0(s),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||Ue(e,o)){if(r=o&-o,r===e.callbackPriority)return r;switch(s!==null&&W0(s),$n(o)){case 2:case 8:o=gi;break;case 32:o=Hr;break;case 268435456:o=xt;break;default:o=Hr}return s=dC.bind(null,e),o=be(o,s),e.callbackPriority=r,e.callbackNode=o,r}return s!==null&&s!==null&&W0(s),e.callbackPriority=2,e.callbackNode=null,2}function dC(e,r){if(E0!==0&&E0!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(ma()&&e.callbackNode!==o)return null;var s=U2;return s=sr(e,e===t0?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Zm(e,s,r),fC(e,q0()),e.callbackNode!=null&&e.callbackNode===o?dC.bind(null,e):null)}function mC(e,r){if(ma())return null;Zm(e,r,!0)}function xB(){NB(function(){(Z2&6)!==0?be(et,yB):uC()})}function SA(){return Rr===0&&(Rr=jr()),Rr}function CC(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ri(""+e)}function pC(e,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,e.id&&o.setAttribute("form",e.id),r.parentNode.insertBefore(o,r),e=new FormData(e),o.parentNode.removeChild(o),e}function FB(e,r,o,s,c){if(r==="submit"&&o&&o.stateNode===c){var d=CC((c[A2]||null).action),F=s.submitter;F&&(r=(r=F[A2]||null)?CC(r.formAction):F.getAttribute("formAction"),r!==null&&(d=r,F=null));var b=new Pi("action","action",null,s,c);e.push({event:b,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Rr!==0){var _=F?pC(c,F):new FormData(c);Gl(o,{pending:!0,data:_,method:c.method,action:d},null,_)}}else typeof d=="function"&&(b.preventDefault(),_=F?pC(c,F):new FormData(c),Gl(o,{pending:!0,data:_,method:c.method,action:d},d,_))},currentTarget:c}]})}}for(var TA=0;TA<cl.length;TA++){var RA=cl[TA],SB=RA.toLowerCase(),TB=RA[0].toUpperCase()+RA.slice(1);Me(SB,"on"+TB)}Me(Zf,"onAnimationEnd"),Me(Kf,"onAnimationIteration"),Me(Xf,"onAnimationStart"),Me("dblclick","onDoubleClick"),Me("focusin","onFocus"),Me("focusout","onBlur"),Me(zv,"onTransitionRun"),Me(Wv,"onTransitionStart"),Me(Gv,"onTransitionCancel"),Me(Qf,"onTransitionEnd"),ce("onMouseEnter",["mouseout","mouseover"]),ce("onMouseLeave",["mouseout","mouseover"]),ce("onPointerEnter",["pointerout","pointerover"]),ce("onPointerLeave",["pointerout","pointerover"]),H0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),H0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),H0("onBeforeInput",["compositionend","keypress","textInput","paste"]),H0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),H0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),H0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RB=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(No));function hC(e,r){r=(r&4)!==0;for(var o=0;o<e.length;o++){var s=e[o],c=s.event;s=s.listeners;e:{var d=void 0;if(r)for(var F=s.length-1;0<=F;F--){var b=s[F],_=b.instance,W=b.currentTarget;if(b=b.listener,_!==d&&c.isPropagationStopped())break e;d=b,c.currentTarget=W;try{d(c)}catch(J){na(J)}c.currentTarget=null,d=_}else for(F=0;F<s.length;F++){if(b=s[F],_=b.instance,W=b.currentTarget,b=b.listener,_!==d&&c.isPropagationStopped())break e;d=b,c.currentTarget=W;try{d(c)}catch(J){na(J)}c.currentTarget=null,d=_}}}}function q2(e,r){var o=r[F2];o===void 0&&(o=r[F2]=new Set);var s=e+"__bubble";o.has(s)||(DC(r,e,2,!1),o.add(s))}function bA(e,r,o){var s=0;r&&(s|=4),DC(o,e,s,r)}var ha="_reactListening"+Math.random().toString(36).slice(2);function wA(e){if(!e[ha]){e[ha]=!0,j2.forEach(function(o){o!=="selectionchange"&&(RB.has(o)||bA(o,!1,e),bA(o,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[ha]||(r[ha]=!0,bA("selectionchange",!1,r))}}function DC(e,r,o,s){switch(UC(r)){case 2:var c=ey;break;case 8:c=ty;break;default:c=zA}o=c.bind(null,r,o,e),c=void 0,!Xs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(r,o,{capture:!0,passive:c}):e.addEventListener(r,o,!0):c!==void 0?e.addEventListener(r,o,{passive:c}):e.addEventListener(r,o,!1)}function EA(e,r,o,s,c){var d=s;if((r&1)===0&&(r&2)===0&&s!==null)e:for(;;){if(s===null)return;var F=s.tag;if(F===3||F===4){var b=s.stateNode.containerInfo;if(b===c)break;if(F===4)for(F=s.return;F!==null;){var _=F.tag;if((_===3||_===4)&&F.stateNode.containerInfo===c)return;F=F.return}for(;b!==null;){if(F=w2(b),F===null)return;if(_=F.tag,_===5||_===6||_===26||_===27){s=d=F;continue e}b=b.parentNode}}s=s.return}Sf(function(){var W=d,J=Zs(o),n2=[];e:{var G=Jf.get(e);if(G!==void 0){var Y=Pi,b2=e;switch(e){case"keypress":if(wi(o)===0)break e;case"keydown":case"keyup":Y=Bv;break;case"focusin":b2="focus",Y=tl;break;case"focusout":b2="blur",Y=tl;break;case"beforeblur":case"afterblur":Y=tl;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Av;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Fv;break;case Zf:case Kf:case Xf:Y=fv;break;case Qf:Y=Tv;break;case"scroll":case"scrollend":Y=sv;break;case"wheel":Y=bv;break;case"copy":case"cut":case"paste":Y=mv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Ef;break;case"toggle":case"beforetoggle":Y=Ev}var S2=(r&4)!==0,J2=!S2&&(e==="scroll"||e==="scrollend"),q=S2?G!==null?G+"Capture":null:G;S2=[];for(var O=W,U;O!==null;){var t2=O;if(U=t2.stateNode,t2=t2.tag,t2!==5&&t2!==26&&t2!==27||U===null||q===null||(t2=Xn(O,q),t2!=null&&S2.push(_o(O,t2,U))),J2)break;O=O.return}0<S2.length&&(G=new Y(G,b2,null,o,J),n2.push({event:G,listeners:S2}))}}if((r&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",G&&o!==$s&&(b2=o.relatedTarget||o.fromElement)&&(w2(b2)||b2[h2]))break e;if((Y||G)&&(G=J.window===J?J:(G=J.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(b2=o.relatedTarget||o.toElement,Y=W,b2=b2?w2(b2):null,b2!==null&&(J2=A(b2),S2=b2.tag,b2!==J2||S2!==5&&S2!==27&&S2!==6)&&(b2=null)):(Y=null,b2=W),Y!==b2)){if(S2=bf,t2="onMouseLeave",q="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(S2=Ef,t2="onPointerLeave",q="onPointerEnter",O="pointer"),J2=Y==null?G:a0(Y),U=b2==null?G:a0(b2),G=new S2(t2,O+"leave",Y,o,J),G.target=J2,G.relatedTarget=U,t2=null,w2(J)===W&&(S2=new S2(q,O+"enter",b2,o,J),S2.target=U,S2.relatedTarget=J2,t2=S2),J2=t2,Y&&b2)t:{for(S2=Y,q=b2,O=0,U=S2;U;U=gn(U))O++;for(U=0,t2=q;t2;t2=gn(t2))U++;for(;0<O-U;)S2=gn(S2),O--;for(;0<U-O;)q=gn(q),U--;for(;O--;){if(S2===q||q!==null&&S2===q.alternate)break t;S2=gn(S2),q=gn(q)}S2=null}else S2=null;Y!==null&&gC(n2,G,Y,S2,!1),b2!==null&&J2!==null&&gC(n2,J2,b2,S2,!0)}}e:{if(G=W?a0(W):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var m2=Of;else if(Lf(G))if(qf)m2=Hv;else{m2=Ov;var I2=Iv}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?W&&Ys(W.elementType)&&(m2=Of):m2=qv;if(m2&&(m2=m2(e,W))){If(n2,m2,o,J);break e}I2&&I2(e,G,W),e==="focusout"&&W&&G.type==="number"&&W.memoizedProps.value!=null&&Vs(G,"number",G.value)}switch(I2=W?a0(W):window,e){case"focusin":(Lf(I2)||I2.contentEditable==="true")&&($r=I2,sl=W,io=null);break;case"focusout":io=sl=$r=null;break;case"mousedown":ll=!0;break;case"contextmenu":case"mouseup":case"dragend":ll=!1,Yf(n2,o,J);break;case"selectionchange":if(Uv)break;case"keydown":case"keyup":Yf(n2,o,J)}var g2;if(nl)e:{switch(e){case"compositionstart":var T2="onCompositionStart";break e;case"compositionend":T2="onCompositionEnd";break e;case"compositionupdate":T2="onCompositionUpdate";break e}T2=void 0}else Yr?_f(e,o)&&(T2="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(T2="onCompositionStart");T2&&(Pf&&o.locale!=="ko"&&(Yr||T2!=="onCompositionStart"?T2==="onCompositionEnd"&&Yr&&(g2=Tf()):(bt=J,Qs="value"in bt?bt.value:bt.textContent,Yr=!0)),I2=Da(W,T2),0<I2.length&&(T2=new wf(T2,e,null,o,J),n2.push({event:T2,listeners:I2}),g2?T2.data=g2:(g2=kf(o),g2!==null&&(T2.data=g2)))),(g2=Mv?Nv(e,o):_v(e,o))&&(T2=Da(W,"onBeforeInput"),0<T2.length&&(I2=new wf("onBeforeInput","beforeinput",null,o,J),n2.push({event:I2,listeners:T2}),I2.data=g2)),FB(n2,e,W,o,J)}hC(n2,r)})}function _o(e,r,o){return{instance:e,listener:r,currentTarget:o}}function Da(e,r){for(var o=r+"Capture",s=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=Xn(e,o),c!=null&&s.unshift(_o(e,c,d)),c=Xn(e,r),c!=null&&s.push(_o(e,c,d))),e.tag===3)return s;e=e.return}return[]}function gn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function gC(e,r,o,s,c){for(var d=r._reactName,F=[];o!==null&&o!==s;){var b=o,_=b.alternate,W=b.stateNode;if(b=b.tag,_!==null&&_===s)break;b!==5&&b!==26&&b!==27||W===null||(_=W,c?(W=Xn(o,d),W!=null&&F.unshift(_o(o,W,_))):c||(W=Xn(o,d),W!=null&&F.push(_o(o,W,_)))),o=o.return}F.length!==0&&e.push({event:r,listeners:F})}var bB=/\r\n?/g,wB=/\u0000|\uFFFD/g;function vC(e){return(typeof e=="string"?e:""+e).replace(bB,`
`).replace(wB,"")}function BC(e,r){return r=vC(r),vC(e)===r}function ga(){}function Q2(e,r,o,s,c,d){switch(o){case"children":typeof s=="string"?r==="body"||r==="textarea"&&s===""||Wr(e,s):(typeof s=="number"||typeof s=="bigint")&&r!=="body"&&Wr(e,""+s);break;case"className":nt(e,"class",s);break;case"tabIndex":nt(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,o,s);break;case"style":xf(e,s,d);break;case"data":if(r!=="object"){nt(e,"data",s);break}case"src":case"href":if(s===""&&(r!=="a"||o!=="href")){e.removeAttribute(o);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(o);break}s=Ri(""+s),e.setAttribute(o,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(o==="formAction"?(r!=="input"&&Q2(e,r,"name",c.name,c,null),Q2(e,r,"formEncType",c.formEncType,c,null),Q2(e,r,"formMethod",c.formMethod,c,null),Q2(e,r,"formTarget",c.formTarget,c,null)):(Q2(e,r,"encType",c.encType,c,null),Q2(e,r,"method",c.method,c,null),Q2(e,r,"target",c.target,c,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(o);break}s=Ri(""+s),e.setAttribute(o,s);break;case"onClick":s!=null&&(e.onclick=ga);break;case"onScroll":s!=null&&q2("scroll",e);break;case"onScrollEnd":s!=null&&q2("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(o=s.__html,o!=null){if(c.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}o=Ri(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(o,""+s):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":s===!0?e.setAttribute(o,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(o,s):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(o,s):e.removeAttribute(o);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(o):e.setAttribute(o,s);break;case"popover":q2("beforetoggle",e),q2("toggle",e),ue(e,"popover",s);break;case"xlinkActuate":L2(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":L2(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":L2(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":L2(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":L2(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":L2(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":L2(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":L2(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":L2(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":ue(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=iv.get(o)||o,ue(e,o,s))}}function PA(e,r,o,s,c,d){switch(o){case"style":xf(e,s,d);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(o=s.__html,o!=null){if(c.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"children":typeof s=="string"?Wr(e,s):(typeof s=="number"||typeof s=="bigint")&&Wr(e,""+s);break;case"onScroll":s!=null&&q2("scroll",e);break;case"onScrollEnd":s!=null&&q2("scrollend",e);break;case"onClick":s!=null&&(e.onclick=ga);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ft.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(c=o.endsWith("Capture"),r=o.slice(2,c?o.length-7:void 0),d=e[A2]||null,d=d!=null?d[o]:null,typeof d=="function"&&e.removeEventListener(r,d,c),typeof s=="function")){typeof d!="function"&&d!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(r,s,c);break e}o in e?e[o]=s:s===!0?e.setAttribute(o,""):ue(e,o,s)}}}function P0(e,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":q2("error",e),q2("load",e);var s=!1,c=!1,d;for(d in o)if(o.hasOwnProperty(d)){var F=o[d];if(F!=null)switch(d){case"src":s=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Q2(e,r,d,F,o,null)}}c&&Q2(e,r,"srcSet",o.srcSet,o,null),s&&Q2(e,r,"src",o.src,o,null);return;case"input":q2("invalid",e);var b=d=F=c=null,_=null,W=null;for(s in o)if(o.hasOwnProperty(s)){var J=o[s];if(J!=null)switch(s){case"name":c=J;break;case"type":F=J;break;case"checked":_=J;break;case"defaultChecked":W=J;break;case"value":d=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(a(137,r));break;default:Q2(e,r,s,J,o,null)}}gf(e,d,b,_,W,F,c,!1),Si(e);return;case"select":q2("invalid",e),s=F=d=null;for(c in o)if(o.hasOwnProperty(c)&&(b=o[c],b!=null))switch(c){case"value":d=b;break;case"defaultValue":F=b;break;case"multiple":s=b;default:Q2(e,r,c,b,o,null)}r=d,o=F,e.multiple=!!s,r!=null?zr(e,!!s,r,!1):o!=null&&zr(e,!!s,o,!0);return;case"textarea":q2("invalid",e),d=c=s=null;for(F in o)if(o.hasOwnProperty(F)&&(b=o[F],b!=null))switch(F){case"value":s=b;break;case"defaultValue":c=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(a(91));break;default:Q2(e,r,F,b,o,null)}Bf(e,s,c,d),Si(e);return;case"option":for(_ in o)if(o.hasOwnProperty(_)&&(s=o[_],s!=null))switch(_){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Q2(e,r,_,s,o,null)}return;case"dialog":q2("beforetoggle",e),q2("toggle",e),q2("cancel",e),q2("close",e);break;case"iframe":case"object":q2("load",e);break;case"video":case"audio":for(s=0;s<No.length;s++)q2(No[s],e);break;case"image":q2("error",e),q2("load",e);break;case"details":q2("toggle",e);break;case"embed":case"source":case"link":q2("error",e),q2("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in o)if(o.hasOwnProperty(W)&&(s=o[W],s!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Q2(e,r,W,s,o,null)}return;default:if(Ys(r)){for(J in o)o.hasOwnProperty(J)&&(s=o[J],s!==void 0&&PA(e,r,J,s,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(s=o[b],s!=null&&Q2(e,r,b,s,o,null))}function EB(e,r,o,s){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,F=null,b=null,_=null,W=null,J=null;for(Y in o){var n2=o[Y];if(o.hasOwnProperty(Y)&&n2!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":_=n2;default:s.hasOwnProperty(Y)||Q2(e,r,Y,null,s,n2)}}for(var G in s){var Y=s[G];if(n2=o[G],s.hasOwnProperty(G)&&(Y!=null||n2!=null))switch(G){case"type":d=Y;break;case"name":c=Y;break;case"checked":W=Y;break;case"defaultChecked":J=Y;break;case"value":F=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,r));break;default:Y!==n2&&Q2(e,r,G,Y,s,n2)}}Gs(e,F,b,_,W,J,d,c);return;case"select":Y=F=b=G=null;for(d in o)if(_=o[d],o.hasOwnProperty(d)&&_!=null)switch(d){case"value":break;case"multiple":Y=_;default:s.hasOwnProperty(d)||Q2(e,r,d,null,s,_)}for(c in s)if(d=s[c],_=o[c],s.hasOwnProperty(c)&&(d!=null||_!=null))switch(c){case"value":G=d;break;case"defaultValue":b=d;break;case"multiple":F=d;default:d!==_&&Q2(e,r,c,d,s,_)}r=b,o=F,s=Y,G!=null?zr(e,!!o,G,!1):!!s!=!!o&&(r!=null?zr(e,!!o,r,!0):zr(e,!!o,o?[]:"",!1));return;case"textarea":Y=G=null;for(b in o)if(c=o[b],o.hasOwnProperty(b)&&c!=null&&!s.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Q2(e,r,b,null,s,c)}for(F in s)if(c=s[F],d=o[F],s.hasOwnProperty(F)&&(c!=null||d!=null))switch(F){case"value":G=c;break;case"defaultValue":Y=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==d&&Q2(e,r,F,c,s,d)}vf(e,G,Y);return;case"option":for(var b2 in o)if(G=o[b2],o.hasOwnProperty(b2)&&G!=null&&!s.hasOwnProperty(b2))switch(b2){case"selected":e.selected=!1;break;default:Q2(e,r,b2,null,s,G)}for(_ in s)if(G=s[_],Y=o[_],s.hasOwnProperty(_)&&G!==Y&&(G!=null||Y!=null))switch(_){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Q2(e,r,_,G,s,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var S2 in o)G=o[S2],o.hasOwnProperty(S2)&&G!=null&&!s.hasOwnProperty(S2)&&Q2(e,r,S2,null,s,G);for(W in s)if(G=s[W],Y=o[W],s.hasOwnProperty(W)&&G!==Y&&(G!=null||Y!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(a(137,r));break;default:Q2(e,r,W,G,s,Y)}return;default:if(Ys(r)){for(var J2 in o)G=o[J2],o.hasOwnProperty(J2)&&G!==void 0&&!s.hasOwnProperty(J2)&&PA(e,r,J2,void 0,s,G);for(J in s)G=s[J],Y=o[J],!s.hasOwnProperty(J)||G===Y||G===void 0&&Y===void 0||PA(e,r,J,G,s,Y);return}}for(var q in o)G=o[q],o.hasOwnProperty(q)&&G!=null&&!s.hasOwnProperty(q)&&Q2(e,r,q,null,s,G);for(n2 in s)G=s[n2],Y=o[n2],!s.hasOwnProperty(n2)||G===Y||G==null&&Y==null||Q2(e,r,n2,G,s,Y)}var MA=null,NA=null;function va(e){return e.nodeType===9?e:e.ownerDocument}function yC(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xC(e,r){if(e===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&r==="foreignObject"?0:e}function _A(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var kA=null;function PB(){var e=window.event;return e&&e.type==="popstate"?e===kA?!1:(kA=e,!0):(kA=null,!1)}var FC=typeof setTimeout=="function"?setTimeout:void 0,MB=typeof clearTimeout=="function"?clearTimeout:void 0,SC=typeof Promise=="function"?Promise:void 0,NB=typeof queueMicrotask=="function"?queueMicrotask:typeof SC<"u"?function(e){return SC.resolve(null).then(e).catch(_B)}:FC;function _B(e){setTimeout(function(){throw e})}function Wt(e){return e==="head"}function TC(e,r){var o=r,s=0,c=0;do{var d=o.nextSibling;if(e.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(0<s&&8>s){o=s;var F=e.ownerDocument;if(o&1&&ko(F.documentElement),o&2&&ko(F.body),o&4)for(o=F.head,ko(o),F=o.firstChild;F;){var b=F.nextSibling,_=F.nodeName;F[R2]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&F.rel.toLowerCase()==="stylesheet"||o.removeChild(F),F=b}}if(c===0){e.removeChild(d),zo(r);return}c--}else o==="$"||o==="$?"||o==="$!"?c++:s=o.charCodeAt(0)-48;else s=0;o=d}while(o);zo(r)}function LA(e){var r=e.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":LA(o),D2(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function kB(e,r,o,s){for(;e.nodeType===1;){var c=o;if(e.nodeName.toLowerCase()!==r.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[R2])switch(r){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(r==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=_e(e.nextSibling),e===null)break}return null}function LB(e,r,o){if(r==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=_e(e.nextSibling),e===null))return null;return e}function IA(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function IB(e,r){var o=e.ownerDocument;if(e.data!=="$?"||o.readyState==="complete")r();else{var s=function(){r(),o.removeEventListener("DOMContentLoaded",s)};o.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function _e(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return e}var OA=null;function RC(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return e;r--}else o==="/$"&&r++}e=e.previousSibling}return null}function bC(e,r,o){switch(r=va(o),e){case"html":if(e=r.documentElement,!e)throw Error(a(452));return e;case"head":if(e=r.head,!e)throw Error(a(453));return e;case"body":if(e=r.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function ko(e){for(var r=e.attributes;r.length;)e.removeAttributeNode(r[0]);D2(e)}var ge=new Map,wC=new Set;function Ba(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ht=V.d;V.d={f:OB,r:qB,D:HB,C:jB,L:UB,m:zB,X:GB,S:WB,M:VB};function OB(){var e=ht.f(),r=fa();return e||r}function qB(e){var r=W2(e);r!==null&&r.tag===5&&r.type==="form"?Zd(r):ht.r(e)}var vn=typeof document>"u"?null:document;function EC(e,r,o){var s=vn;if(s&&typeof r=="string"&&r){var c=fe(r);c='link[rel="'+e+'"][href="'+c+'"]',typeof o=="string"&&(c+='[crossorigin="'+o+'"]'),wC.has(c)||(wC.add(c),e={rel:e,crossOrigin:o,href:r},s.querySelector(c)===null&&(r=s.createElement("link"),P0(r,"link",e),V2(r),s.head.appendChild(r)))}}function HB(e){ht.D(e),EC("dns-prefetch",e,null)}function jB(e,r){ht.C(e,r),EC("preconnect",e,r)}function UB(e,r,o){ht.L(e,r,o);var s=vn;if(s&&e&&r){var c='link[rel="preload"][as="'+fe(r)+'"]';r==="image"&&o&&o.imageSrcSet?(c+='[imagesrcset="'+fe(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(c+='[imagesizes="'+fe(o.imageSizes)+'"]')):c+='[href="'+fe(e)+'"]';var d=c;switch(r){case"style":d=Bn(e);break;case"script":d=yn(e)}ge.has(d)||(e=D({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:e,as:r},o),ge.set(d,e),s.querySelector(c)!==null||r==="style"&&s.querySelector(Lo(d))||r==="script"&&s.querySelector(Io(d))||(r=s.createElement("link"),P0(r,"link",e),V2(r),s.head.appendChild(r)))}}function zB(e,r){ht.m(e,r);var o=vn;if(o&&e){var s=r&&typeof r.as=="string"?r.as:"script",c='link[rel="modulepreload"][as="'+fe(s)+'"][href="'+fe(e)+'"]',d=c;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=yn(e)}if(!ge.has(d)&&(e=D({rel:"modulepreload",href:e},r),ge.set(d,e),o.querySelector(c)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Io(d)))return}s=o.createElement("link"),P0(s,"link",e),V2(s),o.head.appendChild(s)}}}function WB(e,r,o){ht.S(e,r,o);var s=vn;if(s&&e){var c=c0(s).hoistableStyles,d=Bn(e);r=r||"default";var F=c.get(d);if(!F){var b={loading:0,preload:null};if(F=s.querySelector(Lo(d)))b.loading=5;else{e=D({rel:"stylesheet",href:e,"data-precedence":r},o),(o=ge.get(d))&&qA(e,o);var _=F=s.createElement("link");V2(_),P0(_,"link",e),_._p=new Promise(function(W,J){_.onload=W,_.onerror=J}),_.addEventListener("load",function(){b.loading|=1}),_.addEventListener("error",function(){b.loading|=2}),b.loading|=4,ya(F,r,s)}F={type:"stylesheet",instance:F,count:1,state:b},c.set(d,F)}}}function GB(e,r){ht.X(e,r);var o=vn;if(o&&e){var s=c0(o).hoistableScripts,c=yn(e),d=s.get(c);d||(d=o.querySelector(Io(c)),d||(e=D({src:e,async:!0},r),(r=ge.get(c))&&HA(e,r),d=o.createElement("script"),V2(d),P0(d,"link",e),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(c,d))}}function VB(e,r){ht.M(e,r);var o=vn;if(o&&e){var s=c0(o).hoistableScripts,c=yn(e),d=s.get(c);d||(d=o.querySelector(Io(c)),d||(e=D({src:e,async:!0,type:"module"},r),(r=ge.get(c))&&HA(e,r),d=o.createElement("script"),V2(d),P0(d,"link",e),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(c,d))}}function PC(e,r,o,s){var c=(c=p2.current)?Ba(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Bn(o.href),o=c0(c).hoistableStyles,s=o.get(r),s||(s={type:"style",instance:null,count:0,state:null},o.set(r,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=Bn(o.href);var d=c0(c).hoistableStyles,F=d.get(e);if(F||(c=c.ownerDocument||c,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,F),(d=c.querySelector(Lo(e)))&&!d._p&&(F.instance=d,F.state.loading=5),ge.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ge.set(e,o),d||YB(c,e,o,F.state))),r&&s===null)throw Error(a(528,""));return F}if(r&&s!==null)throw Error(a(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=yn(o),o=c0(c).hoistableScripts,s=o.get(r),s||(s={type:"script",instance:null,count:0,state:null},o.set(r,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Bn(e){return'href="'+fe(e)+'"'}function Lo(e){return'link[rel="stylesheet"]['+e+"]"}function MC(e){return D({},e,{"data-precedence":e.precedence,precedence:null})}function YB(e,r,o,s){e.querySelector('link[rel="preload"][as="style"]['+r+"]")?s.loading=1:(r=e.createElement("link"),s.preload=r,r.addEventListener("load",function(){return s.loading|=1}),r.addEventListener("error",function(){return s.loading|=2}),P0(r,"link",o),V2(r),e.head.appendChild(r))}function yn(e){return'[src="'+fe(e)+'"]'}function Io(e){return"script[async]"+e}function NC(e,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var s=e.querySelector('style[data-href~="'+fe(o.href)+'"]');if(s)return r.instance=s,V2(s),s;var c=D({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),V2(s),P0(s,"style",c),ya(s,o.precedence,e),r.instance=s;case"stylesheet":c=Bn(o.href);var d=e.querySelector(Lo(c));if(d)return r.state.loading|=4,r.instance=d,V2(d),d;s=MC(o),(c=ge.get(c))&&qA(s,c),d=(e.ownerDocument||e).createElement("link"),V2(d);var F=d;return F._p=new Promise(function(b,_){F.onload=b,F.onerror=_}),P0(d,"link",s),r.state.loading|=4,ya(d,o.precedence,e),r.instance=d;case"script":return d=yn(o.src),(c=e.querySelector(Io(d)))?(r.instance=c,V2(c),c):(s=o,(c=ge.get(d))&&(s=D({},o),HA(s,c)),e=e.ownerDocument||e,c=e.createElement("script"),V2(c),P0(c,"link",s),e.head.appendChild(c),r.instance=c);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(s=r.instance,r.state.loading|=4,ya(s,o.precedence,e));return r.instance}function ya(e,r,o){for(var s=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=s.length?s[s.length-1]:null,d=c,F=0;F<s.length;F++){var b=s[F];if(b.dataset.precedence===r)d=b;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(e,r.firstChild))}function qA(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.title==null&&(e.title=r.title)}function HA(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.integrity==null&&(e.integrity=r.integrity)}var xa=null;function _C(e,r,o){if(xa===null){var s=new Map,c=xa=new Map;c.set(o,s)}else c=xa,s=c.get(o),s||(s=new Map,c.set(o,s));if(s.has(e))return s;for(s.set(e,null),o=o.getElementsByTagName(e),c=0;c<o.length;c++){var d=o[c];if(!(d[R2]||d[a2]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var F=d.getAttribute(r)||"";F=e+F;var b=s.get(F);b?b.push(d):s.set(F,[d])}}return s}function kC(e,r,o){e=e.ownerDocument||e,e.head.insertBefore(o,r==="title"?e.querySelector("head > title"):null)}function $B(e,r,o){if(o===1||r.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return e=r.disabled,typeof r.precedence=="string"&&e==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function LC(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Oo=null;function ZB(){}function KB(e,r,o){if(Oo===null)throw Error(a(475));var s=Oo;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var c=Bn(o.href),d=e.querySelector(Lo(c));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=Fa.bind(s),e.then(s,s)),r.state.loading|=4,r.instance=d,V2(d);return}d=e.ownerDocument||e,o=MC(o),(c=ge.get(c))&&qA(o,c),d=d.createElement("link"),V2(d);var F=d;F._p=new Promise(function(b,_){F.onload=b,F.onerror=_}),P0(d,"link",o),r.instance=d}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(r,e),(e=r.state.preload)&&(r.state.loading&3)===0&&(s.count++,r=Fa.bind(s),e.addEventListener("load",r),e.addEventListener("error",r))}}function XB(){if(Oo===null)throw Error(a(475));var e=Oo;return e.stylesheets&&e.count===0&&jA(e,e.stylesheets),0<e.count?function(r){var o=setTimeout(function(){if(e.stylesheets&&jA(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(o)}}:null}function Fa(){if(this.count--,this.count===0){if(this.stylesheets)jA(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Sa=null;function jA(e,r){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Sa=new Map,r.forEach(QB,e),Sa=null,Fa.call(e))}function QB(e,r){if(!(r.state.loading&4)){var o=Sa.get(e);if(o)var s=o.get(null);else{o=new Map,Sa.set(e,o);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var F=c[d];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(o.set(F.dataset.precedence,F),s=F)}s&&o.set(null,s)}c=r.instance,F=c.getAttribute("data-precedence"),d=o.get(F)||s,d===s&&o.set(null,c),o.set(F,c),this.count++,s=Fa.bind(this),c.addEventListener("load",s),c.addEventListener("error",s),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),r.state.loading|=4}}var qo={$$typeof:R,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function JB(e,r,o,s,c,d,F,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function IC(e,r,o,s,c,d,F,b,_,W,J,n2){return e=new JB(e,r,o,F,b,_,W,n2),r=1,d===!0&&(r|=24),d=J0(3,null,null,r),e.current=d,d.stateNode=e,r=yl(),r.refCount++,e.pooledCache=r,r.refCount++,d.memoizedState={element:s,isDehydrated:o,cache:r},Tl(d),e}function OC(e){return e?(e=Qr,e):Qr}function qC(e,r,o,s,c,d){c=OC(c),s.context===null?s.context=c:s.pendingContext=c,s=Pt(r),s.payload={element:o},d=d===void 0?null:d,d!==null&&(s.callback=d),o=Mt(e,s,r),o!==null&&(oe(o,e,r),Co(o,e,r))}function HC(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<r?o:r}}function UA(e,r){HC(e,r),(e=e.alternate)&&HC(e,r)}function jC(e){if(e.tag===13){var r=Xr(e,67108864);r!==null&&oe(r,e,67108864),UA(e,67108864)}}var Ta=!0;function ey(e,r,o,s){var c=I.T;I.T=null;var d=V.p;try{V.p=2,zA(e,r,o,s)}finally{V.p=d,I.T=c}}function ty(e,r,o,s){var c=I.T;I.T=null;var d=V.p;try{V.p=8,zA(e,r,o,s)}finally{V.p=d,I.T=c}}function zA(e,r,o,s){if(Ta){var c=WA(s);if(c===null)EA(e,r,s,Ra,o),zC(e,s);else if(ny(c,e,r,o,s))s.stopPropagation();else if(zC(e,s),r&4&&-1<ry.indexOf(e)){for(;c!==null;){var d=W2(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var F=rt(d.pendingLanes);if(F!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;F;){var _=1<<31-b0(F);b.entanglements[1]|=_,F&=~_}Ye(d),(Z2&6)===0&&(ca=q0()+500,Mo(0))}}break;case 13:b=Xr(d,2),b!==null&&oe(b,d,2),fa(),UA(d,2)}if(d=WA(s),d===null&&EA(e,r,s,Ra,o),d===c)break;c=d}c!==null&&s.stopPropagation()}else EA(e,r,s,null,o)}}function WA(e){return e=Zs(e),GA(e)}var Ra=null;function GA(e){if(Ra=null,e=w2(e),e!==null){var r=A(e);if(r===null)e=null;else{var o=r.tag;if(o===13){if(e=u(r),e!==null)return e;e=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null)}}return Ra=e,null}function UC(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gn()){case et:return 2;case gi:return 8;case Hr:case tt:return 32;case xt:return 268435456;default:return 32}default:return 32}}var VA=!1,Gt=null,Vt=null,Yt=null,Ho=new Map,jo=new Map,$t=[],ry="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zC(e,r){switch(e){case"focusin":case"focusout":Gt=null;break;case"dragenter":case"dragleave":Vt=null;break;case"mouseover":case"mouseout":Yt=null;break;case"pointerover":case"pointerout":Ho.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":jo.delete(r.pointerId)}}function Uo(e,r,o,s,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:r,domEventName:o,eventSystemFlags:s,nativeEvent:d,targetContainers:[c]},r!==null&&(r=W2(r),r!==null&&jC(r)),e):(e.eventSystemFlags|=s,r=e.targetContainers,c!==null&&r.indexOf(c)===-1&&r.push(c),e)}function ny(e,r,o,s,c){switch(r){case"focusin":return Gt=Uo(Gt,e,r,o,s,c),!0;case"dragenter":return Vt=Uo(Vt,e,r,o,s,c),!0;case"mouseover":return Yt=Uo(Yt,e,r,o,s,c),!0;case"pointerover":var d=c.pointerId;return Ho.set(d,Uo(Ho.get(d)||null,e,r,o,s,c)),!0;case"gotpointercapture":return d=c.pointerId,jo.set(d,Uo(jo.get(d)||null,e,r,o,s,c)),!0}return!1}function WC(e){var r=w2(e.target);if(r!==null){var o=A(r);if(o!==null){if(r=o.tag,r===13){if(r=u(o),r!==null){e.blockedOn=r,j(e.priority,function(){if(o.tag===13){var s=ne();s=Yn(s);var c=Xr(o,s);c!==null&&oe(c,o,s),UA(o,s)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ba(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var o=WA(e.nativeEvent);if(o===null){o=e.nativeEvent;var s=new o.constructor(o.type,o);$s=s,o.target.dispatchEvent(s),$s=null}else return r=W2(o),r!==null&&jC(r),e.blockedOn=o,!1;r.shift()}return!0}function GC(e,r,o){ba(e)&&o.delete(r)}function oy(){VA=!1,Gt!==null&&ba(Gt)&&(Gt=null),Vt!==null&&ba(Vt)&&(Vt=null),Yt!==null&&ba(Yt)&&(Yt=null),Ho.forEach(GC),jo.forEach(GC)}function wa(e,r){e.blockedOn===r&&(e.blockedOn=null,VA||(VA=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oy)))}var Ea=null;function VC(e){Ea!==e&&(Ea=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ea===e&&(Ea=null);for(var r=0;r<e.length;r+=3){var o=e[r],s=e[r+1],c=e[r+2];if(typeof s!="function"){if(GA(s||o)===null)continue;break}var d=W2(o);d!==null&&(e.splice(r,3),r-=3,Gl(d,{pending:!0,data:c,method:o.method,action:s},s,c))}}))}function zo(e){function r(_){return wa(_,e)}Gt!==null&&wa(Gt,e),Vt!==null&&wa(Vt,e),Yt!==null&&wa(Yt,e),Ho.forEach(r),jo.forEach(r);for(var o=0;o<$t.length;o++){var s=$t[o];s.blockedOn===e&&(s.blockedOn=null)}for(;0<$t.length&&(o=$t[0],o.blockedOn===null);)WC(o),o.blockedOn===null&&$t.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(s=0;s<o.length;s+=3){var c=o[s],d=o[s+1],F=c[A2]||null;if(typeof d=="function")F||VC(o);else if(F){var b=null;if(d&&d.hasAttribute("formAction")){if(c=d,F=d[A2]||null)b=F.formAction;else if(GA(c)!==null)continue}else b=F.action;typeof b=="function"?o[s+1]=b:(o.splice(s,3),s-=3),VC(o)}}}function YA(e){this._internalRoot=e}Pa.prototype.render=YA.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(a(409));var o=r.current,s=ne();qC(o,s,e,r,null,null)},Pa.prototype.unmount=YA.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;qC(e.current,2,null,e,null,null),fa(),r[h2]=null}};function Pa(e){this._internalRoot=e}Pa.prototype.unstable_scheduleHydration=function(e){if(e){var r=k();e={blockedOn:null,target:e,priority:r};for(var o=0;o<$t.length&&r!==0&&r<$t[o].priority;o++);$t.splice(o,0,e),o===0&&WC(e)}};var YC=n.version;if(YC!=="19.1.0")throw Error(a(527,YC,"19.1.0"));V.findDOMNode=function(e){var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=C(r),e=e!==null?m(e):null,e=e===null?null:e.stateNode,e};var iy={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ma.isDisabled&&Ma.supportsFiber)try{G0=Ma.inject(iy),A0=Ma}catch{}}return Go.createRoot=function(e,r){if(!l(e))throw Error(a(299));var o=!1,s="",c=Am,d=cm,F=um,b=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onUncaughtError!==void 0&&(c=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(F=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(b=r.unstable_transitionCallbacks)),r=IC(e,1,!1,null,null,o,s,c,d,F,b,null),e[h2]=r.current,wA(e),new YA(r)},Go.hydrateRoot=function(e,r,o){if(!l(e))throw Error(a(299));var s=!1,c="",d=Am,F=cm,b=um,_=null,W=null;return o!=null&&(o.unstable_strictMode===!0&&(s=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(d=o.onUncaughtError),o.onCaughtError!==void 0&&(F=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(_=o.unstable_transitionCallbacks),o.formState!==void 0&&(W=o.formState)),r=IC(e,1,!0,r,o??null,s,c,d,F,b,_,W),r.context=OC(null),o=r.current,s=ne(),s=Yn(s),c=Pt(s),c.callback=null,Mt(o,c,s),o=s,r.current.lanes=o,lr(r,o),Ye(r),e[h2]=r.current,wA(e),new Pa(r)},Go.version="19.1.0",Go}var n3;function py(){if(n3)return ZA.exports;n3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),ZA.exports=Cy(),ZA.exports}var hy=py(),g=fu();const n0=gs(g),vs=Ip({__proto__:null,default:n0},[g]);var Vo={},o3;function Dy(){if(o3)return Vo;o3=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.parse=u,Vo.serialize=m;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,A=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function u(v,B){const y=new A,x=v.length;if(x<2)return y;const S=(B==null?void 0:B.decode)||D;let T=0;do{const w=v.indexOf("=",T);if(w===-1)break;const R=v.indexOf(";",T),P=R===-1?x:R;if(w>P){T=v.lastIndexOf(";",w-1)+1;continue}const N=f(v,T,w),E=C(v,w,N),L=v.slice(N,E);if(y[L]===void 0){let H=f(v,w+1,P),z=C(v,P,H);const r2=S(v.slice(H,z));y[L]=r2}T=P+1}while(T<x);return y}function f(v,B,y){do{const x=v.charCodeAt(B);if(x!==32&&x!==9)return B}while(++B<y);return y}function C(v,B,y){for(;B>y;){const x=v.charCodeAt(--B);if(x!==32&&x!==9)return B+1}return y}function m(v,B,y){const x=(y==null?void 0:y.encode)||encodeURIComponent;if(!t.test(v))throw new TypeError(`argument name is invalid: ${v}`);const S=x(B);if(!n.test(S))throw new TypeError(`argument val is invalid: ${B}`);let T=v+"="+S;if(!y)return T;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);T+="; Max-Age="+y.maxAge}if(y.domain){if(!i.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);T+="; Domain="+y.domain}if(y.path){if(!a.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);T+="; Path="+y.path}if(y.expires){if(!p(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);T+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(T+="; HttpOnly"),y.secure&&(T+="; Secure"),y.partitioned&&(T+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":T+="; Priority=Low";break;case"medium":T+="; Priority=Medium";break;case"high":T+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":T+="; SameSite=Strict";break;case"lax":T+="; SameSite=Lax";break;case"none":T+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return T}function D(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function p(v){return l.call(v)==="[object Date]"}return Vo}Dy();/**
 * react-router v7.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qp=t=>{throw TypeError(t)},gy=(t,n,i)=>n.has(t)||qp("Cannot "+i),ec=(t,n,i)=>(gy(t,n,"read from private field"),i?i.call(t):n.get(t)),vy=(t,n,i)=>n.has(t)?qp("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,i),i3="popstate";function By(t={}){function n(a,l){let{pathname:A,search:u,hash:f}=a.location;return ri("",{pathname:A,search:u,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function i(a,l){return typeof l=="string"?l:Qt(l)}return xy(n,i,null,t)}function k2(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function g0(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function yy(){return Math.random().toString(36).substring(2,10)}function a3(t,n){return{usr:t.state,key:t.key,idx:n}}function ri(t,n,i=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof n=="string"?tr(n):n,state:i,key:n&&n.key||a||yy()}}function Qt({pathname:t="/",search:n="",hash:i=""}){return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function tr(t){let n={};if(t){let i=t.indexOf("#");i>=0&&(n.hash=t.substring(i),t=t.substring(0,i));let a=t.indexOf("?");a>=0&&(n.search=t.substring(a),t=t.substring(0,a)),t&&(n.pathname=t)}return n}function xy(t,n,i,a={}){let{window:l=document.defaultView,v5Compat:A=!1}=a,u=l.history,f="POP",C=null,m=D();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function D(){return(u.state||{idx:null}).idx}function p(){f="POP";let S=D(),T=S==null?null:S-m;m=S,C&&C({action:f,location:x.location,delta:T})}function v(S,T){f="PUSH";let w=ri(x.location,S,T);m=D()+1;let R=a3(w,m),P=x.createHref(w);try{u.pushState(R,"",P)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;l.location.assign(P)}A&&C&&C({action:f,location:x.location,delta:1})}function B(S,T){f="REPLACE";let w=ri(x.location,S,T);m=D();let R=a3(w,m),P=x.createHref(w);u.replaceState(R,"",P),A&&C&&C({action:f,location:x.location,delta:0})}function y(S){return Hp(S)}let x={get action(){return f},get location(){return t(l,u)},listen(S){if(C)throw new Error("A history only accepts one active listener");return l.addEventListener(i3,p),C=S,()=>{l.removeEventListener(i3,p),C=null}},createHref(S){return n(l,S)},createURL:y,encodeLocation(S){let T=y(S);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:v,replace:B,go(S){return u.go(S)}};return x}function Hp(t,n=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),k2(i,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:Qt(t);return a=a.replace(/ $/,"%20"),!n&&a.startsWith("//")&&(a=i+a),new URL(a,i)}var Xo,s3=class{constructor(t){if(vy(this,Xo,new Map),t)for(let[n,i]of t)this.set(n,i)}get(t){if(ec(this,Xo).has(t))return ec(this,Xo).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,n){ec(this,Xo).set(t,n)}};Xo=new WeakMap;var Fy=new Set(["lazy","caseSensitive","path","id","index","children"]);function Sy(t){return Fy.has(t)}var Ty=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function Ry(t){return Ty.has(t)}function by(t){return t.index===!0}function os(t,n,i=[],a={}){return t.map((l,A)=>{let u=[...i,String(A)],f=typeof l.id=="string"?l.id:u.join("-");if(k2(l.index!==!0||!l.children,"Cannot specify children on an index route"),k2(!a[f],`Found a route id collision on id "${f}".  Route id's must be globally unique within Data Router usages`),by(l)){let C={...l,...n(l),id:f};return a[f]=C,C}else{let C={...l,...n(l),id:f,children:void 0};return a[f]=C,l.children&&(C.children=os(l.children,n,u,a)),C}})}function Dt(t,n,i="/"){return Za(t,n,i,!1)}function Za(t,n,i,a){let l=typeof n=="string"?tr(n):n,A=Ae(l.pathname||"/",i);if(A==null)return null;let u=Up(t);wy(u);let f=null;for(let C=0;f==null&&C<u.length;++C){let m=Wp(A);f=Oy(u[C],m,a)}return f}function jp(t,n){let{route:i,pathname:a,params:l}=t;return{id:i.id,pathname:a,params:l,data:n[i.id],handle:i.handle}}function Up(t,n=[],i=[],a=""){let l=(A,u,f)=>{let C={relativePath:f===void 0?A.path||"":f,caseSensitive:A.caseSensitive===!0,childrenIndex:u,route:A};C.relativePath.startsWith("/")&&(k2(C.relativePath.startsWith(a),`Absolute route path "${C.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(a.length));let m=Ze([a,C.relativePath]),D=i.concat(C);A.children&&A.children.length>0&&(k2(A.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Up(A.children,n,D,m)),!(A.path==null&&!A.index)&&n.push({path:m,score:Ly(m,A.index),routesMeta:D})};return t.forEach((A,u)=>{var f;if(A.path===""||!((f=A.path)!=null&&f.includes("?")))l(A,u);else for(let C of zp(A.path))l(A,u,C)}),n}function zp(t){let n=t.split("/");if(n.length===0)return[];let[i,...a]=n,l=i.endsWith("?"),A=i.replace(/\?$/,"");if(a.length===0)return l?[A,""]:[A];let u=zp(a.join("/")),f=[];return f.push(...u.map(C=>C===""?A:[A,C].join("/"))),l&&f.push(...u),f.map(C=>t.startsWith("/")&&C===""?"/":C)}function wy(t){t.sort((n,i)=>n.score!==i.score?i.score-n.score:Iy(n.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var Ey=/^:[\w-]+$/,Py=3,My=2,Ny=1,_y=10,ky=-2,l3=t=>t==="*";function Ly(t,n){let i=t.split("/"),a=i.length;return i.some(l3)&&(a+=ky),n&&(a+=My),i.filter(l=>!l3(l)).reduce((l,A)=>l+(Ey.test(A)?Py:A===""?Ny:_y),a)}function Iy(t,n){return t.length===n.length&&t.slice(0,-1).every((a,l)=>a===n[l])?t[t.length-1]-n[n.length-1]:0}function Oy(t,n,i=!1){let{routesMeta:a}=t,l={},A="/",u=[];for(let f=0;f<a.length;++f){let C=a[f],m=f===a.length-1,D=A==="/"?n:n.slice(A.length)||"/",p=Er({path:C.relativePath,caseSensitive:C.caseSensitive,end:m},D),v=C.route;if(!p&&m&&i&&!a[a.length-1].route.index&&(p=Er({path:C.relativePath,caseSensitive:C.caseSensitive,end:!1},D)),!p)return null;Object.assign(l,p.params),u.push({params:l,pathname:Ze([A,p.pathname]),pathnameBase:Uy(Ze([A,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(A=Ze([A,p.pathnameBase]))}return u}function Er(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,a]=qy(t.path,t.caseSensitive,t.end),l=n.match(i);if(!l)return null;let A=l[0],u=A.replace(/(.)\/+$/,"$1"),f=l.slice(1);return{params:a.reduce((m,{paramName:D,isOptional:p},v)=>{if(D==="*"){let y=f[v]||"";u=A.slice(0,A.length-y.length).replace(/(.)\/+$/,"$1")}const B=f[v];return p&&!B?m[D]=void 0:m[D]=(B||"").replace(/%2F/g,"/"),m},{}),pathname:A,pathnameBase:u,pattern:t}}function qy(t,n=!1,i=!0){g0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,C)=>(a.push({paramName:f,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),a]}function Wp(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return g0(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),t}}function Ae(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,a=t.charAt(i);return a&&a!=="/"?null:t.slice(i)||"/"}function Hy(t,n="/"){let{pathname:i,search:a="",hash:l=""}=typeof t=="string"?tr(t):t;return{pathname:i?i.startsWith("/")?i:jy(i,n):n,search:zy(a),hash:Wy(l)}}function jy(t,n){let i=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?i.length>1&&i.pop():l!=="."&&i.push(l)}),i.length>1?i.join("/"):"/"}function tc(t,n,i,a){return`Cannot include a '${t}' character in a manually specified \`to.${n}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Gp(t){return t.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function du(t){let n=Gp(t);return n.map((i,a)=>a===n.length-1?i.pathname:i.pathnameBase)}function mu(t,n,i,a=!1){let l;typeof t=="string"?l=tr(t):(l={...t},k2(!l.pathname||!l.pathname.includes("?"),tc("?","pathname","search",l)),k2(!l.pathname||!l.pathname.includes("#"),tc("#","pathname","hash",l)),k2(!l.search||!l.search.includes("#"),tc("#","search","hash",l)));let A=t===""||l.pathname==="",u=A?"/":l.pathname,f;if(u==null)f=i;else{let p=n.length-1;if(!a&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),p-=1;l.pathname=v.join("/")}f=p>=0?n[p]:"/"}let C=Hy(l,f),m=u&&u!=="/"&&u.endsWith("/"),D=(A||u===".")&&i.endsWith("/");return!C.pathname.endsWith("/")&&(m||D)&&(C.pathname+="/"),C}var Ze=t=>t.join("/").replace(/\/\/+/g,"/"),Uy=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zy=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Wy=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,is=class{constructor(t,n,i,a=!1){this.status=t,this.statusText=n||"",this.internal=a,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function ni(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Vp=["POST","PUT","PATCH","DELETE"],Gy=new Set(Vp),Vy=["GET",...Vp],Yy=new Set(Vy),$y=new Set([301,302,303,307,308]),Zy=new Set([307,308]),rc={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ky={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Yo={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Cu=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xy=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Yp="remix-router-transitions",$p=Symbol("ResetLoaderData");function Qy(t){const n=t.window?t.window:typeof window<"u"?window:void 0,i=typeof n<"u"&&typeof n.document<"u"&&typeof n.document.createElement<"u";k2(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=t.hydrationRouteProperties||[],l=t.mapRouteProperties||Xy,A={},u=os(t.routes,l,void 0,A),f,C=t.basename||"/",m=t.dataStrategy||nx,D={unstable_middleware:!1,...t.future},p=null,v=new Set,B=null,y=null,x=null,S=t.hydrationData!=null,T=Dt(u,t.history.location,C),w=!1,R=null,P;if(T==null&&!t.patchRoutesOnNavigation){let k=ve(404,{pathname:t.history.location.pathname}),{matches:j,route:$}=v3(u);P=!0,T=j,R={[$.id]:k}}else if(T&&!t.hydrationData&&Ar(T,u,t.history.location.pathname).active&&(T=null),T)if(T.some(k=>k.route.lazy))P=!1;else if(!T.some(k=>k.route.loader))P=!0;else{let k=t.hydrationData?t.hydrationData.loaderData:null,j=t.hydrationData?t.hydrationData.errors:null;if(j){let $=T.findIndex(a2=>j[a2.route.id]!==void 0);P=T.slice(0,$+1).every(a2=>!_c(a2.route,k,j))}else P=T.every($=>!_c($.route,k,j))}else{P=!1,T=[];let k=Ar(null,u,t.history.location.pathname);k.active&&k.matches&&(w=!0,T=k.matches)}let N,E={historyAction:t.history.action,location:t.history.location,matches:T,initialized:P,navigation:rc,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||R,fetchers:new Map,blockers:new Map},L="POP",H=!1,z,r2=!1,c2=new Map,s2=null,i2=!1,K=!1,u2=new Set,I=new Map,V=0,Q=-1,Z=new Map,M=new Set,X=new Map,e2=new Map,o2=new Set,f2=new Map,x2,p2=null;function G2(){if(p=t.history.listen(({action:k,location:j,delta:$})=>{if(x2){x2(),x2=void 0;return}g0(f2.size===0||$!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let a2=yi({currentLocation:E.location,nextLocation:j,historyAction:k});if(a2&&$!=null){let A2=new Promise(h2=>{x2=h2});t.history.go($*-1),Ue(a2,{state:"blocked",location:j,proceed(){Ue(a2,{state:"proceeding",proceed:void 0,reset:void 0,location:j}),A2.then(()=>t.history.go($))},reset(){let h2=new Map(E.blockers);h2.set(a2,Yo),z2({blockers:h2})}});return}return W0(k,j)}),i){mx(n,c2);let k=()=>Cx(n,c2);n.addEventListener("pagehide",k),s2=()=>n.removeEventListener("pagehide",k)}return E.initialized||W0("POP",E.location,{initialHydration:!0}),N}function y2(){p&&p(),s2&&s2(),v.clear(),z&&z.abort(),E.fetchers.forEach((k,j)=>b0(j)),E.blockers.forEach((k,j)=>sr(j))}function M2(k){return v.add(k),()=>v.delete(k)}function z2(k,j={}){E={...E,...k};let $=[],a2=[];E.fetchers.forEach((A2,h2)=>{A2.state==="idle"&&(o2.has(h2)?$.push(h2):a2.push(h2))}),o2.forEach(A2=>{!E.fetchers.has(A2)&&!I.has(A2)&&$.push(A2)}),[...v].forEach(A2=>A2(E,{deletedFetchers:$,viewTransitionOpts:j.viewTransitionOpts,flushSync:j.flushSync===!0})),$.forEach(A2=>b0(A2)),a2.forEach(A2=>E.fetchers.delete(A2))}function f0(k,j,{flushSync:$}={}){var B2,R2;let a2=E.actionData!=null&&E.navigation.formMethod!=null&&ae(E.navigation.formMethod)&&E.navigation.state==="loading"&&((B2=k.state)==null?void 0:B2._isRedirect)!==!0,A2;j.actionData?Object.keys(j.actionData).length>0?A2=j.actionData:A2=null:a2?A2=E.actionData:A2=null;let h2=j.loaderData?D3(E.loaderData,j.loaderData,j.matches||[],j.errors):E.loaderData,F2=E.blockers;F2.size>0&&(F2=new Map(F2),F2.forEach((D2,w2)=>F2.set(w2,Yo)));let d2=H===!0||E.navigation.formMethod!=null&&ae(E.navigation.formMethod)&&((R2=k.state)==null?void 0:R2._isRedirect)!==!0;f&&(u=f,f=void 0),i2||L==="POP"||(L==="PUSH"?t.history.push(k,k.state):L==="REPLACE"&&t.history.replace(k,k.state));let v2;if(L==="POP"){let D2=c2.get(E.location.pathname);D2&&D2.has(k.pathname)?v2={currentLocation:E.location,nextLocation:k}:c2.has(k.pathname)&&(v2={currentLocation:k,nextLocation:E.location})}else if(r2){let D2=c2.get(E.location.pathname);D2?D2.add(k.pathname):(D2=new Set([k.pathname]),c2.set(E.location.pathname,D2)),v2={currentLocation:E.location,nextLocation:k}}z2({...j,actionData:A2,loaderData:h2,historyAction:L,location:k,initialized:!0,navigation:rc,revalidation:"idle",restoreScrollPosition:Fi(k,j.matches||E.matches),preventScrollReset:d2,blockers:F2},{viewTransitionOpts:v2,flushSync:$===!0}),L="POP",H=!1,r2=!1,i2=!1,K=!1,p2==null||p2.resolve(),p2=null}async function N0(k,j){if(typeof k=="number"){t.history.go(k);return}let $=Nc(E.location,E.matches,C,k,j==null?void 0:j.fromRouteId,j==null?void 0:j.relative),{path:a2,submission:A2,error:h2}=A3(!1,$,j),F2=E.location,d2=ri(E.location,a2,j&&j.state);d2={...d2,...t.history.encodeLocation(d2)};let v2=j&&j.replace!=null?j.replace:void 0,B2="PUSH";v2===!0?B2="REPLACE":v2===!1||A2!=null&&ae(A2.formMethod)&&A2.formAction===E.location.pathname+E.location.search&&(B2="REPLACE");let R2=j&&"preventScrollReset"in j?j.preventScrollReset===!0:void 0,D2=(j&&j.flushSync)===!0,w2=yi({currentLocation:F2,nextLocation:d2,historyAction:B2});if(w2){Ue(w2,{state:"blocked",location:d2,proceed(){Ue(w2,{state:"proceeding",proceed:void 0,reset:void 0,location:d2}),N0(k,j)},reset(){let W2=new Map(E.blockers);W2.set(w2,Yo),z2({blockers:W2})}});return}await W0(B2,d2,{submission:A2,pendingError:h2,preventScrollReset:R2,replace:j&&j.replace,enableViewTransition:j&&j.viewTransition,flushSync:D2})}function be(){p2||(p2=px()),Vn(),z2({revalidation:"loading"});let k=p2.promise;return E.navigation.state==="submitting"?k:E.navigation.state==="idle"?(W0(E.historyAction,E.location,{startUninterruptedRevalidation:!0}),k):(W0(L||E.historyAction,E.navigation.location,{overrideNavigation:E.navigation,enableViewTransition:r2===!0}),k)}async function W0(k,j,$){z&&z.abort(),z=null,L=k,i2=($&&$.startUninterruptedRevalidation)===!0,lr(E.location,E.matches),H=($&&$.preventScrollReset)===!0,r2=($&&$.enableViewTransition)===!0;let a2=f||u,A2=$&&$.overrideNavigation,h2=$!=null&&$.initialHydration&&E.matches&&E.matches.length>0&&!w?E.matches:Dt(a2,j,C),F2=($&&$.flushSync)===!0;if(h2&&E.initialized&&!K&&Ax(E.location,j)&&!($&&$.submission&&ae($.submission.formMethod))){f0(j,{matches:h2},{flushSync:F2});return}let d2=Ar(h2,a2,j.pathname);if(d2.active&&d2.matches&&(h2=d2.matches),!h2){let{error:c0,notFoundMatches:V2,route:j2}=jr(j.pathname);f0(j,{matches:V2,loaderData:{},errors:{[j2.id]:c0}},{flushSync:F2});return}z=new AbortController;let v2=Rn(t.history,j,z.signal,$&&$.submission),B2=new s3(t.unstable_getContext?await t.unstable_getContext():void 0),R2;if($&&$.pendingError)R2=[br(h2).route.id,{type:"error",error:$.pendingError}];else if($&&$.submission&&ae($.submission.formMethod)){let c0=await zn(v2,j,$.submission,h2,B2,d2.active,$&&$.initialHydration===!0,{replace:$.replace,flushSync:F2});if(c0.shortCircuited)return;if(c0.pendingActionResult){let[V2,j2]=c0.pendingActionResult;if(ie(j2)&&ni(j2.error)&&j2.error.status===404){z=null,f0(j,{matches:c0.matches,loaderData:{},errors:{[V2]:j2.error}});return}}h2=c0.matches||h2,R2=c0.pendingActionResult,A2=nc(j,$.submission),F2=!1,d2.active=!1,v2=Rn(t.history,v2.url,v2.signal)}let{shortCircuited:D2,matches:w2,loaderData:W2,errors:a0}=await Wn(v2,j,h2,B2,d2.active,A2,$&&$.submission,$&&$.fetcherSubmission,$&&$.replace,$&&$.initialHydration===!0,F2,R2);D2||(z=null,f0(j,{matches:w2||h2,...g3(R2),loaderData:W2,errors:a0}))}async function zn(k,j,$,a2,A2,h2,F2,d2={}){Vn();let v2=fx(j,$);if(z2({navigation:v2},{flushSync:d2.flushSync===!0}),h2){let D2=await cr(a2,j.pathname,k.signal);if(D2.type==="aborted")return{shortCircuited:!0};if(D2.type==="error"){let w2=br(D2.partialMatches).route.id;return{matches:D2.partialMatches,pendingActionResult:[w2,{type:"error",error:D2.error}]}}else if(D2.matches)a2=D2.matches;else{let{notFoundMatches:w2,error:W2,route:a0}=jr(j.pathname);return{matches:w2,pendingActionResult:[a0.id,{type:"error",error:W2}]}}}let B2,R2=Qo(a2,j);if(!R2.route.action&&!R2.route.lazy)B2={type:"error",error:ve(405,{method:k.method,pathname:j.pathname,routeId:R2.route.id})};else{let D2=wn(l,A,k,a2,R2,F2?[]:a,A2),w2=await xt(k,D2,A2,null);if(B2=w2[R2.route.id],!B2){for(let W2 of a2)if(w2[W2.route.id]){B2=w2[W2.route.id];break}}if(k.signal.aborted)return{shortCircuited:!0}}if(wr(B2)){let D2;return d2&&d2.replace!=null?D2=d2.replace:D2=C3(B2.response.headers.get("Location"),new URL(k.url),C)===E.location.pathname+E.location.search,await tt(k,B2,!0,{submission:$,replace:D2}),{shortCircuited:!0}}if(ie(B2)){let D2=br(a2,R2.route.id);return(d2&&d2.replace)!==!0&&(L="PUSH"),{matches:a2,pendingActionResult:[D2.route.id,B2,R2.route.id]}}return{matches:a2,pendingActionResult:[R2.route.id,B2]}}async function Wn(k,j,$,a2,A2,h2,F2,d2,v2,B2,R2,D2){let w2=h2||nc(j,F2),W2=F2||d2||y3(w2),a0=!i2&&!B2;if(A2){if(a0){let _0=q0(D2);z2({navigation:w2,..._0!==void 0?{actionData:_0}:{}},{flushSync:R2})}let L2=await cr($,j.pathname,k.signal);if(L2.type==="aborted")return{shortCircuited:!0};if(L2.type==="error"){let _0=br(L2.partialMatches).route.id;return{matches:L2.partialMatches,loaderData:{},errors:{[_0]:L2.error}}}else if(L2.matches)$=L2.matches;else{let{error:_0,notFoundMatches:Ee,route:Pe}=jr(j.pathname);return{matches:Ee,loaderData:{},errors:{[Pe.id]:_0}}}}let c0=f||u,{dsMatches:V2,revalidatingFetchers:j2}=c3(k,a2,l,A,t.history,E,$,W2,j,B2?[]:a,B2===!0,K,u2,o2,X,M,c0,C,D2);if(Q=++V,!t.dataStrategy&&!V2.some(L2=>L2.shouldLoad)&&j2.length===0){let L2=ir();return f0(j,{matches:$,loaderData:{},errors:D2&&ie(D2[1])?{[D2[0]]:D2[1].error}:null,...g3(D2),...L2?{fetchers:new Map(E.fetchers)}:{}},{flushSync:R2}),{shortCircuited:!0}}if(a0){let L2={};if(!A2){L2.navigation=w2;let _0=q0(D2);_0!==void 0&&(L2.actionData=_0)}j2.length>0&&(L2.fetchers=Gn(j2)),z2(L2,{flushSync:R2})}j2.forEach(L2=>{je(L2.key),L2.controller&&I.set(L2.key,L2.controller)});let Ft=()=>j2.forEach(L2=>je(L2.key));z&&z.signal.addEventListener("abort",Ft);let{loaderResults:H0,fetcherResults:ce}=await vi(V2,j2,k,a2);if(k.signal.aborted)return{shortCircuited:!0};z&&z.signal.removeEventListener("abort",Ft),j2.forEach(L2=>I.delete(L2.key));let V0=Na(H0);if(V0)return await tt(k,V0.result,!0,{replace:v2}),{shortCircuited:!0};if(V0=Na(ce),V0)return M.add(V0.key),await tt(k,V0.result,!0,{replace:v2}),{shortCircuited:!0};let{loaderData:St,errors:Tt}=h3(E,$,H0,D2,j2,ce);B2&&E.errors&&(Tt={...E.errors,...Tt});let Zn=ir(),ue=ar(Q),nt=Zn||ue||j2.length>0;return{matches:$,loaderData:St,errors:Tt,...nt?{fetchers:new Map(E.fetchers)}:{}}}function q0(k){if(k&&!ie(k[1]))return{[k[0]]:k[1].data};if(E.actionData)return Object.keys(E.actionData).length===0?null:E.actionData}function Gn(k){return k.forEach(j=>{let $=E.fetchers.get(j.key),a2=$o(void 0,$?$.data:void 0);E.fetchers.set(j.key,a2)}),new Map(E.fetchers)}async function et(k,j,$,a2){je(k);let A2=(a2&&a2.flushSync)===!0,h2=f||u,F2=Nc(E.location,E.matches,C,$,j,a2==null?void 0:a2.relative),d2=Dt(h2,F2,C),v2=Ar(d2,h2,F2);if(v2.active&&v2.matches&&(d2=v2.matches),!d2){A0(k,j,ve(404,{pathname:F2}),{flushSync:A2});return}let{path:B2,submission:R2,error:D2}=A3(!0,F2,a2);if(D2){A0(k,j,D2,{flushSync:A2});return}let w2=Qo(d2,B2),W2=new s3(t.unstable_getContext?await t.unstable_getContext():void 0),a0=(a2&&a2.preventScrollReset)===!0;if(R2&&ae(R2.formMethod)){await gi(k,j,B2,w2,d2,W2,v2.active,A2,a0,R2);return}X.set(k,{routeId:j,path:B2}),await Hr(k,j,B2,w2,d2,W2,v2.active,A2,a0,R2)}async function gi(k,j,$,a2,A2,h2,F2,d2,v2,B2){Vn(),X.delete(k);function R2(s0){if(!s0.route.action&&!s0.route.lazy){let Rt=ve(405,{method:B2.formMethod,pathname:$,routeId:j});return A0(k,j,Rt,{flushSync:d2}),!0}return!1}if(!F2&&R2(a2))return;let D2=E.fetchers.get(k);G0(k,dx(B2,D2),{flushSync:d2});let w2=new AbortController,W2=Rn(t.history,$,w2.signal,B2);if(F2){let s0=await cr(A2,$,W2.signal,k);if(s0.type==="aborted")return;if(s0.type==="error"){A0(k,j,s0.error,{flushSync:d2});return}else if(s0.matches){if(A2=s0.matches,a2=Qo(A2,$),R2(a2))return}else{A0(k,j,ve(404,{pathname:$}),{flushSync:d2});return}}I.set(k,w2);let a0=V,c0=wn(l,A,W2,A2,a2,a,h2),j2=(await xt(W2,c0,h2,k))[a2.route.id];if(W2.signal.aborted){I.get(k)===w2&&I.delete(k);return}if(o2.has(k)){if(wr(j2)||ie(j2)){G0(k,Kt(void 0));return}}else{if(wr(j2))if(I.delete(k),Q>a0){G0(k,Kt(void 0));return}else return M.add(k),G0(k,$o(B2)),tt(W2,j2,!1,{fetcherSubmission:B2,preventScrollReset:v2});if(ie(j2)){A0(k,j,j2.error);return}}let Ft=E.navigation.location||E.location,H0=Rn(t.history,Ft,w2.signal),ce=f||u,V0=E.navigation.state!=="idle"?Dt(ce,E.navigation.location,C):E.matches;k2(V0,"Didn't find any matches after fetcher action");let St=++V;Z.set(k,St);let Tt=$o(B2,j2.data);E.fetchers.set(k,Tt);let{dsMatches:Zn,revalidatingFetchers:ue}=c3(H0,h2,l,A,t.history,E,V0,B2,Ft,a,!1,K,u2,o2,X,M,ce,C,[a2.route.id,j2]);ue.filter(s0=>s0.key!==k).forEach(s0=>{let Rt=s0.key,Kn=E.fetchers.get(Rt),Y0=$o(void 0,Kn?Kn.data:void 0);E.fetchers.set(Rt,Y0),je(Rt),s0.controller&&I.set(Rt,s0.controller)}),z2({fetchers:new Map(E.fetchers)});let nt=()=>ue.forEach(s0=>je(s0.key));w2.signal.addEventListener("abort",nt);let{loaderResults:L2,fetcherResults:_0}=await vi(Zn,ue,H0,h2);if(w2.signal.aborted)return;if(w2.signal.removeEventListener("abort",nt),Z.delete(k),I.delete(k),ue.forEach(s0=>I.delete(s0.key)),E.fetchers.has(k)){let s0=Kt(j2.data);E.fetchers.set(k,s0)}let Ee=Na(L2);if(Ee)return tt(H0,Ee.result,!1,{preventScrollReset:v2});if(Ee=Na(_0),Ee)return M.add(Ee.key),tt(H0,Ee.result,!1,{preventScrollReset:v2});let{loaderData:Pe,errors:ur}=h3(E,V0,L2,void 0,ue,_0);ar(St),E.navigation.state==="loading"&&St>Q?(k2(L,"Expected pending action"),z&&z.abort(),f0(E.navigation.location,{matches:V0,loaderData:Pe,errors:ur,fetchers:new Map(E.fetchers)})):(z2({errors:ur,loaderData:D3(E.loaderData,Pe,V0,ur),fetchers:new Map(E.fetchers)}),K=!1)}async function Hr(k,j,$,a2,A2,h2,F2,d2,v2,B2){let R2=E.fetchers.get(k);G0(k,$o(B2,R2?R2.data:void 0),{flushSync:d2});let D2=new AbortController,w2=Rn(t.history,$,D2.signal);if(F2){let j2=await cr(A2,$,w2.signal,k);if(j2.type==="aborted")return;if(j2.type==="error"){A0(k,j,j2.error,{flushSync:d2});return}else if(j2.matches)A2=j2.matches,a2=Qo(A2,$);else{A0(k,j,ve(404,{pathname:$}),{flushSync:d2});return}}I.set(k,D2);let W2=V,a0=wn(l,A,w2,A2,a2,a,h2),V2=(await xt(w2,a0,h2,k))[a2.route.id];if(I.get(k)===D2&&I.delete(k),!w2.signal.aborted){if(o2.has(k)){G0(k,Kt(void 0));return}if(wr(V2))if(Q>W2){G0(k,Kt(void 0));return}else{M.add(k),await tt(w2,V2,!1,{preventScrollReset:v2});return}if(ie(V2)){A0(k,j,V2.error);return}G0(k,Kt(V2.data))}}async function tt(k,j,$,{submission:a2,fetcherSubmission:A2,preventScrollReset:h2,replace:F2}={}){j.response.headers.has("X-Remix-Revalidate")&&(K=!0);let d2=j.response.headers.get("Location");k2(d2,"Expected a Location header on the redirect Response"),d2=C3(d2,new URL(k.url),C);let v2=ri(E.location,d2,{_isRedirect:!0});if(i){let a0=!1;if(j.response.headers.has("X-Remix-Reload-Document"))a0=!0;else if(Cu.test(d2)){const c0=Hp(d2,!0);a0=c0.origin!==n.location.origin||Ae(c0.pathname,C)==null}if(a0){F2?n.location.replace(d2):n.location.assign(d2);return}}z=null;let B2=F2===!0||j.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:R2,formAction:D2,formEncType:w2}=E.navigation;!a2&&!A2&&R2&&D2&&w2&&(a2=y3(E.navigation));let W2=a2||A2;if(Zy.has(j.response.status)&&W2&&ae(W2.formMethod))await W0(B2,v2,{submission:{...W2,formAction:d2},preventScrollReset:h2||H,enableViewTransition:$?r2:void 0});else{let a0=nc(v2,a2);await W0(B2,v2,{overrideNavigation:a0,fetcherSubmission:A2,preventScrollReset:h2||H,enableViewTransition:$?r2:void 0})}}async function xt(k,j,$,a2){let A2,h2={};try{A2=await ox(m,k,j,a2,$,!1)}catch(F2){return j.filter(d2=>d2.shouldLoad).forEach(d2=>{h2[d2.route.id]={type:"error",error:F2}}),h2}if(k.signal.aborted)return h2;for(let[F2,d2]of Object.entries(A2))if(cx(d2)){let v2=d2.result;h2[F2]={type:"redirect",response:sx(v2,k,F2,j,C)}}else h2[F2]=await ax(d2);return h2}async function vi(k,j,$,a2){let A2=xt($,k,a2,null),h2=Promise.all(j.map(async v2=>{if(v2.matches&&v2.match&&v2.request&&v2.controller){let R2=(await xt(v2.request,v2.matches,a2,v2.key))[v2.match.route.id];return{[v2.key]:R2}}else return Promise.resolve({[v2.key]:{type:"error",error:ve(404,{pathname:v2.path})}})})),F2=await A2,d2=(await h2).reduce((v2,B2)=>Object.assign(v2,B2),{});return{loaderResults:F2,fetcherResults:d2}}function Vn(){K=!0,X.forEach((k,j)=>{I.has(j)&&u2.add(j),je(j)})}function G0(k,j,$={}){E.fetchers.set(k,j),z2({fetchers:new Map(E.fetchers)},{flushSync:($&&$.flushSync)===!0})}function A0(k,j,$,a2={}){let A2=br(E.matches,j);b0(k),z2({errors:{[A2.route.id]:$},fetchers:new Map(E.fetchers)},{flushSync:(a2&&a2.flushSync)===!0})}function we(k){return e2.set(k,(e2.get(k)||0)+1),o2.has(k)&&o2.delete(k),E.fetchers.get(k)||Ky}function b0(k){let j=E.fetchers.get(k);I.has(k)&&!(j&&j.state==="loading"&&Z.has(k))&&je(k),X.delete(k),Z.delete(k),M.delete(k),o2.delete(k),u2.delete(k),E.fetchers.delete(k)}function Ws(k){let j=(e2.get(k)||0)-1;j<=0?(e2.delete(k),o2.add(k)):e2.set(k,j),z2({fetchers:new Map(E.fetchers)})}function je(k){let j=I.get(k);j&&(j.abort(),I.delete(k))}function Bi(k){for(let j of k){let $=we(j),a2=Kt($.data);E.fetchers.set(j,a2)}}function ir(){let k=[],j=!1;for(let $ of M){let a2=E.fetchers.get($);k2(a2,`Expected fetcher: ${$}`),a2.state==="loading"&&(M.delete($),k.push($),j=!0)}return Bi(k),j}function ar(k){let j=[];for(let[$,a2]of Z)if(a2<k){let A2=E.fetchers.get($);k2(A2,`Expected fetcher: ${$}`),A2.state==="loading"&&(je($),Z.delete($),j.push($))}return Bi(j),j.length>0}function rt(k,j){let $=E.blockers.get(k)||Yo;return f2.get(k)!==j&&f2.set(k,j),$}function sr(k){E.blockers.delete(k),f2.delete(k)}function Ue(k,j){let $=E.blockers.get(k)||Yo;k2($.state==="unblocked"&&j.state==="blocked"||$.state==="blocked"&&j.state==="blocked"||$.state==="blocked"&&j.state==="proceeding"||$.state==="blocked"&&j.state==="unblocked"||$.state==="proceeding"&&j.state==="unblocked",`Invalid blocker state transition: ${$.state} -> ${j.state}`);let a2=new Map(E.blockers);a2.set(k,j),z2({blockers:a2})}function yi({currentLocation:k,nextLocation:j,historyAction:$}){if(f2.size===0)return;f2.size>1&&g0(!1,"A router only supports one blocker at a time");let a2=Array.from(f2.entries()),[A2,h2]=a2[a2.length-1],F2=E.blockers.get(A2);if(!(F2&&F2.state==="proceeding")&&h2({currentLocation:k,nextLocation:j,historyAction:$}))return A2}function jr(k){let j=ve(404,{pathname:k}),$=f||u,{matches:a2,route:A2}=v3($);return{notFoundMatches:a2,route:A2,error:j}}function xi(k,j,$){if(B=k,x=j,y=$||null,!S&&E.navigation===rc){S=!0;let a2=Fi(E.location,E.matches);a2!=null&&z2({restoreScrollPosition:a2})}return()=>{B=null,x=null,y=null}}function Ur(k,j){return y&&y(k,j.map(a2=>jp(a2,E.loaderData)))||k.key}function lr(k,j){if(B&&x){let $=Ur(k,j);B[$]=x()}}function Fi(k,j){if(B){let $=Ur(k,j),a2=B[$];if(typeof a2=="number")return a2}return null}function Ar(k,j,$){if(t.patchRoutesOnNavigation)if(k){if(Object.keys(k[0].params).length>0)return{active:!0,matches:Za(j,$,C,!0)}}else return{active:!0,matches:Za(j,$,C,!0)||[]};return{active:!1,matches:null}}async function cr(k,j,$,a2){if(!t.patchRoutesOnNavigation)return{type:"success",matches:k};let A2=k;for(;;){let h2=f==null,F2=f||u,d2=A;try{await t.patchRoutesOnNavigation({signal:$,path:j,matches:A2,fetcherKey:a2,patch:(R2,D2)=>{$.aborted||u3(R2,D2,F2,d2,l)}})}catch(R2){return{type:"error",error:R2,partialMatches:A2}}finally{h2&&!$.aborted&&(u=[...u])}if($.aborted)return{type:"aborted"};let v2=Dt(F2,j,C);if(v2)return{type:"success",matches:v2};let B2=Za(F2,j,C,!0);if(!B2||A2.length===B2.length&&A2.every((R2,D2)=>R2.route.id===B2[D2].route.id))return{type:"success",matches:null};A2=B2}}function Yn(k){A={},f=os(k,l,void 0,A)}function $n(k,j){let $=f==null;u3(k,j,f||u,A,l),$&&(u=[...u],z2({}))}return N={get basename(){return C},get future(){return D},get state(){return E},get routes(){return u},get window(){return n},initialize:G2,subscribe:M2,enableScrollRestoration:xi,navigate:N0,fetch:et,revalidate:be,createHref:k=>t.history.createHref(k),encodeLocation:k=>t.history.encodeLocation(k),getFetcher:we,deleteFetcher:Ws,dispose:y2,getBlocker:rt,deleteBlocker:sr,patchRoutes:$n,_internalFetchControllers:I,_internalSetRoutes:Yn},N}function Jy(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Nc(t,n,i,a,l,A){let u,f;if(l){u=[];for(let m of n)if(u.push(m),m.route.id===l){f=m;break}}else u=n,f=n[n.length-1];let C=mu(a||".",du(u),Ae(t.pathname,i)||t.pathname,A==="path");if(a==null&&(C.search=t.search,C.hash=t.hash),(a==null||a===""||a===".")&&f){let m=pu(C.search);if(f.route.index&&!m)C.search=C.search?C.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&m){let D=new URLSearchParams(C.search),p=D.getAll("index");D.delete("index"),p.filter(B=>B).forEach(B=>D.append("index",B));let v=D.toString();C.search=v?`?${v}`:""}}return i!=="/"&&(C.pathname=C.pathname==="/"?i:Ze([i,C.pathname])),Qt(C)}function A3(t,n,i){if(!i||!Jy(i))return{path:n};if(i.formMethod&&!ux(i.formMethod))return{path:n,error:ve(405,{method:i.formMethod})};let a=()=>({path:n,error:ve(400,{type:"invalid-body"})}),A=(i.formMethod||"get").toUpperCase(),u=eh(n);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!ae(A))return a();let p=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((v,[B,y])=>`${v}${B}=${y}
`,""):String(i.body);return{path:n,submission:{formMethod:A,formAction:u,formEncType:i.formEncType,formData:void 0,json:void 0,text:p}}}else if(i.formEncType==="application/json"){if(!ae(A))return a();try{let p=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:n,submission:{formMethod:A,formAction:u,formEncType:i.formEncType,formData:void 0,json:p,text:void 0}}}catch{return a()}}}k2(typeof FormData=="function","FormData is not available in this environment");let f,C;if(i.formData)f=Lc(i.formData),C=i.formData;else if(i.body instanceof FormData)f=Lc(i.body),C=i.body;else if(i.body instanceof URLSearchParams)f=i.body,C=p3(f);else if(i.body==null)f=new URLSearchParams,C=new FormData;else try{f=new URLSearchParams(i.body),C=p3(f)}catch{return a()}let m={formMethod:A,formAction:u,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:C,json:void 0,text:void 0};if(ae(m.formMethod))return{path:n,submission:m};let D=tr(n);return t&&D.search&&pu(D.search)&&f.append("index",""),D.search=`?${f}`,{path:Qt(D),submission:m}}function c3(t,n,i,a,l,A,u,f,C,m,D,p,v,B,y,x,S,T,w){var s2;let R=w?ie(w[1])?w[1].error:w[1].data:void 0,P=l.createURL(A.location),N=l.createURL(C),E;if(D&&A.errors){let i2=Object.keys(A.errors)[0];E=u.findIndex(K=>K.route.id===i2)}else if(w&&ie(w[1])){let i2=w[0];E=u.findIndex(K=>K.route.id===i2)-1}let L=w?w[1].statusCode:void 0,H=L&&L>=400,z={currentUrl:P,currentParams:((s2=A.matches[0])==null?void 0:s2.params)||{},nextUrl:N,nextParams:u[0].params,...f,actionResult:R,actionStatus:L},r2=u.map((i2,K)=>{let{route:u2}=i2,I=null;if(E!=null&&K>E?I=!1:u2.lazy?I=!0:u2.loader==null?I=!1:D?I=_c(u2,A.loaderData,A.errors):ex(A.loaderData,A.matches[K],i2)&&(I=!0),I!==null)return kc(i,a,t,i2,m,n,I);let V=H?!1:p||P.pathname+P.search===N.pathname+N.search||P.search!==N.search||tx(A.matches[K],i2),Q={...z,defaultShouldRevalidate:V},Z=as(i2,Q);return kc(i,a,t,i2,m,n,Z,Q)}),c2=[];return y.forEach((i2,K)=>{if(D||!u.some(X=>X.route.id===i2.routeId)||B.has(K))return;let u2=Dt(S,i2.path,T);if(!u2){c2.push({key:K,routeId:i2.routeId,path:i2.path,matches:null,match:null,request:null,controller:null});return}if(x.has(K))return;let I=A.fetchers.get(K),V=Qo(u2,i2.path),Q=new AbortController,Z=Rn(l,i2.path,Q.signal),M=null;if(v.has(K))v.delete(K),M=wn(i,a,Z,u2,V,m,n);else if(I&&I.state!=="idle"&&I.data===void 0)p&&(M=wn(i,a,Z,u2,V,m,n));else{let X={...z,defaultShouldRevalidate:H?!1:p};as(V,X)&&(M=wn(i,a,Z,u2,V,m,n,X))}M&&c2.push({key:K,routeId:i2.routeId,path:i2.path,matches:M,match:V,request:Z,controller:Q})}),{dsMatches:r2,revalidatingFetchers:c2}}function _c(t,n,i){if(t.lazy)return!0;if(!t.loader)return!1;let a=n!=null&&t.id in n,l=i!=null&&i[t.id]!==void 0;return!a&&l?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!a&&!l}function ex(t,n,i){let a=!n||i.route.id!==n.route.id,l=!t.hasOwnProperty(i.route.id);return a||l}function tx(t,n){let i=t.route.path;return t.pathname!==n.pathname||i!=null&&i.endsWith("*")&&t.params["*"]!==n.params["*"]}function as(t,n){if(t.route.shouldRevalidate){let i=t.route.shouldRevalidate(n);if(typeof i=="boolean")return i}return n.defaultShouldRevalidate}function u3(t,n,i,a,l){let A;if(t){let C=a[t];k2(C,`No route found to patch children into: routeId = ${t}`),C.children||(C.children=[]),A=C.children}else A=i;let u=n.filter(C=>!A.some(m=>Zp(C,m))),f=os(u,l,[t||"_","patch",String((A==null?void 0:A.length)||"0")],a);A.push(...f)}function Zp(t,n){return"id"in t&&"id"in n&&t.id===n.id?!0:t.index===n.index&&t.path===n.path&&t.caseSensitive===n.caseSensitive?(!t.children||t.children.length===0)&&(!n.children||n.children.length===0)?!0:t.children.every((i,a)=>{var l;return(l=n.children)==null?void 0:l.some(A=>Zp(i,A))}):!1}var f3=new WeakMap,Kp=({key:t,route:n,manifest:i,mapRouteProperties:a})=>{let l=i[n.id];if(k2(l,"No route found in manifest"),!l.lazy||typeof l.lazy!="object")return;let A=l.lazy[t];if(!A)return;let u=f3.get(l);u||(u={},f3.set(l,u));let f=u[t];if(f)return f;let C=(async()=>{let m=Sy(t),p=l[t]!==void 0&&t!=="hasErrorBoundary";if(m)g0(!m,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),u[t]=Promise.resolve();else if(p)g0(!1,`Route "${l.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let v=await A();v!=null&&(Object.assign(l,{[t]:v}),Object.assign(l,a(l)))}typeof l.lazy=="object"&&(l.lazy[t]=void 0,Object.values(l.lazy).every(v=>v===void 0)&&(l.lazy=void 0))})();return u[t]=C,C},d3=new WeakMap;function rx(t,n,i,a,l){let A=i[t.id];if(k2(A,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let D=d3.get(A);if(D)return{lazyRoutePromise:D,lazyHandlerPromise:D};let p=(async()=>{k2(typeof t.lazy=="function","No lazy route function found");let v=await t.lazy(),B={};for(let y in v){let x=v[y];if(x===void 0)continue;let S=Ry(y),w=A[y]!==void 0&&y!=="hasErrorBoundary";S?g0(!S,"Route property "+y+" is not a supported property to be returned from a lazy route function. This property will be ignored."):w?g0(!w,`Route "${A.id}" has a static property "${y}" defined but its lazy function is also returning a value for this property. The lazy route property "${y}" will be ignored.`):B[y]=x}Object.assign(A,B),Object.assign(A,{...a(A),lazy:void 0})})();return d3.set(A,p),p.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:p}}let u=Object.keys(t.lazy),f=[],C;for(let D of u){if(l&&l.includes(D))continue;let p=Kp({key:D,route:t,manifest:i,mapRouteProperties:a});p&&(f.push(p),D===n&&(C=p))}let m=f.length>0?Promise.all(f).then(()=>{}):void 0;return m==null||m.catch(()=>{}),C==null||C.catch(()=>{}),{lazyRoutePromise:m,lazyHandlerPromise:C}}async function m3(t){let n=t.matches.filter(l=>l.shouldLoad),i={};return(await Promise.all(n.map(l=>l.resolve()))).forEach((l,A)=>{i[n[A].route.id]=l}),i}async function nx(t){return t.matches.some(n=>n.route.unstable_middleware)?Xp(t,!1,()=>m3(t),(n,i)=>({[i]:{type:"error",result:n}})):m3(t)}async function Xp(t,n,i,a){let{matches:l,request:A,params:u,context:f}=t,C={handlerResult:void 0};try{let m=l.flatMap(p=>p.route.unstable_middleware?p.route.unstable_middleware.map(v=>[p.route.id,v]):[]),D=await Qp({request:A,params:u,context:f},m,n,C,i);return n?D:C.handlerResult}catch(m){if(!C.middlewareError)throw m;let D=await a(C.middlewareError.error,C.middlewareError.routeId);return C.handlerResult?Object.assign(C.handlerResult,D):D}}async function Qp(t,n,i,a,l,A=0){let{request:u}=t;if(u.signal.aborted)throw u.signal.reason?u.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${u.method} ${u.url}`);let f=n[A];if(!f)return a.handlerResult=await l(),a.handlerResult;let[C,m]=f,D=!1,p,v=async()=>{if(D)throw new Error("You may only call `next()` once per middleware");D=!0,await Qp(t,n,i,a,l,A+1)};try{let B=await m({request:t.request,params:t.params,context:t.context},v);return D?B===void 0?p:B:v()}catch(B){throw a.middlewareError?a.middlewareError.error!==B&&(a.middlewareError={routeId:C,error:B}):a.middlewareError={routeId:C,error:B},B}}function Jp(t,n,i,a,l){let A=Kp({key:"unstable_middleware",route:a.route,manifest:n,mapRouteProperties:t}),u=rx(a.route,ae(i.method)?"action":"loader",n,t,l);return{middleware:A,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function kc(t,n,i,a,l,A,u,f=null){let C=!1,m=Jp(t,n,i,a,l);return{...a,_lazyPromises:m,shouldLoad:u,unstable_shouldRevalidateArgs:f,unstable_shouldCallHandler(D){return C=!0,f?typeof D=="boolean"?as(a,{...f,defaultShouldRevalidate:D}):as(a,f):u},resolve(D){return C||u||D&&i.method==="GET"&&(a.route.lazy||a.route.loader)?ix({request:i,match:a,lazyHandlerPromise:m==null?void 0:m.handler,lazyRoutePromise:m==null?void 0:m.route,handlerOverride:D,scopedContext:A}):Promise.resolve({type:"data",result:void 0})}}}function wn(t,n,i,a,l,A,u,f=null){return a.map(C=>C.route.id!==l.route.id?{...C,shouldLoad:!1,unstable_shouldRevalidateArgs:f,unstable_shouldCallHandler:()=>!1,_lazyPromises:Jp(t,n,i,C,A),resolve:()=>Promise.resolve({type:"data",result:void 0})}:kc(t,n,i,C,A,u,!0,f))}async function ox(t,n,i,a,l,A){i.some(m=>{var D;return(D=m._lazyPromises)==null?void 0:D.middleware})&&await Promise.all(i.map(m=>{var D;return(D=m._lazyPromises)==null?void 0:D.middleware}));let u={request:n,params:i[0].params,context:l,matches:i},C=await t({...u,fetcherKey:a,unstable_runClientMiddleware:m=>{let D=u;return Xp(D,!1,()=>m({...D,fetcherKey:a,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(p,v)=>({[v]:{type:"error",result:p}}))}});try{await Promise.all(i.flatMap(m=>{var D,p;return[(D=m._lazyPromises)==null?void 0:D.handler,(p=m._lazyPromises)==null?void 0:p.route]}))}catch{}return C}async function ix({request:t,match:n,lazyHandlerPromise:i,lazyRoutePromise:a,handlerOverride:l,scopedContext:A}){let u,f,C=ae(t.method),m=C?"action":"loader",D=p=>{let v,B=new Promise((S,T)=>v=T);f=()=>v(),t.signal.addEventListener("abort",f);let y=S=>typeof p!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${m}" [routeId: ${n.route.id}]`)):p({request:t,params:n.params,context:A},...S!==void 0?[S]:[]),x=(async()=>{try{return{type:"data",result:await(l?l(T=>y(T)):y())}}catch(S){return{type:"error",result:S}}})();return Promise.race([x,B])};try{let p=C?n.route.action:n.route.loader;if(i||a)if(p){let v,[B]=await Promise.all([D(p).catch(y=>{v=y}),i,a]);if(v!==void 0)throw v;u=B}else{await i;let v=C?n.route.action:n.route.loader;if(v)[u]=await Promise.all([D(v),a]);else if(m==="action"){let B=new URL(t.url),y=B.pathname+B.search;throw ve(405,{method:t.method,pathname:y,routeId:n.route.id})}else return{type:"data",result:void 0}}else if(p)u=await D(p);else{let v=new URL(t.url),B=v.pathname+v.search;throw ve(404,{pathname:B})}}catch(p){return{type:"error",result:p}}finally{f&&t.signal.removeEventListener("abort",f)}return u}async function ax(t){var a,l,A,u,f,C;let{result:n,type:i}=t;if(th(n)){let m;try{let D=n.headers.get("Content-Type");D&&/\bapplication\/json\b/.test(D)?n.body==null?m=null:m=await n.json():m=await n.text()}catch(D){return{type:"error",error:D}}return i==="error"?{type:"error",error:new is(n.status,n.statusText,m),statusCode:n.status,headers:n.headers}:{type:"data",data:m,statusCode:n.status,headers:n.headers}}return i==="error"?B3(n)?n.data instanceof Error?{type:"error",error:n.data,statusCode:(a=n.init)==null?void 0:a.status,headers:(l=n.init)!=null&&l.headers?new Headers(n.init.headers):void 0}:{type:"error",error:new is(((A=n.init)==null?void 0:A.status)||500,void 0,n.data),statusCode:ni(n)?n.status:void 0,headers:(u=n.init)!=null&&u.headers?new Headers(n.init.headers):void 0}:{type:"error",error:n,statusCode:ni(n)?n.status:void 0}:B3(n)?{type:"data",data:n.data,statusCode:(f=n.init)==null?void 0:f.status,headers:(C=n.init)!=null&&C.headers?new Headers(n.init.headers):void 0}:{type:"data",data:n}}function sx(t,n,i,a,l){let A=t.headers.get("Location");if(k2(A,"Redirects returned/thrown from loaders/actions must have a Location header"),!Cu.test(A)){let u=a.slice(0,a.findIndex(f=>f.route.id===i)+1);A=Nc(new URL(n.url),u,l,A),t.headers.set("Location",A)}return t}function C3(t,n,i){if(Cu.test(t)){let a=t,l=a.startsWith("//")?new URL(n.protocol+a):new URL(a),A=Ae(l.pathname,i)!=null;if(l.origin===n.origin&&A)return l.pathname+l.search+l.hash}return t}function Rn(t,n,i,a){let l=t.createURL(eh(n)).toString(),A={signal:i};if(a&&ae(a.formMethod)){let{formMethod:u,formEncType:f}=a;A.method=u.toUpperCase(),f==="application/json"?(A.headers=new Headers({"Content-Type":f}),A.body=JSON.stringify(a.json)):f==="text/plain"?A.body=a.text:f==="application/x-www-form-urlencoded"&&a.formData?A.body=Lc(a.formData):A.body=a.formData}return new Request(l,A)}function Lc(t){let n=new URLSearchParams;for(let[i,a]of t.entries())n.append(i,typeof a=="string"?a:a.name);return n}function p3(t){let n=new FormData;for(let[i,a]of t.entries())n.append(i,a);return n}function lx(t,n,i,a=!1,l=!1){let A={},u=null,f,C=!1,m={},D=i&&ie(i[1])?i[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in n))return;let v=p.route.id,B=n[v];if(k2(!wr(B),"Cannot handle redirect results in processLoaderData"),ie(B)){let y=B.error;if(D!==void 0&&(y=D,D=void 0),u=u||{},l)u[v]=y;else{let x=br(t,v);u[x.route.id]==null&&(u[x.route.id]=y)}a||(A[v]=$p),C||(C=!0,f=ni(B.error)?B.error.status:500),B.headers&&(m[v]=B.headers)}else A[v]=B.data,B.statusCode&&B.statusCode!==200&&!C&&(f=B.statusCode),B.headers&&(m[v]=B.headers)}),D!==void 0&&i&&(u={[i[0]]:D},i[2]&&(A[i[2]]=void 0)),{loaderData:A,errors:u,statusCode:f||200,loaderHeaders:m}}function h3(t,n,i,a,l,A){let{loaderData:u,errors:f}=lx(n,i,a);return l.filter(C=>!C.matches||C.matches.some(m=>m.shouldLoad)).forEach(C=>{let{key:m,match:D,controller:p}=C,v=A[m];if(k2(v,"Did not find corresponding fetcher result"),!(p&&p.signal.aborted))if(ie(v)){let B=br(t.matches,D==null?void 0:D.route.id);f&&f[B.route.id]||(f={...f,[B.route.id]:v.error}),t.fetchers.delete(m)}else if(wr(v))k2(!1,"Unhandled fetcher revalidation redirect");else{let B=Kt(v.data);t.fetchers.set(m,B)}}),{loaderData:u,errors:f}}function D3(t,n,i,a){let l=Object.entries(n).filter(([,A])=>A!==$p).reduce((A,[u,f])=>(A[u]=f,A),{});for(let A of i){let u=A.route.id;if(!n.hasOwnProperty(u)&&t.hasOwnProperty(u)&&A.route.loader&&(l[u]=t[u]),a&&a.hasOwnProperty(u))break}return l}function g3(t){return t?ie(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function br(t,n){return(n?t.slice(0,t.findIndex(a=>a.route.id===n)+1):[...t]).reverse().find(a=>a.route.hasErrorBoundary===!0)||t[0]}function v3(t){let n=t.length===1?t[0]:t.find(i=>i.index||!i.path||i.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:n}],route:n}}function ve(t,{pathname:n,routeId:i,method:a,type:l,message:A}={}){let u="Unknown Server Error",f="Unknown @remix-run/router error";return t===400?(u="Bad Request",a&&n&&i?f=`You made a ${a} request to "${n}" but did not provide a \`loader\` for route "${i}", so there is no way to handle the request.`:l==="invalid-body"&&(f="Unable to encode submission body")):t===403?(u="Forbidden",f=`Route "${i}" does not match URL "${n}"`):t===404?(u="Not Found",f=`No route matches URL "${n}"`):t===405&&(u="Method Not Allowed",a&&n&&i?f=`You made a ${a.toUpperCase()} request to "${n}" but did not provide an \`action\` for route "${i}", so there is no way to handle the request.`:a&&(f=`Invalid request method "${a.toUpperCase()}"`)),new is(t||500,u,new Error(f),!0)}function Na(t){let n=Object.entries(t);for(let i=n.length-1;i>=0;i--){let[a,l]=n[i];if(wr(l))return{key:a,result:l}}}function eh(t){let n=typeof t=="string"?tr(t):t;return Qt({...n,hash:""})}function Ax(t,n){return t.pathname!==n.pathname||t.search!==n.search?!1:t.hash===""?n.hash!=="":t.hash===n.hash?!0:n.hash!==""}function cx(t){return th(t.result)&&$y.has(t.result.status)}function ie(t){return t.type==="error"}function wr(t){return(t&&t.type)==="redirect"}function B3(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function th(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function ux(t){return Yy.has(t.toUpperCase())}function ae(t){return Gy.has(t.toUpperCase())}function pu(t){return new URLSearchParams(t).getAll("index").some(n=>n==="")}function Qo(t,n){let i=typeof n=="string"?tr(n).search:n.search;if(t[t.length-1].route.index&&pu(i||""))return t[t.length-1];let a=Gp(t);return a[a.length-1]}function y3(t){let{formMethod:n,formAction:i,formEncType:a,text:l,formData:A,json:u}=t;if(!(!n||!i||!a)){if(l!=null)return{formMethod:n,formAction:i,formEncType:a,formData:void 0,json:void 0,text:l};if(A!=null)return{formMethod:n,formAction:i,formEncType:a,formData:A,json:void 0,text:void 0};if(u!==void 0)return{formMethod:n,formAction:i,formEncType:a,formData:void 0,json:u,text:void 0}}}function nc(t,n){return n?{state:"loading",location:t,formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function fx(t,n){return{state:"submitting",location:t,formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text}}function $o(t,n){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:n}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function dx(t,n){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:n?n.data:void 0}}function Kt(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function mx(t,n){try{let i=t.sessionStorage.getItem(Yp);if(i){let a=JSON.parse(i);for(let[l,A]of Object.entries(a||{}))A&&Array.isArray(A)&&n.set(l,new Set(A||[]))}}catch{}}function Cx(t,n){if(n.size>0){let i={};for(let[a,l]of n)i[a]=[...l];try{t.sessionStorage.setItem(Yp,JSON.stringify(i))}catch(a){g0(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function px(){let t,n,i=new Promise((a,l)=>{t=async A=>{a(A);try{await i}catch{}},n=async A=>{l(A);try{await i}catch{}}});return{promise:i,resolve:t,reject:n}}var kr=g.createContext(null);kr.displayName="DataRouter";var In=g.createContext(null);In.displayName="DataRouterState";var hu=g.createContext({isTransitioning:!1});hu.displayName="ViewTransition";var rh=g.createContext(new Map);rh.displayName="Fetchers";var hx=g.createContext(null);hx.displayName="Await";var Te=g.createContext(null);Te.displayName="Navigation";var Bs=g.createContext(null);Bs.displayName="Location";var yt=g.createContext({outlet:null,matches:[],isDataRoute:!1});yt.displayName="Route";var Du=g.createContext(null);Du.displayName="RouteError";function Dx(t,{relative:n}={}){k2(On(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=g.useContext(Te),{hash:l,pathname:A,search:u}=li(t,{relative:n}),f=A;return i!=="/"&&(f=A==="/"?i:Ze([i,A])),a.createHref({pathname:f,search:u,hash:l})}function On(){return g.useContext(Bs)!=null}function i0(){return k2(On(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Bs).location}function gx(t){k2(On(),"useMatch() may be used only in the context of a <Router> component.");let{pathname:n}=i0();return g.useMemo(()=>Er(t,Wp(n)),[n,t])}var nh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function oh(t){g.useContext(Te).static||g.useLayoutEffect(t)}function gu(){let{isDataRoute:t}=g.useContext(yt);return t?Mx():vx()}function vx(){k2(On(),"useNavigate() may be used only in the context of a <Router> component.");let t=g.useContext(kr),{basename:n,navigator:i}=g.useContext(Te),{matches:a}=g.useContext(yt),{pathname:l}=i0(),A=JSON.stringify(du(a)),u=g.useRef(!1);return oh(()=>{u.current=!0}),g.useCallback((C,m={})=>{if(g0(u.current,nh),!u.current)return;if(typeof C=="number"){i.go(C);return}let D=mu(C,JSON.parse(A),l,m.relative==="path");t==null&&n!=="/"&&(D.pathname=D.pathname==="/"?n:Ze([n,D.pathname])),(m.replace?i.replace:i.push)(D,m.state,m)},[n,i,A,l,t])}g.createContext(null);function li(t,{relative:n}={}){let{matches:i}=g.useContext(yt),{pathname:a}=i0(),l=JSON.stringify(du(i));return g.useMemo(()=>mu(t,JSON.parse(l),a,n==="path"),[t,l,a,n])}function Bx(t,n,i,a){k2(On(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l,static:A}=g.useContext(Te),{matches:u}=g.useContext(yt),f=u[u.length-1],C=f?f.params:{},m=f?f.pathname:"/",D=f?f.pathnameBase:"/",p=f&&f.route;{let w=p&&p.path||"";ah(m,!p||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let v=i0(),B;B=v;let y=B.pathname||"/",x=y;if(D!=="/"){let w=D.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let S=!A&&i&&i.matches&&i.matches.length>0?i.matches:Dt(t,{pathname:x});return g0(p||S!=null,`No routes matched location "${B.pathname}${B.search}${B.hash}" `),g0(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${B.pathname}${B.search}${B.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Tx(S&&S.map(w=>Object.assign({},w,{params:Object.assign({},C,w.params),pathname:Ze([D,l.encodeLocation?l.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?D:Ze([D,l.encodeLocation?l.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),u,i,a)}function yx(){let t=Px(),n=ni(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},A={padding:"2px 4px",backgroundColor:a},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=g.createElement(g.Fragment,null,g.createElement("p",null,"💿 Hey developer 👋"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:A},"ErrorBoundary")," or"," ",g.createElement("code",{style:A},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},n),i?g.createElement("pre",{style:l},i):null,u)}var xx=g.createElement(yx,null),Fx=class extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?g.createElement(yt.Provider,{value:this.props.routeContext},g.createElement(Du.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Sx({routeContext:t,match:n,children:i}){let a=g.useContext(kr);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(yt.Provider,{value:t},i)}function Tx(t,n=[],i=null,a=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(n.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let l=t,A=i==null?void 0:i.errors;if(A!=null){let C=l.findIndex(m=>m.route.id&&(A==null?void 0:A[m.route.id])!==void 0);k2(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(A).join(",")}`),l=l.slice(0,Math.min(l.length,C+1))}let u=!1,f=-1;if(i)for(let C=0;C<l.length;C++){let m=l[C];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=C),m.route.id){let{loaderData:D,errors:p}=i,v=m.route.loader&&!D.hasOwnProperty(m.route.id)&&(!p||p[m.route.id]===void 0);if(m.route.lazy||v){u=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((C,m,D)=>{let p,v=!1,B=null,y=null;i&&(p=A&&m.route.id?A[m.route.id]:void 0,B=m.route.errorElement||xx,u&&(f<0&&D===0?(ah("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,y=null):f===D&&(v=!0,y=m.route.hydrateFallbackElement||null)));let x=n.concat(l.slice(0,D+1)),S=()=>{let T;return p?T=B:v?T=y:m.route.Component?T=g.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=C,g.createElement(Sx,{match:m,routeContext:{outlet:C,matches:x,isDataRoute:i!=null},children:T})};return i&&(m.route.ErrorBoundary||m.route.errorElement||D===0)?g.createElement(Fx,{location:i.location,revalidation:i.revalidation,component:B,error:p,children:S(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):S()},null)}function vu(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rx(t){let n=g.useContext(kr);return k2(n,vu(t)),n}function Bu(t){let n=g.useContext(In);return k2(n,vu(t)),n}function bx(t){let n=g.useContext(yt);return k2(n,vu(t)),n}function yu(t){let n=bx(t),i=n.matches[n.matches.length-1];return k2(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function wx(){return yu("useRouteId")}function Ex(){return Bu("useNavigation").navigation}function ih(){let{matches:t,loaderData:n}=Bu("useMatches");return g.useMemo(()=>t.map(i=>jp(i,n)),[t,n])}function Px(){var a;let t=g.useContext(Du),n=Bu("useRouteError"),i=yu("useRouteError");return t!==void 0?t:(a=n.errors)==null?void 0:a[i]}function Mx(){let{router:t}=Rx("useNavigate"),n=yu("useNavigate"),i=g.useRef(!1);return oh(()=>{i.current=!0}),g.useCallback(async(l,A={})=>{g0(i.current,nh),i.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:n,...A}))},[t,n])}var x3={};function ah(t,n,i){!n&&!x3[t]&&(x3[t]=!0,g0(!1,i))}var F3={};function S3(t,n){!t&&!F3[n]&&(F3[n]=!0,console.warn(n))}function Nx(t){let n={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&g0(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(n,{element:g.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&g0(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(n,{hydrateFallbackElement:g.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&g0(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(n,{errorElement:g.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),n}var _x=["HydrateFallback","hydrateFallbackElement"],kx=class{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",t(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",n(i))}})}};function Lx({router:t,flushSync:n}){let[i,a]=g.useState(t.state),[l,A]=g.useState(),[u,f]=g.useState({isTransitioning:!1}),[C,m]=g.useState(),[D,p]=g.useState(),[v,B]=g.useState(),y=g.useRef(new Map),x=g.useCallback((R,{deletedFetchers:P,flushSync:N,viewTransitionOpts:E})=>{R.fetchers.forEach((H,z)=>{H.data!==void 0&&y.current.set(z,H.data)}),P.forEach(H=>y.current.delete(H)),S3(N===!1||n!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let L=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(S3(E==null||L,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!E||!L){n&&N?n(()=>a(R)):g.startTransition(()=>a(R));return}if(n&&N){n(()=>{D&&(C&&C.resolve(),D.skipTransition()),f({isTransitioning:!0,flushSync:!0,currentLocation:E.currentLocation,nextLocation:E.nextLocation})});let H=t.window.document.startViewTransition(()=>{n(()=>a(R))});H.finished.finally(()=>{n(()=>{m(void 0),p(void 0),A(void 0),f({isTransitioning:!1})})}),n(()=>p(H));return}D?(C&&C.resolve(),D.skipTransition(),B({state:R,currentLocation:E.currentLocation,nextLocation:E.nextLocation})):(A(R),f({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}))},[t.window,n,D,C]);g.useLayoutEffect(()=>t.subscribe(x),[t,x]),g.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new kx)},[u]),g.useEffect(()=>{if(C&&l&&t.window){let R=l,P=C.promise,N=t.window.document.startViewTransition(async()=>{g.startTransition(()=>a(R)),await P});N.finished.finally(()=>{m(void 0),p(void 0),A(void 0),f({isTransitioning:!1})}),p(N)}},[l,C,t.window]),g.useEffect(()=>{C&&l&&i.location.key===l.location.key&&C.resolve()},[C,D,i.location,l]),g.useEffect(()=>{!u.isTransitioning&&v&&(A(v.state),f({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),B(void 0))},[u.isTransitioning,v]);let S=g.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:R=>t.navigate(R),push:(R,P,N)=>t.navigate(R,{state:P,preventScrollReset:N==null?void 0:N.preventScrollReset}),replace:(R,P,N)=>t.navigate(R,{replace:!0,state:P,preventScrollReset:N==null?void 0:N.preventScrollReset})}),[t]),T=t.basename||"/",w=g.useMemo(()=>({router:t,navigator:S,static:!1,basename:T}),[t,S,T]);return g.createElement(g.Fragment,null,g.createElement(kr.Provider,{value:w},g.createElement(In.Provider,{value:i},g.createElement(rh.Provider,{value:y.current},g.createElement(hu.Provider,{value:u},g.createElement(qx,{basename:T,location:i.location,navigationType:i.historyAction,navigator:S},g.createElement(Ix,{routes:t.routes,future:t.future,state:i})))))),null)}var Ix=g.memo(Ox);function Ox({routes:t,future:n,state:i}){return Bx(t,void 0,i,n)}function qx({basename:t="/",children:n=null,location:i,navigationType:a="POP",navigator:l,static:A=!1}){k2(!On(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),f=g.useMemo(()=>({basename:u,navigator:l,static:A,future:{}}),[u,l,A]);typeof i=="string"&&(i=tr(i));let{pathname:C="/",search:m="",hash:D="",state:p=null,key:v="default"}=i,B=g.useMemo(()=>{let y=Ae(C,u);return y==null?null:{location:{pathname:y,search:m,hash:D,state:p,key:v},navigationType:a}},[u,C,m,D,p,v,a]);return g0(B!=null,`<Router basename="${u}"> is not able to match the URL "${C}${m}${D}" because it does not start with the basename, so the <Router> won't render anything.`),B==null?null:g.createElement(Te.Provider,{value:f},g.createElement(Bs.Provider,{children:n,value:B}))}var Ka="get",Xa="application/x-www-form-urlencoded";function ys(t){return t!=null&&typeof t.tagName=="string"}function Hx(t){return ys(t)&&t.tagName.toLowerCase()==="button"}function jx(t){return ys(t)&&t.tagName.toLowerCase()==="form"}function Ux(t){return ys(t)&&t.tagName.toLowerCase()==="input"}function zx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Wx(t,n){return t.button===0&&(!n||n==="_self")&&!zx(t)}var _a=null;function Gx(){if(_a===null)try{new FormData(document.createElement("form"),0),_a=!1}catch{_a=!0}return _a}var Vx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function oc(t){return t!=null&&!Vx.has(t)?(g0(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xa}"`),null):t}function Yx(t,n){let i,a,l,A,u;if(jx(t)){let f=t.getAttribute("action");a=f?Ae(f,n):null,i=t.getAttribute("method")||Ka,l=oc(t.getAttribute("enctype"))||Xa,A=new FormData(t)}else if(Hx(t)||Ux(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let C=t.getAttribute("formaction")||f.getAttribute("action");if(a=C?Ae(C,n):null,i=t.getAttribute("formmethod")||f.getAttribute("method")||Ka,l=oc(t.getAttribute("formenctype"))||oc(f.getAttribute("enctype"))||Xa,A=new FormData(f,t),!Gx()){let{name:m,type:D,value:p}=t;if(D==="image"){let v=m?`${m}.`:"";A.append(`${v}x`,"0"),A.append(`${v}y`,"0")}else m&&A.append(m,p)}}else{if(ys(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Ka,a=null,l=Xa,u=t}return A&&l==="text/plain"&&(u=A,A=void 0),{action:a,method:i.toLowerCase(),encType:l,formData:A,body:u}}function xu(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}async function $x(t,n){if(t.id in n)return n[t.id];try{let i=await import(t.module);return n[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Zx(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Kx(t,n,i){let a=await Promise.all(t.map(async l=>{let A=n.routes[l.route.id];if(A){let u=await $x(A,i);return u.links?u.links():[]}return[]}));return e5(a.flat(1).filter(Zx).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function T3(t,n,i,a,l,A){let u=(C,m)=>i[m]?C.route.id!==i[m].route.id:!0,f=(C,m)=>{var D;return i[m].pathname!==C.pathname||((D=i[m].route.path)==null?void 0:D.endsWith("*"))&&i[m].params["*"]!==C.params["*"]};return A==="assets"?n.filter((C,m)=>u(C,m)||f(C,m)):A==="data"?n.filter((C,m)=>{var p;let D=a.routes[C.route.id];if(!D||!D.hasLoader)return!1;if(u(C,m)||f(C,m))return!0;if(C.route.shouldRevalidate){let v=C.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((p=i[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:C.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Xx(t,n,{includeHydrateFallback:i}={}){return Qx(t.map(a=>{let l=n.routes[a.route.id];if(!l)return[];let A=[l.module];return l.clientActionModule&&(A=A.concat(l.clientActionModule)),l.clientLoaderModule&&(A=A.concat(l.clientLoaderModule)),i&&l.hydrateFallbackModule&&(A=A.concat(l.hydrateFallbackModule)),l.imports&&(A=A.concat(l.imports)),A}).flat(1))}function Qx(t){return[...new Set(t)]}function Jx(t){let n={},i=Object.keys(t).sort();for(let a of i)n[a]=t[a];return n}function e5(t,n){let i=new Set;return new Set(n),t.reduce((a,l)=>{let A=JSON.stringify(Jx(l));return i.has(A)||(i.add(A),a.push({key:A,link:l})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var t5=new Set([100,101,204,205]);function r5(t,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname="_root.data":n&&Ae(i.pathname,n)==="/"?i.pathname=`${n.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function sh(){let t=g.useContext(kr);return xu(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function n5(){let t=g.useContext(In);return xu(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var xs=g.createContext(void 0);xs.displayName="FrameworkContext";function lh(){let t=g.useContext(xs);return xu(t,"You must render this element inside a <HydratedRouter> element"),t}function o5(t,n){let i=g.useContext(xs),[a,l]=g.useState(!1),[A,u]=g.useState(!1),{onFocus:f,onBlur:C,onMouseEnter:m,onMouseLeave:D,onTouchStart:p}=n,v=g.useRef(null);g.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let x=T=>{T.forEach(w=>{u(w.isIntersecting)})},S=new IntersectionObserver(x,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[t]),g.useEffect(()=>{if(a){let x=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(x)}}},[a]);let B=()=>{l(!0)},y=()=>{l(!1),u(!1)};return i?t!=="intent"?[A,v,{}]:[A,v,{onFocus:Zo(f,B),onBlur:Zo(C,y),onMouseEnter:Zo(m,B),onMouseLeave:Zo(D,y),onTouchStart:Zo(p,B)}]:[!1,v,{}]}function Zo(t,n){return i=>{t&&t(i),i.defaultPrevented||n(i)}}function i5({page:t,...n}){let{router:i}=sh(),a=g.useMemo(()=>Dt(i.routes,t,i.basename),[i.routes,t,i.basename]);return a?g.createElement(s5,{page:t,matches:a,...n}):null}function a5(t){let{manifest:n,routeModules:i}=lh(),[a,l]=g.useState([]);return g.useEffect(()=>{let A=!1;return Kx(t,n,i).then(u=>{A||l(u)}),()=>{A=!0}},[t,n,i]),a}function s5({page:t,matches:n,...i}){let a=i0(),{manifest:l,routeModules:A}=lh(),{basename:u}=sh(),{loaderData:f,matches:C}=n5(),m=g.useMemo(()=>T3(t,n,C,l,a,"data"),[t,n,C,l,a]),D=g.useMemo(()=>T3(t,n,C,l,a,"assets"),[t,n,C,l,a]),p=g.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let y=new Set,x=!1;if(n.forEach(T=>{var R;let w=l.routes[T.route.id];!w||!w.hasLoader||(!m.some(P=>P.route.id===T.route.id)&&T.route.id in f&&((R=A[T.route.id])!=null&&R.shouldRevalidate)||w.hasClientLoader?x=!0:y.add(T.route.id))}),y.size===0)return[];let S=r5(t,u);return x&&y.size>0&&S.searchParams.set("_routes",n.filter(T=>y.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[u,f,a,l,m,n,t,A]),v=g.useMemo(()=>Xx(D,l),[D,l]),B=a5(D);return g.createElement(g.Fragment,null,p.map(y=>g.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...i})),v.map(y=>g.createElement("link",{key:y,rel:"modulepreload",href:y,...i})),B.map(({key:y,link:x})=>g.createElement("link",{key:y,...x})))}function l5(...t){return n=>{t.forEach(i=>{typeof i=="function"?i(n):i!=null&&(i.current=n)})}}var Ah=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ah&&(window.__reactRouterVersion="7.6.0")}catch{}function A5(t,n){return Qy({basename:n==null?void 0:n.basename,unstable_getContext:n==null?void 0:n.unstable_getContext,future:n==null?void 0:n.future,history:By({window:n==null?void 0:n.window}),hydrationData:(n==null?void 0:n.hydrationData)||c5(),routes:t,mapRouteProperties:Nx,hydrationRouteProperties:_x,dataStrategy:n==null?void 0:n.dataStrategy,patchRoutesOnNavigation:n==null?void 0:n.patchRoutesOnNavigation,window:n==null?void 0:n.window}).initialize()}function c5(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:u5(t.errors)}),t}function u5(t){if(!t)return null;let n=Object.entries(t),i={};for(let[a,l]of n)if(l&&l.__type==="RouteErrorResponse")i[a]=new is(l.status,l.statusText,l.data,l.internal===!0);else if(l&&l.__type==="Error"){if(l.__subType){let A=window[l.__subType];if(typeof A=="function")try{let u=new A(l.message);u.stack="",i[a]=u}catch{}}if(i[a]==null){let A=new Error(l.message);A.stack="",i[a]=A}}else i[a]=l;return i}var ch=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qn=g.forwardRef(function({onClick:n,discover:i="render",prefetch:a="none",relative:l,reloadDocument:A,replace:u,state:f,target:C,to:m,preventScrollReset:D,viewTransition:p,...v},B){let{basename:y}=g.useContext(Te),x=typeof m=="string"&&ch.test(m),S,T=!1;if(typeof m=="string"&&x&&(S=m,Ah))try{let z=new URL(window.location.href),r2=m.startsWith("//")?new URL(z.protocol+m):new URL(m),c2=Ae(r2.pathname,y);r2.origin===z.origin&&c2!=null?m=c2+r2.search+r2.hash:T=!0}catch{g0(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=Dx(m,{relative:l}),[R,P,N]=o5(a,v),E=C5(m,{replace:u,state:f,target:C,preventScrollReset:D,relative:l,viewTransition:p});function L(z){n&&n(z),z.defaultPrevented||E(z)}let H=g.createElement("a",{...v,...N,href:S||w,onClick:T||A?n:L,ref:l5(B,P),target:C,"data-discover":!x&&i==="render"?"true":void 0});return R&&!x?g.createElement(g.Fragment,null,H,g.createElement(i5,{page:w})):H});qn.displayName="Link";var f5=g.forwardRef(function({"aria-current":n="page",caseSensitive:i=!1,className:a="",end:l=!1,style:A,to:u,viewTransition:f,children:C,...m},D){let p=li(u,{relative:m.relative}),v=i0(),B=g.useContext(In),{navigator:y,basename:x}=g.useContext(Te),S=B!=null&&y5(p)&&f===!0,T=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,w=v.pathname,R=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;i||(w=w.toLowerCase(),R=R?R.toLowerCase():null,T=T.toLowerCase()),R&&x&&(R=Ae(R,x)||R);const P=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let N=w===T||!l&&w.startsWith(T)&&w.charAt(P)==="/",E=R!=null&&(R===T||!l&&R.startsWith(T)&&R.charAt(T.length)==="/"),L={isActive:N,isPending:E,isTransitioning:S},H=N?n:void 0,z;typeof a=="function"?z=a(L):z=[a,N?"active":null,E?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let r2=typeof A=="function"?A(L):A;return g.createElement(qn,{...m,"aria-current":H,className:z,ref:D,style:r2,to:u,viewTransition:f},typeof C=="function"?C(L):C)});f5.displayName="NavLink";var d5=g.forwardRef(({discover:t="render",fetcherKey:n,navigate:i,reloadDocument:a,replace:l,state:A,method:u=Ka,action:f,onSubmit:C,relative:m,preventScrollReset:D,viewTransition:p,...v},B)=>{let y=D5(),x=g5(f,{relative:m}),S=u.toLowerCase()==="get"?"get":"post",T=typeof f=="string"&&ch.test(f),w=R=>{if(C&&C(R),R.defaultPrevented)return;R.preventDefault();let P=R.nativeEvent.submitter,N=(P==null?void 0:P.getAttribute("formmethod"))||u;y(P||R.currentTarget,{fetcherKey:n,method:N,navigate:i,replace:l,state:A,relative:m,preventScrollReset:D,viewTransition:p})};return g.createElement("form",{ref:B,method:S,action:x,onSubmit:a?C:w,...v,"data-discover":!T&&t==="render"?"true":void 0})});d5.displayName="Form";function uh({getKey:t,storageKey:n,...i}){let a=g.useContext(xs),{basename:l}=g.useContext(Te),A=i0(),u=ih();v5({getKey:t,storageKey:n});let f=g.useMemo(()=>{if(!a||!t)return null;let m=Oc(A,u,l,t);return m!==A.key?m:null},[]);if(!a||a.isSpaMode)return null;let C=((m,D)=>{if(!window.history.state||!window.history.state.key){let p=Math.random().toString(32).slice(2);window.history.replaceState({key:p},"")}try{let v=JSON.parse(sessionStorage.getItem(m)||"{}")[D||window.history.state.key];typeof v=="number"&&window.scrollTo(0,v)}catch(p){console.error(p),sessionStorage.removeItem(m)}}).toString();return g.createElement("script",{...i,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${C})(${JSON.stringify(n||Ic)}, ${JSON.stringify(f)})`}})}uh.displayName="ScrollRestoration";function fh(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Fu(t){let n=g.useContext(kr);return k2(n,fh(t)),n}function m5(t){let n=g.useContext(In);return k2(n,fh(t)),n}function C5(t,{target:n,replace:i,state:a,preventScrollReset:l,relative:A,viewTransition:u}={}){let f=gu(),C=i0(),m=li(t,{relative:A});return g.useCallback(D=>{if(Wx(D,n)){D.preventDefault();let p=i!==void 0?i:Qt(C)===Qt(m);f(t,{replace:p,state:a,preventScrollReset:l,relative:A,viewTransition:u})}},[C,f,m,i,a,n,t,l,A,u])}var p5=0,h5=()=>`__${String(++p5)}__`;function D5(){let{router:t}=Fu("useSubmit"),{basename:n}=g.useContext(Te),i=wx();return g.useCallback(async(a,l={})=>{let{action:A,method:u,encType:f,formData:C,body:m}=Yx(a,n);if(l.navigate===!1){let D=l.fetcherKey||h5();await t.fetch(D,i,l.action||A,{preventScrollReset:l.preventScrollReset,formData:C,body:m,formMethod:l.method||u,formEncType:l.encType||f,flushSync:l.flushSync})}else await t.navigate(l.action||A,{preventScrollReset:l.preventScrollReset,formData:C,body:m,formMethod:l.method||u,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:i,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,n,i])}function g5(t,{relative:n}={}){let{basename:i}=g.useContext(Te),a=g.useContext(yt);k2(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),A={...li(t||".",{relative:n})},u=i0();if(t==null){A.search=u.search;let f=new URLSearchParams(A.search),C=f.getAll("index");if(C.some(D=>D==="")){f.delete("index"),C.filter(p=>p).forEach(p=>f.append("index",p));let D=f.toString();A.search=D?`?${D}`:""}}return(!t||t===".")&&l.route.index&&(A.search=A.search?A.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(A.pathname=A.pathname==="/"?i:Ze([i,A.pathname])),Qt(A)}var Ic="react-router-scroll-positions",ka={};function Oc(t,n,i,a){let l=null;return a&&(i!=="/"?l=a({...t,pathname:Ae(t.pathname,i)||t.pathname},n):l=a(t,n)),l==null&&(l=t.key),l}function v5({getKey:t,storageKey:n}={}){let{router:i}=Fu("useScrollRestoration"),{restoreScrollPosition:a,preventScrollReset:l}=m5("useScrollRestoration"),{basename:A}=g.useContext(Te),u=i0(),f=ih(),C=Ex();g.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),B5(g.useCallback(()=>{if(C.state==="idle"){let m=Oc(u,f,A,t);ka[m]=window.scrollY}try{sessionStorage.setItem(n||Ic,JSON.stringify(ka))}catch(m){g0(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${m}).`)}window.history.scrollRestoration="auto"},[C.state,t,A,u,f,n])),typeof document<"u"&&(g.useLayoutEffect(()=>{try{let m=sessionStorage.getItem(n||Ic);m&&(ka=JSON.parse(m))}catch{}},[n]),g.useLayoutEffect(()=>{let m=i==null?void 0:i.enableScrollRestoration(ka,()=>window.scrollY,t?(D,p)=>Oc(D,p,A,t):void 0);return()=>m&&m()},[i,A,t]),g.useLayoutEffect(()=>{if(a!==!1){if(typeof a=="number"){window.scrollTo(0,a);return}if(u.hash){let m=document.getElementById(decodeURIComponent(u.hash.slice(1)));if(m){m.scrollIntoView();return}}l!==!0&&window.scrollTo(0,0)}},[u,a,l]))}function B5(t,n){let{capture:i}={};g.useEffect(()=>{let a=i!=null?{capture:i}:void 0;return window.addEventListener("pagehide",t,a),()=>{window.removeEventListener("pagehide",t,a)}},[t,i])}function y5(t,n={}){let i=g.useContext(hu);k2(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Fu("useViewTransitionState"),l=li(t,{relative:n.relative});if(!i.isTransitioning)return!1;let A=Ae(i.currentLocation.pathname,a)||i.currentLocation.pathname,u=Ae(i.nextLocation.pathname,a)||i.nextLocation.pathname;return Er(l.pathname,u)!=null||Er(l.pathname,A)!=null}[...t5];function qc(t){return Array.isArray(t)?t.map(qc):typeof t=="object"&&t!==null?Object.keys(t).reduce((n,i)=>(n[i]=qc(t[i]),n),{}):typeof t=="string"&&t.includes("_vocs-fn_")?new Function(`return ${t.slice(9)}`)():t}const dh=qc({aiCta:!0,blogDir:"./pages/blog",rootDir:"docs",title:"MCP-Go",titleTemplate:"%s – MCP-Go",baseUrl:"https://mcp-go.dev",basePath:"",logoUrl:"/logo.png",description:"A Go implementation of the Model Context Protocol (MCP), enabling seamless integration between LLM applications and external data sources and tools.",sidebar:[{text:"Getting Started",link:"/getting-started"},{text:"Quick Start",link:"/quick-start"},{text:"Core Concepts",link:"/core-concepts"},{text:"Building MCP Servers",collapsed:!1,items:[{text:"Overview",link:"/servers"},{text:"Server Basics",link:"/servers/basics"},{text:"Resources",link:"/servers/resources"},{text:"Tools",link:"/servers/tools"},{text:"Prompts",link:"/servers/prompts"},{text:"Advanced Features",link:"/servers/advanced"}]},{text:"Transport Options",collapsed:!1,items:[{text:"Overview",link:"/transports"},{text:"STDIO Transport",link:"/transports/stdio"},{text:"SSE Transport",link:"/transports/sse"},{text:"HTTP Transport",link:"/transports/http"},{text:"In-Process Transport",link:"/transports/inprocess"}]},{text:"Building MCP Clients",collapsed:!1,items:[{text:"Overview",link:"/clients"},{text:"Client Basics",link:"/clients/basics"},{text:"Client Operations",link:"/clients/operations"},{text:"Client Transports",link:"/clients/transports"}]}],socials:[{icon:"github",link:"https://github.com/mark3labs/mcp-go",label:"GitHub",type:"github"}],font:{},markdown:{code:{themes:{dark:"github-dark-dimmed",light:"github-light"}}},topNav:[],theme:{},vite:{}}),x5="modulepreload",F5=function(t){return"/"+t},R3={},H2=function(n,i,a){let l=Promise.resolve();if(i&&i.length>0){let u=function(m){return Promise.all(m.map(D=>Promise.resolve(D).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),C=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));l=u(i.map(m=>{if(m=F5(m),m in R3)return;R3[m]=!0;const D=m.endsWith(".css"),p=D?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${p}`))return;const v=document.createElement("link");if(v.rel=D?"stylesheet":x5,D||(v.as="script"),v.crossOrigin="",v.href=m,C&&v.setAttribute("nonce",C),document.head.appendChild(v),D)return new Promise((B,y)=>{v.addEventListener("load",B),v.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${m}`)))})}))}function A(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return l.then(u=>{for(const f of u||[])f.status==="rejected"&&A(f.reason);return n().catch(A)})},mh=g.createContext(dh);function Ch(){return dh}function S5({children:t,config:n}){const[i,a]=g.useState(()=>n||Ch());return g.useEffect(()=>{},[]),g.useEffect(()=>{},[i]),h.jsx(mh.Provider,{value:i,children:t})}function C0(){return g.useContext(mh)}const Su=[{lazy:()=>H2(()=>import("./core-concepts-C_8CA0eK.js"),[]),path:"/core-concepts",type:"mdx",filePath:"core-concepts.mdx",content:"%23%20Core%20Concepts%0A%0AUnderstanding%20the%20fundamental%20concepts%20of%20MCP%20and%20how%20MCP-Go%20implements%20them%20is%20essential%20for%20building%20effective%20MCP%20servers%20and%20clients.%0A%0A%23%23%20MCP%20Protocol%20Fundamentals%0A%0AThe%20Model%20Context%20Protocol%20defines%20four%20core%20concepts%20that%20enable%20LLMs%20to%20interact%20with%20external%20systems%20safely%20and%20effectively.%0A%0A%23%23%23%20Resources%0A%0AResources%20are%20like%20GET%20endpoints%20-%20they%20expose%20data%20to%20LLMs%20in%20a%20read-only%20manner.%20Think%20of%20them%20as%20files%2C%20database%20records%2C%20or%20API%20responses%20that%20an%20LLM%20can%20access.%0A%0A**Key%20characteristics%3A**%0A-%20**Read-only**%3A%20LLMs%20can%20fetch%20but%20not%20modify%20resources%0A-%20**URI-based**%3A%20Each%20resource%20has%20a%20unique%20identifier%0A-%20**Typed%20content**%3A%20Resources%20specify%20their%20MIME%20type%20(text%2C%20JSON%2C%20binary%2C%20etc.)%0A-%20**Dynamic%20or%20static**%3A%20Can%20be%20pre-defined%20or%20generated%20on-demand%0A%0A**Example%20use%20cases%3A**%0A-%20File%20system%20access%20(%60file%3A%2F%2F%2Fpath%2Fto%2Fdocument.txt%60)%0A-%20Database%20records%20(%60db%3A%2F%2Fusers%2F123%60)%0A-%20API%20data%20(%60api%3A%2F%2Fweather%2Fcurrent%60)%0A-%20Configuration%20files%20(%60config%3A%2F%2Fapp.json%60)%0A%0A%60%60%60go%0A%2F%2F%20Static%20resource%0Aresource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22docs%3A%2F%2Freadme%22%2C%0A%20%20%20%20%22Project%20README%22%2C%0A%20%20%20%20mcp.WithResourceDescription(%22The%20project's%20main%20documentation%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A)%0A%0A%2F%2F%20Dynamic%20resource%20with%20template%0AuserResource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22users%3A%2F%2F%7Buser_id%7D%22%2C%0A%20%20%20%20%22User%20Profile%22%2C%0A%20%20%20%20mcp.WithResourceDescription(%22User%20profile%20information%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Tools%0A%0ATools%20are%20like%20POST%20endpoints%20-%20they%20provide%20functionality%20that%20LLMs%20can%20invoke%20to%20take%20actions%20or%20perform%20computations.%0A%0A**Key%20characteristics%3A**%0A-%20**Action-oriented**%3A%20Tools%20do%20things%20rather%20than%20just%20return%20data%0A-%20**Parameterized**%3A%20Accept%20structured%20input%20arguments%0A-%20**Typed%20schemas**%3A%20Define%20expected%20parameter%20types%20and%20constraints%0A-%20**Return%20results**%3A%20Provide%20structured%20output%20back%20to%20the%20LLM%0A%0A**Example%20use%20cases%3A**%0A-%20Calculations%20(%60calculate%60%2C%20%60convert_units%60)%0A-%20File%20operations%20(%60create_file%60%2C%20%60search_files%60)%0A-%20API%20calls%20(%60send_email%60%2C%20%60create_ticket%60)%0A-%20System%20commands%20(%60run_command%60%2C%20%60check_status%60)%0A%0A%60%60%60go%0A%2F%2F%20Simple%20calculation%20tool%0AcalcTool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20mcp.WithDescription(%22Perform%20arithmetic%20operations%22)%2C%0A%20%20%20%20mcp.WithString(%22operation%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Enum(%22add%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22divide%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required())%2C%0A)%0A%0A%2F%2F%20File%20creation%20tool%0AfileTool%20%3A%3D%20mcp.NewTool(%22create_file%22%2C%0A%20%20%20%20mcp.WithDescription(%22Create%20a%20new%20file%20with%20content%22)%2C%0A%20%20%20%20mcp.WithString(%22path%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithString(%22content%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithString(%22encoding%22%2C%20mcp.Default(%22utf-8%22))%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Prompts%0A%0APrompts%20are%20reusable%20interaction%20templates%20that%20help%20structure%20conversations%20between%20users%20and%20LLMs.%0A%0A**Key%20characteristics%3A**%0A-%20**Template-based**%3A%20Use%20placeholders%20for%20dynamic%20content%0A-%20**Reusable**%3A%20Can%20be%20invoked%20multiple%20times%20with%20different%20arguments%0A-%20**Structured**%3A%20Define%20clear%20input%20parameters%20and%20expected%20outputs%0A-%20**Context-aware**%3A%20Can%20include%20relevant%20resources%20or%20tool%20suggestions%0A%0A**Example%20use%20cases%3A**%0A-%20Code%20review%20templates%0A-%20Documentation%20generation%0A-%20Data%20analysis%20workflows%0A-%20Creative%20writing%20prompts%0A%0A%60%60%60go%0A%2F%2F%20Code%20review%20prompt%0AreviewPrompt%20%3A%3D%20mcp.NewPrompt(%22code_review%22%2C%0A%20%20%20%20mcp.WithPromptDescription(%22Review%20code%20for%20best%20practices%20and%20issues%22)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22code%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22The%20code%20to%20review%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22language%22%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Programming%20language%22)%2C%0A%20%20%20%20)%2C%0A)%0A%0A%2F%2F%20Data%20analysis%20prompt%0AanalysisPrompt%20%3A%3D%20mcp.NewPrompt(%22analyze_data%22%2C%0A%20%20%20%20mcp.WithPromptDescription(%22Analyze%20dataset%20and%20provide%20insights%22)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22dataset_uri%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithPromptArgument(%22focus_areas%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Description(%22Specific%20areas%20to%20focus%20analysis%20on%22)%2C%0A%20%20%20%20)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Transports%0A%0ATransports%20define%20how%20MCP%20clients%20and%20servers%20communicate.%20MCP-Go%20supports%20multiple%20transport%20methods%20to%20fit%20different%20deployment%20scenarios.%0A%0A**Available%20transports%3A**%0A%0A1.%20**Stdio**%20-%20Standard%20input%2Foutput%20(most%20common)%0A%20%20%20-%20Best%20for%3A%20Local%20tools%2C%20CLI%20integration%2C%20desktop%20applications%0A%20%20%20-%20Pros%3A%20Simple%2C%20secure%2C%20no%20network%20setup%0A%20%20%20-%20Cons%3A%20Local%20only%2C%20single%20client%0A%0A2.%20**Server-Sent%20Events%20(SSE)**%20-%20HTTP-based%20streaming%0A%20%20%20-%20Best%20for%3A%20Web%20applications%2C%20real-time%20updates%0A%20%20%20-%20Pros%3A%20Web-friendly%2C%20real-time%2C%20multiple%20clients%0A%20%20%20-%20Cons%3A%20HTTP%20overhead%2C%20one-way%20streaming%0A%0A3.%20**HTTP**%20-%20Traditional%20request%2Fresponse%0A%20%20%20-%20Best%20for%3A%20Web%20services%2C%20REST-like%20APIs%0A%20%20%20-%20Pros%3A%20Standard%20protocol%2C%20caching%2C%20load%20balancing%0A%20%20%20-%20Cons%3A%20No%20real-time%20updates%2C%20more%20complex%0A%0A%60%60%60go%0A%2F%2F%20Stdio%20transport%20(most%20common)%0Aserver.ServeStdio(s)%0A%0A%2F%2F%20HTTP%20transport%0Aserver.ServeHTTP(s%2C%20%22%3A8080%22)%0A%0A%2F%2F%20SSE%20transport%0Aserver.ServeSSE(s%2C%20%22%3A8080%22)%0A%60%60%60%0A%0A%23%23%20SDK%20Architecture%0A%0AMCP-Go%20provides%20a%20clean%20architecture%20that%20abstracts%20the%20complexity%20of%20the%20MCP%20protocol%20while%20giving%20you%20full%20control%20when%20needed.%0A%0A%23%23%23%20Server%20vs%20Client%0A%0AUnderstanding%20when%20to%20build%20servers%20versus%20clients%20is%20crucial%20for%20effective%20MCP%20integration.%0A%0A**MCP%20Servers%3A**%0A-%20**Purpose**%3A%20Expose%20tools%2C%20resources%2C%20and%20prompts%20to%20LLMs%0A-%20**Use%20cases**%3A%20%0A%20%20-%20Database%20access%20layers%0A%20%20-%20File%20system%20tools%0A%20%20-%20API%20integrations%0A%20%20-%20Custom%20business%20logic%0A-%20**Characteristics**%3A%20Passive%2C%20respond%20to%20requests%2C%20stateful%0A%0A%60%60%60go%0A%2F%2F%20Server%20example%20-%20exposes%20functionality%0As%20%3A%3D%20server.NewMCPServer(%22Database%20Tools%22%2C%20%221.0.0%22)%0As.AddTool(queryTool%2C%20handleQuery)%0As.AddResource(tableResource%2C%20handleTableAccess)%0Aserver.ServeStdio(s)%0A%60%60%60%0A%0A**MCP%20Clients%3A**%0A-%20**Purpose**%3A%20Connect%20to%20and%20use%20MCP%20servers%0A-%20**Use%20cases**%3A%0A%20%20-%20LLM%20applications%0A%20%20-%20Orchestration%20tools%0A%20%20-%20Testing%20and%20debugging%0A%20%20-%20Server%20composition%0A-%20**Characteristics**%3A%20Active%2C%20make%20requests%2C%20coordinate%20multiple%20servers%0A%0A%60%60%60go%0A%2F%2F%20Client%20example%20-%20uses%20functionality%0Aclient%20%3A%3D%20client.NewStdioClient(%22database-server%22)%0Atools%2C%20_%20%3A%3D%20client.ListTools(ctx)%0Aresult%2C%20_%20%3A%3D%20client.CallTool(ctx%2C%20queryRequest)%0A%60%60%60%0A%0A%23%23%23%20Transport%20Layer%0A%0AThe%20transport%20layer%20abstracts%20communication%20protocols%2C%20allowing%20you%20to%20focus%20on%20business%20logic%20rather%20than%20protocol%20details.%0A%0A**Key%20benefits%3A**%0A-%20**Protocol%20agnostic**%3A%20Same%20server%20code%20works%20with%20any%20transport%0A-%20**Automatic%20serialization**%3A%20JSON%20marshaling%2Funmarshaling%20handled%20automatically%0A-%20**Error%20handling**%3A%20Transport-specific%20errors%20are%20normalized%0A-%20**Connection%20management**%3A%20Automatic%20reconnection%20and%20cleanup%0A%0A%60%60%60go%0A%2F%2F%20Same%20server%20works%20with%20any%20transport%0As%20%3A%3D%20server.NewMCPServer(%22My%20Server%22%2C%20%221.0.0%22)%0A%0A%2F%2F%20Choose%20transport%20at%20runtime%0Aswitch%20transport%20%7B%0Acase%20%22stdio%22%3A%0A%20%20%20%20server.ServeStdio(s)%0Acase%20%22http%22%3A%0A%20%20%20%20server.ServeHTTP(s%2C%20%22%3A8080%22)%0Acase%20%22sse%22%3A%0A%20%20%20%20server.ServeSSE(s%2C%20%22%3A8080%22)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Session%20Management%0A%0AMCP-Go%20handles%20session%20management%20automatically%2C%20supporting%20multiple%20concurrent%20clients%20with%20proper%20isolation.%0A%0A**Features%3A**%0A-%20**Multi-client%20support**%3A%20Multiple%20LLMs%20can%20connect%20simultaneously%0A-%20**Session%20isolation**%3A%20Each%20client%20has%20independent%20state%0A-%20**Resource%20cleanup**%3A%20Automatic%20cleanup%20when%20clients%20disconnect%0A-%20**Concurrent%20safety**%3A%20Thread-safe%20operations%20across%20all%20sessions%0A%0A**Session%20lifecycle%3A**%0A1.%20**Initialize**%3A%20Client%20connects%20and%20exchanges%20capabilities%0A2.%20**Active**%3A%20Client%20makes%20requests%2C%20server%20responds%0A3.%20**Cleanup**%3A%20Connection%20closes%2C%20resources%20are%20freed%0A%0A%60%60%60go%0A%2F%2F%20Server%20automatically%20handles%20multiple%20sessions%0As%20%3A%3D%20server.NewMCPServer(%22Multi-Client%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20server.WithHooks(%26server.Hooks%7B%0A%20%20%20%20%20%20%20%20OnSessionStart%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20connected%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20OnSessionEnd%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20disconnected%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%2C%0A)%0A%60%60%60%0A%0A**State%20management%20patterns%3A**%0A%0A%60%60%60go%0A%2F%2F%20Per-session%20state%0Atype%20SessionState%20struct%20%7B%0A%20%20%20%20UserID%20%20%20string%0A%20%20%20%20Settings%20map%5Bstring%5Dinterface%7B%7D%0A%7D%0A%0Avar%20sessions%20%3D%20make(map%5Bstring%5D*SessionState)%0A%0Afunc%20toolHandler(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20state%20%3A%3D%20sessions%5BsessionID%5D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20session-specific%20state%0A%20%20%20%20return%20processWithState(state%2C%20req)%0A%7D%0A%60%60%60",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./core-concepts-C_8CA0eK.js"),[]),path:"/core-concepts.html",type:"mdx",filePath:"core-concepts.mdx",content:"%23%20Core%20Concepts%0A%0AUnderstanding%20the%20fundamental%20concepts%20of%20MCP%20and%20how%20MCP-Go%20implements%20them%20is%20essential%20for%20building%20effective%20MCP%20servers%20and%20clients.%0A%0A%23%23%20MCP%20Protocol%20Fundamentals%0A%0AThe%20Model%20Context%20Protocol%20defines%20four%20core%20concepts%20that%20enable%20LLMs%20to%20interact%20with%20external%20systems%20safely%20and%20effectively.%0A%0A%23%23%23%20Resources%0A%0AResources%20are%20like%20GET%20endpoints%20-%20they%20expose%20data%20to%20LLMs%20in%20a%20read-only%20manner.%20Think%20of%20them%20as%20files%2C%20database%20records%2C%20or%20API%20responses%20that%20an%20LLM%20can%20access.%0A%0A**Key%20characteristics%3A**%0A-%20**Read-only**%3A%20LLMs%20can%20fetch%20but%20not%20modify%20resources%0A-%20**URI-based**%3A%20Each%20resource%20has%20a%20unique%20identifier%0A-%20**Typed%20content**%3A%20Resources%20specify%20their%20MIME%20type%20(text%2C%20JSON%2C%20binary%2C%20etc.)%0A-%20**Dynamic%20or%20static**%3A%20Can%20be%20pre-defined%20or%20generated%20on-demand%0A%0A**Example%20use%20cases%3A**%0A-%20File%20system%20access%20(%60file%3A%2F%2F%2Fpath%2Fto%2Fdocument.txt%60)%0A-%20Database%20records%20(%60db%3A%2F%2Fusers%2F123%60)%0A-%20API%20data%20(%60api%3A%2F%2Fweather%2Fcurrent%60)%0A-%20Configuration%20files%20(%60config%3A%2F%2Fapp.json%60)%0A%0A%60%60%60go%0A%2F%2F%20Static%20resource%0Aresource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22docs%3A%2F%2Freadme%22%2C%0A%20%20%20%20%22Project%20README%22%2C%0A%20%20%20%20mcp.WithResourceDescription(%22The%20project's%20main%20documentation%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A)%0A%0A%2F%2F%20Dynamic%20resource%20with%20template%0AuserResource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22users%3A%2F%2F%7Buser_id%7D%22%2C%0A%20%20%20%20%22User%20Profile%22%2C%0A%20%20%20%20mcp.WithResourceDescription(%22User%20profile%20information%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Tools%0A%0ATools%20are%20like%20POST%20endpoints%20-%20they%20provide%20functionality%20that%20LLMs%20can%20invoke%20to%20take%20actions%20or%20perform%20computations.%0A%0A**Key%20characteristics%3A**%0A-%20**Action-oriented**%3A%20Tools%20do%20things%20rather%20than%20just%20return%20data%0A-%20**Parameterized**%3A%20Accept%20structured%20input%20arguments%0A-%20**Typed%20schemas**%3A%20Define%20expected%20parameter%20types%20and%20constraints%0A-%20**Return%20results**%3A%20Provide%20structured%20output%20back%20to%20the%20LLM%0A%0A**Example%20use%20cases%3A**%0A-%20Calculations%20(%60calculate%60%2C%20%60convert_units%60)%0A-%20File%20operations%20(%60create_file%60%2C%20%60search_files%60)%0A-%20API%20calls%20(%60send_email%60%2C%20%60create_ticket%60)%0A-%20System%20commands%20(%60run_command%60%2C%20%60check_status%60)%0A%0A%60%60%60go%0A%2F%2F%20Simple%20calculation%20tool%0AcalcTool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20mcp.WithDescription(%22Perform%20arithmetic%20operations%22)%2C%0A%20%20%20%20mcp.WithString(%22operation%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Enum(%22add%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22divide%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required())%2C%0A)%0A%0A%2F%2F%20File%20creation%20tool%0AfileTool%20%3A%3D%20mcp.NewTool(%22create_file%22%2C%0A%20%20%20%20mcp.WithDescription(%22Create%20a%20new%20file%20with%20content%22)%2C%0A%20%20%20%20mcp.WithString(%22path%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithString(%22content%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithString(%22encoding%22%2C%20mcp.Default(%22utf-8%22))%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Prompts%0A%0APrompts%20are%20reusable%20interaction%20templates%20that%20help%20structure%20conversations%20between%20users%20and%20LLMs.%0A%0A**Key%20characteristics%3A**%0A-%20**Template-based**%3A%20Use%20placeholders%20for%20dynamic%20content%0A-%20**Reusable**%3A%20Can%20be%20invoked%20multiple%20times%20with%20different%20arguments%0A-%20**Structured**%3A%20Define%20clear%20input%20parameters%20and%20expected%20outputs%0A-%20**Context-aware**%3A%20Can%20include%20relevant%20resources%20or%20tool%20suggestions%0A%0A**Example%20use%20cases%3A**%0A-%20Code%20review%20templates%0A-%20Documentation%20generation%0A-%20Data%20analysis%20workflows%0A-%20Creative%20writing%20prompts%0A%0A%60%60%60go%0A%2F%2F%20Code%20review%20prompt%0AreviewPrompt%20%3A%3D%20mcp.NewPrompt(%22code_review%22%2C%0A%20%20%20%20mcp.WithPromptDescription(%22Review%20code%20for%20best%20practices%20and%20issues%22)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22code%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22The%20code%20to%20review%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22language%22%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Programming%20language%22)%2C%0A%20%20%20%20)%2C%0A)%0A%0A%2F%2F%20Data%20analysis%20prompt%0AanalysisPrompt%20%3A%3D%20mcp.NewPrompt(%22analyze_data%22%2C%0A%20%20%20%20mcp.WithPromptDescription(%22Analyze%20dataset%20and%20provide%20insights%22)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22dataset_uri%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithPromptArgument(%22focus_areas%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Description(%22Specific%20areas%20to%20focus%20analysis%20on%22)%2C%0A%20%20%20%20)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Transports%0A%0ATransports%20define%20how%20MCP%20clients%20and%20servers%20communicate.%20MCP-Go%20supports%20multiple%20transport%20methods%20to%20fit%20different%20deployment%20scenarios.%0A%0A**Available%20transports%3A**%0A%0A1.%20**Stdio**%20-%20Standard%20input%2Foutput%20(most%20common)%0A%20%20%20-%20Best%20for%3A%20Local%20tools%2C%20CLI%20integration%2C%20desktop%20applications%0A%20%20%20-%20Pros%3A%20Simple%2C%20secure%2C%20no%20network%20setup%0A%20%20%20-%20Cons%3A%20Local%20only%2C%20single%20client%0A%0A2.%20**Server-Sent%20Events%20(SSE)**%20-%20HTTP-based%20streaming%0A%20%20%20-%20Best%20for%3A%20Web%20applications%2C%20real-time%20updates%0A%20%20%20-%20Pros%3A%20Web-friendly%2C%20real-time%2C%20multiple%20clients%0A%20%20%20-%20Cons%3A%20HTTP%20overhead%2C%20one-way%20streaming%0A%0A3.%20**HTTP**%20-%20Traditional%20request%2Fresponse%0A%20%20%20-%20Best%20for%3A%20Web%20services%2C%20REST-like%20APIs%0A%20%20%20-%20Pros%3A%20Standard%20protocol%2C%20caching%2C%20load%20balancing%0A%20%20%20-%20Cons%3A%20No%20real-time%20updates%2C%20more%20complex%0A%0A%60%60%60go%0A%2F%2F%20Stdio%20transport%20(most%20common)%0Aserver.ServeStdio(s)%0A%0A%2F%2F%20HTTP%20transport%0Aserver.ServeHTTP(s%2C%20%22%3A8080%22)%0A%0A%2F%2F%20SSE%20transport%0Aserver.ServeSSE(s%2C%20%22%3A8080%22)%0A%60%60%60%0A%0A%23%23%20SDK%20Architecture%0A%0AMCP-Go%20provides%20a%20clean%20architecture%20that%20abstracts%20the%20complexity%20of%20the%20MCP%20protocol%20while%20giving%20you%20full%20control%20when%20needed.%0A%0A%23%23%23%20Server%20vs%20Client%0A%0AUnderstanding%20when%20to%20build%20servers%20versus%20clients%20is%20crucial%20for%20effective%20MCP%20integration.%0A%0A**MCP%20Servers%3A**%0A-%20**Purpose**%3A%20Expose%20tools%2C%20resources%2C%20and%20prompts%20to%20LLMs%0A-%20**Use%20cases**%3A%20%0A%20%20-%20Database%20access%20layers%0A%20%20-%20File%20system%20tools%0A%20%20-%20API%20integrations%0A%20%20-%20Custom%20business%20logic%0A-%20**Characteristics**%3A%20Passive%2C%20respond%20to%20requests%2C%20stateful%0A%0A%60%60%60go%0A%2F%2F%20Server%20example%20-%20exposes%20functionality%0As%20%3A%3D%20server.NewMCPServer(%22Database%20Tools%22%2C%20%221.0.0%22)%0As.AddTool(queryTool%2C%20handleQuery)%0As.AddResource(tableResource%2C%20handleTableAccess)%0Aserver.ServeStdio(s)%0A%60%60%60%0A%0A**MCP%20Clients%3A**%0A-%20**Purpose**%3A%20Connect%20to%20and%20use%20MCP%20servers%0A-%20**Use%20cases**%3A%0A%20%20-%20LLM%20applications%0A%20%20-%20Orchestration%20tools%0A%20%20-%20Testing%20and%20debugging%0A%20%20-%20Server%20composition%0A-%20**Characteristics**%3A%20Active%2C%20make%20requests%2C%20coordinate%20multiple%20servers%0A%0A%60%60%60go%0A%2F%2F%20Client%20example%20-%20uses%20functionality%0Aclient%20%3A%3D%20client.NewStdioClient(%22database-server%22)%0Atools%2C%20_%20%3A%3D%20client.ListTools(ctx)%0Aresult%2C%20_%20%3A%3D%20client.CallTool(ctx%2C%20queryRequest)%0A%60%60%60%0A%0A%23%23%23%20Transport%20Layer%0A%0AThe%20transport%20layer%20abstracts%20communication%20protocols%2C%20allowing%20you%20to%20focus%20on%20business%20logic%20rather%20than%20protocol%20details.%0A%0A**Key%20benefits%3A**%0A-%20**Protocol%20agnostic**%3A%20Same%20server%20code%20works%20with%20any%20transport%0A-%20**Automatic%20serialization**%3A%20JSON%20marshaling%2Funmarshaling%20handled%20automatically%0A-%20**Error%20handling**%3A%20Transport-specific%20errors%20are%20normalized%0A-%20**Connection%20management**%3A%20Automatic%20reconnection%20and%20cleanup%0A%0A%60%60%60go%0A%2F%2F%20Same%20server%20works%20with%20any%20transport%0As%20%3A%3D%20server.NewMCPServer(%22My%20Server%22%2C%20%221.0.0%22)%0A%0A%2F%2F%20Choose%20transport%20at%20runtime%0Aswitch%20transport%20%7B%0Acase%20%22stdio%22%3A%0A%20%20%20%20server.ServeStdio(s)%0Acase%20%22http%22%3A%0A%20%20%20%20server.ServeHTTP(s%2C%20%22%3A8080%22)%0Acase%20%22sse%22%3A%0A%20%20%20%20server.ServeSSE(s%2C%20%22%3A8080%22)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Session%20Management%0A%0AMCP-Go%20handles%20session%20management%20automatically%2C%20supporting%20multiple%20concurrent%20clients%20with%20proper%20isolation.%0A%0A**Features%3A**%0A-%20**Multi-client%20support**%3A%20Multiple%20LLMs%20can%20connect%20simultaneously%0A-%20**Session%20isolation**%3A%20Each%20client%20has%20independent%20state%0A-%20**Resource%20cleanup**%3A%20Automatic%20cleanup%20when%20clients%20disconnect%0A-%20**Concurrent%20safety**%3A%20Thread-safe%20operations%20across%20all%20sessions%0A%0A**Session%20lifecycle%3A**%0A1.%20**Initialize**%3A%20Client%20connects%20and%20exchanges%20capabilities%0A2.%20**Active**%3A%20Client%20makes%20requests%2C%20server%20responds%0A3.%20**Cleanup**%3A%20Connection%20closes%2C%20resources%20are%20freed%0A%0A%60%60%60go%0A%2F%2F%20Server%20automatically%20handles%20multiple%20sessions%0As%20%3A%3D%20server.NewMCPServer(%22Multi-Client%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20server.WithHooks(%26server.Hooks%7B%0A%20%20%20%20%20%20%20%20OnSessionStart%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20connected%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20OnSessionEnd%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20disconnected%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%2C%0A)%0A%60%60%60%0A%0A**State%20management%20patterns%3A**%0A%0A%60%60%60go%0A%2F%2F%20Per-session%20state%0Atype%20SessionState%20struct%20%7B%0A%20%20%20%20UserID%20%20%20string%0A%20%20%20%20Settings%20map%5Bstring%5Dinterface%7B%7D%0A%7D%0A%0Avar%20sessions%20%3D%20make(map%5Bstring%5D*SessionState)%0A%0Afunc%20toolHandler(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20state%20%3A%3D%20sessions%5BsessionID%5D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20session-specific%20state%0A%20%20%20%20return%20processWithState(state%2C%20req)%0A%7D%0A%60%60%60",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./getting-started-CBoJNejs.js"),[]),path:"/getting-started",type:"mdx",filePath:"getting-started.mdx",content:"%23%20Getting%20Started%0A%0A%23%23%20Introduction%0A%0A%23%23%23%20What%20is%20MCP%3F%0A%0AThe%20Model%20Context%20Protocol%20(MCP)%20is%20an%20open%20standard%20that%20enables%20secure%2C%20controlled%20connections%20between%20AI%20applications%20and%20external%20data%20sources%20and%20tools.%20It%20provides%20a%20standardized%20way%20for%20Large%20Language%20Models%20(LLMs)%20to%20access%20and%20interact%20with%20external%20systems%20while%20maintaining%20security%20and%20user%20control.%0A%0A%23%23%23%20Why%20MCP%20Go%3F%0A%0AMCP-Go%20is%20designed%20to%20make%20building%20MCP%20servers%20in%20Go%20fast%2C%20simple%2C%20and%20complete%3A%0A%0A-%20**Fast**%3A%20Minimal%20overhead%20with%20efficient%20Go%20implementation%0A-%20**Simple**%3A%20Clean%2C%20intuitive%20API%20with%20minimal%20boilerplate%0A-%20**Complete**%3A%20Full%20support%20for%20the%20MCP%20specification%20including%20tools%2C%20resources%2C%20and%20prompts%0A%0A%23%23%23%20Key%20Features%0A%0A-%20**High-level%20interface**%3A%20Focus%20on%20your%20business%20logic%2C%20not%20protocol%20details%0A-%20**Minimal%20boilerplate**%3A%20Get%20started%20with%20just%20a%20few%20lines%20of%20code%0A-%20**Full%20MCP%20spec%20support**%3A%20Tools%2C%20resources%2C%20prompts%2C%20and%20all%20transport%20methods%0A-%20**Type%20safety**%3A%20Leverage%20Go's%20type%20system%20for%20robust%20MCP%20servers%0A-%20**Multiple%20transports**%3A%20Stdio%2C%20HTTP%2C%20and%20Server-Sent%20Events%20support%0A%0A%23%23%23%20Installation%0A%0AAdd%20MCP-Go%20to%20your%20Go%20project%3A%0A%0A%60%60%60bash%0Ago%20get%20github.com%2Fmark3labs%2Fmcp-go%0A%60%60%60%0A%0AMCP-Go%20makes%20it%20easy%20to%20build%20Model%20Context%20Protocol%20(MCP)%20servers%20in%20Go.%20This%20guide%20will%20help%20you%20create%20your%20first%20MCP%20server%20in%20just%20a%20few%20minutes.%0A%0A%23%23%20Your%20First%20MCP%20Server%0A%0ALet's%20create%20a%20simple%20MCP%20server%20with%20a%20%22hello%20world%22%20tool%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20new%20MCP%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22Demo%20%F0%9F%9A%80%22%2C%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(false)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tool%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(%22hello_world%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Say%20hello%20to%20someone%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22name%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Name%20of%20the%20person%20to%20greet%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tool%20handler%0A%20%20%20%20s.AddTool(tool%2C%20helloHandler)%0A%0A%20%20%20%20%2F%2F%20Start%20the%20stdio%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20helloHandler(ctx%20context.Context%2C%20request%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20name%2C%20err%20%3A%3D%20request.RequireString(%22name%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Hello%2C%20%25s!%22%2C%20name))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Running%20Your%20Server%0A%0A1.%20Save%20the%20code%20above%20to%20a%20file%20(e.g.%2C%20%60main.go%60)%0A2.%20Run%20it%20with%3A%0A%20%20%20%60%60%60bash%0A%20%20%20go%20run%20main.go%0A%20%20%20%60%60%60%0A%0AYour%20MCP%20server%20is%20now%20running%20and%20ready%20to%20accept%20connections%20via%20stdio!%0A%0A%23%23%20What's%20Next%3F%0A%0ANow%20that%20you%20have%20a%20basic%20server%20running%2C%20you%20can%3A%0A%0A-%20**Add%20more%20tools**%20-%20Create%20tools%20for%20calculations%2C%20file%20operations%2C%20API%20calls%2C%20etc.%0A-%20**Add%20resources**%20-%20Expose%20data%20sources%20like%20files%2C%20databases%2C%20or%20APIs%0A-%20**Add%20prompts**%20-%20Create%20reusable%20prompt%20templates%20for%20better%20LLM%20interactions%0A-%20**Explore%20examples**%20-%20Check%20out%20the%20%60examples%2F%60%20directory%20for%20more%20complex%20use%20cases%0A%0A%23%23%20Key%20Concepts%0A%0A%23%23%23%20Tools%0ATools%20let%20LLMs%20take%20actions%20through%20your%20server.%20They're%20like%20functions%20that%20the%20LLM%20can%20call%3A%0A%0A%60%60%60go%0AcalculatorTool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20mcp.WithDescription(%22Perform%20basic%20arithmetic%20operations%22)%2C%0A%20%20%20%20mcp.WithString(%22operation%22%2C%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Enum(%22add%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22divide%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required())%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Resources%0AResources%20expose%20data%20to%20LLMs.%20They%20can%20be%20static%20files%20or%20dynamic%20data%3A%0A%0A%60%60%60go%0Aresource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22docs%3A%2F%2Freadme%22%2C%0A%20%20%20%20%22Project%20README%22%2C%0A%20%20%20%20mcp.WithResourceDescription(%22The%20project's%20README%20file%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Server%20Options%0ACustomize%20your%20server%20with%20various%20options%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22My%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20server.WithHooks(myHooks)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Transport%20Options%0A%0AMCP-Go%20supports%20multiple%20transport%20methods%3A%0A%0A-%20**Stdio**%20(most%20common)%3A%20%60server.ServeStdio(s)%60%0A-%20**HTTP**%3A%20%60server.ServeHTTP(s%2C%20%22%3A8080%22)%60%0A-%20**Server-Sent%20Events**%3A%20%60server.ServeSSE(s%2C%20%22%3A8080%22)%60%0A%0A%23%23%20Need%20Help%3F%0A%0A-%20Check%20out%20the%20%5Bexamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fmcp-go%2Ftree%2Fmain%2Fexamples)%20for%20more%20complex%20use%20cases%0A-%20Join%20the%20discussion%20on%20%5BDiscord%5D(https%3A%2F%2Fdiscord.gg%2FRqSS2NQVsY)%0A-%20Read%20the%20full%20documentation%20in%20the%20%5BREADME%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fmcp-go%2Fblob%2Fmain%2FREADME.md)",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./getting-started-CBoJNejs.js"),[]),path:"/getting-started.html",type:"mdx",filePath:"getting-started.mdx",content:"%23%20Getting%20Started%0A%0A%23%23%20Introduction%0A%0A%23%23%23%20What%20is%20MCP%3F%0A%0AThe%20Model%20Context%20Protocol%20(MCP)%20is%20an%20open%20standard%20that%20enables%20secure%2C%20controlled%20connections%20between%20AI%20applications%20and%20external%20data%20sources%20and%20tools.%20It%20provides%20a%20standardized%20way%20for%20Large%20Language%20Models%20(LLMs)%20to%20access%20and%20interact%20with%20external%20systems%20while%20maintaining%20security%20and%20user%20control.%0A%0A%23%23%23%20Why%20MCP%20Go%3F%0A%0AMCP-Go%20is%20designed%20to%20make%20building%20MCP%20servers%20in%20Go%20fast%2C%20simple%2C%20and%20complete%3A%0A%0A-%20**Fast**%3A%20Minimal%20overhead%20with%20efficient%20Go%20implementation%0A-%20**Simple**%3A%20Clean%2C%20intuitive%20API%20with%20minimal%20boilerplate%0A-%20**Complete**%3A%20Full%20support%20for%20the%20MCP%20specification%20including%20tools%2C%20resources%2C%20and%20prompts%0A%0A%23%23%23%20Key%20Features%0A%0A-%20**High-level%20interface**%3A%20Focus%20on%20your%20business%20logic%2C%20not%20protocol%20details%0A-%20**Minimal%20boilerplate**%3A%20Get%20started%20with%20just%20a%20few%20lines%20of%20code%0A-%20**Full%20MCP%20spec%20support**%3A%20Tools%2C%20resources%2C%20prompts%2C%20and%20all%20transport%20methods%0A-%20**Type%20safety**%3A%20Leverage%20Go's%20type%20system%20for%20robust%20MCP%20servers%0A-%20**Multiple%20transports**%3A%20Stdio%2C%20HTTP%2C%20and%20Server-Sent%20Events%20support%0A%0A%23%23%23%20Installation%0A%0AAdd%20MCP-Go%20to%20your%20Go%20project%3A%0A%0A%60%60%60bash%0Ago%20get%20github.com%2Fmark3labs%2Fmcp-go%0A%60%60%60%0A%0AMCP-Go%20makes%20it%20easy%20to%20build%20Model%20Context%20Protocol%20(MCP)%20servers%20in%20Go.%20This%20guide%20will%20help%20you%20create%20your%20first%20MCP%20server%20in%20just%20a%20few%20minutes.%0A%0A%23%23%20Your%20First%20MCP%20Server%0A%0ALet's%20create%20a%20simple%20MCP%20server%20with%20a%20%22hello%20world%22%20tool%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20new%20MCP%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22Demo%20%F0%9F%9A%80%22%2C%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(false)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tool%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(%22hello_world%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Say%20hello%20to%20someone%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22name%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Name%20of%20the%20person%20to%20greet%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tool%20handler%0A%20%20%20%20s.AddTool(tool%2C%20helloHandler)%0A%0A%20%20%20%20%2F%2F%20Start%20the%20stdio%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20helloHandler(ctx%20context.Context%2C%20request%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20name%2C%20err%20%3A%3D%20request.RequireString(%22name%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Hello%2C%20%25s!%22%2C%20name))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Running%20Your%20Server%0A%0A1.%20Save%20the%20code%20above%20to%20a%20file%20(e.g.%2C%20%60main.go%60)%0A2.%20Run%20it%20with%3A%0A%20%20%20%60%60%60bash%0A%20%20%20go%20run%20main.go%0A%20%20%20%60%60%60%0A%0AYour%20MCP%20server%20is%20now%20running%20and%20ready%20to%20accept%20connections%20via%20stdio!%0A%0A%23%23%20What's%20Next%3F%0A%0ANow%20that%20you%20have%20a%20basic%20server%20running%2C%20you%20can%3A%0A%0A-%20**Add%20more%20tools**%20-%20Create%20tools%20for%20calculations%2C%20file%20operations%2C%20API%20calls%2C%20etc.%0A-%20**Add%20resources**%20-%20Expose%20data%20sources%20like%20files%2C%20databases%2C%20or%20APIs%0A-%20**Add%20prompts**%20-%20Create%20reusable%20prompt%20templates%20for%20better%20LLM%20interactions%0A-%20**Explore%20examples**%20-%20Check%20out%20the%20%60examples%2F%60%20directory%20for%20more%20complex%20use%20cases%0A%0A%23%23%20Key%20Concepts%0A%0A%23%23%23%20Tools%0ATools%20let%20LLMs%20take%20actions%20through%20your%20server.%20They're%20like%20functions%20that%20the%20LLM%20can%20call%3A%0A%0A%60%60%60go%0AcalculatorTool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20mcp.WithDescription(%22Perform%20basic%20arithmetic%20operations%22)%2C%0A%20%20%20%20mcp.WithString(%22operation%22%2C%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Enum(%22add%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22divide%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required())%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Resources%0AResources%20expose%20data%20to%20LLMs.%20They%20can%20be%20static%20files%20or%20dynamic%20data%3A%0A%0A%60%60%60go%0Aresource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22docs%3A%2F%2Freadme%22%2C%0A%20%20%20%20%22Project%20README%22%2C%0A%20%20%20%20mcp.WithResourceDescription(%22The%20project's%20README%20file%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Server%20Options%0ACustomize%20your%20server%20with%20various%20options%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22My%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20server.WithHooks(myHooks)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Transport%20Options%0A%0AMCP-Go%20supports%20multiple%20transport%20methods%3A%0A%0A-%20**Stdio**%20(most%20common)%3A%20%60server.ServeStdio(s)%60%0A-%20**HTTP**%3A%20%60server.ServeHTTP(s%2C%20%22%3A8080%22)%60%0A-%20**Server-Sent%20Events**%3A%20%60server.ServeSSE(s%2C%20%22%3A8080%22)%60%0A%0A%23%23%20Need%20Help%3F%0A%0A-%20Check%20out%20the%20%5Bexamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fmcp-go%2Ftree%2Fmain%2Fexamples)%20for%20more%20complex%20use%20cases%0A-%20Join%20the%20discussion%20on%20%5BDiscord%5D(https%3A%2F%2Fdiscord.gg%2FRqSS2NQVsY)%0A-%20Read%20the%20full%20documentation%20in%20the%20%5BREADME%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fmcp-go%2Fblob%2Fmain%2FREADME.md)",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./index-TKMyvPv0.js"),[]),path:"/",type:"mdx",filePath:"index.mdx",content:"---%0Alayout%3A%20landing%0A---%0A%0Aimport%20%7B%20HomePage%20%7D%20from%20'vocs%2Fcomponents'%0A%0A%3CHomePage.Root%3E%0A%20%20%3CHomePage.Logo%20%2F%3E%0A%20%20%3CHomePage.Tagline%3EMCP-Go%3C%2FHomePage.Tagline%3E%0A%20%20%3CHomePage.Description%3E%0A%20%20%20%20A%20Go%20implementation%20of%20the%20Model%20Context%20Protocol%20(MCP)%2C%20enabling%20seamless%20integration%20between%20LLM%20applications%20and%20external%20data%20sources%20and%20tools.%20Build%20powerful%20MCP%20servers%20with%20minimal%20boilerplate%20and%20focus%20on%20creating%20great%20tools.%0A%20%20%3C%2FHomePage.Description%3E%0A%20%20%3CHomePage.Buttons%3E%0A%20%20%20%20%3CHomePage.Button%20href%3D%22%2Fgetting-started%22%20variant%3D%22accent%22%3EGet%20started%3C%2FHomePage.Button%3E%0A%20%20%20%20%3CHomePage.Button%20href%3D%22https%3A%2F%2Fgithub.com%2Fmark3labs%2Fmcp-go%22%3EGitHub%3C%2FHomePage.Button%3E%0A%20%20%3C%2FHomePage.Buttons%3E%0A%3C%2FHomePage.Root%3E",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./quick-start-OQ_keQQk.js"),[]),path:"/quick-start",type:"mdx",filePath:"quick-start.mdx",content:"%23%20Quick%20Start%0A%0AGet%20up%20and%20running%20with%20MCP-Go%20in%20minutes.%20This%20guide%20walks%20you%20through%20creating%20your%20first%20MCP%20server%20and%20client.%0A%0A%23%23%20Hello%20World%20Server%0A%0ALet's%20start%20with%20the%20simplest%20possible%20MCP%20server%20-%20a%20%22hello%20world%22%20tool%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22errors%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20new%20MCP%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22Hello%20World%20Server%22%2C%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(false)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Define%20a%20simple%20tool%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(%22hello_world%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Say%20hello%20to%20someone%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22name%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Name%20of%20the%20person%20to%20greet%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tool%20handler%0A%20%20%20%20s.AddTool(tool%2C%20helloHandler)%0A%0A%20%20%20%20%2F%2F%20Start%20the%20stdio%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20helloHandler(ctx%20context.Context%2C%20request%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20name%2C%20err%20%3A%3D%20request.RequireString(%22name%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Hello%2C%20%25s!%20%F0%9F%91%8B%22%2C%20name))%2C%20nil%0A%7D%0A%60%60%60%0A%0ASave%20this%20as%20%60hello-server%2Fmain.go%60%20and%20run%3A%0A%0A%60%60%60bash%0Acd%20hello-server%0Ago%20mod%20init%20hello-server%0Ago%20get%20github.com%2Fmark3labs%2Fmcp-go%0Ago%20run%20main.go%0A%60%60%60%0A%0A%23%23%20Running%20Your%20First%20Server%0A%0A%23%23%23%20Testing%20with%20Claude%20Desktop%0A%0A1.%20**Install%20Claude%20Desktop**%20from%20%5BAnthropic's%20website%5D(https%3A%2F%2Fclaude.ai%2Fdownload)%0A%0A2.%20**Configure%20your%20server**%20by%20editing%20Claude's%20config%20file%3A%0A%0A%20%20%20**macOS**%3A%20%60~%2FLibrary%2FApplication%20Support%2FClaude%2Fclaude_desktop_config.json%60%0A%20%20%20**Windows**%3A%20%60%25APPDATA%25%5CClaude%5Cclaude_desktop_config.json%60%0A%0A%20%20%20%60%60%60json%0A%20%20%20%7B%0A%20%20%20%20%20%22mcpServers%22%3A%20%7B%0A%20%20%20%20%20%20%20%22hello-world%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%22command%22%3A%20%22go%22%2C%0A%20%20%20%20%20%20%20%20%20%22args%22%3A%20%5B%22run%22%2C%20%22%2Fpath%2Fto%2Fyour%2Fhello-server%2Fmain.go%22%5D%0A%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%7D%0A%20%20%20%7D%0A%20%20%20%60%60%60%0A%0A3.%20**Restart%20Claude%20Desktop**%20and%20look%20for%20the%20%F0%9F%94%8C%20icon%20indicating%20MCP%20connection%0A%0A4.%20**Test%20your%20tool**%20by%20asking%20Claude%3A%20%22Use%20the%20hello_world%20tool%20to%20greet%20Alice%22%0A%0A%23%23%23%20Testing%20with%20MCP%20Inspector%0A%0AFor%20debugging%20and%20development%2C%20use%20the%20MCP%20Inspector%3A%0A%0A%60%60%60bash%0A%23%20Install%20the%20MCP%20Inspector%0Anpm%20install%20-g%20%40modelcontextprotocol%2Finspector%0A%0A%23%20Run%20your%20server%20with%20the%20inspector%0Amcp-inspector%20go%20run%20main.go%0A%60%60%60%0A%0AThis%20opens%20a%20web%20interface%20where%20you%20can%20test%20your%20tools%20interactively.%0A%0A%23%23%20Basic%20Client%20Example%0A%0AYou%20can%20also%20create%20MCP%20clients%20to%20connect%20to%20other%20servers%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20stdio%20client%20that%20connects%20to%20another%20MCP%20server%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%22run%22%2C%20%22path%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20the%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20tools%3A%20%25d%5Cn%22%2C%20len(tools.Tools))%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20tool%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22hello_world%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22name%22%3A%20%22World%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Print%20the%20result%0A%20%20%20%20for%20_%2C%20content%20%3A%3D%20range%20result.Content%20%7B%0A%20%20%20%20%20%20%20%20if%20content.Type%20%3D%3D%20%22text%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Result%3A%20%25s%5Cn%22%2C%20content.Text)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Client%20Example%0A%0AFor%20HTTP-based%20servers%2C%20use%20the%20HTTP%20client%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20an%20HTTP%20client%0A%20%20%20%20c%20%3A%3D%20client.NewHTTPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20and%20use%20the%20client%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20tool%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22hello_world%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22name%22%3A%20%22HTTP%20World%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Tool%20result%3A%20%25%2Bv%5Cn%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%20What's%20Next%3F%0A%0ANow%20that%20you%20have%20a%20working%20MCP%20server%20and%20client%3A%0A%0A-%20**Learn%20about%20%5BTools%5D(%2Fservers%2Ftools)**%20-%20Create%20powerful%20tool%20interfaces%0A-%20**Add%20%5BResources%5D(%2Fservers%2Fresources)**%20-%20Expose%20data%20sources%20to%20LLMs%0A-%20**Create%20%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Build%20reusable%20prompt%20templates%0A-%20**Explore%20%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Production-ready%20features%0A%0A%23%23%20Common%20Issues%0A%0A%23%23%23%20Server%20Won't%20Start%0A-%20Check%20that%20the%20port%20isn't%20already%20in%20use%0A-%20Verify%20Go%20module%20dependencies%20are%20installed%0A-%20Ensure%20proper%20file%20permissions%0A%0A%23%23%23%20Client%20Connection%20Failed%0A-%20Verify%20the%20server%20is%20running%20and%20accessible%0A-%20Check%20network%20connectivity%20for%20HTTP%20clients%0A-%20Validate%20stdio%20command%20paths%20for%20stdio%20clients%0A%0A%23%23%23%20Tool%20Calls%20Failing%0A-%20Verify%20tool%20parameter%20types%20match%20the%20schema%0A-%20Check%20error%20handling%20in%20your%20tool%20functions%0A-%20Use%20the%20MCP%20Inspector%20for%20debugging",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./quick-start-OQ_keQQk.js"),[]),path:"/quick-start.html",type:"mdx",filePath:"quick-start.mdx",content:"%23%20Quick%20Start%0A%0AGet%20up%20and%20running%20with%20MCP-Go%20in%20minutes.%20This%20guide%20walks%20you%20through%20creating%20your%20first%20MCP%20server%20and%20client.%0A%0A%23%23%20Hello%20World%20Server%0A%0ALet's%20start%20with%20the%20simplest%20possible%20MCP%20server%20-%20a%20%22hello%20world%22%20tool%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22errors%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20new%20MCP%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22Hello%20World%20Server%22%2C%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(false)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Define%20a%20simple%20tool%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(%22hello_world%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Say%20hello%20to%20someone%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22name%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Name%20of%20the%20person%20to%20greet%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tool%20handler%0A%20%20%20%20s.AddTool(tool%2C%20helloHandler)%0A%0A%20%20%20%20%2F%2F%20Start%20the%20stdio%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20helloHandler(ctx%20context.Context%2C%20request%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20name%2C%20err%20%3A%3D%20request.RequireString(%22name%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Hello%2C%20%25s!%20%F0%9F%91%8B%22%2C%20name))%2C%20nil%0A%7D%0A%60%60%60%0A%0ASave%20this%20as%20%60hello-server%2Fmain.go%60%20and%20run%3A%0A%0A%60%60%60bash%0Acd%20hello-server%0Ago%20mod%20init%20hello-server%0Ago%20get%20github.com%2Fmark3labs%2Fmcp-go%0Ago%20run%20main.go%0A%60%60%60%0A%0A%23%23%20Running%20Your%20First%20Server%0A%0A%23%23%23%20Testing%20with%20Claude%20Desktop%0A%0A1.%20**Install%20Claude%20Desktop**%20from%20%5BAnthropic's%20website%5D(https%3A%2F%2Fclaude.ai%2Fdownload)%0A%0A2.%20**Configure%20your%20server**%20by%20editing%20Claude's%20config%20file%3A%0A%0A%20%20%20**macOS**%3A%20%60~%2FLibrary%2FApplication%20Support%2FClaude%2Fclaude_desktop_config.json%60%0A%20%20%20**Windows**%3A%20%60%25APPDATA%25%5CClaude%5Cclaude_desktop_config.json%60%0A%0A%20%20%20%60%60%60json%0A%20%20%20%7B%0A%20%20%20%20%20%22mcpServers%22%3A%20%7B%0A%20%20%20%20%20%20%20%22hello-world%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%22command%22%3A%20%22go%22%2C%0A%20%20%20%20%20%20%20%20%20%22args%22%3A%20%5B%22run%22%2C%20%22%2Fpath%2Fto%2Fyour%2Fhello-server%2Fmain.go%22%5D%0A%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%7D%0A%20%20%20%7D%0A%20%20%20%60%60%60%0A%0A3.%20**Restart%20Claude%20Desktop**%20and%20look%20for%20the%20%F0%9F%94%8C%20icon%20indicating%20MCP%20connection%0A%0A4.%20**Test%20your%20tool**%20by%20asking%20Claude%3A%20%22Use%20the%20hello_world%20tool%20to%20greet%20Alice%22%0A%0A%23%23%23%20Testing%20with%20MCP%20Inspector%0A%0AFor%20debugging%20and%20development%2C%20use%20the%20MCP%20Inspector%3A%0A%0A%60%60%60bash%0A%23%20Install%20the%20MCP%20Inspector%0Anpm%20install%20-g%20%40modelcontextprotocol%2Finspector%0A%0A%23%20Run%20your%20server%20with%20the%20inspector%0Amcp-inspector%20go%20run%20main.go%0A%60%60%60%0A%0AThis%20opens%20a%20web%20interface%20where%20you%20can%20test%20your%20tools%20interactively.%0A%0A%23%23%20Basic%20Client%20Example%0A%0AYou%20can%20also%20create%20MCP%20clients%20to%20connect%20to%20other%20servers%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20stdio%20client%20that%20connects%20to%20another%20MCP%20server%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%22run%22%2C%20%22path%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20the%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20tools%3A%20%25d%5Cn%22%2C%20len(tools.Tools))%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20tool%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22hello_world%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22name%22%3A%20%22World%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Print%20the%20result%0A%20%20%20%20for%20_%2C%20content%20%3A%3D%20range%20result.Content%20%7B%0A%20%20%20%20%20%20%20%20if%20content.Type%20%3D%3D%20%22text%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Result%3A%20%25s%5Cn%22%2C%20content.Text)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Client%20Example%0A%0AFor%20HTTP-based%20servers%2C%20use%20the%20HTTP%20client%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20an%20HTTP%20client%0A%20%20%20%20c%20%3A%3D%20client.NewHTTPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20and%20use%20the%20client%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20tool%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22hello_world%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22name%22%3A%20%22HTTP%20World%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Tool%20result%3A%20%25%2Bv%5Cn%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%20What's%20Next%3F%0A%0ANow%20that%20you%20have%20a%20working%20MCP%20server%20and%20client%3A%0A%0A-%20**Learn%20about%20%5BTools%5D(%2Fservers%2Ftools)**%20-%20Create%20powerful%20tool%20interfaces%0A-%20**Add%20%5BResources%5D(%2Fservers%2Fresources)**%20-%20Expose%20data%20sources%20to%20LLMs%0A-%20**Create%20%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Build%20reusable%20prompt%20templates%0A-%20**Explore%20%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Production-ready%20features%0A%0A%23%23%20Common%20Issues%0A%0A%23%23%23%20Server%20Won't%20Start%0A-%20Check%20that%20the%20port%20isn't%20already%20in%20use%0A-%20Verify%20Go%20module%20dependencies%20are%20installed%0A-%20Ensure%20proper%20file%20permissions%0A%0A%23%23%23%20Client%20Connection%20Failed%0A-%20Verify%20the%20server%20is%20running%20and%20accessible%0A-%20Check%20network%20connectivity%20for%20HTTP%20clients%0A-%20Validate%20stdio%20command%20paths%20for%20stdio%20clients%0A%0A%23%23%23%20Tool%20Calls%20Failing%0A-%20Verify%20tool%20parameter%20types%20match%20the%20schema%0A-%20Check%20error%20handling%20in%20your%20tool%20functions%0A-%20Use%20the%20MCP%20Inspector%20for%20debugging",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./basics-8VO7-hJN.js"),[]),path:"/clients/basics",type:"mdx",filePath:"clients/basics.mdx",content:"%23%20Client%20Basics%0A%0ALearn%20the%20fundamentals%20of%20creating%20and%20managing%20MCP%20clients%2C%20including%20lifecycle%20management%2C%20initialization%2C%20and%20error%20handling.%0A%0A%23%23%20Creating%20Clients%0A%0AMCP-Go%20provides%20client%20constructors%20for%20each%20supported%20transport.%20The%20choice%20of%20transport%20determines%20how%20your%20client%20communicates%20with%20the%20server.%0A%0A%23%23%23%20Client%20Constructor%20Patterns%0A%0A%60%60%60go%0A%2F%2F%20STDIO%20client%20-%20for%20command-line%20tools%0Aclient%2C%20err%20%3A%3D%20client.NewStdioClient(%22command%22%2C%20%22arg1%22%2C%20%22arg2%22)%0A%0A%2F%2F%20HTTP%20client%20-%20for%20web%20services%0Aclient%20%3A%3D%20client.NewHTTPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%0A%2F%2F%20SSE%20client%20-%20for%20real-time%20web%20applications%0Aclient%20%3A%3D%20client.NewSSEClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22)%0A%0A%2F%2F%20In-process%20client%20-%20for%20testing%20and%20embedded%20scenarios%0Aclient%20%3A%3D%20client.NewInProcessClient(server)%0A%60%60%60%0A%0A%23%23%23%20STDIO%20Client%20Creation%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22errors%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22math%22%0A%20%20%20%20%22net%2Fhttp%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20createStdioClient()%20(client.Client%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20client%20that%20spawns%20a%20subprocess%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20STDIO%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20c%2C%20nil%0A%7D%0A%0A%2F%2F%20With%20custom%20environment%20variables%0Afunc%20createStdioClientWithEnv()%20(client.Client%2C%20error)%20%7B%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClientWithOptions(client.StdioOptions%7B%0A%20%20%20%20%20%20%20%20Command%3A%20%22go%22%2C%0A%20%20%20%20%20%20%20%20Args%3A%20%20%20%20%5B%5Dstring%7B%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%7D%2C%0A%20%20%20%20%20%20%20%20Env%3A%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22LOG_LEVEL%3Ddebug%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22DATABASE_URL%3Dsqlite%3A%2F%2Ftest.db%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20WorkingDir%3A%20%22%2Fpath%2Fto%2Fserver%22%2C%0A%20%20%20%20%20%20%20%20Timeout%3A%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20STDIO%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20c%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Client%20Creation%0A%0A%60%60%60go%0Afunc%20createHTTPClient()%20client.Client%20%7B%0A%20%20%20%20%2F%2F%20Basic%20HTTP%20client%0A%20%20%20%20c%20%3A%3D%20client.NewHTTPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20custom%20headers%0A%20%20%20%20c.SetHeader(%22Authorization%22%2C%20%22Bearer%20your-token%22)%0A%20%20%20%20c.SetHeader(%22X-API-Version%22%2C%20%22v1%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20timeout%0A%20%20%20%20c.SetTimeout(30%20*%20time.Second)%0A%20%20%20%20%0A%20%20%20%20return%20c%0A%7D%0A%0A%2F%2F%20With%20custom%20HTTP%20client%0Afunc%20createCustomHTTPClient()%20client.Client%20%7B%0A%20%20%20%20httpClient%20%3A%3D%20%26http.Client%7B%0A%20%20%20%20%20%20%20%20Timeout%3A%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20Transport%3A%20%26http.Transport%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20MaxIdleConns%3A%20%20%20%20%20%20%20%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MaxIdleConnsPerHost%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20IdleConnTimeout%3A%20%20%20%20%2090%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20client.NewHTTPClientWithClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22%2C%20httpClient)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20SSE%20Client%20Creation%0A%0A%60%60%60go%0Afunc%20createSSEClient()%20client.Client%20%7B%0A%20%20%20%20%2F%2F%20Basic%20SSE%20client%0A%20%20%20%20c%20%3A%3D%20client.NewSSEClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20authentication%0A%20%20%20%20c.SetHeader(%22Authorization%22%2C%20%22Bearer%20your-token%22)%0A%20%20%20%20%0A%20%20%20%20return%20c%0A%7D%0A%0A%2F%2F%20With%20custom%20options%0Afunc%20createSSEClientWithOptions()%20client.Client%20%7B%0A%20%20%20%20options%20%3A%3D%20client.SSEOptions%7B%0A%20%20%20%20%20%20%20%20URL%3A%20%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22%2C%0A%20%20%20%20%20%20%20%20Headers%3A%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Authorization%22%3A%20%22Bearer%20your-token%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22X-Client-ID%22%3A%20%20%20%22my-app%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20ReconnectInterval%3A%205%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20MaxReconnects%3A%20%20%20%20%2010%2C%0A%20%20%20%20%20%20%20%20BufferSize%3A%20%20%20%20%20%20%20%201000%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20client.NewSSEClientWithOptions(options)%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Lifecycle%0A%0AUnderstanding%20the%20client%20lifecycle%20is%20crucial%20for%20proper%20resource%20management%20and%20error%20handling.%0A%0A%23%23%23%20Lifecycle%20Stages%0A%0A1.%20**Creation**%20-%20Instantiate%20the%20client%0A2.%20**Initialization**%20-%20Establish%20connection%20and%20exchange%20capabilities%0A3.%20**Operation**%20-%20Use%20tools%2C%20resources%2C%20and%20prompts%0A4.%20**Cleanup**%20-%20Close%20connections%20and%20free%20resources%0A%0A%23%23%23%20Complete%20Lifecycle%20Example%0A%0A%60%60%60go%0Afunc%20demonstrateClientLifecycle()%20error%20%7B%0A%20%20%20%20%2F%2F%201.%20Creation%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClient(%22server-command%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20creation%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Ensure%20cleanup%20happens%0A%20%20%20%20defer%20func()%20%7B%0A%20%20%20%20%20%20%20%20if%20closeErr%20%3A%3D%20c.Close()%3B%20closeErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Error%20closing%20client%3A%20%25v%22%2C%20closeErr)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%202.%20Initialization%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20initialization%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%203.%20Operation%0A%20%20%20%20if%20err%20%3A%3D%20performClientOperations(ctx%2C%20c)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20operations%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%204.%20Cleanup%20(handled%20by%20defer)%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20performClientOperations(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Found%20%25d%20tools%22%2C%20len(tools.Tools))%0A%0A%20%20%20%20%2F%2F%20Use%20the%20tools%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20tool.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22example%20input%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22format%22%3A%20%22json%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20failed%3A%20%25v%22%2C%20tool.Name%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20result%3A%20%25%2Bv%22%2C%20tool.Name%2C%20result)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Initialization%20Process%0A%0AThe%20initialization%20process%20establishes%20the%20MCP%20connection%20and%20exchanges%20capabilities%3A%0A%0A%60%60%60go%0Afunc%20initializeClientWithDetails(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20Initialize%20with%20custom%20client%20info%0A%20%20%20%20initReq%20%3A%3D%20mcp.InitializeRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.InitializeRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ProtocolVersion%3A%20%222024-11-05%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Capabilities%3A%20mcp.ClientCapabilities%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Tools%3A%20%20%20%20%20%26mcp.ToolsCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Resources%3A%20%26mcp.ResourcesCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Prompts%3A%20%20%20%26mcp.PromptsCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ClientInfo%3A%20mcp.ClientInfo%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%22My%20Application%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Version%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.InitializeWithRequest(ctx%2C%20initReq)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22initialization%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Connected%20to%20server%3A%20%25s%20v%25s%22%2C%20%0A%20%20%20%20%20%20%20%20result.ServerInfo.Name%2C%20%0A%20%20%20%20%20%20%20%20result.ServerInfo.Version)%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22Server%20capabilities%3A%20%25%2Bv%22%2C%20result.Capabilities)%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Graceful%20Shutdown%0A%0A%60%60%60go%0Atype%20ManagedClient%20struct%20%7B%0A%20%20%20%20client%20client.Client%0A%20%20%20%20ctx%20%20%20%20context.Context%0A%20%20%20%20cancel%20context.CancelFunc%0A%20%20%20%20done%20%20%20chan%20struct%7B%7D%0A%7D%0A%0Afunc%20NewManagedClient(clientType%2C%20address%20string)%20(*ManagedClient%2C%20error)%20%7B%0A%20%20%20%20var%20c%20client.Client%0A%20%20%20%20var%20err%20error%0A%0A%20%20%20%20switch%20clientType%20%7B%0A%20%20%20%20case%20%22stdio%22%3A%0A%20%20%20%20%20%20%20%20c%2C%20err%20%3D%20client.NewStdioClient(%22server-command%22)%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewHTTPClient(address)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewSSEClient(address)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20client%20type%3A%20%25s%22%2C%20clientType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20mc%20%3A%3D%20%26ManagedClient%7B%0A%20%20%20%20%20%20%20%20client%3A%20c%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20cancel%2C%0A%20%20%20%20%20%20%20%20done%3A%20%20%20make(chan%20struct%7B%7D)%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Initialize%20in%20background%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20defer%20close(mc.done)%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Client%20initialization%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20return%20mc%2C%20nil%0A%7D%0A%0Afunc%20(mc%20*ManagedClient)%20WaitForReady(timeout%20time.Duration)%20error%20%7B%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-mc.done%3A%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20case%20%3C-time.After(timeout)%3A%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20initialization%20timeout%22)%0A%20%20%20%20case%20%3C-mc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20mc.ctx.Err()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(mc%20*ManagedClient)%20Close()%20error%20%7B%0A%20%20%20%20mc.cancel()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20initialization%20to%20complete%20or%20timeout%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-mc.done%3A%0A%20%20%20%20case%20%3C-time.After(5%20*%20time.Second)%3A%0A%20%20%20%20%20%20%20%20log.Println(%22Timeout%20waiting%20for%20client%20shutdown%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mc.client.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AProper%20error%20handling%20is%20essential%20for%20robust%20client%20applications.%0A%0A%23%23%23%20Error%20Types%0A%0A%60%60%60go%0A%2F%2F%20Connection%20errors%0Avar%20(%0A%20%20%20%20ErrConnectionFailed%20%3D%20errors.New(%22connection%20failed%22)%0A%20%20%20%20ErrConnectionLost%20%20%20%3D%20errors.New(%22connection%20lost%22)%0A%20%20%20%20ErrTimeout%20%20%20%20%20%20%20%20%20%20%3D%20errors.New(%22operation%20timeout%22)%0A)%0A%0A%2F%2F%20Protocol%20errors%0Avar%20(%0A%20%20%20%20ErrInvalidResponse%20%20%20%20%3D%20errors.New(%22invalid%20response%22)%0A%20%20%20%20ErrProtocolViolation%20%20%3D%20errors.New(%22protocol%20violation%22)%0A%20%20%20%20ErrUnsupportedVersion%20%3D%20errors.New(%22unsupported%20protocol%20version%22)%0A)%0A%0A%2F%2F%20Operation%20errors%0Avar%20(%0A%20%20%20%20ErrToolNotFound%20%20%20%20%20%20%20%3D%20errors.New(%22tool%20not%20found%22)%0A%20%20%20%20ErrResourceNotFound%20%20%20%3D%20errors.New(%22resource%20not%20found%22)%0A%20%20%20%20ErrInvalidArguments%20%20%20%3D%20errors.New(%22invalid%20arguments%22)%0A%20%20%20%20ErrPermissionDenied%20%20%20%3D%20errors.New(%22permission%20denied%22)%0A)%0A%60%60%60%0A%0A%23%23%23%20Comprehensive%20Error%20Handling%0A%0A%60%60%60go%0Afunc%20handleClientErrors(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22example_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22param%22%3A%20%22value%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Connection%20errors%20-%20may%20be%20recoverable%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrConnectionLost)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Connection%20lost%2C%20attempting%20reconnect...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20reconnectErr%20%3A%3D%20reconnectClient(c)%3B%20reconnectErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Reconnection%20failed%3A%20%25v%22%2C%20reconnectErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Retry%20the%20operation%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20handleClientErrors(ctx%2C%20c)%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrTimeout)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Operation%20timed%20out%2C%20retrying%20with%20longer%20timeout...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2060*time.Second)%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20cancel()%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20handleClientErrors(ctx%2C%20c)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Protocol%20errors%20-%20usually%20not%20recoverable%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrProtocolViolation)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Protocol%20violation%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrUnsupportedVersion)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unsupported%20protocol%20version%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Operation%20errors%20-%20check%20and%20fix%20request%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrToolNotFound)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20not%20found%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Maybe%20list%20available%20tools%20and%20suggest%20alternatives%0A%20%20%20%20%20%20%20%20%20%20%20%20suggestAlternativeTools(ctx%2C%20c)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrInvalidArguments)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Invalid%20arguments%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Maybe%20get%20tool%20schema%20and%20show%20required%20parameters%0A%20%20%20%20%20%20%20%20%20%20%20%20showToolSchema(ctx%2C%20c%2C%20%22example_tool%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrPermissionDenied)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Permission%20denied%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Maybe%20prompt%20for%20authentication%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Unknown%20errors%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unexpected%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Process%20successful%20result%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%0Afunc%20reconnectClient(c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20Close%20existing%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Close()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20closing%20client%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Wait%20before%20reconnecting%0A%20%20%20%20time.Sleep(1%20*%20time.Second)%0A%0A%20%20%20%20%2F%2F%20Reinitialize%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20return%20c.Initialize(ctx)%0A%7D%0A%0Afunc%20suggestAlternativeTools(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20tools%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Println(%22Available%20tools%3A%22)%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22-%20%25s%3A%20%25s%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20showToolSchema(ctx%20context.Context%2C%20c%20client.Client%2C%20toolName%20string)%20%7B%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20tools%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20if%20tool.Name%20%3D%3D%20toolName%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20schema%20for%20%25s%3A%22%2C%20toolName)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Description%3A%20%25s%22%2C%20tool.Description)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Input%20schema%3A%20%25%2Bv%22%2C%20tool.InputSchema)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20%25s%20not%20found%22%2C%20toolName)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Retry%20Logic%20with%20Exponential%20Backoff%0A%0A%60%60%60go%0Atype%20RetryConfig%20struct%20%7B%0A%20%20%20%20MaxRetries%20%20%20%20%20%20int%0A%20%20%20%20InitialDelay%20%20%20%20time.Duration%0A%20%20%20%20MaxDelay%20%20%20%20%20%20%20%20time.Duration%0A%20%20%20%20BackoffFactor%20%20%20float64%0A%20%20%20%20RetryableErrors%20%5B%5Derror%0A%7D%0A%0Afunc%20DefaultRetryConfig()%20RetryConfig%20%7B%0A%20%20%20%20return%20RetryConfig%7B%0A%20%20%20%20%20%20%20%20MaxRetries%3A%20%20%20%203%2C%0A%20%20%20%20%20%20%20%20InitialDelay%3A%20%201%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20MaxDelay%3A%20%20%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20BackoffFactor%3A%202.0%2C%0A%20%20%20%20%20%20%20%20RetryableErrors%3A%20%5B%5Derror%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20client.ErrConnectionLost%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20client.ErrTimeout%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20client.ErrConnectionFailed%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20RetryConfig)%20IsRetryable(err%20error)%20bool%20%7B%0A%20%20%20%20for%20_%2C%20retryableErr%20%3A%3D%20range%20rc.RetryableErrors%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20retryableErr)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20false%0A%7D%0A%0Afunc%20WithRetry%5BT%20any%5D(ctx%20context.Context%2C%20config%20RetryConfig%2C%20operation%20func()%20(T%2C%20error))%20(T%2C%20error)%20%7B%0A%20%20%20%20var%20lastErr%20error%0A%20%20%20%20var%20zero%20T%0A%0A%20%20%20%20for%20attempt%20%3A%3D%200%3B%20attempt%20%3C%3D%20config.MaxRetries%3B%20attempt%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20operation()%0A%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20lastErr%20%3D%20err%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20non-retryable%20errors%0A%20%20%20%20%20%20%20%20if%20!config.IsRetryable(err)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20on%20last%20attempt%0A%20%20%20%20%20%20%20%20if%20attempt%20%3D%3D%20config.MaxRetries%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Calculate%20delay%20with%20exponential%20backoff%0A%20%20%20%20%20%20%20%20delay%20%3A%3D%20time.Duration(float64(config.InitialDelay)%20*%20math.Pow(config.BackoffFactor%2C%20float64(attempt)))%0A%20%20%20%20%20%20%20%20if%20delay%20%3E%20config.MaxDelay%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delay%20%3D%20config.MaxDelay%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20log.Printf(%22Attempt%20%25d%20failed%2C%20retrying%20in%20%25v%3A%20%25v%22%2C%20attempt%2B1%2C%20delay%2C%20err)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Wait%20with%20context%20cancellation%20support%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-time.After(delay)%3A%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20zero%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20zero%2C%20fmt.Errorf(%22failed%20after%20%25d%20attempts%3A%20%25w%22%2C%20config.MaxRetries%2B1%2C%20lastErr)%0A%7D%0A%0A%2F%2F%20Usage%20example%0Afunc%20callToolWithRetry(ctx%20context.Context%2C%20c%20client.Client%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20config%20%3A%3D%20DefaultRetryConfig()%0A%20%20%20%20%0A%20%20%20%20return%20WithRetry(ctx%2C%20config%2C%20func()%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20c.CallTool(ctx%2C%20req)%0A%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Context%20and%20Timeout%20Management%0A%0A%60%60%60go%0Afunc%20demonstrateContextUsage(c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Operation%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22long_running_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22duration%22%3A%2060%2C%20%2F%2F%20seconds%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.DeadlineExceeded)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Tool%20call%20timed%20out%22)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20completed%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%0Afunc%20demonstrateCancellation(c%20client.Client)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20%2F%2F%20Start%20operation%20in%20goroutine%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22long_running_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.Canceled)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Tool%20call%20was%20cancelled%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20completed%3A%20%25%2Bv%22%2C%20result)%0A%20%20%20%20%7D()%0A%0A%20%20%20%20%2F%2F%20Cancel%20after%205%20seconds%0A%20%20%20%20time.Sleep(5%20*%20time.Second)%0A%20%20%20%20cancel()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20a%20bit%20to%20see%20the%20cancellation%0A%20%20%20%20time.Sleep(1%20*%20time.Second)%0A%7D%0A%60%60%60%0A%0A%23%23%20Connection%20Monitoring%0A%0A%23%23%23%20Health%20Checks%0A%0A%60%60%60go%0Atype%20ClientHealthMonitor%20struct%20%7B%0A%20%20%20%20client%20%20%20client.Client%0A%20%20%20%20interval%20time.Duration%0A%20%20%20%20timeout%20%20time.Duration%0A%20%20%20%20healthy%20%20bool%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewClientHealthMonitor(c%20client.Client%2C%20interval%2C%20timeout%20time.Duration)%20*ClientHealthMonitor%20%7B%0A%20%20%20%20return%20%26ClientHealthMonitor%7B%0A%20%20%20%20%20%20%20%20client%3A%20%20%20c%2C%0A%20%20%20%20%20%20%20%20interval%3A%20interval%2C%0A%20%20%20%20%20%20%20%20timeout%3A%20%20timeout%2C%0A%20%20%20%20%20%20%20%20healthy%3A%20%20false%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(chm%20*ClientHealthMonitor)%20Start(ctx%20context.Context)%20%7B%0A%20%20%20%20ticker%20%3A%3D%20time.NewTicker(chm.interval)%0A%20%20%20%20defer%20ticker.Stop()%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20case%20%3C-ticker.C%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20chm.checkHealth(ctx)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(chm%20*ClientHealthMonitor)%20checkHealth(ctx%20context.Context)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%20chm.timeout)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20%2F%2F%20Try%20to%20list%20tools%20as%20a%20health%20check%0A%20%20%20%20_%2C%20err%20%3A%3D%20chm.client.ListTools(ctx)%0A%20%20%20%20%0A%20%20%20%20chm.mutex.Lock()%0A%20%20%20%20chm.healthy%20%3D%20(err%20%3D%3D%20nil)%0A%20%20%20%20chm.mutex.Unlock()%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Health%20check%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(chm%20*ClientHealthMonitor)%20IsHealthy()%20bool%20%7B%0A%20%20%20%20chm.mutex.RLock()%0A%20%20%20%20defer%20chm.mutex.RUnlock()%0A%20%20%20%20return%20chm.healthy%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Connection%20Recovery%0A%0A%60%60%60go%0Atype%20ResilientClient%20struct%20%7B%0A%20%20%20%20factory%20%20%20%20func()%20(client.Client%2C%20error)%0A%20%20%20%20client%20%20%20%20%20client.Client%0A%20%20%20%20mutex%20%20%20%20%20%20sync.RWMutex%0A%20%20%20%20recovering%20bool%0A%7D%0A%0Afunc%20NewResilientClient(factory%20func()%20(client.Client%2C%20error))%20*ResilientClient%20%7B%0A%20%20%20%20return%20%26ResilientClient%7B%0A%20%20%20%20%20%20%20%20factory%3A%20factory%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20*ResilientClient)%20ensureConnected(ctx%20context.Context)%20error%20%7B%0A%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20if%20rc.client%20!%3D%20nil%20%26%26%20!rc.recovering%20%7B%0A%20%20%20%20%20%20%20%20rc.mutex.RUnlock()%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D%0A%20%20%20%20rc.mutex.RUnlock()%0A%0A%20%20%20%20rc.mutex.Lock()%0A%20%20%20%20defer%20rc.mutex.Unlock()%0A%0A%20%20%20%20%2F%2F%20Double-check%20after%20acquiring%20write%20lock%0A%20%20%20%20if%20rc.client%20!%3D%20nil%20%26%26%20!rc.recovering%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20rc.recovering%20%3D%20true%0A%20%20%20%20defer%20func()%20%7B%20rc.recovering%20%3D%20false%20%7D()%0A%0A%20%20%20%20%2F%2F%20Close%20existing%20client%20if%20any%0A%20%20%20%20if%20rc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20rc.client.Close()%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20new%20client%0A%20%20%20%20newClient%2C%20err%20%3A%3D%20rc.factory()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20create%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Initialize%20new%20client%0A%20%20%20%20if%20err%20%3A%3D%20newClient.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20newClient.Close()%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20initialize%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20rc.client%20%3D%20newClient%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(rc%20*ResilientClient)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20rc.ensureConnected(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20client%20%3A%3D%20rc.client%0A%20%20%20%20rc.mutex.RUnlock()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20client.CallTool(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20isConnectionError(err)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Mark%20for%20recovery%20and%20retry%20once%0A%20%20%20%20%20%20%20%20rc.mutex.Lock()%0A%20%20%20%20%20%20%20%20rc.recovering%20%3D%20true%0A%20%20%20%20%20%20%20%20rc.mutex.Unlock()%0A%0A%20%20%20%20%20%20%20%20if%20retryErr%20%3A%3D%20rc.ensureConnected(ctx)%3B%20retryErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22recovery%20failed%3A%20%25w%22%2C%20retryErr)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20%20%20%20%20client%20%3D%20rc.client%0A%20%20%20%20%20%20%20%20rc.mutex.RUnlock()%0A%0A%20%20%20%20%20%20%20%20return%20client.CallTool(ctx%2C%20req)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20isConnectionError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20client.ErrConnectionLost)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20client.ErrConnectionFailed)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Operations%5D(%2Fclients%2Foperations)**%20-%20Learn%20to%20use%20tools%2C%20resources%2C%20and%20prompts%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Explore%20transport-specific%20features",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./basics-8VO7-hJN.js"),[]),path:"/clients/basics.html",type:"mdx",filePath:"clients/basics.mdx",content:"%23%20Client%20Basics%0A%0ALearn%20the%20fundamentals%20of%20creating%20and%20managing%20MCP%20clients%2C%20including%20lifecycle%20management%2C%20initialization%2C%20and%20error%20handling.%0A%0A%23%23%20Creating%20Clients%0A%0AMCP-Go%20provides%20client%20constructors%20for%20each%20supported%20transport.%20The%20choice%20of%20transport%20determines%20how%20your%20client%20communicates%20with%20the%20server.%0A%0A%23%23%23%20Client%20Constructor%20Patterns%0A%0A%60%60%60go%0A%2F%2F%20STDIO%20client%20-%20for%20command-line%20tools%0Aclient%2C%20err%20%3A%3D%20client.NewStdioClient(%22command%22%2C%20%22arg1%22%2C%20%22arg2%22)%0A%0A%2F%2F%20HTTP%20client%20-%20for%20web%20services%0Aclient%20%3A%3D%20client.NewHTTPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%0A%2F%2F%20SSE%20client%20-%20for%20real-time%20web%20applications%0Aclient%20%3A%3D%20client.NewSSEClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22)%0A%0A%2F%2F%20In-process%20client%20-%20for%20testing%20and%20embedded%20scenarios%0Aclient%20%3A%3D%20client.NewInProcessClient(server)%0A%60%60%60%0A%0A%23%23%23%20STDIO%20Client%20Creation%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22errors%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22math%22%0A%20%20%20%20%22net%2Fhttp%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20createStdioClient()%20(client.Client%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20client%20that%20spawns%20a%20subprocess%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20STDIO%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20c%2C%20nil%0A%7D%0A%0A%2F%2F%20With%20custom%20environment%20variables%0Afunc%20createStdioClientWithEnv()%20(client.Client%2C%20error)%20%7B%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClientWithOptions(client.StdioOptions%7B%0A%20%20%20%20%20%20%20%20Command%3A%20%22go%22%2C%0A%20%20%20%20%20%20%20%20Args%3A%20%20%20%20%5B%5Dstring%7B%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%7D%2C%0A%20%20%20%20%20%20%20%20Env%3A%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22LOG_LEVEL%3Ddebug%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22DATABASE_URL%3Dsqlite%3A%2F%2Ftest.db%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20WorkingDir%3A%20%22%2Fpath%2Fto%2Fserver%22%2C%0A%20%20%20%20%20%20%20%20Timeout%3A%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20STDIO%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20c%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Client%20Creation%0A%0A%60%60%60go%0Afunc%20createHTTPClient()%20client.Client%20%7B%0A%20%20%20%20%2F%2F%20Basic%20HTTP%20client%0A%20%20%20%20c%20%3A%3D%20client.NewHTTPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20custom%20headers%0A%20%20%20%20c.SetHeader(%22Authorization%22%2C%20%22Bearer%20your-token%22)%0A%20%20%20%20c.SetHeader(%22X-API-Version%22%2C%20%22v1%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20timeout%0A%20%20%20%20c.SetTimeout(30%20*%20time.Second)%0A%20%20%20%20%0A%20%20%20%20return%20c%0A%7D%0A%0A%2F%2F%20With%20custom%20HTTP%20client%0Afunc%20createCustomHTTPClient()%20client.Client%20%7B%0A%20%20%20%20httpClient%20%3A%3D%20%26http.Client%7B%0A%20%20%20%20%20%20%20%20Timeout%3A%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20Transport%3A%20%26http.Transport%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20MaxIdleConns%3A%20%20%20%20%20%20%20%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MaxIdleConnsPerHost%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20IdleConnTimeout%3A%20%20%20%20%2090%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20client.NewHTTPClientWithClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22%2C%20httpClient)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20SSE%20Client%20Creation%0A%0A%60%60%60go%0Afunc%20createSSEClient()%20client.Client%20%7B%0A%20%20%20%20%2F%2F%20Basic%20SSE%20client%0A%20%20%20%20c%20%3A%3D%20client.NewSSEClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20authentication%0A%20%20%20%20c.SetHeader(%22Authorization%22%2C%20%22Bearer%20your-token%22)%0A%20%20%20%20%0A%20%20%20%20return%20c%0A%7D%0A%0A%2F%2F%20With%20custom%20options%0Afunc%20createSSEClientWithOptions()%20client.Client%20%7B%0A%20%20%20%20options%20%3A%3D%20client.SSEOptions%7B%0A%20%20%20%20%20%20%20%20URL%3A%20%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22%2C%0A%20%20%20%20%20%20%20%20Headers%3A%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Authorization%22%3A%20%22Bearer%20your-token%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22X-Client-ID%22%3A%20%20%20%22my-app%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20ReconnectInterval%3A%205%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20MaxReconnects%3A%20%20%20%20%2010%2C%0A%20%20%20%20%20%20%20%20BufferSize%3A%20%20%20%20%20%20%20%201000%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20client.NewSSEClientWithOptions(options)%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Lifecycle%0A%0AUnderstanding%20the%20client%20lifecycle%20is%20crucial%20for%20proper%20resource%20management%20and%20error%20handling.%0A%0A%23%23%23%20Lifecycle%20Stages%0A%0A1.%20**Creation**%20-%20Instantiate%20the%20client%0A2.%20**Initialization**%20-%20Establish%20connection%20and%20exchange%20capabilities%0A3.%20**Operation**%20-%20Use%20tools%2C%20resources%2C%20and%20prompts%0A4.%20**Cleanup**%20-%20Close%20connections%20and%20free%20resources%0A%0A%23%23%23%20Complete%20Lifecycle%20Example%0A%0A%60%60%60go%0Afunc%20demonstrateClientLifecycle()%20error%20%7B%0A%20%20%20%20%2F%2F%201.%20Creation%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClient(%22server-command%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20creation%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Ensure%20cleanup%20happens%0A%20%20%20%20defer%20func()%20%7B%0A%20%20%20%20%20%20%20%20if%20closeErr%20%3A%3D%20c.Close()%3B%20closeErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Error%20closing%20client%3A%20%25v%22%2C%20closeErr)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%202.%20Initialization%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20initialization%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%203.%20Operation%0A%20%20%20%20if%20err%20%3A%3D%20performClientOperations(ctx%2C%20c)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20operations%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%204.%20Cleanup%20(handled%20by%20defer)%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20performClientOperations(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Found%20%25d%20tools%22%2C%20len(tools.Tools))%0A%0A%20%20%20%20%2F%2F%20Use%20the%20tools%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20tool.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22example%20input%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22format%22%3A%20%22json%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20failed%3A%20%25v%22%2C%20tool.Name%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20result%3A%20%25%2Bv%22%2C%20tool.Name%2C%20result)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Initialization%20Process%0A%0AThe%20initialization%20process%20establishes%20the%20MCP%20connection%20and%20exchanges%20capabilities%3A%0A%0A%60%60%60go%0Afunc%20initializeClientWithDetails(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20Initialize%20with%20custom%20client%20info%0A%20%20%20%20initReq%20%3A%3D%20mcp.InitializeRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.InitializeRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ProtocolVersion%3A%20%222024-11-05%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Capabilities%3A%20mcp.ClientCapabilities%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Tools%3A%20%20%20%20%20%26mcp.ToolsCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Resources%3A%20%26mcp.ResourcesCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Prompts%3A%20%20%20%26mcp.PromptsCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ClientInfo%3A%20mcp.ClientInfo%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%22My%20Application%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Version%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.InitializeWithRequest(ctx%2C%20initReq)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22initialization%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Connected%20to%20server%3A%20%25s%20v%25s%22%2C%20%0A%20%20%20%20%20%20%20%20result.ServerInfo.Name%2C%20%0A%20%20%20%20%20%20%20%20result.ServerInfo.Version)%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22Server%20capabilities%3A%20%25%2Bv%22%2C%20result.Capabilities)%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Graceful%20Shutdown%0A%0A%60%60%60go%0Atype%20ManagedClient%20struct%20%7B%0A%20%20%20%20client%20client.Client%0A%20%20%20%20ctx%20%20%20%20context.Context%0A%20%20%20%20cancel%20context.CancelFunc%0A%20%20%20%20done%20%20%20chan%20struct%7B%7D%0A%7D%0A%0Afunc%20NewManagedClient(clientType%2C%20address%20string)%20(*ManagedClient%2C%20error)%20%7B%0A%20%20%20%20var%20c%20client.Client%0A%20%20%20%20var%20err%20error%0A%0A%20%20%20%20switch%20clientType%20%7B%0A%20%20%20%20case%20%22stdio%22%3A%0A%20%20%20%20%20%20%20%20c%2C%20err%20%3D%20client.NewStdioClient(%22server-command%22)%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewHTTPClient(address)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewSSEClient(address)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20client%20type%3A%20%25s%22%2C%20clientType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20mc%20%3A%3D%20%26ManagedClient%7B%0A%20%20%20%20%20%20%20%20client%3A%20c%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20cancel%2C%0A%20%20%20%20%20%20%20%20done%3A%20%20%20make(chan%20struct%7B%7D)%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Initialize%20in%20background%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20defer%20close(mc.done)%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Client%20initialization%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20return%20mc%2C%20nil%0A%7D%0A%0Afunc%20(mc%20*ManagedClient)%20WaitForReady(timeout%20time.Duration)%20error%20%7B%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-mc.done%3A%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20case%20%3C-time.After(timeout)%3A%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20initialization%20timeout%22)%0A%20%20%20%20case%20%3C-mc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20mc.ctx.Err()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(mc%20*ManagedClient)%20Close()%20error%20%7B%0A%20%20%20%20mc.cancel()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20initialization%20to%20complete%20or%20timeout%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-mc.done%3A%0A%20%20%20%20case%20%3C-time.After(5%20*%20time.Second)%3A%0A%20%20%20%20%20%20%20%20log.Println(%22Timeout%20waiting%20for%20client%20shutdown%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mc.client.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AProper%20error%20handling%20is%20essential%20for%20robust%20client%20applications.%0A%0A%23%23%23%20Error%20Types%0A%0A%60%60%60go%0A%2F%2F%20Connection%20errors%0Avar%20(%0A%20%20%20%20ErrConnectionFailed%20%3D%20errors.New(%22connection%20failed%22)%0A%20%20%20%20ErrConnectionLost%20%20%20%3D%20errors.New(%22connection%20lost%22)%0A%20%20%20%20ErrTimeout%20%20%20%20%20%20%20%20%20%20%3D%20errors.New(%22operation%20timeout%22)%0A)%0A%0A%2F%2F%20Protocol%20errors%0Avar%20(%0A%20%20%20%20ErrInvalidResponse%20%20%20%20%3D%20errors.New(%22invalid%20response%22)%0A%20%20%20%20ErrProtocolViolation%20%20%3D%20errors.New(%22protocol%20violation%22)%0A%20%20%20%20ErrUnsupportedVersion%20%3D%20errors.New(%22unsupported%20protocol%20version%22)%0A)%0A%0A%2F%2F%20Operation%20errors%0Avar%20(%0A%20%20%20%20ErrToolNotFound%20%20%20%20%20%20%20%3D%20errors.New(%22tool%20not%20found%22)%0A%20%20%20%20ErrResourceNotFound%20%20%20%3D%20errors.New(%22resource%20not%20found%22)%0A%20%20%20%20ErrInvalidArguments%20%20%20%3D%20errors.New(%22invalid%20arguments%22)%0A%20%20%20%20ErrPermissionDenied%20%20%20%3D%20errors.New(%22permission%20denied%22)%0A)%0A%60%60%60%0A%0A%23%23%23%20Comprehensive%20Error%20Handling%0A%0A%60%60%60go%0Afunc%20handleClientErrors(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22example_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22param%22%3A%20%22value%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Connection%20errors%20-%20may%20be%20recoverable%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrConnectionLost)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Connection%20lost%2C%20attempting%20reconnect...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20reconnectErr%20%3A%3D%20reconnectClient(c)%3B%20reconnectErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Reconnection%20failed%3A%20%25v%22%2C%20reconnectErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Retry%20the%20operation%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20handleClientErrors(ctx%2C%20c)%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrTimeout)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Operation%20timed%20out%2C%20retrying%20with%20longer%20timeout...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2060*time.Second)%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20cancel()%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20handleClientErrors(ctx%2C%20c)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Protocol%20errors%20-%20usually%20not%20recoverable%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrProtocolViolation)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Protocol%20violation%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrUnsupportedVersion)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unsupported%20protocol%20version%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Operation%20errors%20-%20check%20and%20fix%20request%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrToolNotFound)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20not%20found%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Maybe%20list%20available%20tools%20and%20suggest%20alternatives%0A%20%20%20%20%20%20%20%20%20%20%20%20suggestAlternativeTools(ctx%2C%20c)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrInvalidArguments)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Invalid%20arguments%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Maybe%20get%20tool%20schema%20and%20show%20required%20parameters%0A%20%20%20%20%20%20%20%20%20%20%20%20showToolSchema(ctx%2C%20c%2C%20%22example_tool%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrPermissionDenied)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Permission%20denied%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Maybe%20prompt%20for%20authentication%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Unknown%20errors%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unexpected%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Process%20successful%20result%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%0Afunc%20reconnectClient(c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20Close%20existing%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Close()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20closing%20client%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Wait%20before%20reconnecting%0A%20%20%20%20time.Sleep(1%20*%20time.Second)%0A%0A%20%20%20%20%2F%2F%20Reinitialize%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20return%20c.Initialize(ctx)%0A%7D%0A%0Afunc%20suggestAlternativeTools(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20tools%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Println(%22Available%20tools%3A%22)%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22-%20%25s%3A%20%25s%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20showToolSchema(ctx%20context.Context%2C%20c%20client.Client%2C%20toolName%20string)%20%7B%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20tools%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20if%20tool.Name%20%3D%3D%20toolName%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20schema%20for%20%25s%3A%22%2C%20toolName)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Description%3A%20%25s%22%2C%20tool.Description)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Input%20schema%3A%20%25%2Bv%22%2C%20tool.InputSchema)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20%25s%20not%20found%22%2C%20toolName)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Retry%20Logic%20with%20Exponential%20Backoff%0A%0A%60%60%60go%0Atype%20RetryConfig%20struct%20%7B%0A%20%20%20%20MaxRetries%20%20%20%20%20%20int%0A%20%20%20%20InitialDelay%20%20%20%20time.Duration%0A%20%20%20%20MaxDelay%20%20%20%20%20%20%20%20time.Duration%0A%20%20%20%20BackoffFactor%20%20%20float64%0A%20%20%20%20RetryableErrors%20%5B%5Derror%0A%7D%0A%0Afunc%20DefaultRetryConfig()%20RetryConfig%20%7B%0A%20%20%20%20return%20RetryConfig%7B%0A%20%20%20%20%20%20%20%20MaxRetries%3A%20%20%20%203%2C%0A%20%20%20%20%20%20%20%20InitialDelay%3A%20%201%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20MaxDelay%3A%20%20%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20BackoffFactor%3A%202.0%2C%0A%20%20%20%20%20%20%20%20RetryableErrors%3A%20%5B%5Derror%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20client.ErrConnectionLost%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20client.ErrTimeout%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20client.ErrConnectionFailed%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20RetryConfig)%20IsRetryable(err%20error)%20bool%20%7B%0A%20%20%20%20for%20_%2C%20retryableErr%20%3A%3D%20range%20rc.RetryableErrors%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20retryableErr)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20false%0A%7D%0A%0Afunc%20WithRetry%5BT%20any%5D(ctx%20context.Context%2C%20config%20RetryConfig%2C%20operation%20func()%20(T%2C%20error))%20(T%2C%20error)%20%7B%0A%20%20%20%20var%20lastErr%20error%0A%20%20%20%20var%20zero%20T%0A%0A%20%20%20%20for%20attempt%20%3A%3D%200%3B%20attempt%20%3C%3D%20config.MaxRetries%3B%20attempt%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20operation()%0A%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20lastErr%20%3D%20err%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20non-retryable%20errors%0A%20%20%20%20%20%20%20%20if%20!config.IsRetryable(err)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20on%20last%20attempt%0A%20%20%20%20%20%20%20%20if%20attempt%20%3D%3D%20config.MaxRetries%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Calculate%20delay%20with%20exponential%20backoff%0A%20%20%20%20%20%20%20%20delay%20%3A%3D%20time.Duration(float64(config.InitialDelay)%20*%20math.Pow(config.BackoffFactor%2C%20float64(attempt)))%0A%20%20%20%20%20%20%20%20if%20delay%20%3E%20config.MaxDelay%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delay%20%3D%20config.MaxDelay%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20log.Printf(%22Attempt%20%25d%20failed%2C%20retrying%20in%20%25v%3A%20%25v%22%2C%20attempt%2B1%2C%20delay%2C%20err)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Wait%20with%20context%20cancellation%20support%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-time.After(delay)%3A%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20zero%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20zero%2C%20fmt.Errorf(%22failed%20after%20%25d%20attempts%3A%20%25w%22%2C%20config.MaxRetries%2B1%2C%20lastErr)%0A%7D%0A%0A%2F%2F%20Usage%20example%0Afunc%20callToolWithRetry(ctx%20context.Context%2C%20c%20client.Client%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20config%20%3A%3D%20DefaultRetryConfig()%0A%20%20%20%20%0A%20%20%20%20return%20WithRetry(ctx%2C%20config%2C%20func()%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20c.CallTool(ctx%2C%20req)%0A%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Context%20and%20Timeout%20Management%0A%0A%60%60%60go%0Afunc%20demonstrateContextUsage(c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Operation%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22long_running_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22duration%22%3A%2060%2C%20%2F%2F%20seconds%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.DeadlineExceeded)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Tool%20call%20timed%20out%22)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20completed%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%0Afunc%20demonstrateCancellation(c%20client.Client)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20%2F%2F%20Start%20operation%20in%20goroutine%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22long_running_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.Canceled)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Tool%20call%20was%20cancelled%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20completed%3A%20%25%2Bv%22%2C%20result)%0A%20%20%20%20%7D()%0A%0A%20%20%20%20%2F%2F%20Cancel%20after%205%20seconds%0A%20%20%20%20time.Sleep(5%20*%20time.Second)%0A%20%20%20%20cancel()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20a%20bit%20to%20see%20the%20cancellation%0A%20%20%20%20time.Sleep(1%20*%20time.Second)%0A%7D%0A%60%60%60%0A%0A%23%23%20Connection%20Monitoring%0A%0A%23%23%23%20Health%20Checks%0A%0A%60%60%60go%0Atype%20ClientHealthMonitor%20struct%20%7B%0A%20%20%20%20client%20%20%20client.Client%0A%20%20%20%20interval%20time.Duration%0A%20%20%20%20timeout%20%20time.Duration%0A%20%20%20%20healthy%20%20bool%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewClientHealthMonitor(c%20client.Client%2C%20interval%2C%20timeout%20time.Duration)%20*ClientHealthMonitor%20%7B%0A%20%20%20%20return%20%26ClientHealthMonitor%7B%0A%20%20%20%20%20%20%20%20client%3A%20%20%20c%2C%0A%20%20%20%20%20%20%20%20interval%3A%20interval%2C%0A%20%20%20%20%20%20%20%20timeout%3A%20%20timeout%2C%0A%20%20%20%20%20%20%20%20healthy%3A%20%20false%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(chm%20*ClientHealthMonitor)%20Start(ctx%20context.Context)%20%7B%0A%20%20%20%20ticker%20%3A%3D%20time.NewTicker(chm.interval)%0A%20%20%20%20defer%20ticker.Stop()%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20case%20%3C-ticker.C%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20chm.checkHealth(ctx)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(chm%20*ClientHealthMonitor)%20checkHealth(ctx%20context.Context)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%20chm.timeout)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20%2F%2F%20Try%20to%20list%20tools%20as%20a%20health%20check%0A%20%20%20%20_%2C%20err%20%3A%3D%20chm.client.ListTools(ctx)%0A%20%20%20%20%0A%20%20%20%20chm.mutex.Lock()%0A%20%20%20%20chm.healthy%20%3D%20(err%20%3D%3D%20nil)%0A%20%20%20%20chm.mutex.Unlock()%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Health%20check%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(chm%20*ClientHealthMonitor)%20IsHealthy()%20bool%20%7B%0A%20%20%20%20chm.mutex.RLock()%0A%20%20%20%20defer%20chm.mutex.RUnlock()%0A%20%20%20%20return%20chm.healthy%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Connection%20Recovery%0A%0A%60%60%60go%0Atype%20ResilientClient%20struct%20%7B%0A%20%20%20%20factory%20%20%20%20func()%20(client.Client%2C%20error)%0A%20%20%20%20client%20%20%20%20%20client.Client%0A%20%20%20%20mutex%20%20%20%20%20%20sync.RWMutex%0A%20%20%20%20recovering%20bool%0A%7D%0A%0Afunc%20NewResilientClient(factory%20func()%20(client.Client%2C%20error))%20*ResilientClient%20%7B%0A%20%20%20%20return%20%26ResilientClient%7B%0A%20%20%20%20%20%20%20%20factory%3A%20factory%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20*ResilientClient)%20ensureConnected(ctx%20context.Context)%20error%20%7B%0A%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20if%20rc.client%20!%3D%20nil%20%26%26%20!rc.recovering%20%7B%0A%20%20%20%20%20%20%20%20rc.mutex.RUnlock()%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D%0A%20%20%20%20rc.mutex.RUnlock()%0A%0A%20%20%20%20rc.mutex.Lock()%0A%20%20%20%20defer%20rc.mutex.Unlock()%0A%0A%20%20%20%20%2F%2F%20Double-check%20after%20acquiring%20write%20lock%0A%20%20%20%20if%20rc.client%20!%3D%20nil%20%26%26%20!rc.recovering%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20rc.recovering%20%3D%20true%0A%20%20%20%20defer%20func()%20%7B%20rc.recovering%20%3D%20false%20%7D()%0A%0A%20%20%20%20%2F%2F%20Close%20existing%20client%20if%20any%0A%20%20%20%20if%20rc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20rc.client.Close()%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20new%20client%0A%20%20%20%20newClient%2C%20err%20%3A%3D%20rc.factory()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20create%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Initialize%20new%20client%0A%20%20%20%20if%20err%20%3A%3D%20newClient.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20newClient.Close()%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20initialize%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20rc.client%20%3D%20newClient%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(rc%20*ResilientClient)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20rc.ensureConnected(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20client%20%3A%3D%20rc.client%0A%20%20%20%20rc.mutex.RUnlock()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20client.CallTool(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20isConnectionError(err)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Mark%20for%20recovery%20and%20retry%20once%0A%20%20%20%20%20%20%20%20rc.mutex.Lock()%0A%20%20%20%20%20%20%20%20rc.recovering%20%3D%20true%0A%20%20%20%20%20%20%20%20rc.mutex.Unlock()%0A%0A%20%20%20%20%20%20%20%20if%20retryErr%20%3A%3D%20rc.ensureConnected(ctx)%3B%20retryErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22recovery%20failed%3A%20%25w%22%2C%20retryErr)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20%20%20%20%20client%20%3D%20rc.client%0A%20%20%20%20%20%20%20%20rc.mutex.RUnlock()%0A%0A%20%20%20%20%20%20%20%20return%20client.CallTool(ctx%2C%20req)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20isConnectionError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20client.ErrConnectionLost)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20client.ErrConnectionFailed)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Operations%5D(%2Fclients%2Foperations)**%20-%20Learn%20to%20use%20tools%2C%20resources%2C%20and%20prompts%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Explore%20transport-specific%20features",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./index-B4skuo7e.js"),[]),path:"/clients",type:"mdx",filePath:"clients/index.mdx",content:"%23%20Building%20MCP%20Clients%0A%0ALearn%20how%20to%20build%20MCP%20clients%20that%20connect%20to%20and%20interact%20with%20MCP%20servers.%20This%20section%20covers%20client%20creation%2C%20operations%2C%20and%20transport-specific%20implementations.%0A%0A%23%23%20Overview%0A%0AMCP%20clients%20connect%20to%20servers%20to%20access%20tools%2C%20resources%2C%20and%20prompts.%20MCP-Go%20provides%20client%20implementations%20for%20all%20supported%20transports%2C%20making%20it%20easy%20to%20integrate%20MCP%20functionality%20into%20your%20applications.%0A%0A%23%23%20What%20You'll%20Learn%0A%0A-%20**%5BClient%20Basics%5D(%2Fclients%2Fbasics)**%20-%20Creating%20and%20managing%20client%20lifecycle%0A-%20**%5BClient%20Operations%5D(%2Fclients%2Foperations)**%20-%20Using%20tools%2C%20resources%2C%20and%20prompts%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Transport-specific%20client%20implementations%0A%0A%23%23%20Quick%20Example%0A%0AHere's%20a%20complete%20example%20showing%20how%20to%20create%20and%20use%20an%20MCP%20client%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20STDIO%20client%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20the%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Discover%20available%20capabilities%0A%20%20%20%20if%20err%20%3A%3D%20demonstrateClientOperations(ctx%2C%20c)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20demonstrateClientOperations(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20list%20tools%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20tools%3A%20%25d%5Cn%22%2C%20len(tools.Tools))%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20List%20available%20resources%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20list%20resources%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22%5CnAvailable%20resources%3A%20%25d%5Cn%22%2C%20len(resources.Resources))%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20resource.URI%2C%20resource.Name)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20tool%20if%20available%0A%20%20%20%20if%20len(tools.Tools)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20tool%20%3A%3D%20tools.Tools%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnCalling%20tool%3A%20%25s%5Cn%22%2C%20tool.Name)%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20tool.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22example%20input%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22format%22%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22tool%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Tool%20result%3A%20%25%2Bv%5Cn%22%2C%20result)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Read%20a%20resource%20if%20available%0A%20%20%20%20if%20len(resources.Resources)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20resource%20%3A%3D%20resources.Resources%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnReading%20resource%3A%20%25s%5Cn%22%2C%20resource.URI)%0A%0A%20%20%20%20%20%20%20%20content%2C%20err%20%3A%3D%20c.ReadResource(ctx%2C%20mcp.ReadResourceRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.ReadResourceRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20resource.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22resource%20read%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Resource%20content%3A%20%25%2Bv%5Cn%22%2C%20content)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Types%20by%20Transport%0A%0A%23%23%23%20STDIO%20Client%0A**Best%20for%3A**%0A-%20Command-line%20applications%0A-%20Desktop%20software%20integration%0A-%20Local%20development%20and%20testing%0A-%20Single-server%20connections%0A%0A%60%60%60go%0A%2F%2F%20Create%20STDIO%20client%0Aclient%2C%20err%20%3A%3D%20client.NewStdioClient(%22server-command%22%2C%20%22arg1%22%2C%20%22arg2%22)%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Client%0A**Best%20for%3A**%0A-%20Web%20applications%0A-%20Microservice%20architectures%0A-%20Load-balanced%20deployments%0A-%20REST-like%20interactions%0A%0A%60%60%60go%0A%2F%2F%20Create%20HTTP%20client%0Aclient%20%3A%3D%20client.NewHTTPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%60%60%60%0A%0A%23%23%23%20SSE%20Client%0A**Best%20for%3A**%0A-%20Real-time%20web%20applications%0A-%20Browser-based%20interfaces%0A-%20Streaming%20data%20scenarios%0A-%20Multi-client%20environments%0A%0A%60%60%60go%0A%2F%2F%20Create%20SSE%20client%0Aclient%20%3A%3D%20client.NewSSEClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22)%0A%60%60%60%0A%0A%23%23%23%20In-Process%20Client%0A**Best%20for%3A**%0A-%20Testing%20and%20development%0A-%20Embedded%20scenarios%0A-%20High-performance%20applications%0A-%20Library%20integrations%0A%0A%60%60%60go%0A%2F%2F%20Create%20in-process%20client%0Aclient%20%3A%3D%20client.NewInProcessClient(server)%0A%60%60%60%0A%0A%23%23%20Common%20Client%20Patterns%0A%0A%23%23%23%20Connection%20Management%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22errors%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Atype%20MCPClientManager%20struct%20%7B%0A%20%20%20%20client%20client.Client%0A%20%20%20%20ctx%20%20%20%20context.Context%0A%20%20%20%20cancel%20context.CancelFunc%0A%7D%0A%0Afunc%20NewMCPClientManager(clientType%2C%20address%20string)%20(*MCPClientManager%2C%20error)%20%7B%0A%20%20%20%20var%20c%20client.Client%0A%20%20%20%20var%20err%20error%0A%0A%20%20%20%20switch%20clientType%20%7B%0A%20%20%20%20case%20%22stdio%22%3A%0A%20%20%20%20%20%20%20%20c%2C%20err%20%3D%20client.NewStdioClient(%22server-command%22)%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewHTTPClient(address)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewSSEClient(address)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20client%20type%3A%20%25s%22%2C%20clientType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20manager%20%3A%3D%20%26MCPClientManager%7B%0A%20%20%20%20%20%20%20%20client%3A%20c%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20cancel%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Initialize%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20cancel()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20initialize%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20manager%2C%20nil%0A%7D%0A%0Afunc%20(m%20*MCPClientManager)%20Close()%20error%20%7B%0A%20%20%20%20m.cancel()%0A%20%20%20%20return%20m.client.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Handling%0A%0A%60%60%60go%0Afunc%20handleClientErrors(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Tool%20call%20with%20error%20handling%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22example_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22param%22%3A%20%22value%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrConnectionLost)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Connection%20lost%2C%20attempting%20reconnect...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Implement%20reconnection%20logic%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrToolNotFound)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20not%20found%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrInvalidArguments)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Invalid%20arguments%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unexpected%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Process%20successful%20result%0A%20%20%20%20processToolResult(result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Retry%20Logic%0A%0A%60%60%60go%0Afunc%20callToolWithRetry(ctx%20context.Context%2C%20c%20client.Client%2C%20req%20mcp.CallToolRequest%2C%20maxRetries%20int)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20var%20lastErr%20error%0A%0A%20%20%20%20for%20attempt%20%3A%3D%200%3B%20attempt%20%3C%3D%20maxRetries%3B%20attempt%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20lastErr%20%3D%20err%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20certain%20errors%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20client.ErrInvalidArguments)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20client.ErrToolNotFound)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Exponential%20backoff%0A%20%20%20%20%20%20%20%20if%20attempt%20%3C%20maxRetries%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20backoff%20%3A%3D%20time.Duration(1%3C%3Cattempt)%20*%20time.Second%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Attempt%20%25d%20failed%2C%20retrying%20in%20%25v%3A%20%25v%22%2C%20attempt%2B1%2C%20backoff%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-time.After(backoff)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20after%20%25d%20attempts%3A%20%25w%22%2C%20maxRetries%2B1%2C%20lastErr)%0A%7D%0A%60%60%60%0A%0A%23%23%20Integration%20Patterns%0A%0A%23%23%23%20LLM%20Application%20Integration%0A%0A%60%60%60go%0Atype%20LLMApplication%20struct%20%7B%0A%20%20%20%20mcpClient%20client.Client%0A%20%20%20%20llmClient%20LLMClient%0A%7D%0A%0Afunc%20NewLLMApplication(mcpAddress%20string)%20(*LLMApplication%2C%20error)%20%7B%0A%20%20%20%20mcpClient%20%3A%3D%20client.NewHTTPClient(mcpAddress)%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20mcpClient.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26LLMApplication%7B%0A%20%20%20%20%20%20%20%20mcpClient%3A%20mcpClient%2C%0A%20%20%20%20%20%20%20%20llmClient%3A%20NewLLMClient()%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(app%20*LLMApplication)%20ProcessUserQuery(ctx%20context.Context%2C%20query%20string)%20(string%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20available%20tools%20for%20the%20LLM%0A%20%20%20%20tools%2C%20err%20%3A%3D%20app.mcpClient.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Send%20query%20to%20LLM%20with%20available%20tools%0A%20%20%20%20response%2C%20toolCalls%2C%20err%20%3A%3D%20app.llmClient.Chat(ctx%2C%20query%2C%20tools.Tools)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Execute%20any%20tool%20calls%0A%20%20%20%20for%20_%2C%20toolCall%20%3A%3D%20range%20toolCalls%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20app.mcpClient.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20toolCall.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20toolCall.Arguments%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22%22%2C%20fmt.Errorf(%22tool%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Send%20tool%20result%20back%20to%20LLM%0A%20%20%20%20%20%20%20%20response%2C%20err%20%3D%20app.llmClient.ContinueWithToolResult(ctx%2C%20toolCall.ID%2C%20result)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20response%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multi-Server%20Client%0A%0A%60%60%60go%0Atype%20MultiServerClient%20struct%20%7B%0A%20%20%20%20clients%20map%5Bstring%5Dclient.Client%0A%20%20%20%20mutex%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewMultiServerClient()%20*MultiServerClient%20%7B%0A%20%20%20%20return%20%26MultiServerClient%7B%0A%20%20%20%20%20%20%20%20clients%3A%20make(map%5Bstring%5Dclient.Client)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(msc%20*MultiServerClient)%20AddServer(name%2C%20address%20string%2C%20clientType%20string)%20error%20%7B%0A%20%20%20%20msc.mutex.Lock()%0A%20%20%20%20defer%20msc.mutex.Unlock()%0A%0A%20%20%20%20var%20c%20client.Client%0A%20%20%20%20var%20err%20error%0A%0A%20%20%20%20switch%20clientType%20%7B%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewHTTPClient(address)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewSSEClient(address)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22unsupported%20client%20type%3A%20%25s%22%2C%20clientType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20initialize%20client%20for%20%25s%3A%20%25w%22%2C%20name%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20msc.clients%5Bname%5D%20%3D%20c%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(msc%20*MultiServerClient)%20CallTool(ctx%20context.Context%2C%20serverName%2C%20toolName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20msc.mutex.RLock()%0A%20%20%20%20c%2C%20exists%20%3A%3D%20msc.clients%5BserverName%5D%0A%20%20%20%20msc.mutex.RUnlock()%0A%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22server%20not%20found%3A%20%25s%22%2C%20serverName)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20toolName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(msc%20*MultiServerClient)%20GetAllTools(ctx%20context.Context)%20(map%5Bstring%5D%5B%5Dmcp.Tool%2C%20error)%20%7B%0A%20%20%20%20msc.mutex.RLock()%0A%20%20%20%20defer%20msc.mutex.RUnlock()%0A%0A%20%20%20%20allTools%20%3A%3D%20make(map%5Bstring%5D%5B%5Dmcp.Tool)%0A%0A%20%20%20%20for%20serverName%2C%20c%20%3A%3D%20range%20msc.clients%20%7B%0A%20%20%20%20%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20get%20tools%20from%20%25s%3A%20%25w%22%2C%20serverName%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20allTools%5BserverName%5D%20%3D%20tools.Tools%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20allTools%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0AExplore%20each%20client%20topic%20in%20detail%3A%0A%0A-%20**%5BClient%20Basics%5D(%2Fclients%2Fbasics)**%20-%20Client%20lifecycle%20and%20error%20handling%0A-%20**%5BClient%20Operations%5D(%2Fclients%2Foperations)**%20-%20Tools%2C%20resources%2C%20and%20prompts%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Transport-specific%20implementations",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./index-B4skuo7e.js"),[]),path:"/clients.html",type:"mdx",filePath:"clients/index.mdx",content:"%23%20Building%20MCP%20Clients%0A%0ALearn%20how%20to%20build%20MCP%20clients%20that%20connect%20to%20and%20interact%20with%20MCP%20servers.%20This%20section%20covers%20client%20creation%2C%20operations%2C%20and%20transport-specific%20implementations.%0A%0A%23%23%20Overview%0A%0AMCP%20clients%20connect%20to%20servers%20to%20access%20tools%2C%20resources%2C%20and%20prompts.%20MCP-Go%20provides%20client%20implementations%20for%20all%20supported%20transports%2C%20making%20it%20easy%20to%20integrate%20MCP%20functionality%20into%20your%20applications.%0A%0A%23%23%20What%20You'll%20Learn%0A%0A-%20**%5BClient%20Basics%5D(%2Fclients%2Fbasics)**%20-%20Creating%20and%20managing%20client%20lifecycle%0A-%20**%5BClient%20Operations%5D(%2Fclients%2Foperations)**%20-%20Using%20tools%2C%20resources%2C%20and%20prompts%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Transport-specific%20client%20implementations%0A%0A%23%23%20Quick%20Example%0A%0AHere's%20a%20complete%20example%20showing%20how%20to%20create%20and%20use%20an%20MCP%20client%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20STDIO%20client%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20the%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Discover%20available%20capabilities%0A%20%20%20%20if%20err%20%3A%3D%20demonstrateClientOperations(ctx%2C%20c)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20demonstrateClientOperations(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20list%20tools%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20tools%3A%20%25d%5Cn%22%2C%20len(tools.Tools))%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20List%20available%20resources%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20list%20resources%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22%5CnAvailable%20resources%3A%20%25d%5Cn%22%2C%20len(resources.Resources))%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20resource.URI%2C%20resource.Name)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20tool%20if%20available%0A%20%20%20%20if%20len(tools.Tools)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20tool%20%3A%3D%20tools.Tools%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnCalling%20tool%3A%20%25s%5Cn%22%2C%20tool.Name)%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20tool.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22example%20input%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22format%22%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22tool%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Tool%20result%3A%20%25%2Bv%5Cn%22%2C%20result)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Read%20a%20resource%20if%20available%0A%20%20%20%20if%20len(resources.Resources)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20resource%20%3A%3D%20resources.Resources%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnReading%20resource%3A%20%25s%5Cn%22%2C%20resource.URI)%0A%0A%20%20%20%20%20%20%20%20content%2C%20err%20%3A%3D%20c.ReadResource(ctx%2C%20mcp.ReadResourceRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.ReadResourceRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20resource.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22resource%20read%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Resource%20content%3A%20%25%2Bv%5Cn%22%2C%20content)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Types%20by%20Transport%0A%0A%23%23%23%20STDIO%20Client%0A**Best%20for%3A**%0A-%20Command-line%20applications%0A-%20Desktop%20software%20integration%0A-%20Local%20development%20and%20testing%0A-%20Single-server%20connections%0A%0A%60%60%60go%0A%2F%2F%20Create%20STDIO%20client%0Aclient%2C%20err%20%3A%3D%20client.NewStdioClient(%22server-command%22%2C%20%22arg1%22%2C%20%22arg2%22)%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Client%0A**Best%20for%3A**%0A-%20Web%20applications%0A-%20Microservice%20architectures%0A-%20Load-balanced%20deployments%0A-%20REST-like%20interactions%0A%0A%60%60%60go%0A%2F%2F%20Create%20HTTP%20client%0Aclient%20%3A%3D%20client.NewHTTPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%60%60%60%0A%0A%23%23%23%20SSE%20Client%0A**Best%20for%3A**%0A-%20Real-time%20web%20applications%0A-%20Browser-based%20interfaces%0A-%20Streaming%20data%20scenarios%0A-%20Multi-client%20environments%0A%0A%60%60%60go%0A%2F%2F%20Create%20SSE%20client%0Aclient%20%3A%3D%20client.NewSSEClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22)%0A%60%60%60%0A%0A%23%23%23%20In-Process%20Client%0A**Best%20for%3A**%0A-%20Testing%20and%20development%0A-%20Embedded%20scenarios%0A-%20High-performance%20applications%0A-%20Library%20integrations%0A%0A%60%60%60go%0A%2F%2F%20Create%20in-process%20client%0Aclient%20%3A%3D%20client.NewInProcessClient(server)%0A%60%60%60%0A%0A%23%23%20Common%20Client%20Patterns%0A%0A%23%23%23%20Connection%20Management%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22errors%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Atype%20MCPClientManager%20struct%20%7B%0A%20%20%20%20client%20client.Client%0A%20%20%20%20ctx%20%20%20%20context.Context%0A%20%20%20%20cancel%20context.CancelFunc%0A%7D%0A%0Afunc%20NewMCPClientManager(clientType%2C%20address%20string)%20(*MCPClientManager%2C%20error)%20%7B%0A%20%20%20%20var%20c%20client.Client%0A%20%20%20%20var%20err%20error%0A%0A%20%20%20%20switch%20clientType%20%7B%0A%20%20%20%20case%20%22stdio%22%3A%0A%20%20%20%20%20%20%20%20c%2C%20err%20%3D%20client.NewStdioClient(%22server-command%22)%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewHTTPClient(address)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewSSEClient(address)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20client%20type%3A%20%25s%22%2C%20clientType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20manager%20%3A%3D%20%26MCPClientManager%7B%0A%20%20%20%20%20%20%20%20client%3A%20c%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20cancel%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Initialize%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20cancel()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20initialize%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20manager%2C%20nil%0A%7D%0A%0Afunc%20(m%20*MCPClientManager)%20Close()%20error%20%7B%0A%20%20%20%20m.cancel()%0A%20%20%20%20return%20m.client.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Handling%0A%0A%60%60%60go%0Afunc%20handleClientErrors(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Tool%20call%20with%20error%20handling%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22example_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22param%22%3A%20%22value%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrConnectionLost)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Connection%20lost%2C%20attempting%20reconnect...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Implement%20reconnection%20logic%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrToolNotFound)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20not%20found%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrInvalidArguments)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Invalid%20arguments%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unexpected%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Process%20successful%20result%0A%20%20%20%20processToolResult(result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Retry%20Logic%0A%0A%60%60%60go%0Afunc%20callToolWithRetry(ctx%20context.Context%2C%20c%20client.Client%2C%20req%20mcp.CallToolRequest%2C%20maxRetries%20int)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20var%20lastErr%20error%0A%0A%20%20%20%20for%20attempt%20%3A%3D%200%3B%20attempt%20%3C%3D%20maxRetries%3B%20attempt%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20lastErr%20%3D%20err%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20certain%20errors%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20client.ErrInvalidArguments)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20client.ErrToolNotFound)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Exponential%20backoff%0A%20%20%20%20%20%20%20%20if%20attempt%20%3C%20maxRetries%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20backoff%20%3A%3D%20time.Duration(1%3C%3Cattempt)%20*%20time.Second%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Attempt%20%25d%20failed%2C%20retrying%20in%20%25v%3A%20%25v%22%2C%20attempt%2B1%2C%20backoff%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-time.After(backoff)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20after%20%25d%20attempts%3A%20%25w%22%2C%20maxRetries%2B1%2C%20lastErr)%0A%7D%0A%60%60%60%0A%0A%23%23%20Integration%20Patterns%0A%0A%23%23%23%20LLM%20Application%20Integration%0A%0A%60%60%60go%0Atype%20LLMApplication%20struct%20%7B%0A%20%20%20%20mcpClient%20client.Client%0A%20%20%20%20llmClient%20LLMClient%0A%7D%0A%0Afunc%20NewLLMApplication(mcpAddress%20string)%20(*LLMApplication%2C%20error)%20%7B%0A%20%20%20%20mcpClient%20%3A%3D%20client.NewHTTPClient(mcpAddress)%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20mcpClient.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26LLMApplication%7B%0A%20%20%20%20%20%20%20%20mcpClient%3A%20mcpClient%2C%0A%20%20%20%20%20%20%20%20llmClient%3A%20NewLLMClient()%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(app%20*LLMApplication)%20ProcessUserQuery(ctx%20context.Context%2C%20query%20string)%20(string%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20available%20tools%20for%20the%20LLM%0A%20%20%20%20tools%2C%20err%20%3A%3D%20app.mcpClient.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Send%20query%20to%20LLM%20with%20available%20tools%0A%20%20%20%20response%2C%20toolCalls%2C%20err%20%3A%3D%20app.llmClient.Chat(ctx%2C%20query%2C%20tools.Tools)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Execute%20any%20tool%20calls%0A%20%20%20%20for%20_%2C%20toolCall%20%3A%3D%20range%20toolCalls%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20app.mcpClient.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20toolCall.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20toolCall.Arguments%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22%22%2C%20fmt.Errorf(%22tool%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Send%20tool%20result%20back%20to%20LLM%0A%20%20%20%20%20%20%20%20response%2C%20err%20%3D%20app.llmClient.ContinueWithToolResult(ctx%2C%20toolCall.ID%2C%20result)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20response%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multi-Server%20Client%0A%0A%60%60%60go%0Atype%20MultiServerClient%20struct%20%7B%0A%20%20%20%20clients%20map%5Bstring%5Dclient.Client%0A%20%20%20%20mutex%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewMultiServerClient()%20*MultiServerClient%20%7B%0A%20%20%20%20return%20%26MultiServerClient%7B%0A%20%20%20%20%20%20%20%20clients%3A%20make(map%5Bstring%5Dclient.Client)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(msc%20*MultiServerClient)%20AddServer(name%2C%20address%20string%2C%20clientType%20string)%20error%20%7B%0A%20%20%20%20msc.mutex.Lock()%0A%20%20%20%20defer%20msc.mutex.Unlock()%0A%0A%20%20%20%20var%20c%20client.Client%0A%20%20%20%20var%20err%20error%0A%0A%20%20%20%20switch%20clientType%20%7B%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewHTTPClient(address)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewSSEClient(address)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22unsupported%20client%20type%3A%20%25s%22%2C%20clientType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20initialize%20client%20for%20%25s%3A%20%25w%22%2C%20name%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20msc.clients%5Bname%5D%20%3D%20c%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(msc%20*MultiServerClient)%20CallTool(ctx%20context.Context%2C%20serverName%2C%20toolName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20msc.mutex.RLock()%0A%20%20%20%20c%2C%20exists%20%3A%3D%20msc.clients%5BserverName%5D%0A%20%20%20%20msc.mutex.RUnlock()%0A%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22server%20not%20found%3A%20%25s%22%2C%20serverName)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20toolName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(msc%20*MultiServerClient)%20GetAllTools(ctx%20context.Context)%20(map%5Bstring%5D%5B%5Dmcp.Tool%2C%20error)%20%7B%0A%20%20%20%20msc.mutex.RLock()%0A%20%20%20%20defer%20msc.mutex.RUnlock()%0A%0A%20%20%20%20allTools%20%3A%3D%20make(map%5Bstring%5D%5B%5Dmcp.Tool)%0A%0A%20%20%20%20for%20serverName%2C%20c%20%3A%3D%20range%20msc.clients%20%7B%0A%20%20%20%20%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20get%20tools%20from%20%25s%3A%20%25w%22%2C%20serverName%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20allTools%5BserverName%5D%20%3D%20tools.Tools%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20allTools%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0AExplore%20each%20client%20topic%20in%20detail%3A%0A%0A-%20**%5BClient%20Basics%5D(%2Fclients%2Fbasics)**%20-%20Client%20lifecycle%20and%20error%20handling%0A-%20**%5BClient%20Operations%5D(%2Fclients%2Foperations)**%20-%20Tools%2C%20resources%2C%20and%20prompts%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Transport-specific%20implementations",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./operations-CKeJYSid.js"),[]),path:"/clients/operations",type:"mdx",filePath:"clients/operations.mdx",content:"%23%20Client%20Operations%0A%0ALearn%20how%20to%20use%20MCP%20clients%20to%20interact%20with%20servers%20through%20tools%2C%20resources%2C%20prompts%2C%20and%20subscriptions.%0A%0A%23%23%20Listing%20Resources%0A%0AResources%20provide%20read-only%20access%20to%20data.%20Before%20reading%20resources%2C%20you%20typically%20need%20to%20discover%20what's%20available.%0A%0A%23%23%23%20Basic%20Resource%20Listing%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22base64%22%0A%20%20%20%20%22context%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22reflect%22%0A%20%20%20%20%22regexp%22%0A%20%20%20%20%22strings%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20listResources(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20List%20all%20available%20resources%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20list%20resources%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20resources%3A%20%25d%5Cn%22%2C%20len(resources.Resources))%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%20(%25s)%3A%20%25s%5Cn%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20resource.URI%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20resource.MIMEType%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20resource.Name)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20resource.Description%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Description%3A%20%25s%5Cn%22%2C%20resource.Description)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Filtered%20Resource%20Listing%0A%0A%60%60%60go%0Afunc%20listResourcesByType(ctx%20context.Context%2C%20c%20client.Client%2C%20mimeType%20string)%20(%5B%5Dmcp.Resource%2C%20error)%20%7B%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Resource%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20if%20resource.MIMEType%20%3D%3D%20mimeType%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20resource)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20filtered%2C%20nil%0A%7D%0A%0Afunc%20listResourcesByPattern(ctx%20context.Context%2C%20c%20client.Client%2C%20pattern%20string)%20(%5B%5Dmcp.Resource%2C%20error)%20%7B%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20regex%2C%20err%20%3A%3D%20regexp.Compile(pattern)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20pattern%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Resource%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20if%20regex.MatchString(resource.URI)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20resource)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20filtered%2C%20nil%0A%7D%0A%0A%2F%2F%20Usage%20examples%0Afunc%20demonstrateResourceFiltering(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Find%20all%20JSON%20resources%0A%20%20%20%20jsonResources%2C%20err%20%3A%3D%20listResourcesByType(ctx%2C%20c%2C%20%22application%2Fjson%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20listing%20JSON%20resources%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Found%20%25d%20JSON%20resources%5Cn%22%2C%20len(jsonResources))%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Find%20all%20user-related%20resources%0A%20%20%20%20userResources%2C%20err%20%3A%3D%20listResourcesByPattern(ctx%2C%20c%2C%20%60users%3F%3A%2F%2F.*%60)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20listing%20user%20resources%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Found%20%25d%20user%20resources%5Cn%22%2C%20len(userResources))%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Reading%20Resources%0A%0AOnce%20you%20know%20what%20resources%20are%20available%2C%20you%20can%20read%20their%20content.%0A%0A%23%23%23%20Basic%20Resource%20Reading%0A%0A%60%60%60go%0Afunc%20readResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.ReadResource(ctx%2C%20mcp.ReadResourceRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.ReadResourceRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20uri%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20resource%20%25s%3A%20%25w%22%2C%20uri%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20demonstrateResourceReading(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20List%20resources%20first%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20resources%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Read%20each%20resource%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnReading%20resource%3A%20%25s%5Cn%22%2C%20resource.URI)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20resource.URI)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20read%20resource%20%25s%3A%20%25v%22%2C%20resource.URI%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20resource%20contents%0A%20%20%20%20%20%20%20%20for%20i%2C%20content%20%3A%3D%20range%20result.Contents%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Content%20%25d%3A%5Cn%22%2C%20i%2B1)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20URI%3A%20%25s%5Cn%22%2C%20content.URI)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20MIME%20Type%3A%20%25s%5Cn%22%2C%20content.MIMEType)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20content.Text%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Text%3A%20%25s%5Cn%22%2C%20truncateString(content.Text%2C%20100))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20content.Blob%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Blob%3A%20%25d%20bytes%5Cn%22%2C%20len(content.Blob))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20truncateString(s%20string%2C%20maxLen%20int)%20string%20%7B%0A%20%20%20%20if%20len(s)%20%3C%3D%20maxLen%20%7B%0A%20%20%20%20%20%20%20%20return%20s%0A%20%20%20%20%7D%0A%20%20%20%20return%20s%5B%3AmaxLen%5D%20%2B%20%22...%22%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Typed%20Resource%20Reading%0A%0A%60%60%60go%0A%2F%2F%20Helper%20functions%20for%20common%20resource%20types%0Afunc%20readJSONResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(map%5Bstring%5Dinterface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(result.Contents)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20content%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%20%3A%3D%20result.Contents%5B0%5D%0A%20%20%20%20if%20content.MIMEType%20!%3D%20%22application%2Fjson%22%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22expected%20JSON%2C%20got%20%25s%22%2C%20content.MIMEType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20data%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20err%20%3A%3D%20json.Unmarshal(%5B%5Dbyte(content.Text)%2C%20%26data)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20parse%20JSON%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20data%2C%20nil%0A%7D%0A%0Afunc%20readTextResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(string%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(result.Contents)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20fmt.Errorf(%22no%20content%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%20%3A%3D%20result.Contents%5B0%5D%0A%20%20%20%20if%20!strings.HasPrefix(content.MIMEType%2C%20%22text%2F%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20fmt.Errorf(%22expected%20text%2C%20got%20%25s%22%2C%20content.MIMEType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20content.Text%2C%20nil%0A%7D%0A%0Afunc%20readBinaryResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(%5B%5Dbyte%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(result.Contents)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20content%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%20%3A%3D%20result.Contents%5B0%5D%0A%20%20%20%20if%20content.Blob%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20binary%20data%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20data%2C%20err%20%3A%3D%20base64.StdEncoding.DecodeString(content.Blob)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20decode%20binary%20data%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20data%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Resource%20Caching%0A%0A%60%60%60go%0Atype%20ResourceCache%20struct%20%7B%0A%20%20%20%20cache%20map%5Bstring%5DcacheEntry%0A%20%20%20%20mutex%20sync.RWMutex%0A%20%20%20%20ttl%20%20%20time.Duration%0A%7D%0A%0Atype%20cacheEntry%20struct%20%7B%0A%20%20%20%20result%20%20%20%20*mcp.ReadResourceResult%0A%20%20%20%20timestamp%20time.Time%0A%7D%0A%0Afunc%20NewResourceCache(ttl%20time.Duration)%20*ResourceCache%20%7B%0A%20%20%20%20return%20%26ResourceCache%7B%0A%20%20%20%20%20%20%20%20cache%3A%20make(map%5Bstring%5DcacheEntry)%2C%0A%20%20%20%20%20%20%20%20ttl%3A%20%20%20ttl%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20*ResourceCache)%20Get(uri%20string)%20(*mcp.ReadResourceResult%2C%20bool)%20%7B%0A%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20defer%20rc.mutex.RUnlock()%0A%0A%20%20%20%20entry%2C%20exists%20%3A%3D%20rc.cache%5Buri%5D%0A%20%20%20%20if%20!exists%20%7C%7C%20time.Since(entry.timestamp)%20%3E%20rc.ttl%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20false%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20entry.result%2C%20true%0A%7D%0A%0Afunc%20(rc%20*ResourceCache)%20Set(uri%20string%2C%20result%20*mcp.ReadResourceResult)%20%7B%0A%20%20%20%20rc.mutex.Lock()%0A%20%20%20%20defer%20rc.mutex.Unlock()%0A%0A%20%20%20%20rc.cache%5Buri%5D%20%3D%20cacheEntry%7B%0A%20%20%20%20%20%20%20%20result%3A%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20timestamp%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20*ResourceCache)%20ReadResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Check%20cache%20first%0A%20%20%20%20if%20cached%2C%20found%20%3A%3D%20rc.Get(uri)%3B%20found%20%7B%0A%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Read%20from%20server%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Cache%20the%20result%0A%20%20%20%20rc.Set(uri%2C%20result)%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Calling%20Tools%0A%0ATools%20provide%20functionality%20that%20can%20be%20invoked%20with%20parameters.%0A%0A%23%23%23%20Basic%20Tool%20Calling%0A%0A%60%60%60go%0Afunc%20callTool(ctx%20context.Context%2C%20c%20client.Client%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22tool%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20demonstrateToolCalling(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20tools%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20tools%3A%20%25d%5Cn%22%2C%20len(tools.Tools))%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20specific%20tool%0A%20%20%20%20if%20len(tools.Tools)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20tool%20%3A%3D%20tools.Tools%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnCalling%20tool%3A%20%25s%5Cn%22%2C%20tool.Name)%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20callTool(ctx%2C%20c%2C%20tool.Name%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22example%20input%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22format%22%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Tool%20result%3A%5Cn%22)%0A%20%20%20%20%20%20%20%20for%20i%2C%20content%20%3A%3D%20range%20result.Content%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Content%20%25d%20(%25s)%3A%20%25s%5Cn%22%2C%20i%2B1%2C%20content.Type%2C%20content.Text)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Tool%20Schema%20Validation%0A%0A%60%60%60go%0Afunc%20validateToolArguments(tool%20mcp.Tool%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20error%20%7B%0A%20%20%20%20schema%20%3A%3D%20tool.InputSchema%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20required%20properties%0A%20%20%20%20if%20schema.Required%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20for%20_%2C%20required%20%3A%3D%20range%20schema.Required%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20_%2C%20exists%20%3A%3D%20args%5Brequired%5D%3B%20!exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22missing%20required%20argument%3A%20%25s%22%2C%20required)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Validate%20argument%20types%0A%20%20%20%20if%20schema.Properties%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20for%20name%2C%20value%20%3A%3D%20range%20args%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20propSchema%2C%20exists%20%3A%3D%20schema.Properties%5Bname%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22unknown%20argument%3A%20%25s%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20validateValue(value%2C%20propSchema)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22invalid%20argument%20%25s%3A%20%25w%22%2C%20name%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20validateValue(value%20interface%7B%7D%2C%20schema%20mcp.Schema)%20error%20%7B%0A%20%20%20%20switch%20schema.Type%20%7B%0A%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(string)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20string%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(float64)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20number%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22integer%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(float64)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20integer%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(bool)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20boolean%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22array%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(%5B%5Dinterface%7B%7D)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20array%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22object%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(map%5Bstring%5Dinterface%7B%7D)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20object%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20callToolWithValidation(ctx%20context.Context%2C%20c%20client.Client%2C%20toolName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20tool%20schema%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20list%20tools%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20tool%20*mcp.Tool%0A%20%20%20%20for%20_%2C%20t%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20if%20t.Name%20%3D%3D%20toolName%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tool%20%3D%20%26t%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20tool%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22tool%20not%20found%3A%20%25s%22%2C%20toolName)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Validate%20arguments%0A%20%20%20%20if%20err%20%3A%3D%20validateToolArguments(*tool%2C%20args)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22argument%20validation%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20tool%0A%20%20%20%20return%20callTool(ctx%2C%20c%2C%20toolName%2C%20args)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Batch%20Tool%20Operations%0A%0A%60%60%60go%0Atype%20ToolCall%20struct%20%7B%0A%20%20%20%20Name%20%20%20%20%20%20string%0A%20%20%20%20Arguments%20map%5Bstring%5Dinterface%7B%7D%0A%7D%0A%0Atype%20ToolResult%20struct%20%7B%0A%20%20%20%20Call%20%20%20ToolCall%0A%20%20%20%20Result%20*mcp.CallToolResult%0A%20%20%20%20Error%20%20error%0A%7D%0A%0Afunc%20callToolsBatch(ctx%20context.Context%2C%20c%20client.Client%2C%20calls%20%5B%5DToolCall)%20%5B%5DToolResult%20%7B%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DToolResult%2C%20len(calls))%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20goroutines%20for%20concurrent%20calls%0A%20%20%20%20var%20wg%20sync.WaitGroup%0A%20%20%20%20for%20i%2C%20call%20%3A%3D%20range%20calls%20%7B%0A%20%20%20%20%20%20%20%20wg.Add(1)%0A%20%20%20%20%20%20%20%20go%20func(index%20int%2C%20toolCall%20ToolCall)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20callTool(ctx%2C%20c%2C%20toolCall.Name%2C%20toolCall.Arguments)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bindex%5D%20%3D%20ToolResult%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Call%3A%20%20%20toolCall%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Result%3A%20result%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Error%3A%20%20err%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D(i%2C%20call)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20wg.Wait()%0A%20%20%20%20return%20results%0A%7D%0A%0Afunc%20demonstrateBatchToolCalls(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20calls%20%3A%3D%20%5B%5DToolCall%7B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22get_weather%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22location%22%3A%20%22New%20York%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22get_weather%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22location%22%3A%20%22London%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22calculate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22operation%22%3A%20%22add%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22x%22%3A%20%20%20%20%20%20%20%20%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22y%22%3A%20%20%20%20%20%20%20%20%2020%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20results%20%3A%3D%20callToolsBatch(ctx%2C%20c%2C%20calls)%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Call%20%25d%20(%25s)%3A%5Cn%22%2C%20i%2B1%2C%20result.Call.Name)%0A%20%20%20%20%20%20%20%20if%20result.Error%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Error%3A%20%25v%5Cn%22%2C%20result.Error)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Success%3A%20%25%2Bv%5Cn%22%2C%20result.Result)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Using%20Prompts%0A%0APrompts%20provide%20reusable%20templates%20for%20LLM%20interactions.%0A%0A%23%23%23%20Basic%20Prompt%20Usage%0A%0A%60%60%60go%0Afunc%20getPrompt(ctx%20context.Context%2C%20c%20client.Client%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.GetPrompt(ctx%2C%20mcp.GetPromptRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.GetPromptRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20get%20prompt%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20demonstratePromptUsage(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20prompts%0A%20%20%20%20prompts%2C%20err%20%3A%3D%20c.ListPrompts(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20prompts%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20prompts%3A%20%25d%5Cn%22%2C%20len(prompts.Prompts))%0A%20%20%20%20for%20_%2C%20prompt%20%3A%3D%20range%20prompts.Prompts%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20prompt.Name%2C%20prompt.Description)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20len(prompt.Arguments)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Arguments%3A%5Cn%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20_%2C%20arg%20%3A%3D%20range%20prompt.Arguments%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20%20%20-%20%25s%3A%20%25s%5Cn%22%2C%20arg.Name%2C%20arg.Description)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20a%20specific%20prompt%0A%20%20%20%20if%20len(prompts.Prompts)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20prompt%20%3A%3D%20prompts.Prompts%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnUsing%20prompt%3A%20%25s%5Cn%22%2C%20prompt.Name)%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20getPrompt(ctx%2C%20c%2C%20prompt.Name%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20appropriate%20arguments%20based%20on%20prompt%20schema%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20get%20prompt%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Prompt%20result%3A%5Cn%22)%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Description%3A%20%25s%5Cn%22%2C%20result.Description)%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Messages%3A%20%25d%5Cn%22%2C%20len(result.Messages))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20message%20%3A%3D%20range%20result.Messages%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Message%20%25d%20(%25s)%3A%20%25s%5Cn%22%2C%20i%2B1%2C%20message.Role%2C%20message.Content.Text)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Prompt%20Template%20Processing%0A%0A%60%60%60go%0Atype%20PromptProcessor%20struct%20%7B%0A%20%20%20%20client%20client.Client%0A%7D%0A%0Afunc%20NewPromptProcessor(c%20client.Client)%20*PromptProcessor%20%7B%0A%20%20%20%20return%20%26PromptProcessor%7Bclient%3A%20c%7D%0A%7D%0A%0Afunc%20(pp%20*PromptProcessor)%20ProcessPrompt(ctx%20context.Context%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20pp.client.GetPrompt(ctx%2C%20mcp.GetPromptRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.GetPromptRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result.Messages%2C%20nil%0A%7D%0A%0Afunc%20(pp%20*PromptProcessor)%20BuildConversation(ctx%20context.Context%2C%20promptName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D%2C%20userMessage%20string)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20prompt%20template%0A%20%20%20%20messages%2C%20err%20%3A%3D%20pp.ProcessPrompt(ctx%2C%20promptName%2C%20args)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20user%20message%0A%20%20%20%20messages%20%3D%20append(messages%2C%20mcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent(userMessage)%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20return%20messages%2C%20nil%0A%7D%0A%0Afunc%20(pp%20*PromptProcessor)%20FormatForLLM(messages%20%5B%5Dmcp.PromptMessage)%20%5B%5Dmap%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20formatted%20%3A%3D%20make(%5B%5Dmap%5Bstring%5Dinterface%7B%7D%2C%20len(messages))%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20message%20%3A%3D%20range%20messages%20%7B%0A%20%20%20%20%20%20%20%20formatted%5Bi%5D%20%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22role%22%3A%20%20%20%20message.Role%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22content%22%3A%20message.Content.Text%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20formatted%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Dynamic%20Prompt%20Generation%0A%0A%60%60%60go%0Afunc%20generateCodeReviewPrompt(ctx%20context.Context%2C%20c%20client.Client%2C%20code%2C%20language%20string)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20processor%20%3A%3D%20NewPromptProcessor(c)%0A%20%20%20%20%0A%20%20%20%20return%20processor.ProcessPrompt(ctx%2C%20%22code_review%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22code%22%3A%20%20%20%20%20code%2C%0A%20%20%20%20%20%20%20%20%22language%22%3A%20language%2C%0A%20%20%20%20%20%20%20%20%22focus%22%3A%20%20%20%20%22best-practices%22%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20generateDataAnalysisPrompt(ctx%20context.Context%2C%20c%20client.Client%2C%20datasetURI%20string%2C%20analysisType%20string)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20processor%20%3A%3D%20NewPromptProcessor(c)%0A%20%20%20%20%0A%20%20%20%20return%20processor.ProcessPrompt(ctx%2C%20%22analyze_data%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22dataset_uri%22%3A%20%20%20datasetURI%2C%0A%20%20%20%20%20%20%20%20%22analysis_type%22%3A%20analysisType%2C%0A%20%20%20%20%20%20%20%20%22focus_areas%22%3A%20%20%20%5B%5Dstring%7B%22trends%22%2C%20%22outliers%22%2C%20%22correlations%22%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20demonstrateDynamicPrompts(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Generate%20code%20review%20prompt%0A%20%20%20%20codeReviewMessages%2C%20err%20%3A%3D%20generateCodeReviewPrompt(ctx%2C%20c%2C%20%0A%20%20%20%20%20%20%20%20%22func%20main()%20%7B%20fmt.Println(%5C%22Hello%5C%22)%20%7D%22%2C%20%0A%20%20%20%20%20%20%20%20%22go%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20generate%20code%20review%20prompt%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Code%20review%20prompt%3A%20%25d%20messages%5Cn%22%2C%20len(codeReviewMessages))%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Generate%20data%20analysis%20prompt%0A%20%20%20%20analysisMessages%2C%20err%20%3A%3D%20generateDataAnalysisPrompt(ctx%2C%20c%2C%20%0A%20%20%20%20%20%20%20%20%22dataset%3A%2F%2Fsales_data%22%2C%20%0A%20%20%20%20%20%20%20%20%22exploratory%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20generate%20analysis%20prompt%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Data%20analysis%20prompt%3A%20%25d%20messages%5Cn%22%2C%20len(analysisMessages))%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Subscriptions%0A%0ASome%20transports%20support%20subscriptions%20for%20receiving%20real-time%20notifications.%0A%0A%23%23%23%20Basic%20Subscription%20Handling%0A%0A%60%60%60go%0Afunc%20handleSubscriptions(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Check%20if%20client%20supports%20subscriptions%0A%20%20%20%20subscriber%2C%20ok%20%3A%3D%20c.(client.Subscriber)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20log.Println(%22Client%20does%20not%20support%20subscriptions%22)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Subscribe%20to%20notifications%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20subscriber.Subscribe(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20subscribe%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Handle%20notifications%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20notification%20%3A%3D%20%3C-notifications%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20handleNotification(notification)%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Subscription%20cancelled%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20switch%20notification.Method%20%7B%0A%20%20%20%20case%20%22notifications%2Fprogress%22%3A%0A%20%20%20%20%20%20%20%20handleProgressNotification(notification)%0A%20%20%20%20case%20%22notifications%2Fmessage%22%3A%0A%20%20%20%20%20%20%20%20handleMessageNotification(notification)%0A%20%20%20%20case%20%22notifications%2Fresources%2Fupdated%22%3A%0A%20%20%20%20%20%20%20%20handleResourceUpdateNotification(notification)%0A%20%20%20%20case%20%22notifications%2Ftools%2Fupdated%22%3A%0A%20%20%20%20%20%20%20%20handleToolUpdateNotification(notification)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20log.Printf(%22Unknown%20notification%3A%20%25s%22%2C%20notification.Method)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleProgressNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20var%20progress%20mcp.ProgressNotification%0A%20%20%20%20if%20err%20%3A%3D%20json.Unmarshal(notification.Params%2C%20%26progress)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20parse%20progress%20notification%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Progress%3A%20%25d%2F%25d%20-%20%25s%5Cn%22%2C%20%0A%20%20%20%20%20%20%20%20progress.Progress%2C%20%0A%20%20%20%20%20%20%20%20progress.Total%2C%20%0A%20%20%20%20%20%20%20%20progress.Message)%0A%7D%0A%0Afunc%20handleMessageNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20var%20message%20mcp.MessageNotification%0A%20%20%20%20if%20err%20%3A%3D%20json.Unmarshal(notification.Params%2C%20%26message)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20parse%20message%20notification%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Server%20message%3A%20%25s%5Cn%22%2C%20message.Text)%0A%7D%0A%0Afunc%20handleResourceUpdateNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20log.Println(%22Resources%20updated%2C%20refreshing%20cache...%22)%0A%20%20%20%20%2F%2F%20Invalidate%20resource%20cache%20or%20refresh%20resource%20list%0A%7D%0A%0Afunc%20handleToolUpdateNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20log.Println(%22Tools%20updated%2C%20refreshing%20tool%20list...%22)%0A%20%20%20%20%2F%2F%20Refresh%20tool%20list%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20Subscription%20Management%0A%0A%60%60%60go%0Atype%20SubscriptionManager%20struct%20%7B%0A%20%20%20%20client%20%20%20%20%20%20%20%20client.Client%0A%20%20%20%20subscriber%20%20%20%20client.Subscriber%0A%20%20%20%20notifications%20chan%20mcp.Notification%0A%20%20%20%20handlers%20%20%20%20%20%20map%5Bstring%5D%5B%5DNotificationHandler%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20wg%20%20%20%20%20%20%20%20%20%20%20%20sync.WaitGroup%0A%20%20%20%20mutex%20%20%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Atype%20NotificationHandler%20func(mcp.Notification)%20error%0A%0Afunc%20NewSubscriptionManager(c%20client.Client)%20(*SubscriptionManager%2C%20error)%20%7B%0A%20%20%20%20subscriber%2C%20ok%20%3A%3D%20c.(client.Subscriber)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20does%20not%20support%20subscriptions%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20sm%20%3A%3D%20%26SubscriptionManager%7B%0A%20%20%20%20%20%20%20%20client%3A%20%20%20%20%20c%2C%0A%20%20%20%20%20%20%20%20subscriber%3A%20subscriber%2C%0A%20%20%20%20%20%20%20%20handlers%3A%20%20%20make(map%5Bstring%5D%5B%5DNotificationHandler)%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20%20%20cancel%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20sm%2C%20nil%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20Start()%20error%20%7B%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20sm.subscriber.Subscribe(sm.ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20subscribe%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20sm.notifications%20%3D%20notifications%0A%0A%20%20%20%20sm.wg.Add(1)%0A%20%20%20%20go%20sm.handleNotifications()%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20Stop()%20%7B%0A%20%20%20%20sm.cancel()%0A%20%20%20%20sm.wg.Wait()%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20AddHandler(method%20string%2C%20handler%20NotificationHandler)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%0A%20%20%20%20sm.handlers%5Bmethod%5D%20%3D%20append(sm.handlers%5Bmethod%5D%2C%20handler)%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20RemoveHandler(method%20string%2C%20handler%20NotificationHandler)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%0A%20%20%20%20handlers%20%3A%3D%20sm.handlers%5Bmethod%5D%0A%20%20%20%20for%20i%2C%20h%20%3A%3D%20range%20handlers%20%7B%0A%20%20%20%20%20%20%20%20if%20reflect.ValueOf(h).Pointer()%20%3D%3D%20reflect.ValueOf(handler).Pointer()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sm.handlers%5Bmethod%5D%20%3D%20append(handlers%5B%3Ai%5D%2C%20handlers%5Bi%2B1%3A%5D...)%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20handleNotifications()%20%7B%0A%20%20%20%20defer%20sm.wg.Done()%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20notification%20%3A%3D%20%3C-sm.notifications%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20sm.processNotification(notification)%0A%20%20%20%20%20%20%20%20case%20%3C-sm.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20processNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20sm.mutex.RLock()%0A%20%20%20%20handlers%20%3A%3D%20sm.handlers%5Bnotification.Method%5D%0A%20%20%20%20sm.mutex.RUnlock()%0A%0A%20%20%20%20for%20_%2C%20handler%20%3A%3D%20range%20handlers%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20handler(notification)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Handler%20error%20for%20%25s%3A%20%25v%22%2C%20notification.Method%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%20example%0Afunc%20demonstrateSubscriptionManager(c%20client.Client)%20%7B%0A%20%20%20%20sm%2C%20err%20%3A%3D%20NewSubscriptionManager(c)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20create%20subscription%20manager%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20handlers%0A%20%20%20%20sm.AddHandler(%22notifications%2Fprogress%22%2C%20func(n%20mcp.Notification)%20error%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Progress%20notification%3A%20%25%2Bv%22%2C%20n)%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D)%0A%0A%20%20%20%20sm.AddHandler(%22notifications%2Fmessage%22%2C%20func(n%20mcp.Notification)%20error%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Message%20notification%3A%20%25%2Bv%22%2C%20n)%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Start%20handling%0A%20%20%20%20if%20err%20%3A%3D%20sm.Start()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20start%20subscription%20manager%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Let%20it%20run%20for%20a%20while%0A%20%20%20%20time.Sleep(30%20*%20time.Second)%0A%0A%20%20%20%20%2F%2F%20Stop%0A%20%20%20%20sm.Stop()%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Learn%20transport-specific%20client%20features%0A-%20**%5BClient%20Basics%5D(%2Fclients%2Fbasics)**%20-%20Review%20fundamental%20concepts",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./operations-CKeJYSid.js"),[]),path:"/clients/operations.html",type:"mdx",filePath:"clients/operations.mdx",content:"%23%20Client%20Operations%0A%0ALearn%20how%20to%20use%20MCP%20clients%20to%20interact%20with%20servers%20through%20tools%2C%20resources%2C%20prompts%2C%20and%20subscriptions.%0A%0A%23%23%20Listing%20Resources%0A%0AResources%20provide%20read-only%20access%20to%20data.%20Before%20reading%20resources%2C%20you%20typically%20need%20to%20discover%20what's%20available.%0A%0A%23%23%23%20Basic%20Resource%20Listing%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22base64%22%0A%20%20%20%20%22context%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22reflect%22%0A%20%20%20%20%22regexp%22%0A%20%20%20%20%22strings%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20listResources(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20List%20all%20available%20resources%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20list%20resources%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20resources%3A%20%25d%5Cn%22%2C%20len(resources.Resources))%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%20(%25s)%3A%20%25s%5Cn%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20resource.URI%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20resource.MIMEType%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20resource.Name)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20resource.Description%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Description%3A%20%25s%5Cn%22%2C%20resource.Description)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Filtered%20Resource%20Listing%0A%0A%60%60%60go%0Afunc%20listResourcesByType(ctx%20context.Context%2C%20c%20client.Client%2C%20mimeType%20string)%20(%5B%5Dmcp.Resource%2C%20error)%20%7B%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Resource%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20if%20resource.MIMEType%20%3D%3D%20mimeType%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20resource)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20filtered%2C%20nil%0A%7D%0A%0Afunc%20listResourcesByPattern(ctx%20context.Context%2C%20c%20client.Client%2C%20pattern%20string)%20(%5B%5Dmcp.Resource%2C%20error)%20%7B%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20regex%2C%20err%20%3A%3D%20regexp.Compile(pattern)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20pattern%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Resource%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20if%20regex.MatchString(resource.URI)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20resource)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20filtered%2C%20nil%0A%7D%0A%0A%2F%2F%20Usage%20examples%0Afunc%20demonstrateResourceFiltering(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Find%20all%20JSON%20resources%0A%20%20%20%20jsonResources%2C%20err%20%3A%3D%20listResourcesByType(ctx%2C%20c%2C%20%22application%2Fjson%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20listing%20JSON%20resources%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Found%20%25d%20JSON%20resources%5Cn%22%2C%20len(jsonResources))%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Find%20all%20user-related%20resources%0A%20%20%20%20userResources%2C%20err%20%3A%3D%20listResourcesByPattern(ctx%2C%20c%2C%20%60users%3F%3A%2F%2F.*%60)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20listing%20user%20resources%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Found%20%25d%20user%20resources%5Cn%22%2C%20len(userResources))%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Reading%20Resources%0A%0AOnce%20you%20know%20what%20resources%20are%20available%2C%20you%20can%20read%20their%20content.%0A%0A%23%23%23%20Basic%20Resource%20Reading%0A%0A%60%60%60go%0Afunc%20readResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.ReadResource(ctx%2C%20mcp.ReadResourceRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.ReadResourceRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20uri%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20resource%20%25s%3A%20%25w%22%2C%20uri%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20demonstrateResourceReading(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20List%20resources%20first%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20resources%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Read%20each%20resource%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnReading%20resource%3A%20%25s%5Cn%22%2C%20resource.URI)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20resource.URI)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20read%20resource%20%25s%3A%20%25v%22%2C%20resource.URI%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20resource%20contents%0A%20%20%20%20%20%20%20%20for%20i%2C%20content%20%3A%3D%20range%20result.Contents%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Content%20%25d%3A%5Cn%22%2C%20i%2B1)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20URI%3A%20%25s%5Cn%22%2C%20content.URI)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20MIME%20Type%3A%20%25s%5Cn%22%2C%20content.MIMEType)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20content.Text%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Text%3A%20%25s%5Cn%22%2C%20truncateString(content.Text%2C%20100))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20content.Blob%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Blob%3A%20%25d%20bytes%5Cn%22%2C%20len(content.Blob))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20truncateString(s%20string%2C%20maxLen%20int)%20string%20%7B%0A%20%20%20%20if%20len(s)%20%3C%3D%20maxLen%20%7B%0A%20%20%20%20%20%20%20%20return%20s%0A%20%20%20%20%7D%0A%20%20%20%20return%20s%5B%3AmaxLen%5D%20%2B%20%22...%22%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Typed%20Resource%20Reading%0A%0A%60%60%60go%0A%2F%2F%20Helper%20functions%20for%20common%20resource%20types%0Afunc%20readJSONResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(map%5Bstring%5Dinterface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(result.Contents)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20content%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%20%3A%3D%20result.Contents%5B0%5D%0A%20%20%20%20if%20content.MIMEType%20!%3D%20%22application%2Fjson%22%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22expected%20JSON%2C%20got%20%25s%22%2C%20content.MIMEType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20data%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20err%20%3A%3D%20json.Unmarshal(%5B%5Dbyte(content.Text)%2C%20%26data)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20parse%20JSON%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20data%2C%20nil%0A%7D%0A%0Afunc%20readTextResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(string%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(result.Contents)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20fmt.Errorf(%22no%20content%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%20%3A%3D%20result.Contents%5B0%5D%0A%20%20%20%20if%20!strings.HasPrefix(content.MIMEType%2C%20%22text%2F%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20fmt.Errorf(%22expected%20text%2C%20got%20%25s%22%2C%20content.MIMEType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20content.Text%2C%20nil%0A%7D%0A%0Afunc%20readBinaryResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(%5B%5Dbyte%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(result.Contents)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20content%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%20%3A%3D%20result.Contents%5B0%5D%0A%20%20%20%20if%20content.Blob%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20binary%20data%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20data%2C%20err%20%3A%3D%20base64.StdEncoding.DecodeString(content.Blob)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20decode%20binary%20data%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20data%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Resource%20Caching%0A%0A%60%60%60go%0Atype%20ResourceCache%20struct%20%7B%0A%20%20%20%20cache%20map%5Bstring%5DcacheEntry%0A%20%20%20%20mutex%20sync.RWMutex%0A%20%20%20%20ttl%20%20%20time.Duration%0A%7D%0A%0Atype%20cacheEntry%20struct%20%7B%0A%20%20%20%20result%20%20%20%20*mcp.ReadResourceResult%0A%20%20%20%20timestamp%20time.Time%0A%7D%0A%0Afunc%20NewResourceCache(ttl%20time.Duration)%20*ResourceCache%20%7B%0A%20%20%20%20return%20%26ResourceCache%7B%0A%20%20%20%20%20%20%20%20cache%3A%20make(map%5Bstring%5DcacheEntry)%2C%0A%20%20%20%20%20%20%20%20ttl%3A%20%20%20ttl%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20*ResourceCache)%20Get(uri%20string)%20(*mcp.ReadResourceResult%2C%20bool)%20%7B%0A%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20defer%20rc.mutex.RUnlock()%0A%0A%20%20%20%20entry%2C%20exists%20%3A%3D%20rc.cache%5Buri%5D%0A%20%20%20%20if%20!exists%20%7C%7C%20time.Since(entry.timestamp)%20%3E%20rc.ttl%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20false%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20entry.result%2C%20true%0A%7D%0A%0Afunc%20(rc%20*ResourceCache)%20Set(uri%20string%2C%20result%20*mcp.ReadResourceResult)%20%7B%0A%20%20%20%20rc.mutex.Lock()%0A%20%20%20%20defer%20rc.mutex.Unlock()%0A%0A%20%20%20%20rc.cache%5Buri%5D%20%3D%20cacheEntry%7B%0A%20%20%20%20%20%20%20%20result%3A%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20timestamp%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20*ResourceCache)%20ReadResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Check%20cache%20first%0A%20%20%20%20if%20cached%2C%20found%20%3A%3D%20rc.Get(uri)%3B%20found%20%7B%0A%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Read%20from%20server%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Cache%20the%20result%0A%20%20%20%20rc.Set(uri%2C%20result)%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Calling%20Tools%0A%0ATools%20provide%20functionality%20that%20can%20be%20invoked%20with%20parameters.%0A%0A%23%23%23%20Basic%20Tool%20Calling%0A%0A%60%60%60go%0Afunc%20callTool(ctx%20context.Context%2C%20c%20client.Client%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22tool%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20demonstrateToolCalling(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20tools%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20tools%3A%20%25d%5Cn%22%2C%20len(tools.Tools))%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20specific%20tool%0A%20%20%20%20if%20len(tools.Tools)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20tool%20%3A%3D%20tools.Tools%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnCalling%20tool%3A%20%25s%5Cn%22%2C%20tool.Name)%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20callTool(ctx%2C%20c%2C%20tool.Name%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22example%20input%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22format%22%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Tool%20result%3A%5Cn%22)%0A%20%20%20%20%20%20%20%20for%20i%2C%20content%20%3A%3D%20range%20result.Content%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Content%20%25d%20(%25s)%3A%20%25s%5Cn%22%2C%20i%2B1%2C%20content.Type%2C%20content.Text)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Tool%20Schema%20Validation%0A%0A%60%60%60go%0Afunc%20validateToolArguments(tool%20mcp.Tool%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20error%20%7B%0A%20%20%20%20schema%20%3A%3D%20tool.InputSchema%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20required%20properties%0A%20%20%20%20if%20schema.Required%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20for%20_%2C%20required%20%3A%3D%20range%20schema.Required%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20_%2C%20exists%20%3A%3D%20args%5Brequired%5D%3B%20!exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22missing%20required%20argument%3A%20%25s%22%2C%20required)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Validate%20argument%20types%0A%20%20%20%20if%20schema.Properties%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20for%20name%2C%20value%20%3A%3D%20range%20args%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20propSchema%2C%20exists%20%3A%3D%20schema.Properties%5Bname%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22unknown%20argument%3A%20%25s%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20validateValue(value%2C%20propSchema)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22invalid%20argument%20%25s%3A%20%25w%22%2C%20name%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20validateValue(value%20interface%7B%7D%2C%20schema%20mcp.Schema)%20error%20%7B%0A%20%20%20%20switch%20schema.Type%20%7B%0A%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(string)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20string%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(float64)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20number%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22integer%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(float64)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20integer%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(bool)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20boolean%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22array%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(%5B%5Dinterface%7B%7D)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20array%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22object%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(map%5Bstring%5Dinterface%7B%7D)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20object%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20callToolWithValidation(ctx%20context.Context%2C%20c%20client.Client%2C%20toolName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20tool%20schema%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20list%20tools%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20tool%20*mcp.Tool%0A%20%20%20%20for%20_%2C%20t%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20if%20t.Name%20%3D%3D%20toolName%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tool%20%3D%20%26t%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20tool%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22tool%20not%20found%3A%20%25s%22%2C%20toolName)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Validate%20arguments%0A%20%20%20%20if%20err%20%3A%3D%20validateToolArguments(*tool%2C%20args)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22argument%20validation%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20tool%0A%20%20%20%20return%20callTool(ctx%2C%20c%2C%20toolName%2C%20args)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Batch%20Tool%20Operations%0A%0A%60%60%60go%0Atype%20ToolCall%20struct%20%7B%0A%20%20%20%20Name%20%20%20%20%20%20string%0A%20%20%20%20Arguments%20map%5Bstring%5Dinterface%7B%7D%0A%7D%0A%0Atype%20ToolResult%20struct%20%7B%0A%20%20%20%20Call%20%20%20ToolCall%0A%20%20%20%20Result%20*mcp.CallToolResult%0A%20%20%20%20Error%20%20error%0A%7D%0A%0Afunc%20callToolsBatch(ctx%20context.Context%2C%20c%20client.Client%2C%20calls%20%5B%5DToolCall)%20%5B%5DToolResult%20%7B%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DToolResult%2C%20len(calls))%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20goroutines%20for%20concurrent%20calls%0A%20%20%20%20var%20wg%20sync.WaitGroup%0A%20%20%20%20for%20i%2C%20call%20%3A%3D%20range%20calls%20%7B%0A%20%20%20%20%20%20%20%20wg.Add(1)%0A%20%20%20%20%20%20%20%20go%20func(index%20int%2C%20toolCall%20ToolCall)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20callTool(ctx%2C%20c%2C%20toolCall.Name%2C%20toolCall.Arguments)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bindex%5D%20%3D%20ToolResult%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Call%3A%20%20%20toolCall%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Result%3A%20result%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Error%3A%20%20err%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D(i%2C%20call)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20wg.Wait()%0A%20%20%20%20return%20results%0A%7D%0A%0Afunc%20demonstrateBatchToolCalls(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20calls%20%3A%3D%20%5B%5DToolCall%7B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22get_weather%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22location%22%3A%20%22New%20York%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22get_weather%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22location%22%3A%20%22London%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22calculate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22operation%22%3A%20%22add%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22x%22%3A%20%20%20%20%20%20%20%20%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22y%22%3A%20%20%20%20%20%20%20%20%2020%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20results%20%3A%3D%20callToolsBatch(ctx%2C%20c%2C%20calls)%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Call%20%25d%20(%25s)%3A%5Cn%22%2C%20i%2B1%2C%20result.Call.Name)%0A%20%20%20%20%20%20%20%20if%20result.Error%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Error%3A%20%25v%5Cn%22%2C%20result.Error)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Success%3A%20%25%2Bv%5Cn%22%2C%20result.Result)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Using%20Prompts%0A%0APrompts%20provide%20reusable%20templates%20for%20LLM%20interactions.%0A%0A%23%23%23%20Basic%20Prompt%20Usage%0A%0A%60%60%60go%0Afunc%20getPrompt(ctx%20context.Context%2C%20c%20client.Client%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.GetPrompt(ctx%2C%20mcp.GetPromptRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.GetPromptRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20get%20prompt%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20demonstratePromptUsage(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20prompts%0A%20%20%20%20prompts%2C%20err%20%3A%3D%20c.ListPrompts(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20prompts%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20prompts%3A%20%25d%5Cn%22%2C%20len(prompts.Prompts))%0A%20%20%20%20for%20_%2C%20prompt%20%3A%3D%20range%20prompts.Prompts%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20prompt.Name%2C%20prompt.Description)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20len(prompt.Arguments)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Arguments%3A%5Cn%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20_%2C%20arg%20%3A%3D%20range%20prompt.Arguments%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20%20%20-%20%25s%3A%20%25s%5Cn%22%2C%20arg.Name%2C%20arg.Description)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20a%20specific%20prompt%0A%20%20%20%20if%20len(prompts.Prompts)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20prompt%20%3A%3D%20prompts.Prompts%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnUsing%20prompt%3A%20%25s%5Cn%22%2C%20prompt.Name)%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20getPrompt(ctx%2C%20c%2C%20prompt.Name%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20appropriate%20arguments%20based%20on%20prompt%20schema%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20get%20prompt%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Prompt%20result%3A%5Cn%22)%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Description%3A%20%25s%5Cn%22%2C%20result.Description)%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Messages%3A%20%25d%5Cn%22%2C%20len(result.Messages))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20message%20%3A%3D%20range%20result.Messages%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Message%20%25d%20(%25s)%3A%20%25s%5Cn%22%2C%20i%2B1%2C%20message.Role%2C%20message.Content.Text)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Prompt%20Template%20Processing%0A%0A%60%60%60go%0Atype%20PromptProcessor%20struct%20%7B%0A%20%20%20%20client%20client.Client%0A%7D%0A%0Afunc%20NewPromptProcessor(c%20client.Client)%20*PromptProcessor%20%7B%0A%20%20%20%20return%20%26PromptProcessor%7Bclient%3A%20c%7D%0A%7D%0A%0Afunc%20(pp%20*PromptProcessor)%20ProcessPrompt(ctx%20context.Context%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20pp.client.GetPrompt(ctx%2C%20mcp.GetPromptRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.GetPromptRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result.Messages%2C%20nil%0A%7D%0A%0Afunc%20(pp%20*PromptProcessor)%20BuildConversation(ctx%20context.Context%2C%20promptName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D%2C%20userMessage%20string)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20prompt%20template%0A%20%20%20%20messages%2C%20err%20%3A%3D%20pp.ProcessPrompt(ctx%2C%20promptName%2C%20args)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20user%20message%0A%20%20%20%20messages%20%3D%20append(messages%2C%20mcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent(userMessage)%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20return%20messages%2C%20nil%0A%7D%0A%0Afunc%20(pp%20*PromptProcessor)%20FormatForLLM(messages%20%5B%5Dmcp.PromptMessage)%20%5B%5Dmap%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20formatted%20%3A%3D%20make(%5B%5Dmap%5Bstring%5Dinterface%7B%7D%2C%20len(messages))%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20message%20%3A%3D%20range%20messages%20%7B%0A%20%20%20%20%20%20%20%20formatted%5Bi%5D%20%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22role%22%3A%20%20%20%20message.Role%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22content%22%3A%20message.Content.Text%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20formatted%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Dynamic%20Prompt%20Generation%0A%0A%60%60%60go%0Afunc%20generateCodeReviewPrompt(ctx%20context.Context%2C%20c%20client.Client%2C%20code%2C%20language%20string)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20processor%20%3A%3D%20NewPromptProcessor(c)%0A%20%20%20%20%0A%20%20%20%20return%20processor.ProcessPrompt(ctx%2C%20%22code_review%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22code%22%3A%20%20%20%20%20code%2C%0A%20%20%20%20%20%20%20%20%22language%22%3A%20language%2C%0A%20%20%20%20%20%20%20%20%22focus%22%3A%20%20%20%20%22best-practices%22%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20generateDataAnalysisPrompt(ctx%20context.Context%2C%20c%20client.Client%2C%20datasetURI%20string%2C%20analysisType%20string)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20processor%20%3A%3D%20NewPromptProcessor(c)%0A%20%20%20%20%0A%20%20%20%20return%20processor.ProcessPrompt(ctx%2C%20%22analyze_data%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22dataset_uri%22%3A%20%20%20datasetURI%2C%0A%20%20%20%20%20%20%20%20%22analysis_type%22%3A%20analysisType%2C%0A%20%20%20%20%20%20%20%20%22focus_areas%22%3A%20%20%20%5B%5Dstring%7B%22trends%22%2C%20%22outliers%22%2C%20%22correlations%22%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20demonstrateDynamicPrompts(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Generate%20code%20review%20prompt%0A%20%20%20%20codeReviewMessages%2C%20err%20%3A%3D%20generateCodeReviewPrompt(ctx%2C%20c%2C%20%0A%20%20%20%20%20%20%20%20%22func%20main()%20%7B%20fmt.Println(%5C%22Hello%5C%22)%20%7D%22%2C%20%0A%20%20%20%20%20%20%20%20%22go%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20generate%20code%20review%20prompt%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Code%20review%20prompt%3A%20%25d%20messages%5Cn%22%2C%20len(codeReviewMessages))%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Generate%20data%20analysis%20prompt%0A%20%20%20%20analysisMessages%2C%20err%20%3A%3D%20generateDataAnalysisPrompt(ctx%2C%20c%2C%20%0A%20%20%20%20%20%20%20%20%22dataset%3A%2F%2Fsales_data%22%2C%20%0A%20%20%20%20%20%20%20%20%22exploratory%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20generate%20analysis%20prompt%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Data%20analysis%20prompt%3A%20%25d%20messages%5Cn%22%2C%20len(analysisMessages))%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Subscriptions%0A%0ASome%20transports%20support%20subscriptions%20for%20receiving%20real-time%20notifications.%0A%0A%23%23%23%20Basic%20Subscription%20Handling%0A%0A%60%60%60go%0Afunc%20handleSubscriptions(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Check%20if%20client%20supports%20subscriptions%0A%20%20%20%20subscriber%2C%20ok%20%3A%3D%20c.(client.Subscriber)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20log.Println(%22Client%20does%20not%20support%20subscriptions%22)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Subscribe%20to%20notifications%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20subscriber.Subscribe(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20subscribe%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Handle%20notifications%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20notification%20%3A%3D%20%3C-notifications%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20handleNotification(notification)%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Subscription%20cancelled%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20switch%20notification.Method%20%7B%0A%20%20%20%20case%20%22notifications%2Fprogress%22%3A%0A%20%20%20%20%20%20%20%20handleProgressNotification(notification)%0A%20%20%20%20case%20%22notifications%2Fmessage%22%3A%0A%20%20%20%20%20%20%20%20handleMessageNotification(notification)%0A%20%20%20%20case%20%22notifications%2Fresources%2Fupdated%22%3A%0A%20%20%20%20%20%20%20%20handleResourceUpdateNotification(notification)%0A%20%20%20%20case%20%22notifications%2Ftools%2Fupdated%22%3A%0A%20%20%20%20%20%20%20%20handleToolUpdateNotification(notification)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20log.Printf(%22Unknown%20notification%3A%20%25s%22%2C%20notification.Method)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleProgressNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20var%20progress%20mcp.ProgressNotification%0A%20%20%20%20if%20err%20%3A%3D%20json.Unmarshal(notification.Params%2C%20%26progress)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20parse%20progress%20notification%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Progress%3A%20%25d%2F%25d%20-%20%25s%5Cn%22%2C%20%0A%20%20%20%20%20%20%20%20progress.Progress%2C%20%0A%20%20%20%20%20%20%20%20progress.Total%2C%20%0A%20%20%20%20%20%20%20%20progress.Message)%0A%7D%0A%0Afunc%20handleMessageNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20var%20message%20mcp.MessageNotification%0A%20%20%20%20if%20err%20%3A%3D%20json.Unmarshal(notification.Params%2C%20%26message)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20parse%20message%20notification%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Server%20message%3A%20%25s%5Cn%22%2C%20message.Text)%0A%7D%0A%0Afunc%20handleResourceUpdateNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20log.Println(%22Resources%20updated%2C%20refreshing%20cache...%22)%0A%20%20%20%20%2F%2F%20Invalidate%20resource%20cache%20or%20refresh%20resource%20list%0A%7D%0A%0Afunc%20handleToolUpdateNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20log.Println(%22Tools%20updated%2C%20refreshing%20tool%20list...%22)%0A%20%20%20%20%2F%2F%20Refresh%20tool%20list%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20Subscription%20Management%0A%0A%60%60%60go%0Atype%20SubscriptionManager%20struct%20%7B%0A%20%20%20%20client%20%20%20%20%20%20%20%20client.Client%0A%20%20%20%20subscriber%20%20%20%20client.Subscriber%0A%20%20%20%20notifications%20chan%20mcp.Notification%0A%20%20%20%20handlers%20%20%20%20%20%20map%5Bstring%5D%5B%5DNotificationHandler%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20wg%20%20%20%20%20%20%20%20%20%20%20%20sync.WaitGroup%0A%20%20%20%20mutex%20%20%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Atype%20NotificationHandler%20func(mcp.Notification)%20error%0A%0Afunc%20NewSubscriptionManager(c%20client.Client)%20(*SubscriptionManager%2C%20error)%20%7B%0A%20%20%20%20subscriber%2C%20ok%20%3A%3D%20c.(client.Subscriber)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20does%20not%20support%20subscriptions%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20sm%20%3A%3D%20%26SubscriptionManager%7B%0A%20%20%20%20%20%20%20%20client%3A%20%20%20%20%20c%2C%0A%20%20%20%20%20%20%20%20subscriber%3A%20subscriber%2C%0A%20%20%20%20%20%20%20%20handlers%3A%20%20%20make(map%5Bstring%5D%5B%5DNotificationHandler)%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20%20%20cancel%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20sm%2C%20nil%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20Start()%20error%20%7B%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20sm.subscriber.Subscribe(sm.ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20subscribe%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20sm.notifications%20%3D%20notifications%0A%0A%20%20%20%20sm.wg.Add(1)%0A%20%20%20%20go%20sm.handleNotifications()%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20Stop()%20%7B%0A%20%20%20%20sm.cancel()%0A%20%20%20%20sm.wg.Wait()%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20AddHandler(method%20string%2C%20handler%20NotificationHandler)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%0A%20%20%20%20sm.handlers%5Bmethod%5D%20%3D%20append(sm.handlers%5Bmethod%5D%2C%20handler)%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20RemoveHandler(method%20string%2C%20handler%20NotificationHandler)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%0A%20%20%20%20handlers%20%3A%3D%20sm.handlers%5Bmethod%5D%0A%20%20%20%20for%20i%2C%20h%20%3A%3D%20range%20handlers%20%7B%0A%20%20%20%20%20%20%20%20if%20reflect.ValueOf(h).Pointer()%20%3D%3D%20reflect.ValueOf(handler).Pointer()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sm.handlers%5Bmethod%5D%20%3D%20append(handlers%5B%3Ai%5D%2C%20handlers%5Bi%2B1%3A%5D...)%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20handleNotifications()%20%7B%0A%20%20%20%20defer%20sm.wg.Done()%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20notification%20%3A%3D%20%3C-sm.notifications%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20sm.processNotification(notification)%0A%20%20%20%20%20%20%20%20case%20%3C-sm.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20processNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20sm.mutex.RLock()%0A%20%20%20%20handlers%20%3A%3D%20sm.handlers%5Bnotification.Method%5D%0A%20%20%20%20sm.mutex.RUnlock()%0A%0A%20%20%20%20for%20_%2C%20handler%20%3A%3D%20range%20handlers%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20handler(notification)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Handler%20error%20for%20%25s%3A%20%25v%22%2C%20notification.Method%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%20example%0Afunc%20demonstrateSubscriptionManager(c%20client.Client)%20%7B%0A%20%20%20%20sm%2C%20err%20%3A%3D%20NewSubscriptionManager(c)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20create%20subscription%20manager%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20handlers%0A%20%20%20%20sm.AddHandler(%22notifications%2Fprogress%22%2C%20func(n%20mcp.Notification)%20error%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Progress%20notification%3A%20%25%2Bv%22%2C%20n)%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D)%0A%0A%20%20%20%20sm.AddHandler(%22notifications%2Fmessage%22%2C%20func(n%20mcp.Notification)%20error%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Message%20notification%3A%20%25%2Bv%22%2C%20n)%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Start%20handling%0A%20%20%20%20if%20err%20%3A%3D%20sm.Start()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20start%20subscription%20manager%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Let%20it%20run%20for%20a%20while%0A%20%20%20%20time.Sleep(30%20*%20time.Second)%0A%0A%20%20%20%20%2F%2F%20Stop%0A%20%20%20%20sm.Stop()%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Learn%20transport-specific%20client%20features%0A-%20**%5BClient%20Basics%5D(%2Fclients%2Fbasics)**%20-%20Review%20fundamental%20concepts",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./transports-CGUShdsr.js"),[]),path:"/clients/transports",type:"mdx",filePath:"clients/transports.mdx",content:"%23%20Client%20Transports%0A%0ALearn%20about%20transport-specific%20client%20implementations%20and%20how%20to%20choose%20the%20right%20transport%20for%20your%20use%20case.%0A%0A%23%23%20Transport%20Overview%0A%0AMCP-Go%20provides%20client%20implementations%20for%20all%20supported%20transports.%20Each%20transport%20has%20different%20characteristics%20and%20is%20optimized%20for%20specific%20scenarios.%0A%0A%7C%20Transport%20%7C%20Best%20For%20%7C%20Connection%20%7C%20Real-time%20%7C%20Multi-client%20%7C%0A%7C-----------%7C----------%7C------------%7C-----------%7C--------------%7C%0A%7C%20**STDIO**%20%7C%20CLI%20tools%2C%20desktop%20apps%20%7C%20Process%20pipes%20%7C%20No%20%7C%20No%20%7C%0A%7C%20**HTTP**%20%7C%20Web%20services%2C%20APIs%20%7C%20HTTP%20requests%20%7C%20No%20%7C%20Yes%20%7C%0A%7C%20**SSE**%20%7C%20Web%20apps%2C%20real-time%20%7C%20HTTP%20%2B%20EventSource%20%7C%20Yes%20%7C%20Yes%20%7C%0A%7C%20**In-Process**%20%7C%20Testing%2C%20embedded%20%7C%20Direct%20calls%20%7C%20Yes%20%7C%20No%20%7C%0A%0A%23%23%20STDIO%20Client%0A%0ASTDIO%20clients%20communicate%20with%20servers%20through%20standard%20input%2Foutput%2C%20typically%20by%20spawning%20a%20subprocess.%0A%0A%23%23%23%20Basic%20STDIO%20Client%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22crypto%2Ftls%22%0A%20%20%20%20%22errors%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22net%2Fhttp%22%0A%20%20%20%20%22os%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20createStdioClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20client%20that%20spawns%20a%20subprocess%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20the%20client%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20STDIO%20Configuration%0A%0A%60%60%60go%0Afunc%20createAdvancedStdioClient()%20%7B%0A%20%20%20%20options%20%3A%3D%20client.StdioOptions%7B%0A%20%20%20%20%20%20%20%20Command%3A%20%22python%22%2C%0A%20%20%20%20%20%20%20%20Args%3A%20%20%20%20%5B%5Dstring%7B%22%2Fpath%2Fto%2Fserver.py%22%7D%2C%0A%20%20%20%20%20%20%20%20Env%3A%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22PYTHONPATH%3D%2Fcustom%2Fpath%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22LOG_LEVEL%3Ddebug%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22DATABASE_URL%3Dsqlite%3A%2F%2F%2Fdata.db%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20WorkingDir%3A%20%20%20%20%20%20%22%2Fpath%2Fto%2Fserver%22%2C%0A%20%20%20%20%20%20%20%20Timeout%3A%20%20%20%20%20%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20BufferSize%3A%20%20%20%20%20%208192%2C%0A%20%20%20%20%20%20%20%20RestartOnError%3A%20%20true%2C%0A%20%20%20%20%20%20%20%20MaxRestarts%3A%20%20%20%20%203%2C%0A%20%20%20%20%20%20%20%20RestartDelay%3A%20%20%20%201%20*%20time.Second%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClientWithOptions(options)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20%2F%2F%20Use%20client...%0A%7D%0A%60%60%60%0A%0A%23%23%23%20STDIO%20Error%20Handling%0A%0A%60%60%60go%0A%2F%2F%20Define%20error%20constants%20for%20STDIO%20client%20errors%0Avar%20(%0A%20%20%20%20ErrProcessExited%20%20%3D%20errors.New(%22process%20exited%22)%0A%20%20%20%20ErrProcessTimeout%20%3D%20errors.New(%22process%20timeout%22)%0A%20%20%20%20ErrBrokenPipe%20%20%20%20%20%3D%20errors.New(%22broken%20pipe%22)%0A)%0A%0Afunc%20handleStdioErrors(c%20*client.StdioClient)%20%7B%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22example_tool%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20ErrProcessExited)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Server%20process%20exited%20unexpectedly%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Attempt%20to%20restart%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20restartErr%20%3A%3D%20c.Restart()%3B%20restartErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%3A%20%25v%22%2C%20restartErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20ErrProcessTimeout)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Server%20process%20timed%20out%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Kill%20and%20restart%20process%0A%20%20%20%20%20%20%20%20%20%20%20%20c.Kill()%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20restartErr%20%3A%3D%20c.Restart()%3B%20restartErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%3A%20%25v%22%2C%20restartErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20ErrBrokenPipe)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Communication%20pipe%20broken%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20likely%20crashed%2C%20restart%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20restartErr%20%3A%3D%20c.Restart()%3B%20restartErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%3A%20%25v%22%2C%20restartErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unexpected%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20STDIO%20Process%20Management%0A%0A%60%60%60go%0Atype%20ManagedStdioClient%20struct%20%7B%0A%20%20%20%20client%20%20%20%20%20%20*client.StdioClient%0A%20%20%20%20options%20%20%20%20%20client.StdioOptions%0A%20%20%20%20restartChan%20chan%20struct%7B%7D%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20wg%20%20%20%20%20%20%20%20%20%20sync.WaitGroup%0A%7D%0A%0Afunc%20NewManagedStdioClient(options%20client.StdioOptions)%20(*ManagedStdioClient%2C%20error)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20msc%20%3A%3D%20%26ManagedStdioClient%7B%0A%20%20%20%20%20%20%20%20options%3A%20%20%20%20%20options%2C%0A%20%20%20%20%20%20%20%20restartChan%3A%20make(chan%20struct%7B%7D%2C%201)%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20%20%20%20cancel%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20msc.start()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20cancel()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20msc.wg.Add(1)%0A%20%20%20%20go%20msc.monitorProcess()%0A%0A%20%20%20%20return%20msc%2C%20nil%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20start()%20error%20%7B%0A%20%20%20%20client%2C%20err%20%3A%3D%20client.NewStdioClientWithOptions(msc.options)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20client.Initialize(msc.ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20client.Close()%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20msc.client%20%3D%20client%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20monitorProcess()%20%7B%0A%20%20%20%20defer%20msc.wg.Done()%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-msc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20case%20%3C-msc.restartChan%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Restarting%20STDIO%20client...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20msc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20msc.client.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wait%20before%20restarting%0A%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(1%20*%20time.Second)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20msc.start()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%20client%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Try%20again%20after%20delay%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(5%20*%20time.Second)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20msc.restartChan%20%3C-%20struct%7B%7D%7B%7D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Client%20restarted%20successfully%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20if%20msc.client%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20not%20available%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20msc.client.CallTool(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20isProcessError(err)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Trigger%20restart%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20msc.restartChan%20%3C-%20struct%7B%7D%7B%7D%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22process%20error%2C%20restarting%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20Close()%20error%20%7B%0A%20%20%20%20msc.cancel()%0A%20%20%20%20msc.wg.Wait()%0A%20%20%20%20%0A%20%20%20%20if%20msc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20msc.client.Close()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20isProcessError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20ErrProcessExited)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrBrokenPipe)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrProcessTimeout)%0A%7D%0A%60%60%60%0A%0A%60%60%60go%0A%2F%2F%20Define%20connection%20error%20constants%0Avar%20(%0A%20%20%20%20ErrConnectionLost%20%20%20%3D%20errors.New(%22connection%20lost%22)%0A%20%20%20%20ErrConnectionFailed%20%3D%20errors.New(%22connection%20failed%22)%0A%20%20%20%20ErrUnauthorized%20%20%20%20%20%3D%20errors.New(%22unauthorized%22)%0A%20%20%20%20ErrForbidden%20%20%20%20%20%20%20%20%3D%20errors.New(%22forbidden%22)%0A)%0A%60%60%60%0A%0A%23%23%20HTTP%20Client%0A%0AHTTP%20clients%20communicate%20with%20servers%20using%20traditional%20HTTP%20requests.%0A%0A%23%23%23%20Basic%20HTTP%20Client%0A%0A%60%60%60go%0Afunc%20createHTTPClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20HTTP%20client%0A%20%20%20%20c%20%3A%3D%20client.NewHTTPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20%2F%2F%20Set%20authentication%0A%20%20%20%20c.SetHeader(%22Authorization%22%2C%20%22Bearer%20your-token%22)%0A%20%20%20%20c.SetHeader(%22X-API-Version%22%2C%20%22v1%22)%0A%0A%20%20%20%20%2F%2F%20Set%20timeout%0A%20%20%20%20c.SetTimeout(30%20*%20time.Second)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20client%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Client%20with%20Custom%20Configuration%0A%0A%60%60%60go%0Afunc%20createCustomHTTPClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20custom%20HTTP%20client%0A%20%20%20%20httpClient%20%3A%3D%20%26http.Client%7B%0A%20%20%20%20%20%20%20%20Timeout%3A%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20Transport%3A%20%26http.Transport%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20MaxIdleConns%3A%20%20%20%20%20%20%20%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MaxIdleConnsPerHost%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20IdleConnTimeout%3A%20%20%20%20%2090%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20TLSClientConfig%3A%20%26tls.Config%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20InsecureSkipVerify%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20MCP%20client%20with%20custom%20HTTP%20client%0A%20%20%20%20c%20%3A%3D%20client.NewHTTPClientWithClient(%22https%3A%2F%2Fapi.example.com%2Fmcp%22%2C%20httpClient)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20%2F%2F%20Set%20custom%20headers%0A%20%20%20%20c.SetHeader(%22User-Agent%22%2C%20%22MyApp%2F1.0%22)%0A%20%20%20%20c.SetHeader(%22Accept%22%2C%20%22application%2Fjson%22)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20client...%0A%7D%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Authentication%0A%0A%60%60%60go%0Atype%20AuthenticatedHTTPClient%20struct%20%7B%0A%20%20%20%20client%20%20%20%20%20%20*client.HTTPClient%0A%20%20%20%20tokenSource%20TokenSource%0A%20%20%20%20mutex%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Atype%20TokenSource%20interface%20%7B%0A%20%20%20%20Token()%20(string%2C%20error)%0A%20%20%20%20Refresh()%20error%0A%7D%0A%0Afunc%20NewAuthenticatedHTTPClient(baseURL%20string%2C%20tokenSource%20TokenSource)%20*AuthenticatedHTTPClient%20%7B%0A%20%20%20%20return%20%26AuthenticatedHTTPClient%7B%0A%20%20%20%20%20%20%20%20client%3A%20%20%20%20%20%20client.NewHTTPClient(baseURL)%2C%0A%20%20%20%20%20%20%20%20tokenSource%3A%20tokenSource%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(ahc%20*AuthenticatedHTTPClient)%20ensureValidToken()%20error%20%7B%0A%20%20%20%20ahc.mutex.Lock()%0A%20%20%20%20defer%20ahc.mutex.Unlock()%0A%0A%20%20%20%20token%2C%20err%20%3A%3D%20ahc.tokenSource.Token()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Try%20to%20refresh%20token%0A%20%20%20%20%20%20%20%20if%20refreshErr%20%3A%3D%20ahc.tokenSource.Refresh()%3B%20refreshErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20refresh%20token%3A%20%25w%22%2C%20refreshErr)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20token%2C%20err%20%3D%20ahc.tokenSource.Token()%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20get%20token%20after%20refresh%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20ahc.client.SetHeader(%22Authorization%22%2C%20%22Bearer%20%22%2Btoken)%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(ahc%20*AuthenticatedHTTPClient)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20ahc.ensureValidToken()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20ahc.client.CallTool(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20isAuthError(err)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Token%20might%20be%20expired%2C%20refresh%20and%20retry%0A%20%20%20%20%20%20%20%20if%20refreshErr%20%3A%3D%20ahc.tokenSource.Refresh()%3B%20refreshErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22authentication%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20ahc.ensureValidToken()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20ahc.client.CallTool(ctx%2C%20req)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20isAuthError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20ErrUnauthorized)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrForbidden)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Connection%20Pooling%0A%0A%60%60%60go%0Atype%20HTTPClientPool%20struct%20%7B%0A%20%20%20%20clients%20chan%20*client.HTTPClient%0A%20%20%20%20factory%20func()%20*client.HTTPClient%0A%20%20%20%20maxSize%20int%0A%7D%0A%0Afunc%20NewHTTPClientPool(baseURL%20string%2C%20maxSize%20int)%20*HTTPClientPool%20%7B%0A%20%20%20%20pool%20%3A%3D%20%26HTTPClientPool%7B%0A%20%20%20%20%20%20%20%20clients%3A%20make(chan%20*client.HTTPClient%2C%20maxSize)%2C%0A%20%20%20%20%20%20%20%20maxSize%3A%20maxSize%2C%0A%20%20%20%20%20%20%20%20factory%3A%20func()%20*client.HTTPClient%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20client.NewHTTPClient(baseURL)%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Pre-populate%20pool%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20maxSize%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20pool.clients%20%3C-%20pool.factory()%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20pool%0A%7D%0A%0Afunc%20(pool%20*HTTPClientPool)%20Get()%20*client.HTTPClient%20%7B%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20c%20%3A%3D%20%3C-pool.clients%3A%0A%20%20%20%20%20%20%20%20return%20c%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20pool.factory()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(pool%20*HTTPClientPool)%20Put(c%20*client.HTTPClient)%20%7B%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20pool.clients%20%3C-%20c%3A%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Pool%20full%2C%20close%20client%0A%20%20%20%20%20%20%20%20c.Close()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(pool%20*HTTPClientPool)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20c%20%3A%3D%20pool.Get()%0A%20%20%20%20defer%20pool.Put(c)%0A%0A%20%20%20%20return%20c.CallTool(ctx%2C%20req)%0A%7D%0A%60%60%60%0A%0A%23%23%20SSE%20Client%0A%0ASSE%20(Server-Sent%20Events)%20clients%20provide%20real-time%20communication%20with%20servers.%0A%0A%23%23%23%20Basic%20SSE%20Client%0A%0A%60%60%60go%0Afunc%20createSSEClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20SSE%20client%0A%20%20%20%20c%20%3A%3D%20client.NewSSEClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20%2F%2F%20Set%20authentication%0A%20%20%20%20c.SetHeader(%22Authorization%22%2C%20%22Bearer%20your-token%22)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Subscribe%20to%20notifications%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20c.Subscribe(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Handle%20notifications%20in%20background%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20for%20notification%20%3A%3D%20range%20notifications%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Notification%3A%20%25%2Bv%22%2C%20notification)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20%2F%2F%20Use%20client%20for%20regular%20operations%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20SSE%20Client%20with%20Reconnection%0A%0A%60%60%60go%0Atype%20ResilientSSEClient%20struct%20%7B%0A%20%20%20%20baseURL%20%20%20%20%20string%0A%20%20%20%20headers%20%20%20%20%20map%5Bstring%5Dstring%0A%20%20%20%20client%20%20%20%20%20%20*client.SSEClient%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20reconnectCh%20chan%20struct%7B%7D%0A%20%20%20%20mutex%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewResilientSSEClient(baseURL%20string)%20*ResilientSSEClient%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20rsc%20%3A%3D%20%26ResilientSSEClient%7B%0A%20%20%20%20%20%20%20%20baseURL%3A%20%20%20%20%20baseURL%2C%0A%20%20%20%20%20%20%20%20headers%3A%20%20%20%20%20make(map%5Bstring%5Dstring)%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20%20%20%20cancel%2C%0A%20%20%20%20%20%20%20%20reconnectCh%3A%20make(chan%20struct%7B%7D%2C%201)%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20go%20rsc.reconnectLoop()%0A%20%20%20%20return%20rsc%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20SetHeader(key%2C%20value%20string)%20%7B%0A%20%20%20%20rsc.mutex.Lock()%0A%20%20%20%20defer%20rsc.mutex.Unlock()%0A%20%20%20%20rsc.headers%5Bkey%5D%20%3D%20value%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20connect()%20error%20%7B%0A%20%20%20%20rsc.mutex.Lock()%0A%20%20%20%20defer%20rsc.mutex.Unlock()%0A%0A%20%20%20%20if%20rsc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20rsc.client.Close()%0A%20%20%20%20%7D%0A%0A%20%20%20%20client%20%3A%3D%20client.NewSSEClient(rsc.baseURL)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20headers%0A%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20rsc.headers%20%7B%0A%20%20%20%20%20%20%20%20client.SetHeader(key%2C%20value)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20client.Initialize(rsc.ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20rsc.client%20%3D%20client%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20reconnectLoop()%20%7B%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-rsc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20case%20%3C-rsc.reconnectCh%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Reconnecting%20SSE%20client...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20attempt%20%3A%3D%201%3B%20attempt%20%3C%3D%205%3B%20attempt%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20rsc.connect()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Reconnection%20attempt%20%25d%20failed%3A%20%25v%22%2C%20attempt%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20backoff%20%3A%3D%20time.Duration(attempt)%20*%20time.Second%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-time.After(backoff)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-rsc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Reconnected%20successfully%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20rsc.mutex.RLock()%0A%20%20%20%20client%20%3A%3D%20rsc.client%0A%20%20%20%20rsc.mutex.RUnlock()%0A%0A%20%20%20%20if%20client%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20not%20connected%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20client.CallTool(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20isConnectionError(err)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Trigger%20reconnection%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20rsc.reconnectCh%20%3C-%20struct%7B%7D%7B%7D%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22connection%20error%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20Subscribe(ctx%20context.Context)%20(%3C-chan%20mcp.Notification%2C%20error)%20%7B%0A%20%20%20%20rsc.mutex.RLock()%0A%20%20%20%20client%20%3A%3D%20rsc.client%0A%20%20%20%20rsc.mutex.RUnlock()%0A%0A%20%20%20%20if%20client%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20not%20connected%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20client.Subscribe(ctx)%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20Close()%20error%20%7B%0A%20%20%20%20rsc.cancel()%0A%20%20%20%20%0A%20%20%20%20rsc.mutex.Lock()%0A%20%20%20%20defer%20rsc.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20if%20rsc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20rsc.client.Close()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%0A%2F%2F%20Helper%20function%20to%20check%20if%20an%20error%20is%20a%20connection%20error%0Afunc%20isConnectionError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20ErrConnectionLost)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrConnectionFailed)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20SSE%20Event%20Handling%0A%0A%60%60%60go%0Atype%20SSEEventHandler%20struct%20%7B%0A%20%20%20%20client%20%20%20%20%20%20*client.SSEClient%0A%20%20%20%20handlers%20%20%20%20map%5Bstring%5D%5B%5Dfunc(mcp.Notification)%0A%20%20%20%20mutex%20%20%20%20%20%20%20sync.RWMutex%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20wg%20%20%20%20%20%20%20%20%20%20sync.WaitGroup%0A%7D%0A%0Afunc%20NewSSEEventHandler(c%20*client.SSEClient)%20*SSEEventHandler%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20return%20%26SSEEventHandler%7B%0A%20%20%20%20%20%20%20%20client%3A%20%20%20c%2C%0A%20%20%20%20%20%20%20%20handlers%3A%20make(map%5Bstring%5D%5B%5Dfunc(mcp.Notification))%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20cancel%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20Start()%20error%20%7B%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20seh.client.Subscribe(seh.ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20seh.wg.Add(1)%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20defer%20seh.wg.Done()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20notification%20%3A%3D%20%3C-notifications%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20seh.handleNotification(notification)%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-seh.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20Stop()%20%7B%0A%20%20%20%20seh.cancel()%0A%20%20%20%20seh.wg.Wait()%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnProgress(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Fprogress%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnMessage(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Fmessage%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnResourceUpdate(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Fresources%2Fupdated%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnToolUpdate(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Ftools%2Fupdated%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20addHandler(method%20string%2C%20handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.mutex.Lock()%0A%20%20%20%20defer%20seh.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20seh.handlers%5Bmethod%5D%20%3D%20append(seh.handlers%5Bmethod%5D%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20handleNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20seh.mutex.RLock()%0A%20%20%20%20handlers%20%3A%3D%20seh.handlers%5Bnotification.Method%5D%0A%20%20%20%20seh.mutex.RUnlock()%0A%0A%20%20%20%20for%20_%2C%20handler%20%3A%3D%20range%20handlers%20%7B%0A%20%20%20%20%20%20%20%20go%20handler(notification)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20In-Process%20Client%0A%0AIn-process%20clients%20provide%20direct%20communication%20with%20servers%20in%20the%20same%20process.%0A%0A%23%23%23%20Basic%20In-Process%20Client%0A%0A%60%60%60go%0Afunc%20createInProcessClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Test%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20tools%20to%20server%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22test_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Test%20tool%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22input%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20input%20%3A%3D%20req.Params.Arguments%5B%22input%22%5D.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(%22Processed%3A%20%22%20%2B%20input)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20in-process%20client%0A%20%20%20%20c%20%3A%3D%20client.NewInProcessClient(s)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20(no%20network%20overhead)%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20client%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22test_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22test%20data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20In-Process%20Client%20for%20Testing%0A%0A%60%60%60go%0Atype%20TestClient%20struct%20%7B%0A%20%20%20%20server%20*server.MCPServer%0A%20%20%20%20client%20*client.InProcessClient%0A%7D%0A%0Afunc%20NewTestClient()%20*TestClient%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Test%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithAllCapabilities()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20return%20%26TestClient%7B%0A%20%20%20%20%20%20%20%20server%3A%20s%2C%0A%20%20%20%20%20%20%20%20client%3A%20client.NewInProcessClient(s)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20AddTool(name%2C%20description%20string%2C%20handler%20server.ToolHandler)%20%7B%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(name%2C%20mcp.WithDescription(description))%0A%20%20%20%20tc.server.AddTool(tool%2C%20handler)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20AddResource(uri%2C%20name%20string%2C%20handler%20server.ResourceHandler)%20%7B%0A%20%20%20%20resource%20%3A%3D%20mcp.NewResource(uri%2C%20name)%0A%20%20%20%20tc.server.AddResource(resource%2C%20handler)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20Initialize(ctx%20context.Context)%20error%20%7B%0A%20%20%20%20return%20tc.client.Initialize(ctx)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20CallTool(ctx%20context.Context%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20return%20tc.client.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20ReadResource(ctx%20context.Context%2C%20uri%20string)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20return%20tc.client.ReadResource(ctx%2C%20mcp.ReadResourceRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.ReadResourceRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20uri%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20Close()%20error%20%7B%0A%20%20%20%20return%20tc.client.Close()%0A%7D%0A%0A%2F%2F%20Usage%20in%20tests%0Afunc%20TestWithInProcessClient(t%20*testing.T)%20%7B%0A%20%20%20%20tc%20%3A%3D%20NewTestClient()%0A%20%20%20%20defer%20tc.Close()%0A%0A%20%20%20%20%2F%2F%20Add%20test%20tool%0A%20%20%20%20tc.AddTool(%22echo%22%2C%20%22Echo%20input%22%2C%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20input%20%3A%3D%20req.Params.Arguments%5B%22input%22%5D.(string)%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(input)%2C%20nil%0A%20%20%20%20%7D)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20err%20%3A%3D%20tc.Initialize(ctx)%0A%20%20%20%20require.NoError(t%2C%20err)%0A%0A%20%20%20%20%2F%2F%20Test%20tool%20call%0A%20%20%20%20result%2C%20err%20%3A%3D%20tc.CallTool(ctx%2C%20%22echo%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22input%22%3A%20%22hello%20world%22%2C%0A%20%20%20%20%7D)%0A%20%20%20%20require.NoError(t%2C%20err)%0A%20%20%20%20assert.Equal(t%2C%20%22hello%20world%22%2C%20result.Content%5B0%5D.Text)%0A%7D%0A%60%60%60%0A%0A%23%23%20Transport%20Selection%0A%0A%23%23%23%20Decision%20Matrix%0A%0AChoose%20your%20transport%20based%20on%20these%20factors%3A%0A%0A%60%60%60go%0Atype%20TransportRequirements%20struct%20%7B%0A%20%20%20%20RealTime%20%20%20%20%20%20%20%20bool%0A%20%20%20%20MultiClient%20%20%20%20%20bool%0A%20%20%20%20NetworkRequired%20bool%0A%20%20%20%20Performance%20%20%20%20%20string%20%2F%2F%20%22high%22%2C%20%22medium%22%2C%20%22low%22%0A%20%20%20%20Complexity%20%20%20%20%20%20string%20%2F%2F%20%22low%22%2C%20%22medium%22%2C%20%22high%22%0A%7D%0A%0Afunc%20SelectTransport(req%20TransportRequirements)%20string%20%7B%0A%20%20%20%20switch%20%7B%0A%20%20%20%20case%20!req.NetworkRequired%20%26%26%20req.Performance%20%3D%3D%20%22high%22%3A%0A%20%20%20%20%20%20%20%20return%20%22inprocess%22%0A%20%20%20%20%0A%20%20%20%20case%20!req.NetworkRequired%20%26%26%20!req.MultiClient%3A%0A%20%20%20%20%20%20%20%20return%20%22stdio%22%0A%20%20%20%20%0A%20%20%20%20case%20req.RealTime%20%26%26%20req.MultiClient%3A%0A%20%20%20%20%20%20%20%20return%20%22sse%22%0A%20%20%20%20%0A%20%20%20%20case%20req.NetworkRequired%20%26%26%20req.MultiClient%3A%0A%20%20%20%20%20%20%20%20return%20%22http%22%0A%20%20%20%20%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20%22stdio%22%20%2F%2F%20Default%20fallback%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%20examples%0Afunc%20demonstrateTransportSelection()%20%7B%0A%20%20%20%20%2F%2F%20High-performance%20testing%0A%20%20%20%20testReq%20%3A%3D%20TransportRequirements%7B%0A%20%20%20%20%20%20%20%20RealTime%3A%20%20%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20MultiClient%3A%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20NetworkRequired%3A%20false%2C%0A%20%20%20%20%20%20%20%20Performance%3A%20%20%20%20%20%22high%22%2C%0A%20%20%20%20%20%20%20%20Complexity%3A%20%20%20%20%20%20%22low%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Printf(%22Testing%3A%20%25s%5Cn%22%2C%20SelectTransport(testReq))%0A%0A%20%20%20%20%2F%2F%20Real-time%20web%20application%0A%20%20%20%20webReq%20%3A%3D%20TransportRequirements%7B%0A%20%20%20%20%20%20%20%20RealTime%3A%20%20%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20MultiClient%3A%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20NetworkRequired%3A%20true%2C%0A%20%20%20%20%20%20%20%20Performance%3A%20%20%20%20%20%22medium%22%2C%0A%20%20%20%20%20%20%20%20Complexity%3A%20%20%20%20%20%20%22medium%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Printf(%22Web%20app%3A%20%25s%5Cn%22%2C%20SelectTransport(webReq))%0A%0A%20%20%20%20%2F%2F%20CLI%20tool%0A%20%20%20%20cliReq%20%3A%3D%20TransportRequirements%7B%0A%20%20%20%20%20%20%20%20RealTime%3A%20%20%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20MultiClient%3A%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20NetworkRequired%3A%20false%2C%0A%20%20%20%20%20%20%20%20Performance%3A%20%20%20%20%20%22medium%22%2C%0A%20%20%20%20%20%20%20%20Complexity%3A%20%20%20%20%20%20%22low%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Printf(%22CLI%20tool%3A%20%25s%5Cn%22%2C%20SelectTransport(cliReq))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multi-Transport%20Client%20Factory%0A%0A%60%60%60go%0Atype%20ClientFactory%20struct%20%7B%0A%20%20%20%20configs%20map%5Bstring%5Dinterface%7B%7D%0A%7D%0A%0Afunc%20NewClientFactory()%20*ClientFactory%20%7B%0A%20%20%20%20return%20%26ClientFactory%7B%0A%20%20%20%20%20%20%20%20configs%3A%20make(map%5Bstring%5Dinterface%7B%7D)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20SetStdioConfig(command%20string%2C%20args%20...string)%20%7B%0A%20%20%20%20cf.configs%5B%22stdio%22%5D%20%3D%20client.StdioOptions%7B%0A%20%20%20%20%20%20%20%20Command%3A%20command%2C%0A%20%20%20%20%20%20%20%20Args%3A%20%20%20%20args%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20SetHTTPConfig(baseURL%20string%2C%20headers%20map%5Bstring%5Dstring)%20%7B%0A%20%20%20%20cf.configs%5B%22http%22%5D%20%3D%20struct%20%7B%0A%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%7D%7B%0A%20%20%20%20%20%20%20%20BaseURL%3A%20baseURL%2C%0A%20%20%20%20%20%20%20%20Headers%3A%20headers%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20SetSSEConfig(baseURL%20string%2C%20headers%20map%5Bstring%5Dstring)%20%7B%0A%20%20%20%20cf.configs%5B%22sse%22%5D%20%3D%20struct%20%7B%0A%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%7D%7B%0A%20%20%20%20%20%20%20%20BaseURL%3A%20baseURL%2C%0A%20%20%20%20%20%20%20%20Headers%3A%20headers%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20CreateClient(transport%20string)%20(client.Client%2C%20error)%20%7B%0A%20%20%20%20switch%20transport%20%7B%0A%20%20%20%20case%20%22stdio%22%3A%0A%20%20%20%20%20%20%20%20config%2C%20ok%20%3A%3D%20cf.configs%5B%22stdio%22%5D.(client.StdioOptions)%0A%20%20%20%20%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22stdio%20config%20not%20set%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20client.NewStdioClientWithOptions(config)%0A%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20config%2C%20ok%20%3A%3D%20cf.configs%5B%22http%22%5D.(struct%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22http%20config%20not%20set%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20c%20%3A%3D%20client.NewHTTPClient(config.BaseURL)%0A%20%20%20%20%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20config.Headers%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.SetHeader(key%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20c%2C%20nil%0A%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20config%2C%20ok%20%3A%3D%20cf.configs%5B%22sse%22%5D.(struct%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22sse%20config%20not%20set%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20c%20%3A%3D%20client.NewSSEClient(config.BaseURL)%0A%20%20%20%20%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20config.Headers%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.SetHeader(key%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20c%2C%20nil%0A%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20transport%3A%20%25s%22%2C%20transport)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Afunc%20demonstrateClientFactory()%20%7B%0A%20%20%20%20factory%20%3A%3D%20NewClientFactory()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Configure%20transports%0A%20%20%20%20factory.SetStdioConfig(%22go%22%2C%20%22run%22%2C%20%22server.go%22)%0A%20%20%20%20factory.SetHTTPConfig(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22Authorization%22%3A%20%22Bearer%20token%22%2C%0A%20%20%20%20%7D)%0A%20%20%20%20factory.SetSSEConfig(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22Authorization%22%3A%20%22Bearer%20token%22%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Create%20client%20based%20on%20environment%0A%20%20%20%20transport%20%3A%3D%20os.Getenv(%22MCP_TRANSPORT%22)%0A%20%20%20%20if%20transport%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20transport%20%3D%20%22stdio%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20client%2C%20err%20%3A%3D%20factory.CreateClient(transport)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20client.Close()%0A%0A%20%20%20%20%2F%2F%20Use%20client...%0A%7D%0A%60%60%60%0A%0A",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./transports-CGUShdsr.js"),[]),path:"/clients/transports.html",type:"mdx",filePath:"clients/transports.mdx",content:"%23%20Client%20Transports%0A%0ALearn%20about%20transport-specific%20client%20implementations%20and%20how%20to%20choose%20the%20right%20transport%20for%20your%20use%20case.%0A%0A%23%23%20Transport%20Overview%0A%0AMCP-Go%20provides%20client%20implementations%20for%20all%20supported%20transports.%20Each%20transport%20has%20different%20characteristics%20and%20is%20optimized%20for%20specific%20scenarios.%0A%0A%7C%20Transport%20%7C%20Best%20For%20%7C%20Connection%20%7C%20Real-time%20%7C%20Multi-client%20%7C%0A%7C-----------%7C----------%7C------------%7C-----------%7C--------------%7C%0A%7C%20**STDIO**%20%7C%20CLI%20tools%2C%20desktop%20apps%20%7C%20Process%20pipes%20%7C%20No%20%7C%20No%20%7C%0A%7C%20**HTTP**%20%7C%20Web%20services%2C%20APIs%20%7C%20HTTP%20requests%20%7C%20No%20%7C%20Yes%20%7C%0A%7C%20**SSE**%20%7C%20Web%20apps%2C%20real-time%20%7C%20HTTP%20%2B%20EventSource%20%7C%20Yes%20%7C%20Yes%20%7C%0A%7C%20**In-Process**%20%7C%20Testing%2C%20embedded%20%7C%20Direct%20calls%20%7C%20Yes%20%7C%20No%20%7C%0A%0A%23%23%20STDIO%20Client%0A%0ASTDIO%20clients%20communicate%20with%20servers%20through%20standard%20input%2Foutput%2C%20typically%20by%20spawning%20a%20subprocess.%0A%0A%23%23%23%20Basic%20STDIO%20Client%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22crypto%2Ftls%22%0A%20%20%20%20%22errors%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22net%2Fhttp%22%0A%20%20%20%20%22os%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20createStdioClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20client%20that%20spawns%20a%20subprocess%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20the%20client%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20STDIO%20Configuration%0A%0A%60%60%60go%0Afunc%20createAdvancedStdioClient()%20%7B%0A%20%20%20%20options%20%3A%3D%20client.StdioOptions%7B%0A%20%20%20%20%20%20%20%20Command%3A%20%22python%22%2C%0A%20%20%20%20%20%20%20%20Args%3A%20%20%20%20%5B%5Dstring%7B%22%2Fpath%2Fto%2Fserver.py%22%7D%2C%0A%20%20%20%20%20%20%20%20Env%3A%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22PYTHONPATH%3D%2Fcustom%2Fpath%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22LOG_LEVEL%3Ddebug%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22DATABASE_URL%3Dsqlite%3A%2F%2F%2Fdata.db%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20WorkingDir%3A%20%20%20%20%20%20%22%2Fpath%2Fto%2Fserver%22%2C%0A%20%20%20%20%20%20%20%20Timeout%3A%20%20%20%20%20%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20BufferSize%3A%20%20%20%20%20%208192%2C%0A%20%20%20%20%20%20%20%20RestartOnError%3A%20%20true%2C%0A%20%20%20%20%20%20%20%20MaxRestarts%3A%20%20%20%20%203%2C%0A%20%20%20%20%20%20%20%20RestartDelay%3A%20%20%20%201%20*%20time.Second%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClientWithOptions(options)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20%2F%2F%20Use%20client...%0A%7D%0A%60%60%60%0A%0A%23%23%23%20STDIO%20Error%20Handling%0A%0A%60%60%60go%0A%2F%2F%20Define%20error%20constants%20for%20STDIO%20client%20errors%0Avar%20(%0A%20%20%20%20ErrProcessExited%20%20%3D%20errors.New(%22process%20exited%22)%0A%20%20%20%20ErrProcessTimeout%20%3D%20errors.New(%22process%20timeout%22)%0A%20%20%20%20ErrBrokenPipe%20%20%20%20%20%3D%20errors.New(%22broken%20pipe%22)%0A)%0A%0Afunc%20handleStdioErrors(c%20*client.StdioClient)%20%7B%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22example_tool%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20ErrProcessExited)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Server%20process%20exited%20unexpectedly%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Attempt%20to%20restart%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20restartErr%20%3A%3D%20c.Restart()%3B%20restartErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%3A%20%25v%22%2C%20restartErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20ErrProcessTimeout)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Server%20process%20timed%20out%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Kill%20and%20restart%20process%0A%20%20%20%20%20%20%20%20%20%20%20%20c.Kill()%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20restartErr%20%3A%3D%20c.Restart()%3B%20restartErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%3A%20%25v%22%2C%20restartErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20ErrBrokenPipe)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Communication%20pipe%20broken%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20likely%20crashed%2C%20restart%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20restartErr%20%3A%3D%20c.Restart()%3B%20restartErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%3A%20%25v%22%2C%20restartErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unexpected%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20STDIO%20Process%20Management%0A%0A%60%60%60go%0Atype%20ManagedStdioClient%20struct%20%7B%0A%20%20%20%20client%20%20%20%20%20%20*client.StdioClient%0A%20%20%20%20options%20%20%20%20%20client.StdioOptions%0A%20%20%20%20restartChan%20chan%20struct%7B%7D%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20wg%20%20%20%20%20%20%20%20%20%20sync.WaitGroup%0A%7D%0A%0Afunc%20NewManagedStdioClient(options%20client.StdioOptions)%20(*ManagedStdioClient%2C%20error)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20msc%20%3A%3D%20%26ManagedStdioClient%7B%0A%20%20%20%20%20%20%20%20options%3A%20%20%20%20%20options%2C%0A%20%20%20%20%20%20%20%20restartChan%3A%20make(chan%20struct%7B%7D%2C%201)%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20%20%20%20cancel%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20msc.start()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20cancel()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20msc.wg.Add(1)%0A%20%20%20%20go%20msc.monitorProcess()%0A%0A%20%20%20%20return%20msc%2C%20nil%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20start()%20error%20%7B%0A%20%20%20%20client%2C%20err%20%3A%3D%20client.NewStdioClientWithOptions(msc.options)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20client.Initialize(msc.ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20client.Close()%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20msc.client%20%3D%20client%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20monitorProcess()%20%7B%0A%20%20%20%20defer%20msc.wg.Done()%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-msc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20case%20%3C-msc.restartChan%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Restarting%20STDIO%20client...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20msc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20msc.client.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wait%20before%20restarting%0A%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(1%20*%20time.Second)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20msc.start()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%20client%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Try%20again%20after%20delay%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(5%20*%20time.Second)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20msc.restartChan%20%3C-%20struct%7B%7D%7B%7D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Client%20restarted%20successfully%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20if%20msc.client%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20not%20available%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20msc.client.CallTool(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20isProcessError(err)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Trigger%20restart%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20msc.restartChan%20%3C-%20struct%7B%7D%7B%7D%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22process%20error%2C%20restarting%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20Close()%20error%20%7B%0A%20%20%20%20msc.cancel()%0A%20%20%20%20msc.wg.Wait()%0A%20%20%20%20%0A%20%20%20%20if%20msc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20msc.client.Close()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20isProcessError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20ErrProcessExited)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrBrokenPipe)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrProcessTimeout)%0A%7D%0A%60%60%60%0A%0A%60%60%60go%0A%2F%2F%20Define%20connection%20error%20constants%0Avar%20(%0A%20%20%20%20ErrConnectionLost%20%20%20%3D%20errors.New(%22connection%20lost%22)%0A%20%20%20%20ErrConnectionFailed%20%3D%20errors.New(%22connection%20failed%22)%0A%20%20%20%20ErrUnauthorized%20%20%20%20%20%3D%20errors.New(%22unauthorized%22)%0A%20%20%20%20ErrForbidden%20%20%20%20%20%20%20%20%3D%20errors.New(%22forbidden%22)%0A)%0A%60%60%60%0A%0A%23%23%20HTTP%20Client%0A%0AHTTP%20clients%20communicate%20with%20servers%20using%20traditional%20HTTP%20requests.%0A%0A%23%23%23%20Basic%20HTTP%20Client%0A%0A%60%60%60go%0Afunc%20createHTTPClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20HTTP%20client%0A%20%20%20%20c%20%3A%3D%20client.NewHTTPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20%2F%2F%20Set%20authentication%0A%20%20%20%20c.SetHeader(%22Authorization%22%2C%20%22Bearer%20your-token%22)%0A%20%20%20%20c.SetHeader(%22X-API-Version%22%2C%20%22v1%22)%0A%0A%20%20%20%20%2F%2F%20Set%20timeout%0A%20%20%20%20c.SetTimeout(30%20*%20time.Second)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20client%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Client%20with%20Custom%20Configuration%0A%0A%60%60%60go%0Afunc%20createCustomHTTPClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20custom%20HTTP%20client%0A%20%20%20%20httpClient%20%3A%3D%20%26http.Client%7B%0A%20%20%20%20%20%20%20%20Timeout%3A%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20Transport%3A%20%26http.Transport%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20MaxIdleConns%3A%20%20%20%20%20%20%20%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MaxIdleConnsPerHost%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20IdleConnTimeout%3A%20%20%20%20%2090%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20TLSClientConfig%3A%20%26tls.Config%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20InsecureSkipVerify%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20MCP%20client%20with%20custom%20HTTP%20client%0A%20%20%20%20c%20%3A%3D%20client.NewHTTPClientWithClient(%22https%3A%2F%2Fapi.example.com%2Fmcp%22%2C%20httpClient)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20%2F%2F%20Set%20custom%20headers%0A%20%20%20%20c.SetHeader(%22User-Agent%22%2C%20%22MyApp%2F1.0%22)%0A%20%20%20%20c.SetHeader(%22Accept%22%2C%20%22application%2Fjson%22)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20client...%0A%7D%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Authentication%0A%0A%60%60%60go%0Atype%20AuthenticatedHTTPClient%20struct%20%7B%0A%20%20%20%20client%20%20%20%20%20%20*client.HTTPClient%0A%20%20%20%20tokenSource%20TokenSource%0A%20%20%20%20mutex%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Atype%20TokenSource%20interface%20%7B%0A%20%20%20%20Token()%20(string%2C%20error)%0A%20%20%20%20Refresh()%20error%0A%7D%0A%0Afunc%20NewAuthenticatedHTTPClient(baseURL%20string%2C%20tokenSource%20TokenSource)%20*AuthenticatedHTTPClient%20%7B%0A%20%20%20%20return%20%26AuthenticatedHTTPClient%7B%0A%20%20%20%20%20%20%20%20client%3A%20%20%20%20%20%20client.NewHTTPClient(baseURL)%2C%0A%20%20%20%20%20%20%20%20tokenSource%3A%20tokenSource%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(ahc%20*AuthenticatedHTTPClient)%20ensureValidToken()%20error%20%7B%0A%20%20%20%20ahc.mutex.Lock()%0A%20%20%20%20defer%20ahc.mutex.Unlock()%0A%0A%20%20%20%20token%2C%20err%20%3A%3D%20ahc.tokenSource.Token()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Try%20to%20refresh%20token%0A%20%20%20%20%20%20%20%20if%20refreshErr%20%3A%3D%20ahc.tokenSource.Refresh()%3B%20refreshErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20refresh%20token%3A%20%25w%22%2C%20refreshErr)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20token%2C%20err%20%3D%20ahc.tokenSource.Token()%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20get%20token%20after%20refresh%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20ahc.client.SetHeader(%22Authorization%22%2C%20%22Bearer%20%22%2Btoken)%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(ahc%20*AuthenticatedHTTPClient)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20ahc.ensureValidToken()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20ahc.client.CallTool(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20isAuthError(err)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Token%20might%20be%20expired%2C%20refresh%20and%20retry%0A%20%20%20%20%20%20%20%20if%20refreshErr%20%3A%3D%20ahc.tokenSource.Refresh()%3B%20refreshErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22authentication%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20ahc.ensureValidToken()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20ahc.client.CallTool(ctx%2C%20req)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20isAuthError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20ErrUnauthorized)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrForbidden)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Connection%20Pooling%0A%0A%60%60%60go%0Atype%20HTTPClientPool%20struct%20%7B%0A%20%20%20%20clients%20chan%20*client.HTTPClient%0A%20%20%20%20factory%20func()%20*client.HTTPClient%0A%20%20%20%20maxSize%20int%0A%7D%0A%0Afunc%20NewHTTPClientPool(baseURL%20string%2C%20maxSize%20int)%20*HTTPClientPool%20%7B%0A%20%20%20%20pool%20%3A%3D%20%26HTTPClientPool%7B%0A%20%20%20%20%20%20%20%20clients%3A%20make(chan%20*client.HTTPClient%2C%20maxSize)%2C%0A%20%20%20%20%20%20%20%20maxSize%3A%20maxSize%2C%0A%20%20%20%20%20%20%20%20factory%3A%20func()%20*client.HTTPClient%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20client.NewHTTPClient(baseURL)%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Pre-populate%20pool%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20maxSize%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20pool.clients%20%3C-%20pool.factory()%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20pool%0A%7D%0A%0Afunc%20(pool%20*HTTPClientPool)%20Get()%20*client.HTTPClient%20%7B%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20c%20%3A%3D%20%3C-pool.clients%3A%0A%20%20%20%20%20%20%20%20return%20c%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20pool.factory()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(pool%20*HTTPClientPool)%20Put(c%20*client.HTTPClient)%20%7B%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20pool.clients%20%3C-%20c%3A%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Pool%20full%2C%20close%20client%0A%20%20%20%20%20%20%20%20c.Close()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(pool%20*HTTPClientPool)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20c%20%3A%3D%20pool.Get()%0A%20%20%20%20defer%20pool.Put(c)%0A%0A%20%20%20%20return%20c.CallTool(ctx%2C%20req)%0A%7D%0A%60%60%60%0A%0A%23%23%20SSE%20Client%0A%0ASSE%20(Server-Sent%20Events)%20clients%20provide%20real-time%20communication%20with%20servers.%0A%0A%23%23%23%20Basic%20SSE%20Client%0A%0A%60%60%60go%0Afunc%20createSSEClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20SSE%20client%0A%20%20%20%20c%20%3A%3D%20client.NewSSEClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20%2F%2F%20Set%20authentication%0A%20%20%20%20c.SetHeader(%22Authorization%22%2C%20%22Bearer%20your-token%22)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Subscribe%20to%20notifications%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20c.Subscribe(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Handle%20notifications%20in%20background%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20for%20notification%20%3A%3D%20range%20notifications%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Notification%3A%20%25%2Bv%22%2C%20notification)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20%2F%2F%20Use%20client%20for%20regular%20operations%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20SSE%20Client%20with%20Reconnection%0A%0A%60%60%60go%0Atype%20ResilientSSEClient%20struct%20%7B%0A%20%20%20%20baseURL%20%20%20%20%20string%0A%20%20%20%20headers%20%20%20%20%20map%5Bstring%5Dstring%0A%20%20%20%20client%20%20%20%20%20%20*client.SSEClient%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20reconnectCh%20chan%20struct%7B%7D%0A%20%20%20%20mutex%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewResilientSSEClient(baseURL%20string)%20*ResilientSSEClient%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20rsc%20%3A%3D%20%26ResilientSSEClient%7B%0A%20%20%20%20%20%20%20%20baseURL%3A%20%20%20%20%20baseURL%2C%0A%20%20%20%20%20%20%20%20headers%3A%20%20%20%20%20make(map%5Bstring%5Dstring)%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20%20%20%20cancel%2C%0A%20%20%20%20%20%20%20%20reconnectCh%3A%20make(chan%20struct%7B%7D%2C%201)%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20go%20rsc.reconnectLoop()%0A%20%20%20%20return%20rsc%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20SetHeader(key%2C%20value%20string)%20%7B%0A%20%20%20%20rsc.mutex.Lock()%0A%20%20%20%20defer%20rsc.mutex.Unlock()%0A%20%20%20%20rsc.headers%5Bkey%5D%20%3D%20value%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20connect()%20error%20%7B%0A%20%20%20%20rsc.mutex.Lock()%0A%20%20%20%20defer%20rsc.mutex.Unlock()%0A%0A%20%20%20%20if%20rsc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20rsc.client.Close()%0A%20%20%20%20%7D%0A%0A%20%20%20%20client%20%3A%3D%20client.NewSSEClient(rsc.baseURL)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20headers%0A%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20rsc.headers%20%7B%0A%20%20%20%20%20%20%20%20client.SetHeader(key%2C%20value)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20client.Initialize(rsc.ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20rsc.client%20%3D%20client%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20reconnectLoop()%20%7B%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-rsc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20case%20%3C-rsc.reconnectCh%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Reconnecting%20SSE%20client...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20attempt%20%3A%3D%201%3B%20attempt%20%3C%3D%205%3B%20attempt%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20rsc.connect()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Reconnection%20attempt%20%25d%20failed%3A%20%25v%22%2C%20attempt%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20backoff%20%3A%3D%20time.Duration(attempt)%20*%20time.Second%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-time.After(backoff)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-rsc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Reconnected%20successfully%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20rsc.mutex.RLock()%0A%20%20%20%20client%20%3A%3D%20rsc.client%0A%20%20%20%20rsc.mutex.RUnlock()%0A%0A%20%20%20%20if%20client%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20not%20connected%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20client.CallTool(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20isConnectionError(err)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Trigger%20reconnection%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20rsc.reconnectCh%20%3C-%20struct%7B%7D%7B%7D%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22connection%20error%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20Subscribe(ctx%20context.Context)%20(%3C-chan%20mcp.Notification%2C%20error)%20%7B%0A%20%20%20%20rsc.mutex.RLock()%0A%20%20%20%20client%20%3A%3D%20rsc.client%0A%20%20%20%20rsc.mutex.RUnlock()%0A%0A%20%20%20%20if%20client%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20not%20connected%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20client.Subscribe(ctx)%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20Close()%20error%20%7B%0A%20%20%20%20rsc.cancel()%0A%20%20%20%20%0A%20%20%20%20rsc.mutex.Lock()%0A%20%20%20%20defer%20rsc.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20if%20rsc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20rsc.client.Close()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%0A%2F%2F%20Helper%20function%20to%20check%20if%20an%20error%20is%20a%20connection%20error%0Afunc%20isConnectionError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20ErrConnectionLost)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrConnectionFailed)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20SSE%20Event%20Handling%0A%0A%60%60%60go%0Atype%20SSEEventHandler%20struct%20%7B%0A%20%20%20%20client%20%20%20%20%20%20*client.SSEClient%0A%20%20%20%20handlers%20%20%20%20map%5Bstring%5D%5B%5Dfunc(mcp.Notification)%0A%20%20%20%20mutex%20%20%20%20%20%20%20sync.RWMutex%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20wg%20%20%20%20%20%20%20%20%20%20sync.WaitGroup%0A%7D%0A%0Afunc%20NewSSEEventHandler(c%20*client.SSEClient)%20*SSEEventHandler%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20return%20%26SSEEventHandler%7B%0A%20%20%20%20%20%20%20%20client%3A%20%20%20c%2C%0A%20%20%20%20%20%20%20%20handlers%3A%20make(map%5Bstring%5D%5B%5Dfunc(mcp.Notification))%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20cancel%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20Start()%20error%20%7B%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20seh.client.Subscribe(seh.ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20seh.wg.Add(1)%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20defer%20seh.wg.Done()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20notification%20%3A%3D%20%3C-notifications%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20seh.handleNotification(notification)%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-seh.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20Stop()%20%7B%0A%20%20%20%20seh.cancel()%0A%20%20%20%20seh.wg.Wait()%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnProgress(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Fprogress%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnMessage(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Fmessage%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnResourceUpdate(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Fresources%2Fupdated%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnToolUpdate(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Ftools%2Fupdated%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20addHandler(method%20string%2C%20handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.mutex.Lock()%0A%20%20%20%20defer%20seh.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20seh.handlers%5Bmethod%5D%20%3D%20append(seh.handlers%5Bmethod%5D%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20handleNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20seh.mutex.RLock()%0A%20%20%20%20handlers%20%3A%3D%20seh.handlers%5Bnotification.Method%5D%0A%20%20%20%20seh.mutex.RUnlock()%0A%0A%20%20%20%20for%20_%2C%20handler%20%3A%3D%20range%20handlers%20%7B%0A%20%20%20%20%20%20%20%20go%20handler(notification)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20In-Process%20Client%0A%0AIn-process%20clients%20provide%20direct%20communication%20with%20servers%20in%20the%20same%20process.%0A%0A%23%23%23%20Basic%20In-Process%20Client%0A%0A%60%60%60go%0Afunc%20createInProcessClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Test%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20tools%20to%20server%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22test_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Test%20tool%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22input%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20input%20%3A%3D%20req.Params.Arguments%5B%22input%22%5D.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(%22Processed%3A%20%22%20%2B%20input)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20in-process%20client%0A%20%20%20%20c%20%3A%3D%20client.NewInProcessClient(s)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20(no%20network%20overhead)%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20client%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22test_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22test%20data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20In-Process%20Client%20for%20Testing%0A%0A%60%60%60go%0Atype%20TestClient%20struct%20%7B%0A%20%20%20%20server%20*server.MCPServer%0A%20%20%20%20client%20*client.InProcessClient%0A%7D%0A%0Afunc%20NewTestClient()%20*TestClient%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Test%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithAllCapabilities()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20return%20%26TestClient%7B%0A%20%20%20%20%20%20%20%20server%3A%20s%2C%0A%20%20%20%20%20%20%20%20client%3A%20client.NewInProcessClient(s)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20AddTool(name%2C%20description%20string%2C%20handler%20server.ToolHandler)%20%7B%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(name%2C%20mcp.WithDescription(description))%0A%20%20%20%20tc.server.AddTool(tool%2C%20handler)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20AddResource(uri%2C%20name%20string%2C%20handler%20server.ResourceHandler)%20%7B%0A%20%20%20%20resource%20%3A%3D%20mcp.NewResource(uri%2C%20name)%0A%20%20%20%20tc.server.AddResource(resource%2C%20handler)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20Initialize(ctx%20context.Context)%20error%20%7B%0A%20%20%20%20return%20tc.client.Initialize(ctx)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20CallTool(ctx%20context.Context%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20return%20tc.client.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20ReadResource(ctx%20context.Context%2C%20uri%20string)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20return%20tc.client.ReadResource(ctx%2C%20mcp.ReadResourceRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.ReadResourceRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20uri%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20Close()%20error%20%7B%0A%20%20%20%20return%20tc.client.Close()%0A%7D%0A%0A%2F%2F%20Usage%20in%20tests%0Afunc%20TestWithInProcessClient(t%20*testing.T)%20%7B%0A%20%20%20%20tc%20%3A%3D%20NewTestClient()%0A%20%20%20%20defer%20tc.Close()%0A%0A%20%20%20%20%2F%2F%20Add%20test%20tool%0A%20%20%20%20tc.AddTool(%22echo%22%2C%20%22Echo%20input%22%2C%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20input%20%3A%3D%20req.Params.Arguments%5B%22input%22%5D.(string)%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(input)%2C%20nil%0A%20%20%20%20%7D)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20err%20%3A%3D%20tc.Initialize(ctx)%0A%20%20%20%20require.NoError(t%2C%20err)%0A%0A%20%20%20%20%2F%2F%20Test%20tool%20call%0A%20%20%20%20result%2C%20err%20%3A%3D%20tc.CallTool(ctx%2C%20%22echo%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22input%22%3A%20%22hello%20world%22%2C%0A%20%20%20%20%7D)%0A%20%20%20%20require.NoError(t%2C%20err)%0A%20%20%20%20assert.Equal(t%2C%20%22hello%20world%22%2C%20result.Content%5B0%5D.Text)%0A%7D%0A%60%60%60%0A%0A%23%23%20Transport%20Selection%0A%0A%23%23%23%20Decision%20Matrix%0A%0AChoose%20your%20transport%20based%20on%20these%20factors%3A%0A%0A%60%60%60go%0Atype%20TransportRequirements%20struct%20%7B%0A%20%20%20%20RealTime%20%20%20%20%20%20%20%20bool%0A%20%20%20%20MultiClient%20%20%20%20%20bool%0A%20%20%20%20NetworkRequired%20bool%0A%20%20%20%20Performance%20%20%20%20%20string%20%2F%2F%20%22high%22%2C%20%22medium%22%2C%20%22low%22%0A%20%20%20%20Complexity%20%20%20%20%20%20string%20%2F%2F%20%22low%22%2C%20%22medium%22%2C%20%22high%22%0A%7D%0A%0Afunc%20SelectTransport(req%20TransportRequirements)%20string%20%7B%0A%20%20%20%20switch%20%7B%0A%20%20%20%20case%20!req.NetworkRequired%20%26%26%20req.Performance%20%3D%3D%20%22high%22%3A%0A%20%20%20%20%20%20%20%20return%20%22inprocess%22%0A%20%20%20%20%0A%20%20%20%20case%20!req.NetworkRequired%20%26%26%20!req.MultiClient%3A%0A%20%20%20%20%20%20%20%20return%20%22stdio%22%0A%20%20%20%20%0A%20%20%20%20case%20req.RealTime%20%26%26%20req.MultiClient%3A%0A%20%20%20%20%20%20%20%20return%20%22sse%22%0A%20%20%20%20%0A%20%20%20%20case%20req.NetworkRequired%20%26%26%20req.MultiClient%3A%0A%20%20%20%20%20%20%20%20return%20%22http%22%0A%20%20%20%20%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20%22stdio%22%20%2F%2F%20Default%20fallback%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%20examples%0Afunc%20demonstrateTransportSelection()%20%7B%0A%20%20%20%20%2F%2F%20High-performance%20testing%0A%20%20%20%20testReq%20%3A%3D%20TransportRequirements%7B%0A%20%20%20%20%20%20%20%20RealTime%3A%20%20%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20MultiClient%3A%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20NetworkRequired%3A%20false%2C%0A%20%20%20%20%20%20%20%20Performance%3A%20%20%20%20%20%22high%22%2C%0A%20%20%20%20%20%20%20%20Complexity%3A%20%20%20%20%20%20%22low%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Printf(%22Testing%3A%20%25s%5Cn%22%2C%20SelectTransport(testReq))%0A%0A%20%20%20%20%2F%2F%20Real-time%20web%20application%0A%20%20%20%20webReq%20%3A%3D%20TransportRequirements%7B%0A%20%20%20%20%20%20%20%20RealTime%3A%20%20%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20MultiClient%3A%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20NetworkRequired%3A%20true%2C%0A%20%20%20%20%20%20%20%20Performance%3A%20%20%20%20%20%22medium%22%2C%0A%20%20%20%20%20%20%20%20Complexity%3A%20%20%20%20%20%20%22medium%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Printf(%22Web%20app%3A%20%25s%5Cn%22%2C%20SelectTransport(webReq))%0A%0A%20%20%20%20%2F%2F%20CLI%20tool%0A%20%20%20%20cliReq%20%3A%3D%20TransportRequirements%7B%0A%20%20%20%20%20%20%20%20RealTime%3A%20%20%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20MultiClient%3A%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20NetworkRequired%3A%20false%2C%0A%20%20%20%20%20%20%20%20Performance%3A%20%20%20%20%20%22medium%22%2C%0A%20%20%20%20%20%20%20%20Complexity%3A%20%20%20%20%20%20%22low%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Printf(%22CLI%20tool%3A%20%25s%5Cn%22%2C%20SelectTransport(cliReq))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multi-Transport%20Client%20Factory%0A%0A%60%60%60go%0Atype%20ClientFactory%20struct%20%7B%0A%20%20%20%20configs%20map%5Bstring%5Dinterface%7B%7D%0A%7D%0A%0Afunc%20NewClientFactory()%20*ClientFactory%20%7B%0A%20%20%20%20return%20%26ClientFactory%7B%0A%20%20%20%20%20%20%20%20configs%3A%20make(map%5Bstring%5Dinterface%7B%7D)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20SetStdioConfig(command%20string%2C%20args%20...string)%20%7B%0A%20%20%20%20cf.configs%5B%22stdio%22%5D%20%3D%20client.StdioOptions%7B%0A%20%20%20%20%20%20%20%20Command%3A%20command%2C%0A%20%20%20%20%20%20%20%20Args%3A%20%20%20%20args%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20SetHTTPConfig(baseURL%20string%2C%20headers%20map%5Bstring%5Dstring)%20%7B%0A%20%20%20%20cf.configs%5B%22http%22%5D%20%3D%20struct%20%7B%0A%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%7D%7B%0A%20%20%20%20%20%20%20%20BaseURL%3A%20baseURL%2C%0A%20%20%20%20%20%20%20%20Headers%3A%20headers%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20SetSSEConfig(baseURL%20string%2C%20headers%20map%5Bstring%5Dstring)%20%7B%0A%20%20%20%20cf.configs%5B%22sse%22%5D%20%3D%20struct%20%7B%0A%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%7D%7B%0A%20%20%20%20%20%20%20%20BaseURL%3A%20baseURL%2C%0A%20%20%20%20%20%20%20%20Headers%3A%20headers%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20CreateClient(transport%20string)%20(client.Client%2C%20error)%20%7B%0A%20%20%20%20switch%20transport%20%7B%0A%20%20%20%20case%20%22stdio%22%3A%0A%20%20%20%20%20%20%20%20config%2C%20ok%20%3A%3D%20cf.configs%5B%22stdio%22%5D.(client.StdioOptions)%0A%20%20%20%20%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22stdio%20config%20not%20set%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20client.NewStdioClientWithOptions(config)%0A%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20config%2C%20ok%20%3A%3D%20cf.configs%5B%22http%22%5D.(struct%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22http%20config%20not%20set%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20c%20%3A%3D%20client.NewHTTPClient(config.BaseURL)%0A%20%20%20%20%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20config.Headers%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.SetHeader(key%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20c%2C%20nil%0A%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20config%2C%20ok%20%3A%3D%20cf.configs%5B%22sse%22%5D.(struct%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22sse%20config%20not%20set%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20c%20%3A%3D%20client.NewSSEClient(config.BaseURL)%0A%20%20%20%20%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20config.Headers%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.SetHeader(key%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20c%2C%20nil%0A%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20transport%3A%20%25s%22%2C%20transport)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Afunc%20demonstrateClientFactory()%20%7B%0A%20%20%20%20factory%20%3A%3D%20NewClientFactory()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Configure%20transports%0A%20%20%20%20factory.SetStdioConfig(%22go%22%2C%20%22run%22%2C%20%22server.go%22)%0A%20%20%20%20factory.SetHTTPConfig(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22Authorization%22%3A%20%22Bearer%20token%22%2C%0A%20%20%20%20%7D)%0A%20%20%20%20factory.SetSSEConfig(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22Authorization%22%3A%20%22Bearer%20token%22%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Create%20client%20based%20on%20environment%0A%20%20%20%20transport%20%3A%3D%20os.Getenv(%22MCP_TRANSPORT%22)%0A%20%20%20%20if%20transport%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20transport%20%3D%20%22stdio%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20client%2C%20err%20%3A%3D%20factory.CreateClient(transport)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20client.Close()%0A%0A%20%20%20%20%2F%2F%20Use%20client...%0A%7D%0A%60%60%60%0A%0A",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./advanced-BW2-SJaq.js"),[]),path:"/servers/advanced",type:"mdx",filePath:"servers/advanced.mdx",content:"%23%20Advanced%20Server%20Features%0A%0AExplore%20powerful%20features%20that%20make%20MCP-Go%20servers%20production-ready%3A%20typed%20tools%2C%20session%20management%2C%20middleware%2C%20hooks%2C%20and%20more.%0A%0A%23%23%20Typed%20Tools%0A%0ATyped%20tools%20provide%20compile-time%20type%20safety%20and%20automatic%20parameter%20validation%2C%20reducing%20boilerplate%20and%20preventing%20runtime%20errors.%0A%0A%23%23%23%20Basic%20Typed%20Tool%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0A%2F%2F%20Define%20input%20and%20output%20types%0Atype%20CalculateInput%20struct%20%7B%0A%20%20%20%20Operation%20string%20%20%60json%3A%22operation%22%20validate%3A%22required%2Coneof%3Dadd%20subtract%20multiply%20divide%22%60%0A%20%20%20%20X%20%20%20%20%20%20%20%20%20float64%20%60json%3A%22x%22%20validate%3A%22required%22%60%0A%20%20%20%20Y%20%20%20%20%20%20%20%20%20float64%20%60json%3A%22y%22%20validate%3A%22required%22%60%0A%7D%0A%0Atype%20CalculateOutput%20struct%20%7B%0A%20%20%20%20Result%20%20%20%20float64%20%60json%3A%22result%22%60%0A%20%20%20%20Operation%20string%20%20%60json%3A%22operation%22%60%0A%7D%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Typed%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20typed%20tool%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Perform%20arithmetic%20operations%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22operation%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required())%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20tool%20with%20typed%20handler%0A%20%20%20%20s.AddTool(tool%2C%20mcp.NewTypedToolHandler(handleCalculateTyped))%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleCalculateTyped(ctx%20context.Context%2C%20req%20mcp.CallToolRequest%2C%20input%20CalculateInput)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20var%20result%20float64%0A%20%20%20%20%0A%20%20%20%20switch%20input.Operation%20%7B%0A%20%20%20%20case%20%22add%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20%2B%20input.Y%0A%20%20%20%20case%20%22subtract%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20-%20input.Y%0A%20%20%20%20case%20%22multiply%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20*%20input.Y%0A%20%20%20%20case%20%22divide%22%3A%0A%20%20%20%20%20%20%20%20if%20input.Y%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22division%20by%20zero%22)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20%2F%20input.Y%0A%20%20%20%20%7D%0A%0A%20%20%20%20output%20%3A%3D%20CalculateOutput%7B%0A%20%20%20%20%20%20%20%20Result%3A%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20Operation%3A%20input.Operation%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(output)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Complex%20Typed%20Tool%0A%0A%60%60%60go%0Atype%20UserCreateInput%20struct%20%7B%0A%20%20%20%20Name%20%20%20%20%20string%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22name%22%20validate%3A%22required%2Cmin%3D1%2Cmax%3D100%22%60%0A%20%20%20%20Email%20%20%20%20string%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22email%22%20validate%3A%22required%2Cemail%22%60%0A%20%20%20%20Age%20%20%20%20%20%20int%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22age%22%20validate%3A%22min%3D0%2Cmax%3D150%22%60%0A%20%20%20%20Tags%20%20%20%20%20%5B%5Dstring%20%20%20%20%20%20%20%20%20%20%60json%3A%22tags%22%20validate%3A%22dive%2Cmin%3D1%22%60%0A%20%20%20%20Metadata%20map%5Bstring%5Dstring%20%60json%3A%22metadata%22%60%0A%20%20%20%20Active%20%20%20bool%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22active%22%60%0A%7D%0A%0Atype%20UserCreateOutput%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20%20string%20%20%20%20%60json%3A%22id%22%60%0A%20%20%20%20Name%20%20%20%20%20%20string%20%20%20%20%60json%3A%22name%22%60%0A%20%20%20%20Email%20%20%20%20%20string%20%20%20%20%60json%3A%22email%22%60%0A%20%20%20%20CreatedAt%20time.Time%20%60json%3A%22created_at%22%60%0A%20%20%20%20Status%20%20%20%20string%20%20%20%20%60json%3A%22status%22%60%0A%7D%0A%0Afunc%20handleCreateUser(ctx%20context.Context%2C%20req%20mcp.CallToolRequest%2C%20input%20UserCreateInput)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Validation%20is%20automatic%20based%20on%20struct%20tags%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20user%20in%20database%0A%20%20%20%20user%20%3A%3D%20%26User%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20generateID()%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20input.Name%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%20%20%20%20input.Email%2C%0A%20%20%20%20%20%20%20%20Age%3A%20%20%20%20%20%20%20input.Age%2C%0A%20%20%20%20%20%20%20%20Tags%3A%20%20%20%20%20%20input.Tags%2C%0A%20%20%20%20%20%20%20%20Metadata%3A%20%20input.Metadata%2C%0A%20%20%20%20%20%20%20%20Active%3A%20%20%20%20input.Active%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20db.Create(user)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20user%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20output%20%3A%3D%20%26UserCreateOutput%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20user.ID%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20user.Name%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%20%20%20%20user.Email%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20user.CreatedAt%2C%0A%20%20%20%20%20%20%20%20Status%3A%20%20%20%20%22created%22%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(output)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Custom%20Validation%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22path%2Ffilepath%22%0A%20%20%20%20%22strings%22%0A%0A%20%20%20%20%22github.com%2Fgo-playground%2Fvalidator%2Fv10%22%0A)%0A%0Atype%20FileOperationInput%20struct%20%7B%0A%20%20%20%20Path%20%20%20%20%20%20string%20%60json%3A%22path%22%20validate%3A%22required%2Cfilepath%22%60%0A%20%20%20%20Operation%20string%20%60json%3A%22operation%22%20validate%3A%22required%2Coneof%3Dread%20write%20delete%22%60%0A%20%20%20%20Content%20%20%20string%20%60json%3A%22content%22%20validate%3A%22required_if%3DOperation%20write%22%60%0A%7D%0A%0A%2F%2F%20Custom%20validator%0Afunc%20init()%20%7B%0A%20%20%20%20validate%20%3A%3D%20validator.New()%0A%20%20%20%20validate.RegisterValidation(%22filepath%22%2C%20validateFilePath)%0A%7D%0A%0Afunc%20validateFilePath(fl%20validator.FieldLevel)%20bool%20%7B%0A%20%20%20%20path%20%3A%3D%20fl.Field().String()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Prevent%20directory%20traversal%0A%20%20%20%20if%20strings.Contains(path%2C%20%22..%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Ensure%20path%20is%20within%20allowed%20directory%0A%20%20%20%20allowedDir%20%3A%3D%20%22%2Fapp%2Fdata%22%0A%20%20%20%20absPath%2C%20err%20%3A%3D%20filepath.Abs(path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20strings.HasPrefix(absPath%2C%20allowedDir)%0A%7D%0A%60%60%60%0A%0A%23%23%20Session%20Management%0A%0AHandle%20multiple%20clients%20with%20per-session%20state%20and%20tools.%0A%0A%23%23%23%20Per-Session%20State%0A%0A%60%60%60go%0Atype%20SessionState%20struct%20%7B%0A%20%20%20%20UserID%20%20%20%20%20%20string%0A%20%20%20%20Permissions%20%5B%5Dstring%0A%20%20%20%20Settings%20%20%20%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20StartTime%20%20%20time.Time%0A%7D%0A%0Atype%20SessionManager%20struct%20%7B%0A%20%20%20%20sessions%20map%5Bstring%5D*SessionState%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewSessionManager()%20*SessionManager%20%7B%0A%20%20%20%20return%20%26SessionManager%7B%0A%20%20%20%20%20%20%20%20sessions%3A%20make(map%5Bstring%5D*SessionState)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20CreateSession(sessionID%2C%20userID%20string%2C%20permissions%20%5B%5Dstring)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20sm.sessions%5BsessionID%5D%20%3D%20%26SessionState%7B%0A%20%20%20%20%20%20%20%20UserID%3A%20%20%20%20%20%20userID%2C%0A%20%20%20%20%20%20%20%20Permissions%3A%20permissions%2C%0A%20%20%20%20%20%20%20%20Settings%3A%20%20%20%20make(map%5Bstring%5Dinterface%7B%7D)%2C%0A%20%20%20%20%20%20%20%20StartTime%3A%20%20%20time.Now()%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20GetSession(sessionID%20string)%20(*SessionState%2C%20bool)%20%7B%0A%20%20%20%20sm.mutex.RLock()%0A%20%20%20%20defer%20sm.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20session%2C%20exists%20%3A%3D%20sm.sessions%5BsessionID%5D%0A%20%20%20%20return%20session%2C%20exists%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20RemoveSession(sessionID%20string)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20delete(sm.sessions%2C%20sessionID)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Session-Aware%20Tools%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20sessionManager%20%3A%3D%20NewSessionManager()%0A%20%20%20%20%0A%20%20%20%20hooks%20%3A%3D%20%26server.Hooks%7B%7D%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnRegisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Initialize%20session%20with%20default%20permissions%0A%20%20%20%20%20%20%20%20sessionManager.CreateSession(session.ID()%2C%20%22anonymous%22%2C%20%5B%5Dstring%7B%22read%22%7D)%0A%20%20%20%20%20%20%20%20log.Printf(%22Session%20%25s%20started%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnUnregisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20sessionManager.RemoveSession(session.ID())%0A%20%20%20%20%20%20%20%20log.Printf(%22Session%20%25s%20ended%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Session%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(hooks)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20session-aware%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_user_data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20user-specific%20data%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22data_type%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20createSessionAwareTool(sessionManager)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20createSessionAwareTool(sm%20*SessionManager)%20server.ToolHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20session%2C%20exists%20%3A%3D%20sm.GetSession(sessionID)%0A%20%20%20%20%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20session%22)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20dataType%20%3A%3D%20req.Params.Arguments%5B%22data_type%22%5D.(string)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20permissions%0A%20%20%20%20%20%20%20%20if%20!hasPermission(session.Permissions%2C%20%22read%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22insufficient%20permissions%22)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Get%20user-specific%20data%0A%20%20%20%20%20%20%20%20data%2C%20err%20%3A%3D%20getUserData(session.UserID%2C%20dataType)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Middleware%0A%0AAdd%20cross-cutting%20concerns%20like%20logging%2C%20authentication%2C%20and%20rate%20limiting.%0A%0A%23%23%23%20Logging%20Middleware%0A%0A%60%60%60go%0Atype%20LoggingMiddleware%20struct%20%7B%0A%20%20%20%20logger%20*log.Logger%0A%7D%0A%0Afunc%20NewLoggingMiddleware(logger%20*log.Logger)%20*LoggingMiddleware%20%7B%0A%20%20%20%20return%20%26LoggingMiddleware%7Blogger%3A%20logger%7D%0A%7D%0A%0Afunc%20(m%20*LoggingMiddleware)%20ToolMiddleware(next%20server.ToolHandlerFunc)%20server.ToolHandlerFunc%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20m.logger.Printf(%22Tool%20call%20started%3A%20tool%3D%25s%22%2C%20req.Params.Name)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20duration%20%3A%3D%20time.Since(start)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Tool%20call%20failed%3A%20session%3D%25s%20tool%3D%25s%20duration%3D%25v%20error%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.Name%2C%20duration%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Tool%20call%20completed%3A%20session%3D%25s%20tool%3D%25s%20duration%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.Name%2C%20duration)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*LoggingMiddleware)%20ResourceMiddleware(next%20server.ResourceHandler)%20server.ResourceHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20m.logger.Printf(%22Resource%20read%20started%3A%20session%3D%25s%20uri%3D%25s%22%2C%20sessionID%2C%20req.Params.URI)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20duration%20%3A%3D%20time.Since(start)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Resource%20read%20failed%3A%20session%3D%25s%20uri%3D%25s%20duration%3D%25v%20error%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.URI%2C%20duration%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Resource%20read%20completed%3A%20session%3D%25s%20uri%3D%25s%20duration%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.URI%2C%20duration)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Rate%20Limiting%20Middleware%0A%0A%60%60%60go%0Atype%20RateLimitMiddleware%20struct%20%7B%0A%20%20%20%20limiters%20map%5Bstring%5D*rate.Limiter%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%20%20%20%20rate%20%20%20%20%20rate.Limit%0A%20%20%20%20burst%20%20%20%20int%0A%7D%0A%0Afunc%20NewRateLimitMiddleware(requestsPerSecond%20float64%2C%20burst%20int)%20*RateLimitMiddleware%20%7B%0A%20%20%20%20return%20%26RateLimitMiddleware%7B%0A%20%20%20%20%20%20%20%20limiters%3A%20make(map%5Bstring%5D*rate.Limiter)%2C%0A%20%20%20%20%20%20%20%20rate%3A%20%20%20%20%20rate.Limit(requestsPerSecond)%2C%0A%20%20%20%20%20%20%20%20burst%3A%20%20%20%20burst%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*RateLimitMiddleware)%20getLimiter(sessionID%20string)%20*rate.Limiter%20%7B%0A%20%20%20%20m.mutex.RLock()%0A%20%20%20%20limiter%2C%20exists%20%3A%3D%20m.limiters%5BsessionID%5D%0A%20%20%20%20m.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20m.mutex.Lock()%0A%20%20%20%20%20%20%20%20limiter%20%3D%20rate.NewLimiter(m.rate%2C%20m.burst)%0A%20%20%20%20%20%20%20%20m.limiters%5BsessionID%5D%20%3D%20limiter%0A%20%20%20%20%20%20%20%20m.mutex.Unlock()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20limiter%0A%7D%0A%0Afunc%20(m%20*RateLimitMiddleware)%20ToolMiddleware(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20limiter%20%3A%3D%20m.getLimiter(sessionID)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20!limiter.Allow()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22rate%20limit%20exceeded%20for%20session%20%25s%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Authentication%20Middleware%0A%0A%60%60%60go%0Atype%20AuthMiddleware%20struct%20%7B%0A%20%20%20%20tokenValidator%20TokenValidator%0A%7D%0A%0Afunc%20NewAuthMiddleware(validator%20TokenValidator)%20*AuthMiddleware%20%7B%0A%20%20%20%20return%20%26AuthMiddleware%7BtokenValidator%3A%20validator%7D%0A%7D%0A%0Afunc%20(m%20*AuthMiddleware)%20ToolMiddleware(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Extract%20token%20from%20context%20or%20request%0A%20%20%20%20%20%20%20%20token%20%3A%3D%20extractToken(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20if%20token%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22authentication%20required%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Validate%20token%0A%20%20%20%20%20%20%20%20user%2C%20err%20%3A%3D%20m.tokenValidator.Validate(token)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20token%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20user%20to%20context%0A%20%20%20%20%20%20%20%20ctx%20%3D%20context.WithValue(ctx%2C%20%22user%22%2C%20user)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Hooks%0A%0AImplement%20lifecycle%20callbacks%20for%20telemetry%2C%20logging%2C%20and%20custom%20behavior.%0A%0A%23%23%23%20Comprehensive%20Hooks%0A%0A%60%60%60go%0Atype%20TelemetryHooks%20struct%20%7B%0A%20%20%20%20metrics%20MetricsCollector%0A%20%20%20%20logger%20%20*log.Logger%0A%7D%0A%0Afunc%20NewTelemetryHooks(metrics%20MetricsCollector%2C%20logger%20*log.Logger)%20*TelemetryHooks%20%7B%0A%20%20%20%20return%20%26TelemetryHooks%7B%0A%20%20%20%20%20%20%20%20metrics%3A%20metrics%2C%0A%20%20%20%20%20%20%20%20logger%3A%20%20logger%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnServerStart()%20%7B%0A%20%20%20%20h.logger.Println(%22MCP%20Server%20starting%22)%0A%20%20%20%20h.metrics.Increment(%22server.starts%22)%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnServerStop()%20%7B%0A%20%20%20%20h.logger.Println(%22MCP%20Server%20stopping%22)%0A%20%20%20%20h.metrics.Increment(%22server.stops%22)%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnSessionStart(sessionID%20string)%20%7B%0A%20%20%20%20h.logger.Printf(%22Session%20started%3A%20%25s%22%2C%20sessionID)%0A%20%20%20%20h.metrics.Increment(%22sessions.started%22)%0A%20%20%20%20h.metrics.Gauge(%22sessions.active%22%2C%20h.getActiveSessionCount())%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnSessionEnd(sessionID%20string)%20%7B%0A%20%20%20%20h.logger.Printf(%22Session%20ended%3A%20%25s%22%2C%20sessionID)%0A%20%20%20%20h.metrics.Increment(%22sessions.ended%22)%0A%20%20%20%20h.metrics.Gauge(%22sessions.active%22%2C%20h.getActiveSessionCount())%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnToolCall(sessionID%2C%20toolName%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20h.metrics.Increment(%22tools.calls%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22tool%22%3A%20%20%20%20toolName%2C%0A%20%20%20%20%20%20%20%20%22session%22%3A%20sessionID%2C%0A%20%20%20%20%7D)%0A%20%20%20%20h.metrics.Histogram(%22tools.duration%22%2C%20duration.Seconds()%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22tool%22%3A%20toolName%2C%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20h.metrics.Increment(%22tools.errors%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22tool%22%3A%20toolName%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnResourceRead(sessionID%2C%20uri%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20h.metrics.Increment(%22resources.reads%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22session%22%3A%20sessionID%2C%0A%20%20%20%20%7D)%0A%20%20%20%20h.metrics.Histogram(%22resources.duration%22%2C%20duration.Seconds())%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20h.metrics.Increment(%22resources.errors%22)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Custom%20Business%20Logic%20Hooks%0A%0A%60%60%60go%0Atype%20BusinessHooks%20struct%20%7B%0A%20%20%20%20auditLogger%20AuditLogger%0A%20%20%20%20notifier%20%20%20%20Notifier%0A%7D%0A%0Afunc%20(h%20*BusinessHooks)%20OnToolCall(sessionID%2C%20toolName%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20%2F%2F%20Audit%20sensitive%20operations%0A%20%20%20%20if%20isSensitiveTool(toolName)%20%7B%0A%20%20%20%20%20%20%20%20h.auditLogger.LogToolCall(sessionID%2C%20toolName%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Alert%20on%20errors%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20h.notifier.SendAlert(fmt.Sprintf(%22Tool%20%25s%20failed%20for%20session%20%25s%3A%20%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20toolName%2C%20sessionID%2C%20err))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Monitor%20performance%0A%20%20%20%20if%20duration%20%3E%2030*time.Second%20%7B%0A%20%20%20%20%20%20%20%20h.notifier.SendAlert(fmt.Sprintf(%22Slow%20tool%20execution%3A%20%25s%20took%20%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20toolName%2C%20duration))%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*BusinessHooks)%20OnSessionStart(sessionID%20string)%20%7B%0A%20%20%20%20%2F%2F%20Initialize%20user-specific%20resources%0A%20%20%20%20h.initializeUserResources(sessionID)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Send%20welcome%20notification%0A%20%20%20%20h.notifier.SendWelcome(sessionID)%0A%7D%0A%0Afunc%20(h%20*BusinessHooks)%20OnSessionEnd(sessionID%20string)%20%7B%0A%20%20%20%20%2F%2F%20Cleanup%20user%20resources%0A%20%20%20%20h.cleanupUserResources(sessionID)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Log%20session%20summary%0A%20%20%20%20h.auditLogger.LogSessionEnd(sessionID)%0A%7D%0A%60%60%60%0A%0A%23%23%20Tool%20Filtering%0A%0AConditionally%20expose%20tools%20based%20on%20context%2C%20permissions%2C%20or%20other%20criteria.%0A%0A%23%23%23%20Permission-Based%20Filtering%0A%0A%60%60%60go%0Atype%20PermissionFilter%20struct%20%7B%0A%20%20%20%20sessionManager%20*SessionManager%0A%7D%0A%0Afunc%20NewPermissionFilter(sm%20*SessionManager)%20*PermissionFilter%20%7B%0A%20%20%20%20return%20%26PermissionFilter%7BsessionManager%3A%20sm%7D%0A%7D%0A%0Afunc%20(f%20*PermissionFilter)%20FilterTools(ctx%20context.Context%2C%20tools%20%5B%5Dmcp.Tool)%20%5B%5Dmcp.Tool%20%7B%0A%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20session%2C%20exists%20%3A%3D%20f.sessionManager.GetSession(sessionID)%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%5Dmcp.Tool%7B%7D%20%2F%2F%20No%20tools%20for%20invalid%20sessions%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Tool%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools%20%7B%0A%20%20%20%20%20%20%20%20if%20f.hasPermissionForTool(session%2C%20tool.Name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20tool)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20filtered%0A%7D%0A%0Afunc%20(f%20*PermissionFilter)%20hasPermissionForTool(session%20*SessionState%2C%20toolName%20string)%20bool%20%7B%0A%20%20%20%20requiredPermissions%20%3A%3D%20map%5Bstring%5D%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22delete_user%22%3A%20%20%20%20%7B%22admin%22%7D%2C%0A%20%20%20%20%20%20%20%20%22modify_system%22%3A%20%20%7B%22admin%22%2C%20%22operator%22%7D%2C%0A%20%20%20%20%20%20%20%20%22read_data%22%3A%20%20%20%20%20%20%7B%22admin%22%2C%20%22operator%22%2C%20%22user%22%7D%2C%0A%20%20%20%20%20%20%20%20%22create_report%22%3A%20%20%7B%22admin%22%2C%20%22operator%22%2C%20%22user%22%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20required%2C%20exists%20%3A%3D%20requiredPermissions%5BtoolName%5D%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20true%20%2F%2F%20Allow%20tools%20without%20specific%20requirements%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20permission%20%3A%3D%20range%20session.Permissions%20%7B%0A%20%20%20%20%20%20%20%20for%20_%2C%20req%20%3A%3D%20range%20required%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20permission%20%3D%3D%20req%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20false%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Context-Based%20Filtering%0A%0A%60%60%60go%0Atype%20ContextFilter%20struct%7B%7D%0A%0Afunc%20(f%20*ContextFilter)%20FilterTools(ctx%20context.Context%2C%20tools%20%5B%5Dmcp.Tool)%20%5B%5Dmcp.Tool%20%7B%0A%20%20%20%20timeOfDay%20%3A%3D%20time.Now().Hour()%0A%20%20%20%20environment%20%3A%3D%20os.Getenv(%22ENVIRONMENT%22)%0A%20%20%20%20%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Tool%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools%20%7B%0A%20%20%20%20%20%20%20%20if%20f.shouldIncludeTool(tool%2C%20timeOfDay%2C%20environment)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20tool)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20filtered%0A%7D%0A%0Afunc%20(f%20*ContextFilter)%20shouldIncludeTool(tool%20mcp.Tool%2C%20hour%20int%2C%20env%20string)%20bool%20%7B%0A%20%20%20%20%2F%2F%20Maintenance%20tools%20only%20during%20off-hours%0A%20%20%20%20maintenanceTools%20%3A%3D%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22backup_database%22%3A%20%20true%2C%0A%20%20%20%20%20%20%20%20%22cleanup_logs%22%3A%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20%22restart_service%22%3A%20%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20maintenanceTools%5Btool.Name%5D%20%7B%0A%20%20%20%20%20%20%20%20return%20hour%20%3C%206%20%7C%7C%20hour%20%3E%2022%20%2F%2F%20Only%20between%2010%20PM%20and%206%20AM%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Debug%20tools%20only%20in%20development%0A%20%20%20%20debugTools%20%3A%3D%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22debug_session%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%22dump_state%22%3A%20%20%20%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20debugTools%5Btool.Name%5D%20%7B%0A%20%20%20%20%20%20%20%20return%20env%20%3D%3D%20%22development%22%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20true%0A%7D%0A%60%60%60%0A%0A%23%23%20Notifications%0A%0ASend%20server-to-client%20messages%20for%20real-time%20updates.%0A%0A%23%23%23%20Custom%20Notifications%0A%0A%60%60%60go%0Afunc%20handleLongRunningTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20srv%20%3A%3D%20server.ServerFromContext(ctx)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Simulate%20long-running%20work%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20100%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Send%20custom%20notification%20to%20all%20clients%0A%20%20%20%20%20%20%20%20notification%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22type%22%3A%20%20%20%20%20%22progress%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22progress%22%3A%20i%20%2B%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22total%22%3A%20%20%20%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20fmt.Sprintf(%22Processing%20step%20%25d%2F100%22%2C%20i%2B1)%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20srv.SendNotificationToAllClients(%22progress%22%2C%20notification)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(%22Long%20operation%20completed%20successfully%22)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Custom%20Notifications%0A%0A%60%60%60go%0Atype%20CustomNotifier%20struct%20%7B%0A%20%20%20%20sessions%20map%5Bstring%5Dchan%20mcp.Notification%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewCustomNotifier()%20*CustomNotifier%20%7B%0A%20%20%20%20return%20%26CustomNotifier%7B%0A%20%20%20%20%20%20%20%20sessions%3A%20make(map%5Bstring%5Dchan%20mcp.Notification)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20RegisterSession(sessionID%20string)%20%7B%0A%20%20%20%20n.mutex.Lock()%0A%20%20%20%20defer%20n.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20n.sessions%5BsessionID%5D%20%3D%20make(chan%20mcp.Notification%2C%20100)%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20UnregisterSession(sessionID%20string)%20%7B%0A%20%20%20%20n.mutex.Lock()%0A%20%20%20%20defer%20n.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20if%20ch%2C%20exists%20%3A%3D%20n.sessions%5BsessionID%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20close(ch)%0A%20%20%20%20%20%20%20%20delete(n.sessions%2C%20sessionID)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20SendAlert(sessionID%2C%20message%20string%2C%20severity%20string)%20%7B%0A%20%20%20%20n.mutex.RLock()%0A%20%20%20%20defer%20n.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20ch%2C%20exists%20%3A%3D%20n.sessions%5BsessionID%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20ch%20%3C-%20mcp.Notification%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22alert%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Data%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20message%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22severity%22%3A%20severity%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Channel%20full%2C%20drop%20notification%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20BroadcastSystemMessage(message%20string)%20%7B%0A%20%20%20%20n.mutex.RLock()%0A%20%20%20%20defer%20n.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20notification%20%3A%3D%20mcp.Notification%7B%0A%20%20%20%20%20%20%20%20Type%3A%20%22system_message%22%2C%0A%20%20%20%20%20%20%20%20Data%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20%20message%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20ch%20%3A%3D%20range%20n.sessions%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20ch%20%3C-%20notification%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Channel%20full%2C%20skip%20this%20session%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Production%20Configuration%0A%0A%23%23%23%20Complete%20Production%20Server%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Initialize%20components%0A%20%20%20%20logger%20%3A%3D%20log.New(os.Stdout%2C%20%22%5BMCP%5D%20%22%2C%20log.LstdFlags)%0A%20%20%20%20metrics%20%3A%3D%20NewPrometheusMetrics()%0A%20%20%20%20sessionManager%20%3A%3D%20NewSessionManager()%0A%20%20%20%20notifier%20%3A%3D%20NewCustomNotifier()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20middleware%0A%20%20%20%20loggingMW%20%3A%3D%20NewLoggingMiddleware(logger)%0A%20%20%20%20rateLimitMW%20%3A%3D%20NewRateLimitMiddleware(10.0%2C%2020)%20%2F%2F%2010%20req%2Fsec%2C%20burst%2020%0A%20%20%20%20authMW%20%3A%3D%20NewAuthMiddleware(NewJWTValidator())%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20hooks%0A%20%20%20%20telemetryHooks%20%3A%3D%20NewTelemetryHooks(metrics%2C%20logger)%0A%20%20%20%20businessHooks%20%3A%3D%20NewBusinessHooks(NewAuditLogger()%2C%20NewSlackNotifier())%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20server%20with%20all%20features%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Production%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(false%2C%20true)%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(telemetryHooks)%2C%0A%20%20%20%20%20%20%20%20server.WithToolHandlerMiddleware(loggingMW.ToolMiddleware)%2C%0A%20%20%20%20%20%20%20%20server.WithToolFilter(NewPermissionFilter(sessionManager))%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20tools%20and%20resources%0A%20%20%20%20addProductionTools(s)%0A%20%20%20%20addProductionResources(s)%0A%20%20%20%20addProductionPrompts(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20server%20with%20graceful%20shutdown%0A%20%20%20%20startWithGracefulShutdown(s)%0A%7D%0A%0Afunc%20startWithGracefulShutdown(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Setup%20signal%20handling%0A%20%20%20%20sigChan%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(sigChan%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20server%20in%20goroutine%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20shutdown%20signal%0A%20%20%20%20%3C-sigChan%0A%20%20%20%20log.Println(%22Shutting%20down%20server...%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Graceful%20shutdown%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20if%20err%20%3A%3D%20s.Shutdown(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Shutdown%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20log.Println(%22Server%20stopped%22)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Learn%20to%20build%20MCP%20clients%0A-%20**%5BServer%20Basics%5D(%2Fservers%2Fbasics)**%20-%20Review%20fundamental%20concepts",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./advanced-BW2-SJaq.js"),[]),path:"/servers/advanced.html",type:"mdx",filePath:"servers/advanced.mdx",content:"%23%20Advanced%20Server%20Features%0A%0AExplore%20powerful%20features%20that%20make%20MCP-Go%20servers%20production-ready%3A%20typed%20tools%2C%20session%20management%2C%20middleware%2C%20hooks%2C%20and%20more.%0A%0A%23%23%20Typed%20Tools%0A%0ATyped%20tools%20provide%20compile-time%20type%20safety%20and%20automatic%20parameter%20validation%2C%20reducing%20boilerplate%20and%20preventing%20runtime%20errors.%0A%0A%23%23%23%20Basic%20Typed%20Tool%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0A%2F%2F%20Define%20input%20and%20output%20types%0Atype%20CalculateInput%20struct%20%7B%0A%20%20%20%20Operation%20string%20%20%60json%3A%22operation%22%20validate%3A%22required%2Coneof%3Dadd%20subtract%20multiply%20divide%22%60%0A%20%20%20%20X%20%20%20%20%20%20%20%20%20float64%20%60json%3A%22x%22%20validate%3A%22required%22%60%0A%20%20%20%20Y%20%20%20%20%20%20%20%20%20float64%20%60json%3A%22y%22%20validate%3A%22required%22%60%0A%7D%0A%0Atype%20CalculateOutput%20struct%20%7B%0A%20%20%20%20Result%20%20%20%20float64%20%60json%3A%22result%22%60%0A%20%20%20%20Operation%20string%20%20%60json%3A%22operation%22%60%0A%7D%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Typed%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20typed%20tool%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Perform%20arithmetic%20operations%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22operation%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required())%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20tool%20with%20typed%20handler%0A%20%20%20%20s.AddTool(tool%2C%20mcp.NewTypedToolHandler(handleCalculateTyped))%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleCalculateTyped(ctx%20context.Context%2C%20req%20mcp.CallToolRequest%2C%20input%20CalculateInput)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20var%20result%20float64%0A%20%20%20%20%0A%20%20%20%20switch%20input.Operation%20%7B%0A%20%20%20%20case%20%22add%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20%2B%20input.Y%0A%20%20%20%20case%20%22subtract%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20-%20input.Y%0A%20%20%20%20case%20%22multiply%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20*%20input.Y%0A%20%20%20%20case%20%22divide%22%3A%0A%20%20%20%20%20%20%20%20if%20input.Y%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22division%20by%20zero%22)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20%2F%20input.Y%0A%20%20%20%20%7D%0A%0A%20%20%20%20output%20%3A%3D%20CalculateOutput%7B%0A%20%20%20%20%20%20%20%20Result%3A%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20Operation%3A%20input.Operation%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(output)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Complex%20Typed%20Tool%0A%0A%60%60%60go%0Atype%20UserCreateInput%20struct%20%7B%0A%20%20%20%20Name%20%20%20%20%20string%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22name%22%20validate%3A%22required%2Cmin%3D1%2Cmax%3D100%22%60%0A%20%20%20%20Email%20%20%20%20string%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22email%22%20validate%3A%22required%2Cemail%22%60%0A%20%20%20%20Age%20%20%20%20%20%20int%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22age%22%20validate%3A%22min%3D0%2Cmax%3D150%22%60%0A%20%20%20%20Tags%20%20%20%20%20%5B%5Dstring%20%20%20%20%20%20%20%20%20%20%60json%3A%22tags%22%20validate%3A%22dive%2Cmin%3D1%22%60%0A%20%20%20%20Metadata%20map%5Bstring%5Dstring%20%60json%3A%22metadata%22%60%0A%20%20%20%20Active%20%20%20bool%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22active%22%60%0A%7D%0A%0Atype%20UserCreateOutput%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20%20string%20%20%20%20%60json%3A%22id%22%60%0A%20%20%20%20Name%20%20%20%20%20%20string%20%20%20%20%60json%3A%22name%22%60%0A%20%20%20%20Email%20%20%20%20%20string%20%20%20%20%60json%3A%22email%22%60%0A%20%20%20%20CreatedAt%20time.Time%20%60json%3A%22created_at%22%60%0A%20%20%20%20Status%20%20%20%20string%20%20%20%20%60json%3A%22status%22%60%0A%7D%0A%0Afunc%20handleCreateUser(ctx%20context.Context%2C%20req%20mcp.CallToolRequest%2C%20input%20UserCreateInput)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Validation%20is%20automatic%20based%20on%20struct%20tags%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20user%20in%20database%0A%20%20%20%20user%20%3A%3D%20%26User%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20generateID()%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20input.Name%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%20%20%20%20input.Email%2C%0A%20%20%20%20%20%20%20%20Age%3A%20%20%20%20%20%20%20input.Age%2C%0A%20%20%20%20%20%20%20%20Tags%3A%20%20%20%20%20%20input.Tags%2C%0A%20%20%20%20%20%20%20%20Metadata%3A%20%20input.Metadata%2C%0A%20%20%20%20%20%20%20%20Active%3A%20%20%20%20input.Active%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20db.Create(user)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20user%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20output%20%3A%3D%20%26UserCreateOutput%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20user.ID%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20user.Name%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%20%20%20%20user.Email%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20user.CreatedAt%2C%0A%20%20%20%20%20%20%20%20Status%3A%20%20%20%20%22created%22%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(output)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Custom%20Validation%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22path%2Ffilepath%22%0A%20%20%20%20%22strings%22%0A%0A%20%20%20%20%22github.com%2Fgo-playground%2Fvalidator%2Fv10%22%0A)%0A%0Atype%20FileOperationInput%20struct%20%7B%0A%20%20%20%20Path%20%20%20%20%20%20string%20%60json%3A%22path%22%20validate%3A%22required%2Cfilepath%22%60%0A%20%20%20%20Operation%20string%20%60json%3A%22operation%22%20validate%3A%22required%2Coneof%3Dread%20write%20delete%22%60%0A%20%20%20%20Content%20%20%20string%20%60json%3A%22content%22%20validate%3A%22required_if%3DOperation%20write%22%60%0A%7D%0A%0A%2F%2F%20Custom%20validator%0Afunc%20init()%20%7B%0A%20%20%20%20validate%20%3A%3D%20validator.New()%0A%20%20%20%20validate.RegisterValidation(%22filepath%22%2C%20validateFilePath)%0A%7D%0A%0Afunc%20validateFilePath(fl%20validator.FieldLevel)%20bool%20%7B%0A%20%20%20%20path%20%3A%3D%20fl.Field().String()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Prevent%20directory%20traversal%0A%20%20%20%20if%20strings.Contains(path%2C%20%22..%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Ensure%20path%20is%20within%20allowed%20directory%0A%20%20%20%20allowedDir%20%3A%3D%20%22%2Fapp%2Fdata%22%0A%20%20%20%20absPath%2C%20err%20%3A%3D%20filepath.Abs(path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20strings.HasPrefix(absPath%2C%20allowedDir)%0A%7D%0A%60%60%60%0A%0A%23%23%20Session%20Management%0A%0AHandle%20multiple%20clients%20with%20per-session%20state%20and%20tools.%0A%0A%23%23%23%20Per-Session%20State%0A%0A%60%60%60go%0Atype%20SessionState%20struct%20%7B%0A%20%20%20%20UserID%20%20%20%20%20%20string%0A%20%20%20%20Permissions%20%5B%5Dstring%0A%20%20%20%20Settings%20%20%20%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20StartTime%20%20%20time.Time%0A%7D%0A%0Atype%20SessionManager%20struct%20%7B%0A%20%20%20%20sessions%20map%5Bstring%5D*SessionState%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewSessionManager()%20*SessionManager%20%7B%0A%20%20%20%20return%20%26SessionManager%7B%0A%20%20%20%20%20%20%20%20sessions%3A%20make(map%5Bstring%5D*SessionState)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20CreateSession(sessionID%2C%20userID%20string%2C%20permissions%20%5B%5Dstring)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20sm.sessions%5BsessionID%5D%20%3D%20%26SessionState%7B%0A%20%20%20%20%20%20%20%20UserID%3A%20%20%20%20%20%20userID%2C%0A%20%20%20%20%20%20%20%20Permissions%3A%20permissions%2C%0A%20%20%20%20%20%20%20%20Settings%3A%20%20%20%20make(map%5Bstring%5Dinterface%7B%7D)%2C%0A%20%20%20%20%20%20%20%20StartTime%3A%20%20%20time.Now()%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20GetSession(sessionID%20string)%20(*SessionState%2C%20bool)%20%7B%0A%20%20%20%20sm.mutex.RLock()%0A%20%20%20%20defer%20sm.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20session%2C%20exists%20%3A%3D%20sm.sessions%5BsessionID%5D%0A%20%20%20%20return%20session%2C%20exists%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20RemoveSession(sessionID%20string)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20delete(sm.sessions%2C%20sessionID)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Session-Aware%20Tools%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20sessionManager%20%3A%3D%20NewSessionManager()%0A%20%20%20%20%0A%20%20%20%20hooks%20%3A%3D%20%26server.Hooks%7B%7D%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnRegisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Initialize%20session%20with%20default%20permissions%0A%20%20%20%20%20%20%20%20sessionManager.CreateSession(session.ID()%2C%20%22anonymous%22%2C%20%5B%5Dstring%7B%22read%22%7D)%0A%20%20%20%20%20%20%20%20log.Printf(%22Session%20%25s%20started%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnUnregisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20sessionManager.RemoveSession(session.ID())%0A%20%20%20%20%20%20%20%20log.Printf(%22Session%20%25s%20ended%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Session%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(hooks)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20session-aware%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_user_data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20user-specific%20data%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22data_type%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20createSessionAwareTool(sessionManager)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20createSessionAwareTool(sm%20*SessionManager)%20server.ToolHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20session%2C%20exists%20%3A%3D%20sm.GetSession(sessionID)%0A%20%20%20%20%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20session%22)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20dataType%20%3A%3D%20req.Params.Arguments%5B%22data_type%22%5D.(string)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20permissions%0A%20%20%20%20%20%20%20%20if%20!hasPermission(session.Permissions%2C%20%22read%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22insufficient%20permissions%22)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Get%20user-specific%20data%0A%20%20%20%20%20%20%20%20data%2C%20err%20%3A%3D%20getUserData(session.UserID%2C%20dataType)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Middleware%0A%0AAdd%20cross-cutting%20concerns%20like%20logging%2C%20authentication%2C%20and%20rate%20limiting.%0A%0A%23%23%23%20Logging%20Middleware%0A%0A%60%60%60go%0Atype%20LoggingMiddleware%20struct%20%7B%0A%20%20%20%20logger%20*log.Logger%0A%7D%0A%0Afunc%20NewLoggingMiddleware(logger%20*log.Logger)%20*LoggingMiddleware%20%7B%0A%20%20%20%20return%20%26LoggingMiddleware%7Blogger%3A%20logger%7D%0A%7D%0A%0Afunc%20(m%20*LoggingMiddleware)%20ToolMiddleware(next%20server.ToolHandlerFunc)%20server.ToolHandlerFunc%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20m.logger.Printf(%22Tool%20call%20started%3A%20tool%3D%25s%22%2C%20req.Params.Name)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20duration%20%3A%3D%20time.Since(start)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Tool%20call%20failed%3A%20session%3D%25s%20tool%3D%25s%20duration%3D%25v%20error%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.Name%2C%20duration%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Tool%20call%20completed%3A%20session%3D%25s%20tool%3D%25s%20duration%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.Name%2C%20duration)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*LoggingMiddleware)%20ResourceMiddleware(next%20server.ResourceHandler)%20server.ResourceHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20m.logger.Printf(%22Resource%20read%20started%3A%20session%3D%25s%20uri%3D%25s%22%2C%20sessionID%2C%20req.Params.URI)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20duration%20%3A%3D%20time.Since(start)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Resource%20read%20failed%3A%20session%3D%25s%20uri%3D%25s%20duration%3D%25v%20error%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.URI%2C%20duration%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Resource%20read%20completed%3A%20session%3D%25s%20uri%3D%25s%20duration%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.URI%2C%20duration)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Rate%20Limiting%20Middleware%0A%0A%60%60%60go%0Atype%20RateLimitMiddleware%20struct%20%7B%0A%20%20%20%20limiters%20map%5Bstring%5D*rate.Limiter%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%20%20%20%20rate%20%20%20%20%20rate.Limit%0A%20%20%20%20burst%20%20%20%20int%0A%7D%0A%0Afunc%20NewRateLimitMiddleware(requestsPerSecond%20float64%2C%20burst%20int)%20*RateLimitMiddleware%20%7B%0A%20%20%20%20return%20%26RateLimitMiddleware%7B%0A%20%20%20%20%20%20%20%20limiters%3A%20make(map%5Bstring%5D*rate.Limiter)%2C%0A%20%20%20%20%20%20%20%20rate%3A%20%20%20%20%20rate.Limit(requestsPerSecond)%2C%0A%20%20%20%20%20%20%20%20burst%3A%20%20%20%20burst%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*RateLimitMiddleware)%20getLimiter(sessionID%20string)%20*rate.Limiter%20%7B%0A%20%20%20%20m.mutex.RLock()%0A%20%20%20%20limiter%2C%20exists%20%3A%3D%20m.limiters%5BsessionID%5D%0A%20%20%20%20m.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20m.mutex.Lock()%0A%20%20%20%20%20%20%20%20limiter%20%3D%20rate.NewLimiter(m.rate%2C%20m.burst)%0A%20%20%20%20%20%20%20%20m.limiters%5BsessionID%5D%20%3D%20limiter%0A%20%20%20%20%20%20%20%20m.mutex.Unlock()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20limiter%0A%7D%0A%0Afunc%20(m%20*RateLimitMiddleware)%20ToolMiddleware(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20limiter%20%3A%3D%20m.getLimiter(sessionID)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20!limiter.Allow()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22rate%20limit%20exceeded%20for%20session%20%25s%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Authentication%20Middleware%0A%0A%60%60%60go%0Atype%20AuthMiddleware%20struct%20%7B%0A%20%20%20%20tokenValidator%20TokenValidator%0A%7D%0A%0Afunc%20NewAuthMiddleware(validator%20TokenValidator)%20*AuthMiddleware%20%7B%0A%20%20%20%20return%20%26AuthMiddleware%7BtokenValidator%3A%20validator%7D%0A%7D%0A%0Afunc%20(m%20*AuthMiddleware)%20ToolMiddleware(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Extract%20token%20from%20context%20or%20request%0A%20%20%20%20%20%20%20%20token%20%3A%3D%20extractToken(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20if%20token%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22authentication%20required%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Validate%20token%0A%20%20%20%20%20%20%20%20user%2C%20err%20%3A%3D%20m.tokenValidator.Validate(token)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20token%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20user%20to%20context%0A%20%20%20%20%20%20%20%20ctx%20%3D%20context.WithValue(ctx%2C%20%22user%22%2C%20user)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Hooks%0A%0AImplement%20lifecycle%20callbacks%20for%20telemetry%2C%20logging%2C%20and%20custom%20behavior.%0A%0A%23%23%23%20Comprehensive%20Hooks%0A%0A%60%60%60go%0Atype%20TelemetryHooks%20struct%20%7B%0A%20%20%20%20metrics%20MetricsCollector%0A%20%20%20%20logger%20%20*log.Logger%0A%7D%0A%0Afunc%20NewTelemetryHooks(metrics%20MetricsCollector%2C%20logger%20*log.Logger)%20*TelemetryHooks%20%7B%0A%20%20%20%20return%20%26TelemetryHooks%7B%0A%20%20%20%20%20%20%20%20metrics%3A%20metrics%2C%0A%20%20%20%20%20%20%20%20logger%3A%20%20logger%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnServerStart()%20%7B%0A%20%20%20%20h.logger.Println(%22MCP%20Server%20starting%22)%0A%20%20%20%20h.metrics.Increment(%22server.starts%22)%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnServerStop()%20%7B%0A%20%20%20%20h.logger.Println(%22MCP%20Server%20stopping%22)%0A%20%20%20%20h.metrics.Increment(%22server.stops%22)%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnSessionStart(sessionID%20string)%20%7B%0A%20%20%20%20h.logger.Printf(%22Session%20started%3A%20%25s%22%2C%20sessionID)%0A%20%20%20%20h.metrics.Increment(%22sessions.started%22)%0A%20%20%20%20h.metrics.Gauge(%22sessions.active%22%2C%20h.getActiveSessionCount())%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnSessionEnd(sessionID%20string)%20%7B%0A%20%20%20%20h.logger.Printf(%22Session%20ended%3A%20%25s%22%2C%20sessionID)%0A%20%20%20%20h.metrics.Increment(%22sessions.ended%22)%0A%20%20%20%20h.metrics.Gauge(%22sessions.active%22%2C%20h.getActiveSessionCount())%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnToolCall(sessionID%2C%20toolName%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20h.metrics.Increment(%22tools.calls%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22tool%22%3A%20%20%20%20toolName%2C%0A%20%20%20%20%20%20%20%20%22session%22%3A%20sessionID%2C%0A%20%20%20%20%7D)%0A%20%20%20%20h.metrics.Histogram(%22tools.duration%22%2C%20duration.Seconds()%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22tool%22%3A%20toolName%2C%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20h.metrics.Increment(%22tools.errors%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22tool%22%3A%20toolName%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnResourceRead(sessionID%2C%20uri%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20h.metrics.Increment(%22resources.reads%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22session%22%3A%20sessionID%2C%0A%20%20%20%20%7D)%0A%20%20%20%20h.metrics.Histogram(%22resources.duration%22%2C%20duration.Seconds())%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20h.metrics.Increment(%22resources.errors%22)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Custom%20Business%20Logic%20Hooks%0A%0A%60%60%60go%0Atype%20BusinessHooks%20struct%20%7B%0A%20%20%20%20auditLogger%20AuditLogger%0A%20%20%20%20notifier%20%20%20%20Notifier%0A%7D%0A%0Afunc%20(h%20*BusinessHooks)%20OnToolCall(sessionID%2C%20toolName%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20%2F%2F%20Audit%20sensitive%20operations%0A%20%20%20%20if%20isSensitiveTool(toolName)%20%7B%0A%20%20%20%20%20%20%20%20h.auditLogger.LogToolCall(sessionID%2C%20toolName%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Alert%20on%20errors%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20h.notifier.SendAlert(fmt.Sprintf(%22Tool%20%25s%20failed%20for%20session%20%25s%3A%20%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20toolName%2C%20sessionID%2C%20err))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Monitor%20performance%0A%20%20%20%20if%20duration%20%3E%2030*time.Second%20%7B%0A%20%20%20%20%20%20%20%20h.notifier.SendAlert(fmt.Sprintf(%22Slow%20tool%20execution%3A%20%25s%20took%20%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20toolName%2C%20duration))%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*BusinessHooks)%20OnSessionStart(sessionID%20string)%20%7B%0A%20%20%20%20%2F%2F%20Initialize%20user-specific%20resources%0A%20%20%20%20h.initializeUserResources(sessionID)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Send%20welcome%20notification%0A%20%20%20%20h.notifier.SendWelcome(sessionID)%0A%7D%0A%0Afunc%20(h%20*BusinessHooks)%20OnSessionEnd(sessionID%20string)%20%7B%0A%20%20%20%20%2F%2F%20Cleanup%20user%20resources%0A%20%20%20%20h.cleanupUserResources(sessionID)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Log%20session%20summary%0A%20%20%20%20h.auditLogger.LogSessionEnd(sessionID)%0A%7D%0A%60%60%60%0A%0A%23%23%20Tool%20Filtering%0A%0AConditionally%20expose%20tools%20based%20on%20context%2C%20permissions%2C%20or%20other%20criteria.%0A%0A%23%23%23%20Permission-Based%20Filtering%0A%0A%60%60%60go%0Atype%20PermissionFilter%20struct%20%7B%0A%20%20%20%20sessionManager%20*SessionManager%0A%7D%0A%0Afunc%20NewPermissionFilter(sm%20*SessionManager)%20*PermissionFilter%20%7B%0A%20%20%20%20return%20%26PermissionFilter%7BsessionManager%3A%20sm%7D%0A%7D%0A%0Afunc%20(f%20*PermissionFilter)%20FilterTools(ctx%20context.Context%2C%20tools%20%5B%5Dmcp.Tool)%20%5B%5Dmcp.Tool%20%7B%0A%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20session%2C%20exists%20%3A%3D%20f.sessionManager.GetSession(sessionID)%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%5Dmcp.Tool%7B%7D%20%2F%2F%20No%20tools%20for%20invalid%20sessions%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Tool%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools%20%7B%0A%20%20%20%20%20%20%20%20if%20f.hasPermissionForTool(session%2C%20tool.Name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20tool)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20filtered%0A%7D%0A%0Afunc%20(f%20*PermissionFilter)%20hasPermissionForTool(session%20*SessionState%2C%20toolName%20string)%20bool%20%7B%0A%20%20%20%20requiredPermissions%20%3A%3D%20map%5Bstring%5D%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22delete_user%22%3A%20%20%20%20%7B%22admin%22%7D%2C%0A%20%20%20%20%20%20%20%20%22modify_system%22%3A%20%20%7B%22admin%22%2C%20%22operator%22%7D%2C%0A%20%20%20%20%20%20%20%20%22read_data%22%3A%20%20%20%20%20%20%7B%22admin%22%2C%20%22operator%22%2C%20%22user%22%7D%2C%0A%20%20%20%20%20%20%20%20%22create_report%22%3A%20%20%7B%22admin%22%2C%20%22operator%22%2C%20%22user%22%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20required%2C%20exists%20%3A%3D%20requiredPermissions%5BtoolName%5D%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20true%20%2F%2F%20Allow%20tools%20without%20specific%20requirements%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20permission%20%3A%3D%20range%20session.Permissions%20%7B%0A%20%20%20%20%20%20%20%20for%20_%2C%20req%20%3A%3D%20range%20required%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20permission%20%3D%3D%20req%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20false%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Context-Based%20Filtering%0A%0A%60%60%60go%0Atype%20ContextFilter%20struct%7B%7D%0A%0Afunc%20(f%20*ContextFilter)%20FilterTools(ctx%20context.Context%2C%20tools%20%5B%5Dmcp.Tool)%20%5B%5Dmcp.Tool%20%7B%0A%20%20%20%20timeOfDay%20%3A%3D%20time.Now().Hour()%0A%20%20%20%20environment%20%3A%3D%20os.Getenv(%22ENVIRONMENT%22)%0A%20%20%20%20%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Tool%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools%20%7B%0A%20%20%20%20%20%20%20%20if%20f.shouldIncludeTool(tool%2C%20timeOfDay%2C%20environment)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20tool)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20filtered%0A%7D%0A%0Afunc%20(f%20*ContextFilter)%20shouldIncludeTool(tool%20mcp.Tool%2C%20hour%20int%2C%20env%20string)%20bool%20%7B%0A%20%20%20%20%2F%2F%20Maintenance%20tools%20only%20during%20off-hours%0A%20%20%20%20maintenanceTools%20%3A%3D%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22backup_database%22%3A%20%20true%2C%0A%20%20%20%20%20%20%20%20%22cleanup_logs%22%3A%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20%22restart_service%22%3A%20%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20maintenanceTools%5Btool.Name%5D%20%7B%0A%20%20%20%20%20%20%20%20return%20hour%20%3C%206%20%7C%7C%20hour%20%3E%2022%20%2F%2F%20Only%20between%2010%20PM%20and%206%20AM%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Debug%20tools%20only%20in%20development%0A%20%20%20%20debugTools%20%3A%3D%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22debug_session%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%22dump_state%22%3A%20%20%20%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20debugTools%5Btool.Name%5D%20%7B%0A%20%20%20%20%20%20%20%20return%20env%20%3D%3D%20%22development%22%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20true%0A%7D%0A%60%60%60%0A%0A%23%23%20Notifications%0A%0ASend%20server-to-client%20messages%20for%20real-time%20updates.%0A%0A%23%23%23%20Custom%20Notifications%0A%0A%60%60%60go%0Afunc%20handleLongRunningTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20srv%20%3A%3D%20server.ServerFromContext(ctx)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Simulate%20long-running%20work%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20100%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Send%20custom%20notification%20to%20all%20clients%0A%20%20%20%20%20%20%20%20notification%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22type%22%3A%20%20%20%20%20%22progress%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22progress%22%3A%20i%20%2B%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22total%22%3A%20%20%20%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20fmt.Sprintf(%22Processing%20step%20%25d%2F100%22%2C%20i%2B1)%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20srv.SendNotificationToAllClients(%22progress%22%2C%20notification)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(%22Long%20operation%20completed%20successfully%22)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Custom%20Notifications%0A%0A%60%60%60go%0Atype%20CustomNotifier%20struct%20%7B%0A%20%20%20%20sessions%20map%5Bstring%5Dchan%20mcp.Notification%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewCustomNotifier()%20*CustomNotifier%20%7B%0A%20%20%20%20return%20%26CustomNotifier%7B%0A%20%20%20%20%20%20%20%20sessions%3A%20make(map%5Bstring%5Dchan%20mcp.Notification)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20RegisterSession(sessionID%20string)%20%7B%0A%20%20%20%20n.mutex.Lock()%0A%20%20%20%20defer%20n.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20n.sessions%5BsessionID%5D%20%3D%20make(chan%20mcp.Notification%2C%20100)%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20UnregisterSession(sessionID%20string)%20%7B%0A%20%20%20%20n.mutex.Lock()%0A%20%20%20%20defer%20n.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20if%20ch%2C%20exists%20%3A%3D%20n.sessions%5BsessionID%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20close(ch)%0A%20%20%20%20%20%20%20%20delete(n.sessions%2C%20sessionID)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20SendAlert(sessionID%2C%20message%20string%2C%20severity%20string)%20%7B%0A%20%20%20%20n.mutex.RLock()%0A%20%20%20%20defer%20n.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20ch%2C%20exists%20%3A%3D%20n.sessions%5BsessionID%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20ch%20%3C-%20mcp.Notification%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22alert%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Data%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20message%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22severity%22%3A%20severity%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Channel%20full%2C%20drop%20notification%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20BroadcastSystemMessage(message%20string)%20%7B%0A%20%20%20%20n.mutex.RLock()%0A%20%20%20%20defer%20n.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20notification%20%3A%3D%20mcp.Notification%7B%0A%20%20%20%20%20%20%20%20Type%3A%20%22system_message%22%2C%0A%20%20%20%20%20%20%20%20Data%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20%20message%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20ch%20%3A%3D%20range%20n.sessions%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20ch%20%3C-%20notification%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Channel%20full%2C%20skip%20this%20session%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Production%20Configuration%0A%0A%23%23%23%20Complete%20Production%20Server%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Initialize%20components%0A%20%20%20%20logger%20%3A%3D%20log.New(os.Stdout%2C%20%22%5BMCP%5D%20%22%2C%20log.LstdFlags)%0A%20%20%20%20metrics%20%3A%3D%20NewPrometheusMetrics()%0A%20%20%20%20sessionManager%20%3A%3D%20NewSessionManager()%0A%20%20%20%20notifier%20%3A%3D%20NewCustomNotifier()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20middleware%0A%20%20%20%20loggingMW%20%3A%3D%20NewLoggingMiddleware(logger)%0A%20%20%20%20rateLimitMW%20%3A%3D%20NewRateLimitMiddleware(10.0%2C%2020)%20%2F%2F%2010%20req%2Fsec%2C%20burst%2020%0A%20%20%20%20authMW%20%3A%3D%20NewAuthMiddleware(NewJWTValidator())%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20hooks%0A%20%20%20%20telemetryHooks%20%3A%3D%20NewTelemetryHooks(metrics%2C%20logger)%0A%20%20%20%20businessHooks%20%3A%3D%20NewBusinessHooks(NewAuditLogger()%2C%20NewSlackNotifier())%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20server%20with%20all%20features%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Production%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(false%2C%20true)%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(telemetryHooks)%2C%0A%20%20%20%20%20%20%20%20server.WithToolHandlerMiddleware(loggingMW.ToolMiddleware)%2C%0A%20%20%20%20%20%20%20%20server.WithToolFilter(NewPermissionFilter(sessionManager))%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20tools%20and%20resources%0A%20%20%20%20addProductionTools(s)%0A%20%20%20%20addProductionResources(s)%0A%20%20%20%20addProductionPrompts(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20server%20with%20graceful%20shutdown%0A%20%20%20%20startWithGracefulShutdown(s)%0A%7D%0A%0Afunc%20startWithGracefulShutdown(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Setup%20signal%20handling%0A%20%20%20%20sigChan%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(sigChan%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20server%20in%20goroutine%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20shutdown%20signal%0A%20%20%20%20%3C-sigChan%0A%20%20%20%20log.Println(%22Shutting%20down%20server...%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Graceful%20shutdown%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20if%20err%20%3A%3D%20s.Shutdown(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Shutdown%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20log.Println(%22Server%20stopped%22)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Learn%20to%20build%20MCP%20clients%0A-%20**%5BServer%20Basics%5D(%2Fservers%2Fbasics)**%20-%20Review%20fundamental%20concepts",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./basics-DokM9Kn8.js"),[]),path:"/servers/basics",type:"mdx",filePath:"servers/basics.mdx",content:"%23%20Server%20Basics%0A%0ALearn%20how%20to%20create%2C%20configure%2C%20and%20start%20MCP%20servers%20with%20different%20transport%20options.%0A%0A%23%23%20Creating%20a%20Server%0A%0AThe%20foundation%20of%20any%20MCP%20server%20is%20the%20%60NewMCPServer()%60%20function.%20This%20creates%20a%20server%20instance%20with%20basic%20metadata%20and%20optional%20configuration.%0A%0A%23%23%23%20Basic%20Server%20Creation%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20basic%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22My%20MCP%20Server%22%2C%20%20%2F%2F%20Server%20name%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%20%20%20%20%20%20%20%20%20%20%2F%2F%20Server%20version%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20the%20server%20(stdio%20transport)%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Server%20with%20Options%0A%0AUse%20server%20options%20to%20configure%20capabilities%20and%20behavior%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Advanced%20Server%22%2C%0A%20%20%20%20%222.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%20%20%20%20%20%20%2F%2F%20Enable%20tools%0A%20%20%20%20server.WithResourceCapabilities(true)%2C%20%20%2F%2F%20Enable%20resources%20%20%0A%20%20%20%20server.WithPromptCapabilities(true)%2C%20%20%20%20%2F%2F%20Enable%20prompts%0A%20%20%20%20server.WithRecovery()%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20panic%20recovery%0A%20%20%20%20server.WithHooks(myHooks)%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20lifecycle%20hooks%0A)%0A%60%60%60%0A%0A%23%23%20Server%20Configuration%0A%0A%23%23%23%20Capabilities%0A%0ACapabilities%20tell%20clients%20what%20features%20your%20server%20supports%3A%0A%0A%60%60%60go%0A%2F%2F%20Enable%20specific%20capabilities%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Specialized%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%20%20%20%20%20%20%2F%2F%20Can%20execute%20tools%0A%20%20%20%20server.WithResourceCapabilities(true)%2C%20%20%2F%2F%20Can%20provide%20resources%0A%20%20%20%20server.WithPromptCapabilities(true)%2C%20%20%20%20%2F%2F%20Can%20provide%20prompts%0A)%0A%0A%2F%2F%20Or%20enable%20all%20capabilities%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Full-Featured%20Server%22%2C%20%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20server.WithPromptCapabilities(true)%2C%0A)%0A%60%60%60%0A%0A**Capability%20types%3A**%0A-%20**Tools**%3A%20Server%20can%20execute%20function%20calls%20from%20LLMs%0A-%20**Resources**%3A%20Server%20can%20provide%20data%2Fcontent%20to%20LLMs%20%20%0A-%20**Prompts**%3A%20Server%20can%20provide%20prompt%20templates%0A%0A%23%23%23%20Recovery%20Middleware%0A%0AAdd%20automatic%20panic%20recovery%20to%20prevent%20server%20crashes%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Robust%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%20%0A%20%20%20%20server.WithRecovery()%2C%20%2F%2F%20Automatically%20recover%20from%20panics%0A)%0A%60%60%60%0A%0AThis%20catches%20panics%20in%20handlers%20and%20returns%20proper%20error%20responses%20instead%20of%20crashing.%0A%0A%23%23%23%20Custom%20Metadata%0A%0AAdd%20additional%20server%20information%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22My%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithInstructions(%22A%20server%20that%20does%20amazing%20things%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Starting%20Servers%0A%0AMCP-Go%20supports%20multiple%20transport%20methods%20for%20different%20deployment%20scenarios.%0A%0A%23%23%23%20Stdio%20Transport%0A%0AStandard%20input%2Foutput%20-%20most%20common%20for%20local%20tools%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22My%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20stdio%20server%20(blocks%20until%20terminated)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A**Best%20for%3A**%0A-%20Local%20development%20tools%0A-%20CLI%20integrations%20%20%0A-%20Desktop%20applications%0A-%20Single-client%20scenarios%0A%0A%23%23%23%20HTTP%20Transport%0A%0ATraditional%20HTTP%20request%2Fresponse%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22HTTP%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20HTTP%20server%0A%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20HTTP%20server%20on%20port%208080%0A%20%20%20%20if%20err%20%3A%3D%20httpServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A**Best%20for%3A**%0A-%20Web%20services%0A-%20Load-balanced%20deployments%0A-%20REST-like%20APIs%0A-%20Caching%20scenarios%0A%0A%23%23%23%20Server-Sent%20Events%20(SSE)%0A%0AHTTP-based%20streaming%20for%20real-time%20updates%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22SSE%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20SSE%20server%0A%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20SSE%20server%20on%20port%208080%0A%20%20%20%20if%20err%20%3A%3D%20sseServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A**Best%20for%3A**%0A-%20Web%20applications%0A-%20Real-time%20notifications%0A-%20Multiple%20concurrent%20clients%0A-%20Browser-based%20tools%0A%0A%23%23%23%20Custom%20Transport%20Options%0A%0AConfigure%20transport-specific%20options%3A%0A%0A%60%60%60go%0A%2F%2F%20HTTP%20with%20custom%20options%0AhttpServer%20%3A%3D%20server.NewStreamableHTTPServer(s%2C%0A%20%20%20%20server.WithEndpointPath(%22%2Fmcp%22)%2C%0A%20%20%20%20server.WithStateless(true)%2C%0A)%0A%0Aif%20err%20%3A%3D%20httpServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20log.Fatal(err)%0A%7D%0A%0A%2F%2F%20SSE%20with%20custom%20options%0AsseServer%20%3A%3D%20server.NewSSEServer(s%2C%0A%20%20%20%20server.WithSSEEndpoint(%22%2Fevents%22)%2C%0A%20%20%20%20server.WithMessageEndpoint(%22%2Fmessage%22)%2C%0A%20%20%20%20server.WithKeepAlive(true)%2C%0A)%0A%0Aif%20err%20%3A%3D%20sseServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20log.Fatal(err)%0A%7D%0A%60%60%60%0A%0A%23%23%20Environment-Based%20Configuration%0A%0AConfigure%20servers%20based%20on%20environment%20variables%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Configurable%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Choose%20transport%20based%20on%20environment%0A%20%20%20%20transport%20%3A%3D%20os.Getenv(%22MCP_TRANSPORT%22)%0A%20%20%20%20port%20%3A%3D%20os.Getenv(%22PORT%22)%0A%20%20%20%20if%20port%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20port%20%3D%20%228080%22%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20switch%20transport%20%7B%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20%20%20%20%20httpServer.Start(%22%3A%22%2Bport)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20%20%20%20%20sseServer.Start(%22%3A%22%2Bport)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20server.ServeStdio(s)%0A%20%20%20%20%7D%0A%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Server%20Lifecycle%0A%0AUnderstanding%20the%20server%20lifecycle%20helps%20with%20proper%20resource%20management%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20hooks%20%3A%3D%20%26server.Hooks%7B%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20session%20lifecycle%20hooks%0A%20%20%20%20hooks.AddOnRegisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20connected%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnUnregisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20disconnected%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20request%20hooks%0A%20%20%20%20hooks.AddBeforeAny(func(ctx%20context.Context%2C%20id%20any%2C%20method%20mcp.MCPMethod%2C%20message%20any)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Processing%20%25s%20request%22%2C%20method)%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnError(func(ctx%20context.Context%2C%20id%20any%2C%20method%20mcp.MCPMethod%2C%20message%20any%2C%20err%20error)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20in%20%25s%3A%20%25v%22%2C%20method%2C%20err)%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Lifecycle%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(hooks)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Graceful%20shutdown%0A%20%20%20%20c%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(c%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%3C-c%0A%20%20%20%20%20%20%20%20log.Println(%22Shutting%20down%20server...%22)%0A%20%20%20%20%20%20%20%20s.Shutdown()%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AProper%20error%20handling%20ensures%20robust%20server%20operation%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Error-Safe%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%20%2F%2F%20Panic%20recovery%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20error%20handling%20for%20server%20startup%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20server.ErrServerClosed)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Server%20closed%20gracefully%22)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Fatalf(%22Server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0ANow%20that%20you%20understand%20server%20basics%2C%20learn%20how%20to%20add%20functionality%3A%0A%0A-%20**%5BResources%5D(%2Fservers%2Fresources)**%20-%20Expose%20data%20to%20LLMs%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Provide%20functionality%20to%20LLMs%20%20%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Create%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Hooks%2C%20middleware%2C%20and%20more",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./basics-DokM9Kn8.js"),[]),path:"/servers/basics.html",type:"mdx",filePath:"servers/basics.mdx",content:"%23%20Server%20Basics%0A%0ALearn%20how%20to%20create%2C%20configure%2C%20and%20start%20MCP%20servers%20with%20different%20transport%20options.%0A%0A%23%23%20Creating%20a%20Server%0A%0AThe%20foundation%20of%20any%20MCP%20server%20is%20the%20%60NewMCPServer()%60%20function.%20This%20creates%20a%20server%20instance%20with%20basic%20metadata%20and%20optional%20configuration.%0A%0A%23%23%23%20Basic%20Server%20Creation%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20basic%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22My%20MCP%20Server%22%2C%20%20%2F%2F%20Server%20name%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%20%20%20%20%20%20%20%20%20%20%2F%2F%20Server%20version%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20the%20server%20(stdio%20transport)%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Server%20with%20Options%0A%0AUse%20server%20options%20to%20configure%20capabilities%20and%20behavior%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Advanced%20Server%22%2C%0A%20%20%20%20%222.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%20%20%20%20%20%20%2F%2F%20Enable%20tools%0A%20%20%20%20server.WithResourceCapabilities(true)%2C%20%20%2F%2F%20Enable%20resources%20%20%0A%20%20%20%20server.WithPromptCapabilities(true)%2C%20%20%20%20%2F%2F%20Enable%20prompts%0A%20%20%20%20server.WithRecovery()%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20panic%20recovery%0A%20%20%20%20server.WithHooks(myHooks)%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20lifecycle%20hooks%0A)%0A%60%60%60%0A%0A%23%23%20Server%20Configuration%0A%0A%23%23%23%20Capabilities%0A%0ACapabilities%20tell%20clients%20what%20features%20your%20server%20supports%3A%0A%0A%60%60%60go%0A%2F%2F%20Enable%20specific%20capabilities%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Specialized%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%20%20%20%20%20%20%2F%2F%20Can%20execute%20tools%0A%20%20%20%20server.WithResourceCapabilities(true)%2C%20%20%2F%2F%20Can%20provide%20resources%0A%20%20%20%20server.WithPromptCapabilities(true)%2C%20%20%20%20%2F%2F%20Can%20provide%20prompts%0A)%0A%0A%2F%2F%20Or%20enable%20all%20capabilities%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Full-Featured%20Server%22%2C%20%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20server.WithPromptCapabilities(true)%2C%0A)%0A%60%60%60%0A%0A**Capability%20types%3A**%0A-%20**Tools**%3A%20Server%20can%20execute%20function%20calls%20from%20LLMs%0A-%20**Resources**%3A%20Server%20can%20provide%20data%2Fcontent%20to%20LLMs%20%20%0A-%20**Prompts**%3A%20Server%20can%20provide%20prompt%20templates%0A%0A%23%23%23%20Recovery%20Middleware%0A%0AAdd%20automatic%20panic%20recovery%20to%20prevent%20server%20crashes%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Robust%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%20%0A%20%20%20%20server.WithRecovery()%2C%20%2F%2F%20Automatically%20recover%20from%20panics%0A)%0A%60%60%60%0A%0AThis%20catches%20panics%20in%20handlers%20and%20returns%20proper%20error%20responses%20instead%20of%20crashing.%0A%0A%23%23%23%20Custom%20Metadata%0A%0AAdd%20additional%20server%20information%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22My%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithInstructions(%22A%20server%20that%20does%20amazing%20things%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Starting%20Servers%0A%0AMCP-Go%20supports%20multiple%20transport%20methods%20for%20different%20deployment%20scenarios.%0A%0A%23%23%23%20Stdio%20Transport%0A%0AStandard%20input%2Foutput%20-%20most%20common%20for%20local%20tools%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22My%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20stdio%20server%20(blocks%20until%20terminated)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A**Best%20for%3A**%0A-%20Local%20development%20tools%0A-%20CLI%20integrations%20%20%0A-%20Desktop%20applications%0A-%20Single-client%20scenarios%0A%0A%23%23%23%20HTTP%20Transport%0A%0ATraditional%20HTTP%20request%2Fresponse%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22HTTP%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20HTTP%20server%0A%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20HTTP%20server%20on%20port%208080%0A%20%20%20%20if%20err%20%3A%3D%20httpServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A**Best%20for%3A**%0A-%20Web%20services%0A-%20Load-balanced%20deployments%0A-%20REST-like%20APIs%0A-%20Caching%20scenarios%0A%0A%23%23%23%20Server-Sent%20Events%20(SSE)%0A%0AHTTP-based%20streaming%20for%20real-time%20updates%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22SSE%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20SSE%20server%0A%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20SSE%20server%20on%20port%208080%0A%20%20%20%20if%20err%20%3A%3D%20sseServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A**Best%20for%3A**%0A-%20Web%20applications%0A-%20Real-time%20notifications%0A-%20Multiple%20concurrent%20clients%0A-%20Browser-based%20tools%0A%0A%23%23%23%20Custom%20Transport%20Options%0A%0AConfigure%20transport-specific%20options%3A%0A%0A%60%60%60go%0A%2F%2F%20HTTP%20with%20custom%20options%0AhttpServer%20%3A%3D%20server.NewStreamableHTTPServer(s%2C%0A%20%20%20%20server.WithEndpointPath(%22%2Fmcp%22)%2C%0A%20%20%20%20server.WithStateless(true)%2C%0A)%0A%0Aif%20err%20%3A%3D%20httpServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20log.Fatal(err)%0A%7D%0A%0A%2F%2F%20SSE%20with%20custom%20options%0AsseServer%20%3A%3D%20server.NewSSEServer(s%2C%0A%20%20%20%20server.WithSSEEndpoint(%22%2Fevents%22)%2C%0A%20%20%20%20server.WithMessageEndpoint(%22%2Fmessage%22)%2C%0A%20%20%20%20server.WithKeepAlive(true)%2C%0A)%0A%0Aif%20err%20%3A%3D%20sseServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20log.Fatal(err)%0A%7D%0A%60%60%60%0A%0A%23%23%20Environment-Based%20Configuration%0A%0AConfigure%20servers%20based%20on%20environment%20variables%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Configurable%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Choose%20transport%20based%20on%20environment%0A%20%20%20%20transport%20%3A%3D%20os.Getenv(%22MCP_TRANSPORT%22)%0A%20%20%20%20port%20%3A%3D%20os.Getenv(%22PORT%22)%0A%20%20%20%20if%20port%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20port%20%3D%20%228080%22%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20switch%20transport%20%7B%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20%20%20%20%20httpServer.Start(%22%3A%22%2Bport)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20%20%20%20%20sseServer.Start(%22%3A%22%2Bport)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20server.ServeStdio(s)%0A%20%20%20%20%7D%0A%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Server%20Lifecycle%0A%0AUnderstanding%20the%20server%20lifecycle%20helps%20with%20proper%20resource%20management%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20hooks%20%3A%3D%20%26server.Hooks%7B%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20session%20lifecycle%20hooks%0A%20%20%20%20hooks.AddOnRegisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20connected%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnUnregisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20disconnected%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20request%20hooks%0A%20%20%20%20hooks.AddBeforeAny(func(ctx%20context.Context%2C%20id%20any%2C%20method%20mcp.MCPMethod%2C%20message%20any)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Processing%20%25s%20request%22%2C%20method)%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnError(func(ctx%20context.Context%2C%20id%20any%2C%20method%20mcp.MCPMethod%2C%20message%20any%2C%20err%20error)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20in%20%25s%3A%20%25v%22%2C%20method%2C%20err)%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Lifecycle%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(hooks)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Graceful%20shutdown%0A%20%20%20%20c%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(c%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%3C-c%0A%20%20%20%20%20%20%20%20log.Println(%22Shutting%20down%20server...%22)%0A%20%20%20%20%20%20%20%20s.Shutdown()%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AProper%20error%20handling%20ensures%20robust%20server%20operation%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Error-Safe%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%20%2F%2F%20Panic%20recovery%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20error%20handling%20for%20server%20startup%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20server.ErrServerClosed)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Server%20closed%20gracefully%22)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Fatalf(%22Server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0ANow%20that%20you%20understand%20server%20basics%2C%20learn%20how%20to%20add%20functionality%3A%0A%0A-%20**%5BResources%5D(%2Fservers%2Fresources)**%20-%20Expose%20data%20to%20LLMs%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Provide%20functionality%20to%20LLMs%20%20%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Create%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Hooks%2C%20middleware%2C%20and%20more",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./index-De2O6ZCM.js"),[]),path:"/servers",type:"mdx",filePath:"servers/index.mdx",content:"%23%20Building%20MCP%20Servers%0A%0ALearn%20how%20to%20build%20powerful%20MCP%20servers%20with%20MCP-Go.%20This%20section%20covers%20everything%20from%20basic%20server%20setup%20to%20advanced%20features%20like%20typed%20tools%20and%20session%20management.%0A%0A%23%23%20Overview%0A%0AMCP%20servers%20expose%20tools%2C%20resources%2C%20and%20prompts%20to%20LLM%20clients.%20MCP-Go%20makes%20it%20easy%20to%20build%20robust%20servers%20with%20minimal%20boilerplate%20while%20providing%20full%20control%20over%20advanced%20features.%0A%0A%23%23%20What%20You'll%20Learn%0A%0A-%20**%5BServer%20Basics%5D(%2Fservers%2Fbasics)**%20-%20Creating%20and%20configuring%20servers%0A-%20**%5BResources%5D(%2Fservers%2Fresources)**%20-%20Exposing%20data%20to%20LLMs%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Providing%20functionality%20to%20LLMs%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Creating%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Typed%20tools%2C%20middleware%2C%20hooks%2C%20and%20more%0A%0A%23%23%20Quick%20Example%0A%0AHere's%20a%20complete%20MCP%20server%20that%20demonstrates%20the%20key%20concepts%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Avar%20start%20time.Time%0A%0Afunc%20main()%20%7B%0A%20%20%20%20start%20%3D%20time.Now()%0A%20%20%20%20%2F%2F%20Create%20server%20with%20capabilities%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22Demo%20Server%22%2C%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(false%2C%20true)%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_time%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20the%20current%20time%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22format%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Time%20format%20(RFC3339%2C%20Unix%2C%20etc.)%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.DefaultString(%22RFC3339%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleGetTime%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20resource%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22config%3A%2F%2Fserver%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Server%20Configuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Current%20server%20configuration%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleConfig%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20prompt%0A%20%20%20%20s.AddPrompt(%0A%20%20%20%20%20%20%20%20mcp.NewPrompt(%22analyze_logs%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithPromptDescription(%22Analyze%20server%20logs%20for%20issues%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithArgument(%22log_level%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.ArgumentDescription(%22Minimum%20log%20level%20to%20analyze%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleAnalyzeLogs%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20the%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleGetTime(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20format%20%3A%3D%20req.GetString(%22format%22%2C%20%22RFC3339%22)%0A%20%20%20%20%0A%20%20%20%20var%20timeStr%20string%0A%20%20%20%20switch%20format%20%7B%0A%20%20%20%20case%20%22Unix%22%3A%0A%20%20%20%20%20%20%20%20timeStr%20%3D%20fmt.Sprintf(%22%25d%22%2C%20time.Now().Unix())%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20timeStr%20%3D%20time.Now().Format(time.RFC3339)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(timeStr)%2C%20nil%0A%7D%0A%0Afunc%20handleConfig(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(%5B%5Dmcp.ResourceContents%2C%20error)%20%7B%0A%20%20%20%20config%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%22Demo%20Server%22%2C%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%22uptime%22%3A%20time.Since(start).String()%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20configJSON%2C%20err%20%3A%3D%20json.Marshal(config)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(configJSON)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20handleAnalyzeLogs(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20logLevel%20%3A%3D%20%22error%22%20%2F%2F%20default%20value%0A%20%20%20%20if%20args%20%3A%3D%20req.Params.Arguments%3B%20args%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20level%2C%20ok%20%3A%3D%20args%5B%22log_level%22%5D.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logLevel%20%3D%20level%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20%22Analyze%20server%20logs%20for%20potential%20issues%22%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20mcp.RoleUser%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Please%20analyze%20the%20server%20logs%20for%20entries%20at%20%25s%20level%20or%20higher.%20%22%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Look%20for%20patterns%2C%20errors%2C%20and%20potential%20issues%20that%20need%20attention.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20logLevel%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0AStart%20with%20%5BServer%20Basics%5D(%2Fservers%2Fbasics)%20to%20learn%20how%20to%20create%20and%20configure%20your%20first%20MCP%20server%2C%20then%20explore%20the%20other%20sections%20to%20add%20resources%2C%20tools%2C%20and%20advanced%20features.",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./index-De2O6ZCM.js"),[]),path:"/servers.html",type:"mdx",filePath:"servers/index.mdx",content:"%23%20Building%20MCP%20Servers%0A%0ALearn%20how%20to%20build%20powerful%20MCP%20servers%20with%20MCP-Go.%20This%20section%20covers%20everything%20from%20basic%20server%20setup%20to%20advanced%20features%20like%20typed%20tools%20and%20session%20management.%0A%0A%23%23%20Overview%0A%0AMCP%20servers%20expose%20tools%2C%20resources%2C%20and%20prompts%20to%20LLM%20clients.%20MCP-Go%20makes%20it%20easy%20to%20build%20robust%20servers%20with%20minimal%20boilerplate%20while%20providing%20full%20control%20over%20advanced%20features.%0A%0A%23%23%20What%20You'll%20Learn%0A%0A-%20**%5BServer%20Basics%5D(%2Fservers%2Fbasics)**%20-%20Creating%20and%20configuring%20servers%0A-%20**%5BResources%5D(%2Fservers%2Fresources)**%20-%20Exposing%20data%20to%20LLMs%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Providing%20functionality%20to%20LLMs%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Creating%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Typed%20tools%2C%20middleware%2C%20hooks%2C%20and%20more%0A%0A%23%23%20Quick%20Example%0A%0AHere's%20a%20complete%20MCP%20server%20that%20demonstrates%20the%20key%20concepts%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Avar%20start%20time.Time%0A%0Afunc%20main()%20%7B%0A%20%20%20%20start%20%3D%20time.Now()%0A%20%20%20%20%2F%2F%20Create%20server%20with%20capabilities%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22Demo%20Server%22%2C%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(false%2C%20true)%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_time%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20the%20current%20time%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22format%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Time%20format%20(RFC3339%2C%20Unix%2C%20etc.)%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.DefaultString(%22RFC3339%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleGetTime%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20resource%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22config%3A%2F%2Fserver%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Server%20Configuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Current%20server%20configuration%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleConfig%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20prompt%0A%20%20%20%20s.AddPrompt(%0A%20%20%20%20%20%20%20%20mcp.NewPrompt(%22analyze_logs%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithPromptDescription(%22Analyze%20server%20logs%20for%20issues%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithArgument(%22log_level%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.ArgumentDescription(%22Minimum%20log%20level%20to%20analyze%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleAnalyzeLogs%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20the%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleGetTime(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20format%20%3A%3D%20req.GetString(%22format%22%2C%20%22RFC3339%22)%0A%20%20%20%20%0A%20%20%20%20var%20timeStr%20string%0A%20%20%20%20switch%20format%20%7B%0A%20%20%20%20case%20%22Unix%22%3A%0A%20%20%20%20%20%20%20%20timeStr%20%3D%20fmt.Sprintf(%22%25d%22%2C%20time.Now().Unix())%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20timeStr%20%3D%20time.Now().Format(time.RFC3339)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(timeStr)%2C%20nil%0A%7D%0A%0Afunc%20handleConfig(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(%5B%5Dmcp.ResourceContents%2C%20error)%20%7B%0A%20%20%20%20config%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%22Demo%20Server%22%2C%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%22uptime%22%3A%20time.Since(start).String()%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20configJSON%2C%20err%20%3A%3D%20json.Marshal(config)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(configJSON)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20handleAnalyzeLogs(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20logLevel%20%3A%3D%20%22error%22%20%2F%2F%20default%20value%0A%20%20%20%20if%20args%20%3A%3D%20req.Params.Arguments%3B%20args%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20level%2C%20ok%20%3A%3D%20args%5B%22log_level%22%5D.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logLevel%20%3D%20level%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20%22Analyze%20server%20logs%20for%20potential%20issues%22%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20mcp.RoleUser%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Please%20analyze%20the%20server%20logs%20for%20entries%20at%20%25s%20level%20or%20higher.%20%22%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Look%20for%20patterns%2C%20errors%2C%20and%20potential%20issues%20that%20need%20attention.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20logLevel%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0AStart%20with%20%5BServer%20Basics%5D(%2Fservers%2Fbasics)%20to%20learn%20how%20to%20create%20and%20configure%20your%20first%20MCP%20server%2C%20then%20explore%20the%20other%20sections%20to%20add%20resources%2C%20tools%2C%20and%20advanced%20features.",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./prompts-Ce8CS725.js"),[]),path:"/servers/prompts",type:"mdx",filePath:"servers/prompts.mdx",content:"%23%20Implementing%20Prompts%0A%0APrompts%20are%20reusable%20interaction%20templates%20that%20help%20structure%20conversations%20between%20users%20and%20LLMs.%20They%20provide%20context%2C%20instructions%2C%20and%20can%20include%20dynamic%20content%20from%20resources.%0A%0A%23%23%20Prompt%20Fundamentals%0A%0APrompts%20in%20MCP%20serve%20as%20templates%20that%20can%20be%20invoked%20by%20LLMs%20to%20generate%20structured%20interactions.%20They're%20particularly%20useful%20for%20complex%20workflows%2C%20analysis%20tasks%2C%20or%20any%20scenario%20where%20you%20want%20to%20provide%20consistent%20context%20and%20instructions.%0A%0A%23%23%23%20Basic%20Prompt%20Structure%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20simple%20prompt%0Aprompt%20%3A%3D%20mcp.NewPrompt(%22code_review%22%2C%0A%20%20%20%20mcp.WithPromptDescription(%22Review%20code%20for%20best%20practices%20and%20issues%22)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22code%22%2C%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22The%20code%20to%20review%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22language%22%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Programming%20language%22)%2C%0A%20%20%20%20%20%20%20%20mcp.Default(%22auto-detect%22)%2C%0A%20%20%20%20)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Prompt%20Templates%0A%0A%23%23%23%20Basic%20Code%20Review%20Prompt%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Code%20Assistant%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Code%20review%20prompt%0A%20%20%20%20codeReviewPrompt%20%3A%3D%20mcp.NewPrompt(%22code_review%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptDescription(%22Review%20code%20for%20best%20practices%2C%20bugs%2C%20and%20improvements%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptArgument(%22code%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22The%20code%20to%20review%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptArgument(%22language%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Programming%20language%20(auto-detected%20if%20not%20specified)%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptArgument(%22focus%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Specific%20areas%20to%20focus%20on%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Enum(%22security%22%2C%20%22performance%22%2C%20%22readability%22%2C%20%22best-practices%22%2C%20%22all%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Default(%22all%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddPrompt(codeReviewPrompt%2C%20handleCodeReview)%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleCodeReview(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20arguments%20safely%0A%20%20%20%20args%20%3A%3D%20req.Params.Arguments%0A%20%20%20%20if%20args%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22missing%20required%20arguments%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20code%2C%20ok%20%3A%3D%20args%5B%22code%22%5D.(string)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22code%20argument%20is%20required%20and%20must%20be%20a%20string%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20language%20%3A%3D%20getStringArg(args%2C%20%22language%22%2C%20%22auto-detect%22)%0A%20%20%20%20focus%20%3A%3D%20getStringArg(args%2C%20%22focus%22%2C%20%22all%22)%0A%0A%20%20%20%20%2F%2F%20Build%20the%20prompt%20based%20on%20focus%20area%0A%20%20%20%20var%20instructions%20string%0A%20%20%20%20switch%20focus%20%7B%0A%20%20%20%20case%20%22security%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20specifically%20on%20security%20vulnerabilities%2C%20input%20validation%2C%20and%20potential%20attack%20vectors.%22%0A%20%20%20%20case%20%22performance%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20on%20performance%20optimizations%2C%20algorithmic%20efficiency%2C%20and%20resource%20usage.%22%0A%20%20%20%20case%20%22readability%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20on%20code%20clarity%2C%20naming%20conventions%2C%20and%20maintainability.%22%0A%20%20%20%20case%20%22best-practices%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20on%20language-specific%20best%20practices%20and%20design%20patterns.%22%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Provide%20a%20comprehensive%20review%20covering%20security%2C%20performance%2C%20readability%2C%20and%20best%20practices.%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22Code%20review%20for%20%25s%20code%22%2C%20language)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Please%20review%20the%20following%20%25s%20code%3A%5Cn%5Cn%25s%5Cn%5CnInstructions%3A%20%25s%5Cn%5CnPlease%20provide%3A%5Cn1.%20Overall%20assessment%5Cn2.%20Specific%20issues%20found%5Cn3.%20Suggested%20improvements%5Cn4.%20Best%20practice%20recommendations%5Cn%5CnCode%3A%5Cn%0A%60%60%60%0A%0A%23%23%23%20Data%20Analysis%20Prompt%0A%0A%60%60%60go%0Afunc%20handleDataAnalysis(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20datasetURI%20%3A%3D%20req.Params.Arguments%5B%22dataset_uri%22%5D.(string)%0A%20%20%20%20analysisType%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22analysis_type%22%2C%20%22exploratory%22)%0A%20%20%20%20focusAreas%20%3A%3D%20getStringSliceArg(req.Params.Arguments%2C%20%22focus_areas%22%2C%20%5B%5Dstring%7B%7D)%0A%0A%20%20%20%20%2F%2F%20Fetch%20the%20dataset%20(this%20would%20typically%20read%20from%20a%20resource)%0A%20%20%20%20dataset%2C%20err%20%3A%3D%20fetchDataset(ctx%2C%20datasetURI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20dataset%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20analysis%20instructions%0A%20%20%20%20var%20instructions%20strings.Builder%0A%20%20%20%20instructions.WriteString(%22Please%20analyze%20the%20provided%20dataset.%20%22)%0A%0A%20%20%20%20switch%20analysisType%20%7B%0A%20%20%20%20case%20%22exploratory%22%3A%0A%20%20%20%20%20%20%20%20instructions.WriteString(%22Perform%20exploratory%20data%20analysis%20including%20summary%20statistics%2C%20distributions%2C%20and%20patterns.%22)%0A%20%20%20%20case%20%22predictive%22%3A%0A%20%20%20%20%20%20%20%20instructions.WriteString(%22Focus%20on%20predictive%20modeling%20opportunities%20and%20feature%20relationships.%22)%0A%20%20%20%20case%20%22diagnostic%22%3A%0A%20%20%20%20%20%20%20%20instructions.WriteString(%22Identify%20data%20quality%20issues%2C%20outliers%2C%20and%20potential%20problems.%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(focusAreas)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20instructions.WriteString(fmt.Sprintf(%22%20Pay%20special%20attention%20to%3A%20%25s.%22%2C%20strings.Join(focusAreas%2C%20%22%2C%20%22)))%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20analysis%20of%20dataset%22%2C%20strings.Title(analysisType))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%60%25s%0A%0ADataset%20Information%3A%0A-%20Source%3A%20%25s%0A-%20Records%3A%20%25d%0A-%20Columns%3A%20%25s%0A%0ADataset%20Preview%3A%0A%25s%0A%0APlease%20provide%20a%20comprehensive%20analysis%20including%3A%0A1.%20Data%20overview%20and%20quality%20assessment%0A2.%20Key%20insights%20and%20patterns%0A3.%20Recommendations%20for%20further%20analysis%0A4.%20Potential%20issues%20or%20concerns%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20instructions.String()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20datasetURI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataset.RecordCount%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20strings.Join(dataset.Columns%2C%20%22%2C%20%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataset.Preview%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Prompt%20Arguments%0A%0A%23%23%23%20Flexible%20Parameter%20Handling%0A%0A%60%60%60go%0Afunc%20handleFlexiblePrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Required%20arguments%0A%20%20%20%20task%20%3A%3D%20req.Params.Arguments%5B%22task%22%5D.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Optional%20arguments%20with%20defaults%0A%20%20%20%20tone%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22tone%22%2C%20%22professional%22)%0A%20%20%20%20length%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22length%22%2C%20%22medium%22)%0A%20%20%20%20audience%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22audience%22%2C%20%22general%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Array%20arguments%0A%20%20%20%20keywords%20%3A%3D%20getStringSliceArg(req.Params.Arguments%2C%20%22keywords%22%2C%20%5B%5Dstring%7B%7D)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Object%20arguments%0A%20%20%20%20var%20constraints%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20c%2C%20exists%20%3A%3D%20req.Params.Arguments%5B%22constraints%22%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20constraints%20%3D%20c.(map%5Bstring%5Dinterface%7B%7D)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20prompt%20based%20on%20parameters%0A%20%20%20%20prompt%20%3A%3D%20buildDynamicPrompt(task%2C%20tone%2C%20length%2C%20audience%2C%20keywords%2C%20constraints)%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22Generate%20%25s%20content%22%2C%20task)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(prompt)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20getStringArg(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%2C%20defaultValue%20string)%20string%20%7B%0A%20%20%20%20if%20val%2C%20exists%20%3A%3D%20args%5Bkey%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20str%2C%20ok%20%3A%3D%20val.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20str%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%0Afunc%20getStringSliceArg(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%20string%2C%20defaultValue%20%5B%5Dstring)%20%5B%5Dstring%20%7B%0A%20%20%20%20if%20val%2C%20exists%20%3A%3D%20args%5Bkey%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20slice%2C%20ok%20%3A%3D%20val.(%5B%5Dinterface%7B%7D)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20make(%5B%5Dstring%2C%20len(slice))%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20i%2C%20v%20%3A%3D%20range%20slice%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20str%2C%20ok%20%3A%3D%20v.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%5Bi%5D%20%3D%20str%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%60%60%60%0A%0A%23%23%20Message%20Types%0A%0A%23%23%23%20Multi-Message%20Conversations%0A%0A%60%60%60go%0Afunc%20handleConversationPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20scenario%20%3A%3D%20req.Params.Arguments%5B%22scenario%22%5D.(string)%0A%20%20%20%20userRole%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22user_role%22%2C%20%22customer%22)%0A%20%20%20%20%0A%20%20%20%20var%20messages%20%5B%5Dmcp.PromptMessage%0A%20%20%20%20%0A%20%20%20%20switch%20scenario%20%7B%0A%20%20%20%20case%20%22customer_support%22%3A%0A%20%20%20%20%20%20%20%20messages%20%3D%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22You%20are%20a%20helpful%20customer%20support%20representative.%20Be%20polite%2C%20professional%2C%20and%20solution-oriented.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%22I'm%20a%20%25s%20with%20a%20question%20about%20your%20service.%22%2C%20userRole))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22assistant%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22Hello!%20I'm%20here%20to%20help.%20What%20can%20I%20assist%20you%20with%20today%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22Please%20continue%20the%20conversation%20based%20on%20the%20customer's%20needs.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20%22technical_interview%22%3A%0A%20%20%20%20%20%20%20%20messages%20%3D%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22You%20are%20conducting%20a%20technical%20interview.%20Ask%20thoughtful%20questions%20and%20provide%20constructive%20feedback.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22Let's%20begin%20the%20technical%20interview.%20Please%20start%20with%20an%20appropriate%20question.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20conversation%20scenario%22%2C%20strings.Title(scenario))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%20%20%20messages%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20System%20and%20User%20Roles%0A%0A%60%60%60go%0Afunc%20handleRoleBasedPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20expertise%20%3A%3D%20req.Params.Arguments%5B%22expertise%22%5D.(string)%0A%20%20%20%20task%20%3A%3D%20req.Params.Arguments%5B%22task%22%5D.(string)%0A%20%20%20%20context%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22context%22%2C%20%22%22)%0A%0A%20%20%20%20%2F%2F%20Define%20system%20message%20based%20on%20expertise%0A%20%20%20%20var%20systemMessage%20string%0A%20%20%20%20switch%20expertise%20%7B%0A%20%20%20%20case%20%22software_engineer%22%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20%22You%20are%20an%20experienced%20software%20engineer%20with%20expertise%20in%20system%20design%2C%20code%20quality%2C%20and%20best%20practices.%22%0A%20%20%20%20case%20%22data_scientist%22%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20%22You%20are%20a%20data%20scientist%20with%20expertise%20in%20statistical%20analysis%2C%20machine%20learning%2C%20and%20data%20visualization.%22%0A%20%20%20%20case%20%22product_manager%22%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20%22You%20are%20a%20product%20manager%20with%20expertise%20in%20user%20experience%2C%20market%20analysis%2C%20and%20feature%20prioritization.%22%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20fmt.Sprintf(%22You%20are%20an%20expert%20in%20%25s.%22%2C%20expertise)%0A%20%20%20%20%7D%0A%0A%20%20%20%20messages%20%3A%3D%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(systemMessage)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20context%20if%20provided%0A%20%20%20%20if%20context%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20messages%20%3D%20append(messages%2C%20mcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%22Context%3A%20%25s%22%2C%20context))%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20the%20main%20task%0A%20%20%20%20messages%20%3D%20append(messages%2C%20mcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(task)%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20task%22%2C%20strings.Title(expertise))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%20%20%20messages%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Embedded%20Resources%0A%0A%23%23%23%20Including%20Resource%20Data%0A%0A%60%60%60go%0Afunc%20handleResourceEmbeddedPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20documentURI%20%3A%3D%20req.Params.Arguments%5B%22document_uri%22%5D.(string)%0A%20%20%20%20analysisType%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22analysis_type%22%2C%20%22summary%22)%0A%0A%20%20%20%20%2F%2F%20Fetch%20the%20document%20content%0A%20%20%20%20document%2C%20err%20%3A%3D%20fetchResource(ctx%2C%20documentURI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20document%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20analysis%20prompt%20with%20embedded%20content%0A%20%20%20%20var%20instructions%20string%0A%20%20%20%20switch%20analysisType%20%7B%0A%20%20%20%20case%20%22summary%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20provide%20a%20concise%20summary%20of%20the%20key%20points%20in%20this%20document.%22%0A%20%20%20%20case%20%22critique%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20provide%20a%20critical%20analysis%20of%20the%20arguments%20and%20evidence%20presented.%22%0A%20%20%20%20case%20%22questions%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20generate%20thoughtful%20questions%20that%20this%20document%20raises%20or%20could%20be%20used%20to%20explore.%22%0A%20%20%20%20case%20%22action_items%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20extract%20actionable%20items%20and%20recommendations%20from%20this%20document.%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22Document%20%25s%22%2C%20analysisType)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%60%25s%0A%0ADocument%3A%20%25s%0AContent%3A%0A---%0A%25s%0A---%0A%0APlease%20provide%20your%20analysis%20following%20the%20instructions%20above.%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20instructions%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20documentURI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.Content%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Dynamic%20Resource%20Integration%0A%0A%60%60%60go%0Afunc%20handleDynamicResourcePrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20resourceURIs%20%3A%3D%20req.Params.Arguments%5B%22resource_uris%22%5D.(%5B%5Dinterface%7B%7D)%0A%20%20%20%20promptType%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22prompt_type%22%2C%20%22compare%22)%0A%0A%20%20%20%20%2F%2F%20Fetch%20all%20resources%0A%20%20%20%20var%20resources%20%5B%5DResourceData%0A%20%20%20%20for%20_%2C%20uri%20%3A%3D%20range%20resourceURIs%20%7B%0A%20%20%20%20%20%20%20%20if%20uriStr%2C%20ok%20%3A%3D%20uri.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20resource%2C%20err%20%3A%3D%20fetchResource(ctx%2C%20uriStr)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20resource%20%25s%3A%20%25w%22%2C%20uriStr%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20resources%20%3D%20append(resources%2C%20resource)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20prompt%20based%20on%20type%20and%20resources%0A%20%20%20%20var%20content%20strings.Builder%0A%20%20%20%20%0A%20%20%20%20switch%20promptType%20%7B%0A%20%20%20%20case%20%22compare%22%3A%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20compare%20and%20contrast%20the%20following%20documents%3A%5Cn%5Cn%22)%0A%20%20%20%20%20%20%20%20for%20i%2C%20resource%20%3A%3D%20range%20resources%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20content.WriteString(fmt.Sprintf(%22Document%20%25d%20(%25s)%3A%5Cn%25s%5Cn%5Cn%22%2C%20i%2B1%2C%20resource.URI%2C%20resource.Content))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20provide%3A%5Cn1.%20Key%20similarities%5Cn2.%20Important%20differences%5Cn3.%20Overall%20assessment%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20%22synthesize%22%3A%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20synthesize%20information%20from%20the%20following%20sources%3A%5Cn%5Cn%22)%0A%20%20%20%20%20%20%20%20for%20i%2C%20resource%20%3A%3D%20range%20resources%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20content.WriteString(fmt.Sprintf(%22Source%20%25d%20(%25s)%3A%5Cn%25s%5Cn%5Cn%22%2C%20i%2B1%2C%20resource.URI%2C%20resource.Content))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20create%20a%20unified%20analysis%20that%20incorporates%20insights%20from%20all%20sources.%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20multiple%20resources%22%2C%20strings.Title(promptType))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(content.String())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Advanced%20Prompt%20Patterns%0A%0A%23%23%23%20Conditional%20Prompts%0A%0A%60%60%60go%0Afunc%20handleConditionalPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20userLevel%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22user_level%22%2C%20%22beginner%22)%0A%20%20%20%20topic%20%3A%3D%20req.Params.Arguments%5B%22topic%22%5D.(string)%0A%20%20%20%20includeExamples%20%3A%3D%20getBoolArg(req.Params.Arguments%2C%20%22include_examples%22%2C%20true)%0A%0A%20%20%20%20var%20prompt%20strings.Builder%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Adjust%20complexity%20based%20on%20user%20level%0A%20%20%20%20switch%20userLevel%20%7B%0A%20%20%20%20case%20%22beginner%22%3A%0A%20%20%20%20%20%20%20%20prompt.WriteString(fmt.Sprintf(%22Please%20explain%20%25s%20in%20simple%20terms%20suitable%20for%20someone%20new%20to%20the%20topic.%20%22%2C%20topic))%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Use%20clear%20language%20and%20avoid%20jargon.%20%22)%0A%20%20%20%20case%20%22intermediate%22%3A%0A%20%20%20%20%20%20%20%20prompt.WriteString(fmt.Sprintf(%22Please%20provide%20a%20detailed%20explanation%20of%20%25s.%20%22%2C%20topic))%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Include%20technical%20details%20but%20ensure%20clarity.%20%22)%0A%20%20%20%20case%20%22advanced%22%3A%0A%20%20%20%20%20%20%20%20prompt.WriteString(fmt.Sprintf(%22Please%20provide%20an%20in-depth%20analysis%20of%20%25s.%20%22%2C%20topic))%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Include%20advanced%20concepts%2C%20edge%20cases%2C%20and%20technical%20nuances.%20%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20includeExamples%20%7B%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Please%20include%20relevant%20examples%20and%20practical%20applications.%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20explanation%20for%20%25s%20level%22%2C%20topic%2C%20userLevel)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(prompt.String())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20getBoolArg(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%20string%2C%20defaultValue%20bool)%20bool%20%7B%0A%20%20%20%20if%20val%2C%20exists%20%3A%3D%20args%5Bkey%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20b%2C%20ok%20%3A%3D%20val.(bool)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20b%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Template-Based%20Prompts%0A%0A%60%60%60go%0Atype%20PromptTemplate%20struct%20%7B%0A%20%20%20%20Name%20%20%20%20%20%20%20%20string%0A%20%20%20%20Description%20string%0A%20%20%20%20Template%20%20%20%20string%0A%20%20%20%20Variables%20%20%20%5B%5Dstring%0A%7D%0A%0Avar%20promptTemplates%20%3D%20map%5Bstring%5DPromptTemplate%7B%0A%20%20%20%20%22bug_report%22%3A%20%7B%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20%20%20%22Bug%20Report%20Analysis%22%2C%0A%20%20%20%20%20%20%20%20Description%3A%20%22Analyze%20a%20bug%20report%20and%20suggest%20solutions%22%2C%0A%20%20%20%20%20%20%20%20Template%3A%20%60Please%20analyze%20this%20bug%20report%3A%0A%0A**Bug%20Description%3A**%20%7B%7B.description%7D%7D%0A**Steps%20to%20Reproduce%3A**%20%7B%7B.steps%7D%7D%0A**Expected%20Behavior%3A**%20%7B%7B.expected%7D%7D%0A**Actual%20Behavior%3A**%20%7B%7B.actual%7D%7D%0A**Environment%3A**%20%7B%7B.environment%7D%7D%0A%0APlease%20provide%3A%0A1.%20Root%20cause%20analysis%0A2.%20Potential%20solutions%0A3.%20Prevention%20strategies%0A4.%20Priority%20assessment%60%2C%0A%20%20%20%20%20%20%20%20Variables%3A%20%5B%5Dstring%7B%22description%22%2C%20%22steps%22%2C%20%22expected%22%2C%20%22actual%22%2C%20%22environment%22%7D%2C%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22feature_request%22%3A%20%7B%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20%20%20%22Feature%20Request%20Evaluation%22%2C%0A%20%20%20%20%20%20%20%20Description%3A%20%22Evaluate%20a%20feature%20request%22%2C%0A%20%20%20%20%20%20%20%20Template%3A%20%60Please%20evaluate%20this%20feature%20request%3A%0A%0A**Feature%3A**%20%7B%7B.feature%7D%7D%0A**Use%20Case%3A**%20%7B%7B.use_case%7D%7D%0A**User%20Story%3A**%20%7B%7B.user_story%7D%7D%0A**Acceptance%20Criteria%3A**%20%7B%7B.criteria%7D%7D%0A%0APlease%20assess%3A%0A1.%20Business%20value%20and%20impact%0A2.%20Technical%20feasibility%0A3.%20Implementation%20complexity%0A4.%20Potential%20risks%20and%20considerations%60%2C%0A%20%20%20%20%20%20%20%20Variables%3A%20%5B%5Dstring%7B%22feature%22%2C%20%22use_case%22%2C%20%22user_story%22%2C%20%22criteria%22%7D%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%0Afunc%20handleTemplatePrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20templateName%20%3A%3D%20req.Params.Arguments%5B%22template%22%5D.(string)%0A%20%20%20%20variables%20%3A%3D%20req.Params.Arguments%5B%22variables%22%5D.(map%5Bstring%5Dinterface%7B%7D)%0A%0A%20%20%20%20template%2C%20exists%20%3A%3D%20promptTemplates%5BtemplateName%5D%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20template%3A%20%25s%22%2C%20templateName)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Replace%20template%20variables%0A%20%20%20%20content%20%3A%3D%20template.Template%0A%20%20%20%20for%20_%2C%20variable%20%3A%3D%20range%20template.Variables%20%7B%0A%20%20%20%20%20%20%20%20if%20value%2C%20exists%20%3A%3D%20variables%5Bvariable%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placeholder%20%3A%3D%20fmt.Sprintf(%22%7B%7B.%25s%7D%7D%22%2C%20variable)%0A%20%20%20%20%20%20%20%20%20%20%20%20content%20%3D%20strings.ReplaceAll(content%2C%20placeholder%2C%20fmt.Sprintf(%22%25v%22%2C%20value))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20template.Description%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(content)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20typed%20tools%2C%20middleware%2C%20and%20hooks%0A-%20**%5BClient%20Integration%5D(%2Fclients)**%20-%20Learn%20how%20to%20build%20MCP%20clients%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Learn%20about%20implementing%20server%20tools",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./prompts-Ce8CS725.js"),[]),path:"/servers/prompts.html",type:"mdx",filePath:"servers/prompts.mdx",content:"%23%20Implementing%20Prompts%0A%0APrompts%20are%20reusable%20interaction%20templates%20that%20help%20structure%20conversations%20between%20users%20and%20LLMs.%20They%20provide%20context%2C%20instructions%2C%20and%20can%20include%20dynamic%20content%20from%20resources.%0A%0A%23%23%20Prompt%20Fundamentals%0A%0APrompts%20in%20MCP%20serve%20as%20templates%20that%20can%20be%20invoked%20by%20LLMs%20to%20generate%20structured%20interactions.%20They're%20particularly%20useful%20for%20complex%20workflows%2C%20analysis%20tasks%2C%20or%20any%20scenario%20where%20you%20want%20to%20provide%20consistent%20context%20and%20instructions.%0A%0A%23%23%23%20Basic%20Prompt%20Structure%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20simple%20prompt%0Aprompt%20%3A%3D%20mcp.NewPrompt(%22code_review%22%2C%0A%20%20%20%20mcp.WithPromptDescription(%22Review%20code%20for%20best%20practices%20and%20issues%22)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22code%22%2C%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22The%20code%20to%20review%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22language%22%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Programming%20language%22)%2C%0A%20%20%20%20%20%20%20%20mcp.Default(%22auto-detect%22)%2C%0A%20%20%20%20)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Prompt%20Templates%0A%0A%23%23%23%20Basic%20Code%20Review%20Prompt%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Code%20Assistant%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Code%20review%20prompt%0A%20%20%20%20codeReviewPrompt%20%3A%3D%20mcp.NewPrompt(%22code_review%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptDescription(%22Review%20code%20for%20best%20practices%2C%20bugs%2C%20and%20improvements%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptArgument(%22code%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22The%20code%20to%20review%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptArgument(%22language%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Programming%20language%20(auto-detected%20if%20not%20specified)%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptArgument(%22focus%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Specific%20areas%20to%20focus%20on%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Enum(%22security%22%2C%20%22performance%22%2C%20%22readability%22%2C%20%22best-practices%22%2C%20%22all%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Default(%22all%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddPrompt(codeReviewPrompt%2C%20handleCodeReview)%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleCodeReview(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20arguments%20safely%0A%20%20%20%20args%20%3A%3D%20req.Params.Arguments%0A%20%20%20%20if%20args%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22missing%20required%20arguments%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20code%2C%20ok%20%3A%3D%20args%5B%22code%22%5D.(string)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22code%20argument%20is%20required%20and%20must%20be%20a%20string%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20language%20%3A%3D%20getStringArg(args%2C%20%22language%22%2C%20%22auto-detect%22)%0A%20%20%20%20focus%20%3A%3D%20getStringArg(args%2C%20%22focus%22%2C%20%22all%22)%0A%0A%20%20%20%20%2F%2F%20Build%20the%20prompt%20based%20on%20focus%20area%0A%20%20%20%20var%20instructions%20string%0A%20%20%20%20switch%20focus%20%7B%0A%20%20%20%20case%20%22security%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20specifically%20on%20security%20vulnerabilities%2C%20input%20validation%2C%20and%20potential%20attack%20vectors.%22%0A%20%20%20%20case%20%22performance%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20on%20performance%20optimizations%2C%20algorithmic%20efficiency%2C%20and%20resource%20usage.%22%0A%20%20%20%20case%20%22readability%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20on%20code%20clarity%2C%20naming%20conventions%2C%20and%20maintainability.%22%0A%20%20%20%20case%20%22best-practices%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20on%20language-specific%20best%20practices%20and%20design%20patterns.%22%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Provide%20a%20comprehensive%20review%20covering%20security%2C%20performance%2C%20readability%2C%20and%20best%20practices.%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22Code%20review%20for%20%25s%20code%22%2C%20language)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Please%20review%20the%20following%20%25s%20code%3A%5Cn%5Cn%25s%5Cn%5CnInstructions%3A%20%25s%5Cn%5CnPlease%20provide%3A%5Cn1.%20Overall%20assessment%5Cn2.%20Specific%20issues%20found%5Cn3.%20Suggested%20improvements%5Cn4.%20Best%20practice%20recommendations%5Cn%5CnCode%3A%5Cn%0A%60%60%60%0A%0A%23%23%23%20Data%20Analysis%20Prompt%0A%0A%60%60%60go%0Afunc%20handleDataAnalysis(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20datasetURI%20%3A%3D%20req.Params.Arguments%5B%22dataset_uri%22%5D.(string)%0A%20%20%20%20analysisType%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22analysis_type%22%2C%20%22exploratory%22)%0A%20%20%20%20focusAreas%20%3A%3D%20getStringSliceArg(req.Params.Arguments%2C%20%22focus_areas%22%2C%20%5B%5Dstring%7B%7D)%0A%0A%20%20%20%20%2F%2F%20Fetch%20the%20dataset%20(this%20would%20typically%20read%20from%20a%20resource)%0A%20%20%20%20dataset%2C%20err%20%3A%3D%20fetchDataset(ctx%2C%20datasetURI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20dataset%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20analysis%20instructions%0A%20%20%20%20var%20instructions%20strings.Builder%0A%20%20%20%20instructions.WriteString(%22Please%20analyze%20the%20provided%20dataset.%20%22)%0A%0A%20%20%20%20switch%20analysisType%20%7B%0A%20%20%20%20case%20%22exploratory%22%3A%0A%20%20%20%20%20%20%20%20instructions.WriteString(%22Perform%20exploratory%20data%20analysis%20including%20summary%20statistics%2C%20distributions%2C%20and%20patterns.%22)%0A%20%20%20%20case%20%22predictive%22%3A%0A%20%20%20%20%20%20%20%20instructions.WriteString(%22Focus%20on%20predictive%20modeling%20opportunities%20and%20feature%20relationships.%22)%0A%20%20%20%20case%20%22diagnostic%22%3A%0A%20%20%20%20%20%20%20%20instructions.WriteString(%22Identify%20data%20quality%20issues%2C%20outliers%2C%20and%20potential%20problems.%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(focusAreas)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20instructions.WriteString(fmt.Sprintf(%22%20Pay%20special%20attention%20to%3A%20%25s.%22%2C%20strings.Join(focusAreas%2C%20%22%2C%20%22)))%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20analysis%20of%20dataset%22%2C%20strings.Title(analysisType))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%60%25s%0A%0ADataset%20Information%3A%0A-%20Source%3A%20%25s%0A-%20Records%3A%20%25d%0A-%20Columns%3A%20%25s%0A%0ADataset%20Preview%3A%0A%25s%0A%0APlease%20provide%20a%20comprehensive%20analysis%20including%3A%0A1.%20Data%20overview%20and%20quality%20assessment%0A2.%20Key%20insights%20and%20patterns%0A3.%20Recommendations%20for%20further%20analysis%0A4.%20Potential%20issues%20or%20concerns%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20instructions.String()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20datasetURI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataset.RecordCount%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20strings.Join(dataset.Columns%2C%20%22%2C%20%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataset.Preview%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Prompt%20Arguments%0A%0A%23%23%23%20Flexible%20Parameter%20Handling%0A%0A%60%60%60go%0Afunc%20handleFlexiblePrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Required%20arguments%0A%20%20%20%20task%20%3A%3D%20req.Params.Arguments%5B%22task%22%5D.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Optional%20arguments%20with%20defaults%0A%20%20%20%20tone%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22tone%22%2C%20%22professional%22)%0A%20%20%20%20length%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22length%22%2C%20%22medium%22)%0A%20%20%20%20audience%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22audience%22%2C%20%22general%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Array%20arguments%0A%20%20%20%20keywords%20%3A%3D%20getStringSliceArg(req.Params.Arguments%2C%20%22keywords%22%2C%20%5B%5Dstring%7B%7D)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Object%20arguments%0A%20%20%20%20var%20constraints%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20c%2C%20exists%20%3A%3D%20req.Params.Arguments%5B%22constraints%22%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20constraints%20%3D%20c.(map%5Bstring%5Dinterface%7B%7D)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20prompt%20based%20on%20parameters%0A%20%20%20%20prompt%20%3A%3D%20buildDynamicPrompt(task%2C%20tone%2C%20length%2C%20audience%2C%20keywords%2C%20constraints)%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22Generate%20%25s%20content%22%2C%20task)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(prompt)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20getStringArg(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%2C%20defaultValue%20string)%20string%20%7B%0A%20%20%20%20if%20val%2C%20exists%20%3A%3D%20args%5Bkey%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20str%2C%20ok%20%3A%3D%20val.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20str%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%0Afunc%20getStringSliceArg(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%20string%2C%20defaultValue%20%5B%5Dstring)%20%5B%5Dstring%20%7B%0A%20%20%20%20if%20val%2C%20exists%20%3A%3D%20args%5Bkey%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20slice%2C%20ok%20%3A%3D%20val.(%5B%5Dinterface%7B%7D)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20make(%5B%5Dstring%2C%20len(slice))%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20i%2C%20v%20%3A%3D%20range%20slice%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20str%2C%20ok%20%3A%3D%20v.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%5Bi%5D%20%3D%20str%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%60%60%60%0A%0A%23%23%20Message%20Types%0A%0A%23%23%23%20Multi-Message%20Conversations%0A%0A%60%60%60go%0Afunc%20handleConversationPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20scenario%20%3A%3D%20req.Params.Arguments%5B%22scenario%22%5D.(string)%0A%20%20%20%20userRole%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22user_role%22%2C%20%22customer%22)%0A%20%20%20%20%0A%20%20%20%20var%20messages%20%5B%5Dmcp.PromptMessage%0A%20%20%20%20%0A%20%20%20%20switch%20scenario%20%7B%0A%20%20%20%20case%20%22customer_support%22%3A%0A%20%20%20%20%20%20%20%20messages%20%3D%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22You%20are%20a%20helpful%20customer%20support%20representative.%20Be%20polite%2C%20professional%2C%20and%20solution-oriented.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%22I'm%20a%20%25s%20with%20a%20question%20about%20your%20service.%22%2C%20userRole))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22assistant%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22Hello!%20I'm%20here%20to%20help.%20What%20can%20I%20assist%20you%20with%20today%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22Please%20continue%20the%20conversation%20based%20on%20the%20customer's%20needs.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20%22technical_interview%22%3A%0A%20%20%20%20%20%20%20%20messages%20%3D%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22You%20are%20conducting%20a%20technical%20interview.%20Ask%20thoughtful%20questions%20and%20provide%20constructive%20feedback.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22Let's%20begin%20the%20technical%20interview.%20Please%20start%20with%20an%20appropriate%20question.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20conversation%20scenario%22%2C%20strings.Title(scenario))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%20%20%20messages%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20System%20and%20User%20Roles%0A%0A%60%60%60go%0Afunc%20handleRoleBasedPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20expertise%20%3A%3D%20req.Params.Arguments%5B%22expertise%22%5D.(string)%0A%20%20%20%20task%20%3A%3D%20req.Params.Arguments%5B%22task%22%5D.(string)%0A%20%20%20%20context%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22context%22%2C%20%22%22)%0A%0A%20%20%20%20%2F%2F%20Define%20system%20message%20based%20on%20expertise%0A%20%20%20%20var%20systemMessage%20string%0A%20%20%20%20switch%20expertise%20%7B%0A%20%20%20%20case%20%22software_engineer%22%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20%22You%20are%20an%20experienced%20software%20engineer%20with%20expertise%20in%20system%20design%2C%20code%20quality%2C%20and%20best%20practices.%22%0A%20%20%20%20case%20%22data_scientist%22%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20%22You%20are%20a%20data%20scientist%20with%20expertise%20in%20statistical%20analysis%2C%20machine%20learning%2C%20and%20data%20visualization.%22%0A%20%20%20%20case%20%22product_manager%22%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20%22You%20are%20a%20product%20manager%20with%20expertise%20in%20user%20experience%2C%20market%20analysis%2C%20and%20feature%20prioritization.%22%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20fmt.Sprintf(%22You%20are%20an%20expert%20in%20%25s.%22%2C%20expertise)%0A%20%20%20%20%7D%0A%0A%20%20%20%20messages%20%3A%3D%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(systemMessage)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20context%20if%20provided%0A%20%20%20%20if%20context%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20messages%20%3D%20append(messages%2C%20mcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%22Context%3A%20%25s%22%2C%20context))%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20the%20main%20task%0A%20%20%20%20messages%20%3D%20append(messages%2C%20mcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(task)%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20task%22%2C%20strings.Title(expertise))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%20%20%20messages%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Embedded%20Resources%0A%0A%23%23%23%20Including%20Resource%20Data%0A%0A%60%60%60go%0Afunc%20handleResourceEmbeddedPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20documentURI%20%3A%3D%20req.Params.Arguments%5B%22document_uri%22%5D.(string)%0A%20%20%20%20analysisType%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22analysis_type%22%2C%20%22summary%22)%0A%0A%20%20%20%20%2F%2F%20Fetch%20the%20document%20content%0A%20%20%20%20document%2C%20err%20%3A%3D%20fetchResource(ctx%2C%20documentURI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20document%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20analysis%20prompt%20with%20embedded%20content%0A%20%20%20%20var%20instructions%20string%0A%20%20%20%20switch%20analysisType%20%7B%0A%20%20%20%20case%20%22summary%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20provide%20a%20concise%20summary%20of%20the%20key%20points%20in%20this%20document.%22%0A%20%20%20%20case%20%22critique%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20provide%20a%20critical%20analysis%20of%20the%20arguments%20and%20evidence%20presented.%22%0A%20%20%20%20case%20%22questions%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20generate%20thoughtful%20questions%20that%20this%20document%20raises%20or%20could%20be%20used%20to%20explore.%22%0A%20%20%20%20case%20%22action_items%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20extract%20actionable%20items%20and%20recommendations%20from%20this%20document.%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22Document%20%25s%22%2C%20analysisType)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%60%25s%0A%0ADocument%3A%20%25s%0AContent%3A%0A---%0A%25s%0A---%0A%0APlease%20provide%20your%20analysis%20following%20the%20instructions%20above.%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20instructions%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20documentURI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.Content%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Dynamic%20Resource%20Integration%0A%0A%60%60%60go%0Afunc%20handleDynamicResourcePrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20resourceURIs%20%3A%3D%20req.Params.Arguments%5B%22resource_uris%22%5D.(%5B%5Dinterface%7B%7D)%0A%20%20%20%20promptType%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22prompt_type%22%2C%20%22compare%22)%0A%0A%20%20%20%20%2F%2F%20Fetch%20all%20resources%0A%20%20%20%20var%20resources%20%5B%5DResourceData%0A%20%20%20%20for%20_%2C%20uri%20%3A%3D%20range%20resourceURIs%20%7B%0A%20%20%20%20%20%20%20%20if%20uriStr%2C%20ok%20%3A%3D%20uri.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20resource%2C%20err%20%3A%3D%20fetchResource(ctx%2C%20uriStr)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20resource%20%25s%3A%20%25w%22%2C%20uriStr%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20resources%20%3D%20append(resources%2C%20resource)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20prompt%20based%20on%20type%20and%20resources%0A%20%20%20%20var%20content%20strings.Builder%0A%20%20%20%20%0A%20%20%20%20switch%20promptType%20%7B%0A%20%20%20%20case%20%22compare%22%3A%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20compare%20and%20contrast%20the%20following%20documents%3A%5Cn%5Cn%22)%0A%20%20%20%20%20%20%20%20for%20i%2C%20resource%20%3A%3D%20range%20resources%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20content.WriteString(fmt.Sprintf(%22Document%20%25d%20(%25s)%3A%5Cn%25s%5Cn%5Cn%22%2C%20i%2B1%2C%20resource.URI%2C%20resource.Content))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20provide%3A%5Cn1.%20Key%20similarities%5Cn2.%20Important%20differences%5Cn3.%20Overall%20assessment%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20%22synthesize%22%3A%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20synthesize%20information%20from%20the%20following%20sources%3A%5Cn%5Cn%22)%0A%20%20%20%20%20%20%20%20for%20i%2C%20resource%20%3A%3D%20range%20resources%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20content.WriteString(fmt.Sprintf(%22Source%20%25d%20(%25s)%3A%5Cn%25s%5Cn%5Cn%22%2C%20i%2B1%2C%20resource.URI%2C%20resource.Content))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20create%20a%20unified%20analysis%20that%20incorporates%20insights%20from%20all%20sources.%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20multiple%20resources%22%2C%20strings.Title(promptType))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(content.String())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Advanced%20Prompt%20Patterns%0A%0A%23%23%23%20Conditional%20Prompts%0A%0A%60%60%60go%0Afunc%20handleConditionalPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20userLevel%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22user_level%22%2C%20%22beginner%22)%0A%20%20%20%20topic%20%3A%3D%20req.Params.Arguments%5B%22topic%22%5D.(string)%0A%20%20%20%20includeExamples%20%3A%3D%20getBoolArg(req.Params.Arguments%2C%20%22include_examples%22%2C%20true)%0A%0A%20%20%20%20var%20prompt%20strings.Builder%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Adjust%20complexity%20based%20on%20user%20level%0A%20%20%20%20switch%20userLevel%20%7B%0A%20%20%20%20case%20%22beginner%22%3A%0A%20%20%20%20%20%20%20%20prompt.WriteString(fmt.Sprintf(%22Please%20explain%20%25s%20in%20simple%20terms%20suitable%20for%20someone%20new%20to%20the%20topic.%20%22%2C%20topic))%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Use%20clear%20language%20and%20avoid%20jargon.%20%22)%0A%20%20%20%20case%20%22intermediate%22%3A%0A%20%20%20%20%20%20%20%20prompt.WriteString(fmt.Sprintf(%22Please%20provide%20a%20detailed%20explanation%20of%20%25s.%20%22%2C%20topic))%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Include%20technical%20details%20but%20ensure%20clarity.%20%22)%0A%20%20%20%20case%20%22advanced%22%3A%0A%20%20%20%20%20%20%20%20prompt.WriteString(fmt.Sprintf(%22Please%20provide%20an%20in-depth%20analysis%20of%20%25s.%20%22%2C%20topic))%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Include%20advanced%20concepts%2C%20edge%20cases%2C%20and%20technical%20nuances.%20%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20includeExamples%20%7B%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Please%20include%20relevant%20examples%20and%20practical%20applications.%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20explanation%20for%20%25s%20level%22%2C%20topic%2C%20userLevel)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(prompt.String())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20getBoolArg(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%20string%2C%20defaultValue%20bool)%20bool%20%7B%0A%20%20%20%20if%20val%2C%20exists%20%3A%3D%20args%5Bkey%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20b%2C%20ok%20%3A%3D%20val.(bool)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20b%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Template-Based%20Prompts%0A%0A%60%60%60go%0Atype%20PromptTemplate%20struct%20%7B%0A%20%20%20%20Name%20%20%20%20%20%20%20%20string%0A%20%20%20%20Description%20string%0A%20%20%20%20Template%20%20%20%20string%0A%20%20%20%20Variables%20%20%20%5B%5Dstring%0A%7D%0A%0Avar%20promptTemplates%20%3D%20map%5Bstring%5DPromptTemplate%7B%0A%20%20%20%20%22bug_report%22%3A%20%7B%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20%20%20%22Bug%20Report%20Analysis%22%2C%0A%20%20%20%20%20%20%20%20Description%3A%20%22Analyze%20a%20bug%20report%20and%20suggest%20solutions%22%2C%0A%20%20%20%20%20%20%20%20Template%3A%20%60Please%20analyze%20this%20bug%20report%3A%0A%0A**Bug%20Description%3A**%20%7B%7B.description%7D%7D%0A**Steps%20to%20Reproduce%3A**%20%7B%7B.steps%7D%7D%0A**Expected%20Behavior%3A**%20%7B%7B.expected%7D%7D%0A**Actual%20Behavior%3A**%20%7B%7B.actual%7D%7D%0A**Environment%3A**%20%7B%7B.environment%7D%7D%0A%0APlease%20provide%3A%0A1.%20Root%20cause%20analysis%0A2.%20Potential%20solutions%0A3.%20Prevention%20strategies%0A4.%20Priority%20assessment%60%2C%0A%20%20%20%20%20%20%20%20Variables%3A%20%5B%5Dstring%7B%22description%22%2C%20%22steps%22%2C%20%22expected%22%2C%20%22actual%22%2C%20%22environment%22%7D%2C%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22feature_request%22%3A%20%7B%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20%20%20%22Feature%20Request%20Evaluation%22%2C%0A%20%20%20%20%20%20%20%20Description%3A%20%22Evaluate%20a%20feature%20request%22%2C%0A%20%20%20%20%20%20%20%20Template%3A%20%60Please%20evaluate%20this%20feature%20request%3A%0A%0A**Feature%3A**%20%7B%7B.feature%7D%7D%0A**Use%20Case%3A**%20%7B%7B.use_case%7D%7D%0A**User%20Story%3A**%20%7B%7B.user_story%7D%7D%0A**Acceptance%20Criteria%3A**%20%7B%7B.criteria%7D%7D%0A%0APlease%20assess%3A%0A1.%20Business%20value%20and%20impact%0A2.%20Technical%20feasibility%0A3.%20Implementation%20complexity%0A4.%20Potential%20risks%20and%20considerations%60%2C%0A%20%20%20%20%20%20%20%20Variables%3A%20%5B%5Dstring%7B%22feature%22%2C%20%22use_case%22%2C%20%22user_story%22%2C%20%22criteria%22%7D%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%0Afunc%20handleTemplatePrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20templateName%20%3A%3D%20req.Params.Arguments%5B%22template%22%5D.(string)%0A%20%20%20%20variables%20%3A%3D%20req.Params.Arguments%5B%22variables%22%5D.(map%5Bstring%5Dinterface%7B%7D)%0A%0A%20%20%20%20template%2C%20exists%20%3A%3D%20promptTemplates%5BtemplateName%5D%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20template%3A%20%25s%22%2C%20templateName)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Replace%20template%20variables%0A%20%20%20%20content%20%3A%3D%20template.Template%0A%20%20%20%20for%20_%2C%20variable%20%3A%3D%20range%20template.Variables%20%7B%0A%20%20%20%20%20%20%20%20if%20value%2C%20exists%20%3A%3D%20variables%5Bvariable%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placeholder%20%3A%3D%20fmt.Sprintf(%22%7B%7B.%25s%7D%7D%22%2C%20variable)%0A%20%20%20%20%20%20%20%20%20%20%20%20content%20%3D%20strings.ReplaceAll(content%2C%20placeholder%2C%20fmt.Sprintf(%22%25v%22%2C%20value))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20template.Description%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(content)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20typed%20tools%2C%20middleware%2C%20and%20hooks%0A-%20**%5BClient%20Integration%5D(%2Fclients)**%20-%20Learn%20how%20to%20build%20MCP%20clients%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Learn%20about%20implementing%20server%20tools",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./resources-V1qDlBS9.js"),[]),path:"/servers/resources",type:"mdx",filePath:"servers/resources.mdx",content:"%23%20Implementing%20Resources%0A%0AResources%20expose%20data%20to%20LLMs%20in%20a%20read-only%20manner.%20Think%20of%20them%20as%20GET%20endpoints%20that%20provide%20access%20to%20files%2C%20databases%2C%20APIs%2C%20or%20any%20other%20data%20source.%0A%0A%23%23%20Resource%20Fundamentals%0A%0AResources%20in%20MCP%20are%20identified%20by%20URIs%20and%20can%20be%20either%20static%20(fixed%20content)%20or%20dynamic%20(generated%20on-demand).%20They're%20perfect%20for%20giving%20LLMs%20access%20to%20documentation%2C%20configuration%20files%2C%20database%20records%2C%20or%20API%20responses.%0A%0A%23%23%23%20Basic%20Resource%20Structure%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20simple%20resource%0Aresource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22docs%3A%2F%2Freadme%22%2C%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20URI%20-%20unique%20identifier%0A%20%20%20%20%22Project%20README%22%2C%20%20%20%20%20%20%20%20%20%20%2F%2F%20Name%20-%20human-readable%0A%20%20%20%20mcp.WithResourceDescription(%22Main%20project%20documentation%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Static%20Resources%0A%0AStatic%20resources%20have%20fixed%20URIs%20and%20typically%20serve%20predetermined%20content.%0A%0A%23%23%23%20File-Based%20Resources%0A%0AExpose%20files%20from%20your%20filesystem%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22File%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20static%20file%20resource%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22file%3A%2F%2FREADME.md%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Project%20README%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Main%20project%20documentation%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleReadmeFile%2C%0A%20%20%20%20)%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleReadmeFile(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20content%2C%20err%20%3A%3D%20os.ReadFile(%22README.md%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20README%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22text%2Fmarkdown%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(content)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Configuration%20Resources%0A%0AExpose%20application%20configuration%3A%0A%0A%60%60%60go%0A%2F%2F%20Configuration%20resource%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22config%3A%2F%2Fapp%22%2C%0A%20%20%20%20%20%20%20%20%22Application%20Configuration%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Current%20application%20settings%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleAppConfig%2C%0A)%0A%0Afunc%20handleAppConfig(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20config%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22database_url%22%3A%20os.Getenv(%22DATABASE_URL%22)%2C%0A%20%20%20%20%20%20%20%20%22debug_mode%22%3A%20%20%20os.Getenv(%22DEBUG%22)%20%3D%3D%20%22true%22%2C%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%22features%22%3A%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22authentication%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22caching%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%22logging%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20configJSON%2C%20err%20%3A%3D%20json.Marshal(config)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(configJSON)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Resources%0A%0ADynamic%20resources%20use%20URI%20templates%20with%20parameters%2C%20allowing%20for%20flexible%2C%20parameterized%20access%20to%20data.%0A%0A%23%23%23%20URI%20Templates%0A%0AUse%20%60%7Bparameter%7D%60%20syntax%20for%20dynamic%20parts%3A%0A%0A%60%60%60go%0A%2F%2F%20User%20profile%20resource%20with%20dynamic%20user%20ID%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22users%3A%2F%2F%7Buser_id%7D%22%2C%0A%20%20%20%20%20%20%20%20%22User%20Profile%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22User%20profile%20information%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleUserProfile%2C%0A)%0A%0Afunc%20handleUserProfile(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20user_id%20from%20URI%0A%20%20%20%20userID%20%3A%3D%20extractUserID(req.Params.URI)%20%2F%2F%20%22users%3A%2F%2F123%22%20-%3E%20%22123%22%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Fetch%20user%20data%20(from%20database%2C%20API%2C%20etc.)%0A%20%20%20%20user%2C%20err%20%3A%3D%20getUserFromDB(userID)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22user%20not%20found%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(user)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20extractUserID(uri%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Extract%20ID%20from%20%22users%3A%2F%2F123%22%20format%0A%20%20%20%20parts%20%3A%3D%20strings.Split(uri%2C%20%22%3A%2F%2F%22)%0A%20%20%20%20if%20len(parts)%20%3D%3D%202%20%7B%0A%20%20%20%20%20%20%20%20return%20parts%5B1%5D%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22%22%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Database%20Resources%0A%0AExpose%20database%20records%20dynamically%3A%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22database%2Fsql%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0A%2F%2F%20Database%20table%20resource%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22db%3A%2F%2F%7Btable%7D%2F%7Bid%7D%22%2C%0A%20%20%20%20%20%20%20%20%22Database%20Record%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Access%20database%20records%20by%20table%20and%20ID%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleDatabaseRecord%2C%0A)%0A%0Afunc%20handleDatabaseRecord(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20table%2C%20id%20%3A%3D%20parseDBURI(req.Params.URI)%20%2F%2F%20%22db%3A%2F%2Fusers%2F123%22%20-%3E%20%22users%22%2C%20%22123%22%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20table%20name%20for%20security%0A%20%20%20%20allowedTables%20%3A%3D%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22users%22%3A%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20%22products%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%22orders%22%3A%20%20%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20!allowedTables%5Btable%5D%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22table%20not%20accessible%3A%20%25s%22%2C%20table)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Query%20database%0A%20%20%20%20query%20%3A%3D%20fmt.Sprintf(%22SELECT%20*%20FROM%20%25s%20WHERE%20id%20%3D%20%3F%22%2C%20table)%0A%20%20%20%20row%20%3A%3D%20db.QueryRowContext(ctx%2C%20query%2C%20id)%0A%20%20%20%20%0A%20%20%20%20var%20data%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20err%20%3A%3D%20scanRowToMap(row%2C%20%26data)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22record%20not%20found%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20API%20Resources%0A%0AProxy%20external%20APIs%20through%20resources%3A%0A%0A%60%60%60go%0A%2F%2F%20Weather%20API%20resource%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22weather%3A%2F%2F%7Blocation%7D%22%2C%0A%20%20%20%20%20%20%20%20%22Weather%20Data%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Current%20weather%20for%20a%20location%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleWeatherData%2C%0A)%0A%0Afunc%20handleWeatherData(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20location%20%3A%3D%20extractLocation(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Call%20external%20weather%20API%0A%20%20%20%20apiURL%20%3A%3D%20fmt.Sprintf(%22https%3A%2F%2Fapi.weather.com%2Fv1%2Fcurrent%3Flocation%3D%25s%26key%3D%25s%22%2C%20%0A%20%20%20%20%20%20%20%20url.QueryEscape(location)%2C%20os.Getenv(%22WEATHER_API_KEY%22))%0A%20%20%20%20%0A%20%20%20%20resp%2C%20err%20%3A%3D%20http.Get(apiURL)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22weather%20API%20error%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20resp.Body.Close()%0A%0A%20%20%20%20body%2C%20err%20%3A%3D%20io.ReadAll(resp.Body)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20response%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(body)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Content%20Types%0A%0AResources%20can%20serve%20different%20types%20of%20content%20with%20appropriate%20MIME%20types.%0A%0A%23%23%23%20Text%20Content%0A%0A%60%60%60go%0Afunc%20handleTextResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20content%20%3A%3D%20%22This%20is%20plain%20text%20content%22%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22text%2Fplain%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20content%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20JSON%20Content%0A%0A%60%60%60go%0Afunc%20handleJSONResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(%5B%5Dmcp.ResourceContents%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22message%22%3A%20%22Hello%2C%20World!%22%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22success%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Binary%20Content%0A%0A%60%60%60go%0Afunc%20handleImageResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20imageData%2C%20err%20%3A%3D%20os.ReadFile(%22logo.png%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Encode%20binary%20data%20as%20base64%0A%20%20%20%20encoded%20%3A%3D%20base64.StdEncoding.EncodeToString(imageData)%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22image%2Fpng%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Blob%3A%20%20%20%20%20encoded%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multiple%20Content%20Types%0A%0AA%20single%20resource%20can%20return%20multiple%20content%20representations%3A%0A%0A%60%60%60go%0Afunc%20handleMultiFormatResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%22John%20Doe%22%2C%0A%20%20%20%20%20%20%20%20%22age%22%3A%20%2030%2C%0A%20%20%20%20%20%20%20%20%22city%22%3A%20%22New%20York%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20JSON%20representation%0A%20%20%20%20jsonData%2C%20_%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Text%20representation%20%20%0A%20%20%20%20textData%20%3A%3D%20fmt.Sprintf(%22Name%3A%20%25s%5CnAge%3A%20%25d%5CnCity%3A%20%25s%22%2C%20%0A%20%20%20%20%20%20%20%20data%5B%22name%22%5D%2C%20data%5B%22age%22%5D%2C%20data%5B%22city%22%5D)%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22text%2Fplain%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20textData%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AProper%20error%20handling%20ensures%20robust%20resource%20access%3A%0A%0A%23%23%23%20Common%20Error%20Patterns%0A%0A%60%60%60go%0Afunc%20handleResourceWithErrors(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Validate%20URI%20format%0A%20%20%20%20if%20!isValidURI(req.Params.URI)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20URI%20format%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20permissions%0A%20%20%20%20if%20!hasPermission(ctx%2C%20req.Params.URI)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22access%20denied%20to%20resource%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20resource%20not%20found%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchResourceData(req.Params.URI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20ErrResourceNotFound)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22resource%20not%20found%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20resource%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Timeout%20Handling%0A%0A%60%60%60go%0Afunc%20handleResourceWithTimeout(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20timeout%20context%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20context%20in%20operations%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchDataWithContext(ctx%2C%20req.Params.URI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.DeadlineExceeded)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22resource%20fetch%20timeout%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Resource%20Listing%0A%0AImplement%20resource%20discovery%20for%20clients%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Resource%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20multiple%20resources%0A%20%20%20%20resources%20%3A%3D%20%5B%5Dstruct%20%7B%0A%20%20%20%20%20%20%20%20uri%20%20%20%20%20%20%20%20%20string%0A%20%20%20%20%20%20%20%20name%20%20%20%20%20%20%20%20string%0A%20%20%20%20%20%20%20%20description%20string%0A%20%20%20%20%20%20%20%20mimeType%20%20%20%20string%0A%20%20%20%20%20%20%20%20handler%20%20%20%20%20server.ResourceHandler%0A%20%20%20%20%7D%7B%0A%20%20%20%20%20%20%20%20%7B%22docs%3A%2F%2Freadme%22%2C%20%22README%22%2C%20%22Project%20documentation%22%2C%20%22text%2Fmarkdown%22%2C%20handleReadme%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22config%3A%2F%2Fapp%22%2C%20%22App%20Config%22%2C%20%22Application%20settings%22%2C%20%22application%2Fjson%22%2C%20handleConfig%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22users%3A%2F%2F%7Bid%7D%22%2C%20%22User%20Profile%22%2C%20%22User%20information%22%2C%20%22application%2Fjson%22%2C%20handleUser%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20for%20_%2C%20r%20%3A%3D%20range%20resources%20%7B%0A%20%20%20%20%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.NewResource(r.uri%2C%20r.name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(r.description)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(r.mimeType)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20r.handler%2C%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%7D%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%60%60%60%0A%0A%23%23%20Caching%20Resources%0A%0AImplement%20caching%20for%20expensive%20resources%3A%0A%0A%60%60%60go%0Atype%20CachedResourceHandler%20struct%20%7B%0A%20%20%20%20cache%20map%5Bstring%5DcacheEntry%0A%20%20%20%20mutex%20sync.RWMutex%0A%20%20%20%20ttl%20%20%20time.Duration%0A%7D%0A%0Atype%20cacheEntry%20struct%20%7B%0A%20%20%20%20data%20%20%20%20%20%20*mcp.ReadResourceResult%0A%20%20%20%20timestamp%20time.Time%0A%7D%0A%0Afunc%20(h%20*CachedResourceHandler)%20HandleResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20h.mutex.RLock()%0A%20%20%20%20if%20entry%2C%20exists%20%3A%3D%20h.cache%5Breq.Params.URI%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20time.Since(entry.timestamp)%20%3C%20h.ttl%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20h.mutex.RUnlock()%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20entry.data%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20h.mutex.RUnlock()%0A%0A%20%20%20%20%2F%2F%20Fetch%20fresh%20data%0A%20%20%20%20data%2C%20err%20%3A%3D%20h.fetchFreshData(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Cache%20the%20result%0A%20%20%20%20h.mutex.Lock()%0A%20%20%20%20h.cache%5Breq.Params.URI%5D%20%3D%20cacheEntry%7B%0A%20%20%20%20%20%20%20%20data%3A%20%20%20%20%20%20data%2C%0A%20%20%20%20%20%20%20%20timestamp%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%20%20%20%20h.mutex.Unlock()%0A%0A%20%20%20%20return%20data%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Learn%20to%20implement%20interactive%20functionality%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Create%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20hooks%2C%20middleware%2C%20and%20more",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./resources-V1qDlBS9.js"),[]),path:"/servers/resources.html",type:"mdx",filePath:"servers/resources.mdx",content:"%23%20Implementing%20Resources%0A%0AResources%20expose%20data%20to%20LLMs%20in%20a%20read-only%20manner.%20Think%20of%20them%20as%20GET%20endpoints%20that%20provide%20access%20to%20files%2C%20databases%2C%20APIs%2C%20or%20any%20other%20data%20source.%0A%0A%23%23%20Resource%20Fundamentals%0A%0AResources%20in%20MCP%20are%20identified%20by%20URIs%20and%20can%20be%20either%20static%20(fixed%20content)%20or%20dynamic%20(generated%20on-demand).%20They're%20perfect%20for%20giving%20LLMs%20access%20to%20documentation%2C%20configuration%20files%2C%20database%20records%2C%20or%20API%20responses.%0A%0A%23%23%23%20Basic%20Resource%20Structure%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20simple%20resource%0Aresource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22docs%3A%2F%2Freadme%22%2C%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20URI%20-%20unique%20identifier%0A%20%20%20%20%22Project%20README%22%2C%20%20%20%20%20%20%20%20%20%20%2F%2F%20Name%20-%20human-readable%0A%20%20%20%20mcp.WithResourceDescription(%22Main%20project%20documentation%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Static%20Resources%0A%0AStatic%20resources%20have%20fixed%20URIs%20and%20typically%20serve%20predetermined%20content.%0A%0A%23%23%23%20File-Based%20Resources%0A%0AExpose%20files%20from%20your%20filesystem%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22File%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20static%20file%20resource%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22file%3A%2F%2FREADME.md%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Project%20README%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Main%20project%20documentation%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleReadmeFile%2C%0A%20%20%20%20)%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleReadmeFile(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20content%2C%20err%20%3A%3D%20os.ReadFile(%22README.md%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20README%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22text%2Fmarkdown%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(content)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Configuration%20Resources%0A%0AExpose%20application%20configuration%3A%0A%0A%60%60%60go%0A%2F%2F%20Configuration%20resource%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22config%3A%2F%2Fapp%22%2C%0A%20%20%20%20%20%20%20%20%22Application%20Configuration%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Current%20application%20settings%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleAppConfig%2C%0A)%0A%0Afunc%20handleAppConfig(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20config%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22database_url%22%3A%20os.Getenv(%22DATABASE_URL%22)%2C%0A%20%20%20%20%20%20%20%20%22debug_mode%22%3A%20%20%20os.Getenv(%22DEBUG%22)%20%3D%3D%20%22true%22%2C%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%22features%22%3A%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22authentication%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22caching%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%22logging%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20configJSON%2C%20err%20%3A%3D%20json.Marshal(config)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(configJSON)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Resources%0A%0ADynamic%20resources%20use%20URI%20templates%20with%20parameters%2C%20allowing%20for%20flexible%2C%20parameterized%20access%20to%20data.%0A%0A%23%23%23%20URI%20Templates%0A%0AUse%20%60%7Bparameter%7D%60%20syntax%20for%20dynamic%20parts%3A%0A%0A%60%60%60go%0A%2F%2F%20User%20profile%20resource%20with%20dynamic%20user%20ID%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22users%3A%2F%2F%7Buser_id%7D%22%2C%0A%20%20%20%20%20%20%20%20%22User%20Profile%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22User%20profile%20information%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleUserProfile%2C%0A)%0A%0Afunc%20handleUserProfile(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20user_id%20from%20URI%0A%20%20%20%20userID%20%3A%3D%20extractUserID(req.Params.URI)%20%2F%2F%20%22users%3A%2F%2F123%22%20-%3E%20%22123%22%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Fetch%20user%20data%20(from%20database%2C%20API%2C%20etc.)%0A%20%20%20%20user%2C%20err%20%3A%3D%20getUserFromDB(userID)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22user%20not%20found%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(user)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20extractUserID(uri%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Extract%20ID%20from%20%22users%3A%2F%2F123%22%20format%0A%20%20%20%20parts%20%3A%3D%20strings.Split(uri%2C%20%22%3A%2F%2F%22)%0A%20%20%20%20if%20len(parts)%20%3D%3D%202%20%7B%0A%20%20%20%20%20%20%20%20return%20parts%5B1%5D%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22%22%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Database%20Resources%0A%0AExpose%20database%20records%20dynamically%3A%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22database%2Fsql%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0A%2F%2F%20Database%20table%20resource%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22db%3A%2F%2F%7Btable%7D%2F%7Bid%7D%22%2C%0A%20%20%20%20%20%20%20%20%22Database%20Record%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Access%20database%20records%20by%20table%20and%20ID%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleDatabaseRecord%2C%0A)%0A%0Afunc%20handleDatabaseRecord(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20table%2C%20id%20%3A%3D%20parseDBURI(req.Params.URI)%20%2F%2F%20%22db%3A%2F%2Fusers%2F123%22%20-%3E%20%22users%22%2C%20%22123%22%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20table%20name%20for%20security%0A%20%20%20%20allowedTables%20%3A%3D%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22users%22%3A%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20%22products%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%22orders%22%3A%20%20%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20!allowedTables%5Btable%5D%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22table%20not%20accessible%3A%20%25s%22%2C%20table)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Query%20database%0A%20%20%20%20query%20%3A%3D%20fmt.Sprintf(%22SELECT%20*%20FROM%20%25s%20WHERE%20id%20%3D%20%3F%22%2C%20table)%0A%20%20%20%20row%20%3A%3D%20db.QueryRowContext(ctx%2C%20query%2C%20id)%0A%20%20%20%20%0A%20%20%20%20var%20data%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20err%20%3A%3D%20scanRowToMap(row%2C%20%26data)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22record%20not%20found%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20API%20Resources%0A%0AProxy%20external%20APIs%20through%20resources%3A%0A%0A%60%60%60go%0A%2F%2F%20Weather%20API%20resource%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22weather%3A%2F%2F%7Blocation%7D%22%2C%0A%20%20%20%20%20%20%20%20%22Weather%20Data%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Current%20weather%20for%20a%20location%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleWeatherData%2C%0A)%0A%0Afunc%20handleWeatherData(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20location%20%3A%3D%20extractLocation(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Call%20external%20weather%20API%0A%20%20%20%20apiURL%20%3A%3D%20fmt.Sprintf(%22https%3A%2F%2Fapi.weather.com%2Fv1%2Fcurrent%3Flocation%3D%25s%26key%3D%25s%22%2C%20%0A%20%20%20%20%20%20%20%20url.QueryEscape(location)%2C%20os.Getenv(%22WEATHER_API_KEY%22))%0A%20%20%20%20%0A%20%20%20%20resp%2C%20err%20%3A%3D%20http.Get(apiURL)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22weather%20API%20error%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20resp.Body.Close()%0A%0A%20%20%20%20body%2C%20err%20%3A%3D%20io.ReadAll(resp.Body)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20response%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(body)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Content%20Types%0A%0AResources%20can%20serve%20different%20types%20of%20content%20with%20appropriate%20MIME%20types.%0A%0A%23%23%23%20Text%20Content%0A%0A%60%60%60go%0Afunc%20handleTextResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20content%20%3A%3D%20%22This%20is%20plain%20text%20content%22%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22text%2Fplain%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20content%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20JSON%20Content%0A%0A%60%60%60go%0Afunc%20handleJSONResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(%5B%5Dmcp.ResourceContents%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22message%22%3A%20%22Hello%2C%20World!%22%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22success%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Binary%20Content%0A%0A%60%60%60go%0Afunc%20handleImageResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20imageData%2C%20err%20%3A%3D%20os.ReadFile(%22logo.png%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Encode%20binary%20data%20as%20base64%0A%20%20%20%20encoded%20%3A%3D%20base64.StdEncoding.EncodeToString(imageData)%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22image%2Fpng%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Blob%3A%20%20%20%20%20encoded%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multiple%20Content%20Types%0A%0AA%20single%20resource%20can%20return%20multiple%20content%20representations%3A%0A%0A%60%60%60go%0Afunc%20handleMultiFormatResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%22John%20Doe%22%2C%0A%20%20%20%20%20%20%20%20%22age%22%3A%20%2030%2C%0A%20%20%20%20%20%20%20%20%22city%22%3A%20%22New%20York%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20JSON%20representation%0A%20%20%20%20jsonData%2C%20_%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Text%20representation%20%20%0A%20%20%20%20textData%20%3A%3D%20fmt.Sprintf(%22Name%3A%20%25s%5CnAge%3A%20%25d%5CnCity%3A%20%25s%22%2C%20%0A%20%20%20%20%20%20%20%20data%5B%22name%22%5D%2C%20data%5B%22age%22%5D%2C%20data%5B%22city%22%5D)%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22text%2Fplain%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20textData%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AProper%20error%20handling%20ensures%20robust%20resource%20access%3A%0A%0A%23%23%23%20Common%20Error%20Patterns%0A%0A%60%60%60go%0Afunc%20handleResourceWithErrors(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Validate%20URI%20format%0A%20%20%20%20if%20!isValidURI(req.Params.URI)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20URI%20format%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20permissions%0A%20%20%20%20if%20!hasPermission(ctx%2C%20req.Params.URI)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22access%20denied%20to%20resource%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20resource%20not%20found%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchResourceData(req.Params.URI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20ErrResourceNotFound)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22resource%20not%20found%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20resource%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Timeout%20Handling%0A%0A%60%60%60go%0Afunc%20handleResourceWithTimeout(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20timeout%20context%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20context%20in%20operations%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchDataWithContext(ctx%2C%20req.Params.URI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.DeadlineExceeded)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22resource%20fetch%20timeout%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Resource%20Listing%0A%0AImplement%20resource%20discovery%20for%20clients%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Resource%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20multiple%20resources%0A%20%20%20%20resources%20%3A%3D%20%5B%5Dstruct%20%7B%0A%20%20%20%20%20%20%20%20uri%20%20%20%20%20%20%20%20%20string%0A%20%20%20%20%20%20%20%20name%20%20%20%20%20%20%20%20string%0A%20%20%20%20%20%20%20%20description%20string%0A%20%20%20%20%20%20%20%20mimeType%20%20%20%20string%0A%20%20%20%20%20%20%20%20handler%20%20%20%20%20server.ResourceHandler%0A%20%20%20%20%7D%7B%0A%20%20%20%20%20%20%20%20%7B%22docs%3A%2F%2Freadme%22%2C%20%22README%22%2C%20%22Project%20documentation%22%2C%20%22text%2Fmarkdown%22%2C%20handleReadme%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22config%3A%2F%2Fapp%22%2C%20%22App%20Config%22%2C%20%22Application%20settings%22%2C%20%22application%2Fjson%22%2C%20handleConfig%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22users%3A%2F%2F%7Bid%7D%22%2C%20%22User%20Profile%22%2C%20%22User%20information%22%2C%20%22application%2Fjson%22%2C%20handleUser%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20for%20_%2C%20r%20%3A%3D%20range%20resources%20%7B%0A%20%20%20%20%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.NewResource(r.uri%2C%20r.name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(r.description)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(r.mimeType)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20r.handler%2C%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%7D%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%60%60%60%0A%0A%23%23%20Caching%20Resources%0A%0AImplement%20caching%20for%20expensive%20resources%3A%0A%0A%60%60%60go%0Atype%20CachedResourceHandler%20struct%20%7B%0A%20%20%20%20cache%20map%5Bstring%5DcacheEntry%0A%20%20%20%20mutex%20sync.RWMutex%0A%20%20%20%20ttl%20%20%20time.Duration%0A%7D%0A%0Atype%20cacheEntry%20struct%20%7B%0A%20%20%20%20data%20%20%20%20%20%20*mcp.ReadResourceResult%0A%20%20%20%20timestamp%20time.Time%0A%7D%0A%0Afunc%20(h%20*CachedResourceHandler)%20HandleResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20h.mutex.RLock()%0A%20%20%20%20if%20entry%2C%20exists%20%3A%3D%20h.cache%5Breq.Params.URI%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20time.Since(entry.timestamp)%20%3C%20h.ttl%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20h.mutex.RUnlock()%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20entry.data%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20h.mutex.RUnlock()%0A%0A%20%20%20%20%2F%2F%20Fetch%20fresh%20data%0A%20%20%20%20data%2C%20err%20%3A%3D%20h.fetchFreshData(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Cache%20the%20result%0A%20%20%20%20h.mutex.Lock()%0A%20%20%20%20h.cache%5Breq.Params.URI%5D%20%3D%20cacheEntry%7B%0A%20%20%20%20%20%20%20%20data%3A%20%20%20%20%20%20data%2C%0A%20%20%20%20%20%20%20%20timestamp%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%20%20%20%20h.mutex.Unlock()%0A%0A%20%20%20%20return%20data%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Learn%20to%20implement%20interactive%20functionality%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Create%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20hooks%2C%20middleware%2C%20and%20more",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./tools-DO7Btofw.js"),[]),path:"/servers/tools",type:"mdx",filePath:"servers/tools.mdx",content:"%23%20Implementing%20Tools%0A%0ATools%20provide%20functionality%20that%20LLMs%20can%20invoke%20to%20take%20actions%20or%20perform%20computations.%20Think%20of%20them%20as%20function%20calls%20that%20extend%20the%20LLM's%20capabilities.%0A%0A%23%23%20Tool%20Fundamentals%0A%0ATools%20are%20the%20primary%20way%20LLMs%20interact%20with%20your%20server%20to%20perform%20actions.%20They%20have%20structured%20schemas%20that%20define%20parameters%2C%20types%2C%20and%20constraints%2C%20ensuring%20type-safe%20interactions.%0A%0A%23%23%23%20Basic%20Tool%20Structure%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20simple%20tool%0Atool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20mcp.WithDescription(%22Perform%20arithmetic%20operations%22)%2C%0A%20%20%20%20mcp.WithString(%22operation%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Enum(%22add%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22divide%22)%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22The%20arithmetic%20operation%20to%20perform%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required()%2C%20mcp.Description(%22First%20number%22))%2C%0A%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required()%2C%20mcp.Description(%22Second%20number%22))%2C%0A)%0A%60%60%60%0A%0A%23%23%20Tool%20Definition%0A%0A%23%23%23%20Parameter%20Types%0A%0AMCP-Go%20supports%20various%20parameter%20types%20with%20validation%3A%0A%0A%60%60%60go%0A%2F%2F%20String%20parameters%0Amcp.WithString(%22name%22%2C%20%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Description(%22User's%20name%22)%2C%0A%20%20%20%20mcp.MinLength(1)%2C%0A%20%20%20%20mcp.MaxLength(100)%2C%0A)%0A%0A%2F%2F%20Number%20parameters%20%20%0Amcp.WithNumber(%22age%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Description(%22User's%20age%22)%2C%0A%20%20%20%20mcp.Minimum(0)%2C%0A%20%20%20%20mcp.Maximum(150)%2C%0A)%0A%0A%2F%2F%20Integer%20parameters%0Amcp.WithInteger(%22count%22%2C%0A%20%20%20%20mcp.Default(10)%2C%0A%20%20%20%20mcp.Description(%22Number%20of%20items%22)%2C%0A%20%20%20%20mcp.Minimum(1)%2C%0A%20%20%20%20mcp.Maximum(1000)%2C%0A)%0A%0A%2F%2F%20Boolean%20parameters%0Amcp.WithBoolean(%22enabled%22%2C%0A%20%20%20%20mcp.Default(true)%2C%0A%20%20%20%20mcp.Description(%22Whether%20feature%20is%20enabled%22)%2C%0A)%0A%0A%2F%2F%20Array%20parameters%0Amcp.WithArray(%22tags%22%2C%0A%20%20%20%20mcp.Description(%22List%20of%20tags%22)%2C%0A%20%20%20%20mcp.Items(mcp.StringSchema())%2C%0A)%0A%0A%2F%2F%20Object%20parameters%0Amcp.WithObject(%22config%22%2C%0A%20%20%20%20mcp.Description(%22Configuration%20object%22)%2C%0A%20%20%20%20mcp.Properties(map%5Bstring%5Dmcp.Schema%7B%0A%20%20%20%20%20%20%20%20%22timeout%22%3A%20mcp.NumberSchema()%2C%0A%20%20%20%20%20%20%20%20%22retries%22%3A%20mcp.IntegerSchema()%2C%0A%20%20%20%20%7D)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Enums%20and%20Constraints%0A%0A%60%60%60go%0A%2F%2F%20Enum%20values%0Amcp.WithString(%22priority%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Enum(%22low%22%2C%20%22medium%22%2C%20%22high%22%2C%20%22critical%22)%2C%0A%20%20%20%20mcp.Description(%22Task%20priority%20level%22)%2C%0A)%0A%0A%2F%2F%20String%20constraints%0Amcp.WithString(%22email%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Pattern(%60%5E%5Ba-zA-Z0-9._%25%2B-%5D%2B%40%5Ba-zA-Z0-9.-%5D%2B%5C.%5Ba-zA-Z%5D%7B2%2C%7D%24%60)%2C%0A%20%20%20%20mcp.Description(%22Valid%20email%20address%22)%2C%0A)%0A%0A%2F%2F%20Number%20constraints%0Amcp.WithNumber(%22price%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Minimum(0)%2C%0A%20%20%20%20mcp.ExclusiveMaximum(10000)%2C%0A%20%20%20%20mcp.Description(%22Product%20price%20in%20USD%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Tool%20Handlers%0A%0ATool%20handlers%20process%20the%20actual%20function%20calls%20from%20LLMs.%20MCP-Go%20provides%20convenient%20helper%20methods%20for%20safe%20parameter%20extraction.%0A%0A%23%23%23%20Parameter%20Extraction%20Methods%0A%0AMCP-Go%20offers%20several%20helper%20methods%20on%20%60CallToolRequest%60%20for%20type-safe%20parameter%20access%3A%0A%0A%60%60%60go%0A%2F%2F%20Required%20parameters%20-%20return%20error%20if%20missing%20or%20wrong%20type%0Aname%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0Aage%2C%20err%20%3A%3D%20req.RequireInt(%22age%22)%20%0Aprice%2C%20err%20%3A%3D%20req.RequireFloat(%22price%22)%0Aenabled%2C%20err%20%3A%3D%20req.RequireBool(%22enabled%22)%0A%0A%2F%2F%20Optional%20parameters%20with%20defaults%0Aname%20%3A%3D%20req.GetString(%22name%22%2C%20%22default%22)%0Acount%20%3A%3D%20req.GetInt(%22count%22%2C%2010)%0Aprice%20%3A%3D%20req.GetFloat(%22price%22%2C%200.0)%0Aenabled%20%3A%3D%20req.GetBool(%22enabled%22%2C%20false)%0A%0A%2F%2F%20Structured%20data%20binding%0Atype%20Config%20struct%20%7B%0A%20%20%20%20Timeout%20int%20%20%20%20%60json%3A%22timeout%22%60%0A%20%20%20%20Retries%20int%20%20%20%20%60json%3A%22retries%22%60%0A%20%20%20%20Debug%20%20%20bool%20%20%20%60json%3A%22debug%22%60%0A%7D%0Avar%20config%20Config%0Aif%20err%20%3A%3D%20req.BindArguments(%26config)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%7D%0A%0A%2F%2F%20Raw%20access%20(for%20backward%20compatibility)%0Aargs%20%3A%3D%20req.GetArguments()%20%2F%2F%20returns%20map%5Bstring%5Dany%0ArawArgs%20%3A%3D%20req.GetRawArguments()%20%2F%2F%20returns%20any%0A%60%60%60%0A%0A%23%23%23%20Basic%20Handler%20Pattern%0A%0A%60%60%60go%0Afunc%20handleCalculate(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20parameters%20using%20helper%20methods%0A%20%20%20%20operation%2C%20err%20%3A%3D%20req.RequireString(%22operation%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20x%2C%20err%20%3A%3D%20req.RequireFloat(%22x%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20y%2C%20err%20%3A%3D%20req.RequireFloat(%22y%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Perform%20calculation%0A%20%20%20%20var%20result%20float64%0A%20%20%20%20switch%20operation%20%7B%0A%20%20%20%20case%20%22add%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20%2B%20y%0A%20%20%20%20case%20%22subtract%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20-%20y%0A%20%20%20%20case%20%22multiply%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20*%20y%0A%20%20%20%20case%20%22divide%22%3A%0A%20%20%20%20%20%20%20%20if%20y%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22division%20by%20zero%22)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20%2F%20y%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22unknown%20operation%3A%20%25s%22%2C%20operation))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20result%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22%25.2f%22%2C%20result))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20File%20Operations%20Tool%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22File%20Tools%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20File%20creation%20tool%0A%20%20%20%20createFileTool%20%3A%3D%20mcp.NewTool(%22create_file%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Create%20a%20new%20file%20with%20content%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22path%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22File%20path%20to%20create%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22content%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22File%20content%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22encoding%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Default(%22utf-8%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Enum(%22utf-8%22%2C%20%22ascii%22%2C%20%22base64%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22File%20encoding%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(createFileTool%2C%20handleCreateFile)%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleCreateFile(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20path%2C%20err%20%3A%3D%20req.RequireString(%22path%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20content%2C%20err%20%3A%3D%20req.RequireString(%22content%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20encoding%20%3A%3D%20req.GetString(%22encoding%22%2C%20%22utf-8%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20path%20for%20security%0A%20%20%20%20if%20strings.Contains(path%2C%20%22..%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22invalid%20path%3A%20directory%20traversal%20not%20allowed%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20different%20encodings%0A%20%20%20%20var%20data%20%5B%5Dbyte%0A%20%20%20%20switch%20encoding%20%7B%0A%20%20%20%20case%20%22utf-8%22%3A%0A%20%20%20%20%20%20%20%20data%20%3D%20%5B%5Dbyte(content)%0A%20%20%20%20case%20%22ascii%22%3A%0A%20%20%20%20%20%20%20%20data%20%3D%20%5B%5Dbyte(content)%0A%20%20%20%20case%20%22base64%22%3A%0A%20%20%20%20%20%20%20%20var%20err%20error%0A%20%20%20%20%20%20%20%20data%2C%20err%20%3D%20base64.StdEncoding.DecodeString(content)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22invalid%20base64%20content%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20file%0A%20%20%20%20if%20err%20%3A%3D%20os.WriteFile(path%2C%20data%2C%200644)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20create%20file%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22File%20created%20successfully%3A%20%25s%22%2C%20path))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Database%20Query%20Tool%0A%0A%60%60%60go%0Afunc%20handleDatabaseQuery(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Define%20struct%20to%20bind%20both%20Query%20and%20Params%0A%20%20%20%20var%20args%20struct%20%7B%0A%20%20%20%20%20%20%20%20Query%20%20string%20%20%20%20%20%20%20%20%60json%3A%22query%22%60%0A%20%20%20%20%20%20%20%20Params%20%5B%5Dinterface%7B%7D%20%60json%3A%22params%22%60%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Bind%20arguments%20to%20the%20struct%0A%20%20%20%20if%20err%20%3A%3D%20req.BindArguments(%26args)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Extract%20values%20from%20the%20bound%20struct%0A%20%20%20%20query%20%3A%3D%20args.Query%0A%20%20%20%20params%20%3A%3D%20args.Params%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20query%20for%20security%20(basic%20example)%0A%20%20%20%20if%20!isSelectQuery(query)%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22only%20SELECT%20queries%20are%20allowed%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Execute%20query%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20rows%2C%20err%20%3A%3D%20db.QueryContext(ctx%2C%20query%2C%20params...)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22query%20failed%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Convert%20results%20to%20JSON%0A%20%20%20%20results%2C%20err%20%3A%3D%20rowsToJSON(rows)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20process%20results%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20resultData%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22query%22%3A%20%20%20query%2C%0A%20%20%20%20%20%20%20%20%22results%22%3A%20results%2C%0A%20%20%20%20%20%20%20%20%22count%22%3A%20%20%20len(results)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(resultData)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20results%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%0Afunc%20isSelectQuery(query%20string)%20bool%20%7B%0A%20%20%20%20trimmed%20%3A%3D%20strings.TrimSpace(strings.ToUpper(query))%0A%20%20%20%20return%20strings.HasPrefix(trimmed%2C%20%22SELECT%22)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Request%20Tool%0A%0A%60%60%60go%0Afunc%20handleHTTPRequest(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20url%2C%20err%20%3A%3D%20req.RequireString(%22url%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20method%2C%20err%20%3A%3D%20req.RequireString(%22method%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20body%20%3A%3D%20req.GetString(%22body%22%2C%20%22%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20headers%20(optional%20object%20parameter)%0A%20%20%20%20var%20headers%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20args%20%3A%3D%20req.GetArguments()%3B%20args%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20h%2C%20ok%20%3A%3D%20args%5B%22headers%22%5D.(map%5Bstring%5Dinterface%7B%7D)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20headers%20%3D%20h%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20HTTP%20request%0A%20%20%20%20httpReq%2C%20err%20%3A%3D%20http.NewRequestWithContext(ctx%2C%20method%2C%20url%2C%20strings.NewReader(body))%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20create%20request%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20headers%0A%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20headers%20%7B%0A%20%20%20%20%20%20%20%20httpReq.Header.Set(key%2C%20fmt.Sprintf(%22%25v%22%2C%20value))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Execute%20request%20with%20timeout%0A%20%20%20%20client%20%3A%3D%20%26http.Client%7BTimeout%3A%2030%20*%20time.Second%7D%0A%20%20%20%20resp%2C%20err%20%3A%3D%20client.Do(httpReq)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22request%20failed%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20defer%20resp.Body.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Read%20response%0A%20%20%20%20respBody%2C%20err%20%3A%3D%20io.ReadAll(resp.Body)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20read%20response%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20resultData%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status_code%22%3A%20resp.StatusCode%2C%0A%20%20%20%20%20%20%20%20%22headers%22%3A%20%20%20%20%20resp.Header%2C%0A%20%20%20%20%20%20%20%20%22body%22%3A%20%20%20%20%20%20%20%20string(respBody)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(resultData)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Argument%20Validation%0A%0A%23%23%23%20Type-Safe%20Parameter%20Extraction%0A%0AMCP-Go%20provides%20helper%20methods%20for%20safe%20parameter%20extraction%3A%0A%0A%60%60%60go%0Afunc%20handleValidatedTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Required%20parameters%20with%20validation%0A%20%20%20%20name%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20age%2C%20err%20%3A%3D%20req.RequireFloat(%22age%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Optional%20parameter%20with%20default%0A%20%20%20%20enabled%20%3A%3D%20req.GetBool(%22enabled%22%2C%20true)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20constraints%0A%20%20%20%20if%20len(name)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22name%20cannot%20be%20empty%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20age%20%3C%200%20%7C%7C%20age%20%3E%20150%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22age%20must%20be%20between%200%20and%20150%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20with%20validated%20parameters%0A%20%20%20%20result%20%3A%3D%20processUser(name%2C%20int(age)%2C%20enabled)%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(result)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Available%20Helper%20Methods%0A%0A%60%60%60go%0A%2F%2F%20Required%20parameters%20(return%20error%20if%20missing%20or%20wrong%20type)%0Aname%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0Aage%2C%20err%20%3A%3D%20req.RequireInt(%22age%22)%0Aprice%2C%20err%20%3A%3D%20req.RequireFloat(%22price%22)%0Aenabled%2C%20err%20%3A%3D%20req.RequireBool(%22enabled%22)%0A%0A%2F%2F%20Optional%20parameters%20with%20defaults%0Aname%20%3A%3D%20req.GetString(%22name%22%2C%20%22default%22)%0Acount%20%3A%3D%20req.GetInt(%22count%22%2C%2010)%0Aprice%20%3A%3D%20req.GetFloat(%22price%22%2C%200.0)%0Aenabled%20%3A%3D%20req.GetBool(%22enabled%22%2C%20false)%0A%0A%2F%2F%20Structured%20data%20binding%0Atype%20UserData%20struct%20%7B%0A%20%20%20%20Name%20string%20%60json%3A%22name%22%60%0A%20%20%20%20Age%20%20int%20%20%20%20%60json%3A%22age%22%60%0A%7D%0Avar%20user%20UserData%0Aif%20err%20%3A%3D%20req.BindArguments(%26user)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%7D%0A%60%60%60%0A%60%60%60%0A%0A%23%23%23%20Custom%20Validation%20Functions%0A%0A%60%60%60go%0Afunc%20validateEmail(email%20string)%20error%20%7B%0A%20%20%20%20emailRegex%20%3A%3D%20regexp.MustCompile(%60%5E%5Ba-zA-Z0-9._%25%2B-%5D%2B%40%5Ba-zA-Z0-9.-%5D%2B%5C.%5Ba-zA-Z%5D%7B2%2C%7D%24%60)%0A%20%20%20%20if%20!emailRegex.MatchString(email)%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22invalid%20email%20format%22)%0A%20%20%20%20%7D%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20validateURL(url%20string)%20error%20%7B%0A%20%20%20%20parsed%2C%20err%20%3A%3D%20url.Parse(url)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22invalid%20URL%20format%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20parsed.Scheme%20!%3D%20%22http%22%20%26%26%20parsed.Scheme%20!%3D%20%22https%22%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22URL%20must%20use%20http%20or%20https%20scheme%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Result%20Types%0A%0A%23%23%23%20Text%20Results%0A%0A%60%60%60go%0Afunc%20handleTextTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20message%20%3A%3D%20%22Operation%20completed%20successfully%22%0A%20%20%20%20return%20mcp.NewToolResultText(message)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20JSON%20Results%0A%0A%60%60%60go%0Afunc%20handleJSONTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%20%20%22success%22%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%22data%22%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22processed%22%3A%2042%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22errors%22%3A%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(result)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multiple%20Content%20Types%0A%0A%60%60%60go%0Afunc%20handleMultiContentTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%22John%20Doe%22%2C%0A%20%20%20%20%20%20%20%20%22age%22%3A%20%2030%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22User%20information%20retrieved%20successfully%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22Name%3A%20%25s%2C%20Age%3A%20%25d%22%2C%20data%5B%22name%22%5D%2C%20data%5B%22age%22%5D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Results%0A%0A%60%60%60go%0Afunc%20handleToolWithErrors(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20For%20validation%20errors%2C%20return%20error%20result%20(not%20Go%20error)%0A%20%20%20%20name%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20business%20logic%20errors%2C%20also%20return%20error%20result%0A%20%20%20%20if%20someCondition%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22invalid%20input%3A%20%22%20%2B%20reason)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20system%20errors%2C%20you%20can%20return%20Go%20errors%0A%20%20%20%20if%20systemError%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22system%20failure%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Or%20return%20structured%20error%20information%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22Operation%20failed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20IsError%3A%20true%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Tool%20Annotations%0A%0AProvide%20hints%20to%20help%20LLMs%20use%20your%20tools%20effectively%3A%0A%0A%60%60%60go%0Atool%20%3A%3D%20mcp.NewTool(%22search_database%22%2C%0A%20%20%20%20mcp.WithDescription(%22Search%20the%20product%20database%22)%2C%0A%20%20%20%20mcp.WithString(%22query%22%2C%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Search%20query%20(supports%20wildcards%20with%20*)%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22limit%22%2C%0A%20%20%20%20%20%20%20%20mcp.DefaultNumber(10)%2C%0A%20%20%20%20%20%20%20%20mcp.Minimum(1)%2C%0A%20%20%20%20%20%20%20%20mcp.Maximum(100)%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Maximum%20number%20of%20results%20to%20return%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithArray(%22categories%22%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Filter%20by%20product%20categories%22)%2C%0A%20%20%20%20%20%20%20%20mcp.Items(mcp.StringSchema())%2C%0A%20%20%20%20)%2C%0A)%0A%0As.AddTool(tool%2C%20handleSearchDatabase)%0A%60%60%60%0A%0A%23%23%20Advanced%20Tool%20Patterns%0A%0A%23%23%23%20Streaming%20Results%0A%0AFor%20long-running%20operations%2C%20consider%20streaming%20results%3A%0A%0A%60%60%60go%0Afunc%20handleStreamingTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20For%20operations%20that%20take%20time%2C%20provide%20progress%20updates%0A%20%20%20%20results%20%3A%3D%20%5B%5Dstring%7B%7D%0A%20%20%20%20%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Simulate%20work%0A%20%20%20%20%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20cancellation%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20results%20%3D%20append(results%2C%20fmt.Sprintf(%22Processed%20item%20%25d%22%2C%20i%2B1))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20resultData%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%22completed%22%2C%0A%20%20%20%20%20%20%20%20%22results%22%3A%20results%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(resultData)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Conditional%20Tools%0A%0ATools%20that%20are%20only%20available%20under%20certain%20conditions%3A%0A%0A%60%60%60go%0Afunc%20addConditionalTools(s%20*server.MCPServer%2C%20userRole%20string)%20%7B%0A%20%20%20%20%2F%2F%20Admin-only%20tools%0A%20%20%20%20if%20userRole%20%3D%3D%20%22admin%22%20%7B%0A%20%20%20%20%20%20%20%20adminTool%20%3A%3D%20mcp.NewTool(%22delete_user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Delete%20a%20user%20account%20(admin%20only)%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22user_id%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20s.AddTool(adminTool%2C%20handleDeleteUser)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20User%20tools%20available%20to%20all%0A%20%20%20%20userTool%20%3A%3D%20mcp.NewTool(%22get_profile%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20user%20profile%20information%22)%2C%0A%20%20%20%20)%0A%20%20%20%20s.AddTool(userTool%2C%20handleGetProfile)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Learn%20to%20create%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20typed%20tools%2C%20middleware%2C%20and%20hooks%0A-%20**%5BResources%5D(%2Fservers%2Fresources)**%20-%20Learn%20about%20exposing%20data%20sources",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./tools-DO7Btofw.js"),[]),path:"/servers/tools.html",type:"mdx",filePath:"servers/tools.mdx",content:"%23%20Implementing%20Tools%0A%0ATools%20provide%20functionality%20that%20LLMs%20can%20invoke%20to%20take%20actions%20or%20perform%20computations.%20Think%20of%20them%20as%20function%20calls%20that%20extend%20the%20LLM's%20capabilities.%0A%0A%23%23%20Tool%20Fundamentals%0A%0ATools%20are%20the%20primary%20way%20LLMs%20interact%20with%20your%20server%20to%20perform%20actions.%20They%20have%20structured%20schemas%20that%20define%20parameters%2C%20types%2C%20and%20constraints%2C%20ensuring%20type-safe%20interactions.%0A%0A%23%23%23%20Basic%20Tool%20Structure%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20simple%20tool%0Atool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20mcp.WithDescription(%22Perform%20arithmetic%20operations%22)%2C%0A%20%20%20%20mcp.WithString(%22operation%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Enum(%22add%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22divide%22)%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22The%20arithmetic%20operation%20to%20perform%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required()%2C%20mcp.Description(%22First%20number%22))%2C%0A%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required()%2C%20mcp.Description(%22Second%20number%22))%2C%0A)%0A%60%60%60%0A%0A%23%23%20Tool%20Definition%0A%0A%23%23%23%20Parameter%20Types%0A%0AMCP-Go%20supports%20various%20parameter%20types%20with%20validation%3A%0A%0A%60%60%60go%0A%2F%2F%20String%20parameters%0Amcp.WithString(%22name%22%2C%20%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Description(%22User's%20name%22)%2C%0A%20%20%20%20mcp.MinLength(1)%2C%0A%20%20%20%20mcp.MaxLength(100)%2C%0A)%0A%0A%2F%2F%20Number%20parameters%20%20%0Amcp.WithNumber(%22age%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Description(%22User's%20age%22)%2C%0A%20%20%20%20mcp.Minimum(0)%2C%0A%20%20%20%20mcp.Maximum(150)%2C%0A)%0A%0A%2F%2F%20Integer%20parameters%0Amcp.WithInteger(%22count%22%2C%0A%20%20%20%20mcp.Default(10)%2C%0A%20%20%20%20mcp.Description(%22Number%20of%20items%22)%2C%0A%20%20%20%20mcp.Minimum(1)%2C%0A%20%20%20%20mcp.Maximum(1000)%2C%0A)%0A%0A%2F%2F%20Boolean%20parameters%0Amcp.WithBoolean(%22enabled%22%2C%0A%20%20%20%20mcp.Default(true)%2C%0A%20%20%20%20mcp.Description(%22Whether%20feature%20is%20enabled%22)%2C%0A)%0A%0A%2F%2F%20Array%20parameters%0Amcp.WithArray(%22tags%22%2C%0A%20%20%20%20mcp.Description(%22List%20of%20tags%22)%2C%0A%20%20%20%20mcp.Items(mcp.StringSchema())%2C%0A)%0A%0A%2F%2F%20Object%20parameters%0Amcp.WithObject(%22config%22%2C%0A%20%20%20%20mcp.Description(%22Configuration%20object%22)%2C%0A%20%20%20%20mcp.Properties(map%5Bstring%5Dmcp.Schema%7B%0A%20%20%20%20%20%20%20%20%22timeout%22%3A%20mcp.NumberSchema()%2C%0A%20%20%20%20%20%20%20%20%22retries%22%3A%20mcp.IntegerSchema()%2C%0A%20%20%20%20%7D)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Enums%20and%20Constraints%0A%0A%60%60%60go%0A%2F%2F%20Enum%20values%0Amcp.WithString(%22priority%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Enum(%22low%22%2C%20%22medium%22%2C%20%22high%22%2C%20%22critical%22)%2C%0A%20%20%20%20mcp.Description(%22Task%20priority%20level%22)%2C%0A)%0A%0A%2F%2F%20String%20constraints%0Amcp.WithString(%22email%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Pattern(%60%5E%5Ba-zA-Z0-9._%25%2B-%5D%2B%40%5Ba-zA-Z0-9.-%5D%2B%5C.%5Ba-zA-Z%5D%7B2%2C%7D%24%60)%2C%0A%20%20%20%20mcp.Description(%22Valid%20email%20address%22)%2C%0A)%0A%0A%2F%2F%20Number%20constraints%0Amcp.WithNumber(%22price%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Minimum(0)%2C%0A%20%20%20%20mcp.ExclusiveMaximum(10000)%2C%0A%20%20%20%20mcp.Description(%22Product%20price%20in%20USD%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Tool%20Handlers%0A%0ATool%20handlers%20process%20the%20actual%20function%20calls%20from%20LLMs.%20MCP-Go%20provides%20convenient%20helper%20methods%20for%20safe%20parameter%20extraction.%0A%0A%23%23%23%20Parameter%20Extraction%20Methods%0A%0AMCP-Go%20offers%20several%20helper%20methods%20on%20%60CallToolRequest%60%20for%20type-safe%20parameter%20access%3A%0A%0A%60%60%60go%0A%2F%2F%20Required%20parameters%20-%20return%20error%20if%20missing%20or%20wrong%20type%0Aname%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0Aage%2C%20err%20%3A%3D%20req.RequireInt(%22age%22)%20%0Aprice%2C%20err%20%3A%3D%20req.RequireFloat(%22price%22)%0Aenabled%2C%20err%20%3A%3D%20req.RequireBool(%22enabled%22)%0A%0A%2F%2F%20Optional%20parameters%20with%20defaults%0Aname%20%3A%3D%20req.GetString(%22name%22%2C%20%22default%22)%0Acount%20%3A%3D%20req.GetInt(%22count%22%2C%2010)%0Aprice%20%3A%3D%20req.GetFloat(%22price%22%2C%200.0)%0Aenabled%20%3A%3D%20req.GetBool(%22enabled%22%2C%20false)%0A%0A%2F%2F%20Structured%20data%20binding%0Atype%20Config%20struct%20%7B%0A%20%20%20%20Timeout%20int%20%20%20%20%60json%3A%22timeout%22%60%0A%20%20%20%20Retries%20int%20%20%20%20%60json%3A%22retries%22%60%0A%20%20%20%20Debug%20%20%20bool%20%20%20%60json%3A%22debug%22%60%0A%7D%0Avar%20config%20Config%0Aif%20err%20%3A%3D%20req.BindArguments(%26config)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%7D%0A%0A%2F%2F%20Raw%20access%20(for%20backward%20compatibility)%0Aargs%20%3A%3D%20req.GetArguments()%20%2F%2F%20returns%20map%5Bstring%5Dany%0ArawArgs%20%3A%3D%20req.GetRawArguments()%20%2F%2F%20returns%20any%0A%60%60%60%0A%0A%23%23%23%20Basic%20Handler%20Pattern%0A%0A%60%60%60go%0Afunc%20handleCalculate(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20parameters%20using%20helper%20methods%0A%20%20%20%20operation%2C%20err%20%3A%3D%20req.RequireString(%22operation%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20x%2C%20err%20%3A%3D%20req.RequireFloat(%22x%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20y%2C%20err%20%3A%3D%20req.RequireFloat(%22y%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Perform%20calculation%0A%20%20%20%20var%20result%20float64%0A%20%20%20%20switch%20operation%20%7B%0A%20%20%20%20case%20%22add%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20%2B%20y%0A%20%20%20%20case%20%22subtract%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20-%20y%0A%20%20%20%20case%20%22multiply%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20*%20y%0A%20%20%20%20case%20%22divide%22%3A%0A%20%20%20%20%20%20%20%20if%20y%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22division%20by%20zero%22)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20%2F%20y%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22unknown%20operation%3A%20%25s%22%2C%20operation))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20result%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22%25.2f%22%2C%20result))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20File%20Operations%20Tool%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22File%20Tools%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20File%20creation%20tool%0A%20%20%20%20createFileTool%20%3A%3D%20mcp.NewTool(%22create_file%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Create%20a%20new%20file%20with%20content%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22path%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22File%20path%20to%20create%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22content%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22File%20content%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22encoding%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Default(%22utf-8%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Enum(%22utf-8%22%2C%20%22ascii%22%2C%20%22base64%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22File%20encoding%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(createFileTool%2C%20handleCreateFile)%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleCreateFile(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20path%2C%20err%20%3A%3D%20req.RequireString(%22path%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20content%2C%20err%20%3A%3D%20req.RequireString(%22content%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20encoding%20%3A%3D%20req.GetString(%22encoding%22%2C%20%22utf-8%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20path%20for%20security%0A%20%20%20%20if%20strings.Contains(path%2C%20%22..%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22invalid%20path%3A%20directory%20traversal%20not%20allowed%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20different%20encodings%0A%20%20%20%20var%20data%20%5B%5Dbyte%0A%20%20%20%20switch%20encoding%20%7B%0A%20%20%20%20case%20%22utf-8%22%3A%0A%20%20%20%20%20%20%20%20data%20%3D%20%5B%5Dbyte(content)%0A%20%20%20%20case%20%22ascii%22%3A%0A%20%20%20%20%20%20%20%20data%20%3D%20%5B%5Dbyte(content)%0A%20%20%20%20case%20%22base64%22%3A%0A%20%20%20%20%20%20%20%20var%20err%20error%0A%20%20%20%20%20%20%20%20data%2C%20err%20%3D%20base64.StdEncoding.DecodeString(content)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22invalid%20base64%20content%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20file%0A%20%20%20%20if%20err%20%3A%3D%20os.WriteFile(path%2C%20data%2C%200644)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20create%20file%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22File%20created%20successfully%3A%20%25s%22%2C%20path))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Database%20Query%20Tool%0A%0A%60%60%60go%0Afunc%20handleDatabaseQuery(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Define%20struct%20to%20bind%20both%20Query%20and%20Params%0A%20%20%20%20var%20args%20struct%20%7B%0A%20%20%20%20%20%20%20%20Query%20%20string%20%20%20%20%20%20%20%20%60json%3A%22query%22%60%0A%20%20%20%20%20%20%20%20Params%20%5B%5Dinterface%7B%7D%20%60json%3A%22params%22%60%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Bind%20arguments%20to%20the%20struct%0A%20%20%20%20if%20err%20%3A%3D%20req.BindArguments(%26args)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Extract%20values%20from%20the%20bound%20struct%0A%20%20%20%20query%20%3A%3D%20args.Query%0A%20%20%20%20params%20%3A%3D%20args.Params%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20query%20for%20security%20(basic%20example)%0A%20%20%20%20if%20!isSelectQuery(query)%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22only%20SELECT%20queries%20are%20allowed%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Execute%20query%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20rows%2C%20err%20%3A%3D%20db.QueryContext(ctx%2C%20query%2C%20params...)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22query%20failed%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Convert%20results%20to%20JSON%0A%20%20%20%20results%2C%20err%20%3A%3D%20rowsToJSON(rows)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20process%20results%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20resultData%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22query%22%3A%20%20%20query%2C%0A%20%20%20%20%20%20%20%20%22results%22%3A%20results%2C%0A%20%20%20%20%20%20%20%20%22count%22%3A%20%20%20len(results)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(resultData)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20results%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%0Afunc%20isSelectQuery(query%20string)%20bool%20%7B%0A%20%20%20%20trimmed%20%3A%3D%20strings.TrimSpace(strings.ToUpper(query))%0A%20%20%20%20return%20strings.HasPrefix(trimmed%2C%20%22SELECT%22)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Request%20Tool%0A%0A%60%60%60go%0Afunc%20handleHTTPRequest(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20url%2C%20err%20%3A%3D%20req.RequireString(%22url%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20method%2C%20err%20%3A%3D%20req.RequireString(%22method%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20body%20%3A%3D%20req.GetString(%22body%22%2C%20%22%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20headers%20(optional%20object%20parameter)%0A%20%20%20%20var%20headers%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20args%20%3A%3D%20req.GetArguments()%3B%20args%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20h%2C%20ok%20%3A%3D%20args%5B%22headers%22%5D.(map%5Bstring%5Dinterface%7B%7D)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20headers%20%3D%20h%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20HTTP%20request%0A%20%20%20%20httpReq%2C%20err%20%3A%3D%20http.NewRequestWithContext(ctx%2C%20method%2C%20url%2C%20strings.NewReader(body))%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20create%20request%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20headers%0A%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20headers%20%7B%0A%20%20%20%20%20%20%20%20httpReq.Header.Set(key%2C%20fmt.Sprintf(%22%25v%22%2C%20value))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Execute%20request%20with%20timeout%0A%20%20%20%20client%20%3A%3D%20%26http.Client%7BTimeout%3A%2030%20*%20time.Second%7D%0A%20%20%20%20resp%2C%20err%20%3A%3D%20client.Do(httpReq)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22request%20failed%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20defer%20resp.Body.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Read%20response%0A%20%20%20%20respBody%2C%20err%20%3A%3D%20io.ReadAll(resp.Body)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20read%20response%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20resultData%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status_code%22%3A%20resp.StatusCode%2C%0A%20%20%20%20%20%20%20%20%22headers%22%3A%20%20%20%20%20resp.Header%2C%0A%20%20%20%20%20%20%20%20%22body%22%3A%20%20%20%20%20%20%20%20string(respBody)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(resultData)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Argument%20Validation%0A%0A%23%23%23%20Type-Safe%20Parameter%20Extraction%0A%0AMCP-Go%20provides%20helper%20methods%20for%20safe%20parameter%20extraction%3A%0A%0A%60%60%60go%0Afunc%20handleValidatedTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Required%20parameters%20with%20validation%0A%20%20%20%20name%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20age%2C%20err%20%3A%3D%20req.RequireFloat(%22age%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Optional%20parameter%20with%20default%0A%20%20%20%20enabled%20%3A%3D%20req.GetBool(%22enabled%22%2C%20true)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20constraints%0A%20%20%20%20if%20len(name)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22name%20cannot%20be%20empty%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20age%20%3C%200%20%7C%7C%20age%20%3E%20150%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22age%20must%20be%20between%200%20and%20150%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20with%20validated%20parameters%0A%20%20%20%20result%20%3A%3D%20processUser(name%2C%20int(age)%2C%20enabled)%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(result)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Available%20Helper%20Methods%0A%0A%60%60%60go%0A%2F%2F%20Required%20parameters%20(return%20error%20if%20missing%20or%20wrong%20type)%0Aname%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0Aage%2C%20err%20%3A%3D%20req.RequireInt(%22age%22)%0Aprice%2C%20err%20%3A%3D%20req.RequireFloat(%22price%22)%0Aenabled%2C%20err%20%3A%3D%20req.RequireBool(%22enabled%22)%0A%0A%2F%2F%20Optional%20parameters%20with%20defaults%0Aname%20%3A%3D%20req.GetString(%22name%22%2C%20%22default%22)%0Acount%20%3A%3D%20req.GetInt(%22count%22%2C%2010)%0Aprice%20%3A%3D%20req.GetFloat(%22price%22%2C%200.0)%0Aenabled%20%3A%3D%20req.GetBool(%22enabled%22%2C%20false)%0A%0A%2F%2F%20Structured%20data%20binding%0Atype%20UserData%20struct%20%7B%0A%20%20%20%20Name%20string%20%60json%3A%22name%22%60%0A%20%20%20%20Age%20%20int%20%20%20%20%60json%3A%22age%22%60%0A%7D%0Avar%20user%20UserData%0Aif%20err%20%3A%3D%20req.BindArguments(%26user)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%7D%0A%60%60%60%0A%60%60%60%0A%0A%23%23%23%20Custom%20Validation%20Functions%0A%0A%60%60%60go%0Afunc%20validateEmail(email%20string)%20error%20%7B%0A%20%20%20%20emailRegex%20%3A%3D%20regexp.MustCompile(%60%5E%5Ba-zA-Z0-9._%25%2B-%5D%2B%40%5Ba-zA-Z0-9.-%5D%2B%5C.%5Ba-zA-Z%5D%7B2%2C%7D%24%60)%0A%20%20%20%20if%20!emailRegex.MatchString(email)%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22invalid%20email%20format%22)%0A%20%20%20%20%7D%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20validateURL(url%20string)%20error%20%7B%0A%20%20%20%20parsed%2C%20err%20%3A%3D%20url.Parse(url)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22invalid%20URL%20format%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20parsed.Scheme%20!%3D%20%22http%22%20%26%26%20parsed.Scheme%20!%3D%20%22https%22%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22URL%20must%20use%20http%20or%20https%20scheme%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Result%20Types%0A%0A%23%23%23%20Text%20Results%0A%0A%60%60%60go%0Afunc%20handleTextTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20message%20%3A%3D%20%22Operation%20completed%20successfully%22%0A%20%20%20%20return%20mcp.NewToolResultText(message)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20JSON%20Results%0A%0A%60%60%60go%0Afunc%20handleJSONTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%20%20%22success%22%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%22data%22%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22processed%22%3A%2042%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22errors%22%3A%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(result)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multiple%20Content%20Types%0A%0A%60%60%60go%0Afunc%20handleMultiContentTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%22John%20Doe%22%2C%0A%20%20%20%20%20%20%20%20%22age%22%3A%20%2030%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22User%20information%20retrieved%20successfully%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22Name%3A%20%25s%2C%20Age%3A%20%25d%22%2C%20data%5B%22name%22%5D%2C%20data%5B%22age%22%5D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Results%0A%0A%60%60%60go%0Afunc%20handleToolWithErrors(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20For%20validation%20errors%2C%20return%20error%20result%20(not%20Go%20error)%0A%20%20%20%20name%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20business%20logic%20errors%2C%20also%20return%20error%20result%0A%20%20%20%20if%20someCondition%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22invalid%20input%3A%20%22%20%2B%20reason)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20system%20errors%2C%20you%20can%20return%20Go%20errors%0A%20%20%20%20if%20systemError%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22system%20failure%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Or%20return%20structured%20error%20information%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22Operation%20failed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20IsError%3A%20true%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Tool%20Annotations%0A%0AProvide%20hints%20to%20help%20LLMs%20use%20your%20tools%20effectively%3A%0A%0A%60%60%60go%0Atool%20%3A%3D%20mcp.NewTool(%22search_database%22%2C%0A%20%20%20%20mcp.WithDescription(%22Search%20the%20product%20database%22)%2C%0A%20%20%20%20mcp.WithString(%22query%22%2C%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Search%20query%20(supports%20wildcards%20with%20*)%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22limit%22%2C%0A%20%20%20%20%20%20%20%20mcp.DefaultNumber(10)%2C%0A%20%20%20%20%20%20%20%20mcp.Minimum(1)%2C%0A%20%20%20%20%20%20%20%20mcp.Maximum(100)%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Maximum%20number%20of%20results%20to%20return%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithArray(%22categories%22%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Filter%20by%20product%20categories%22)%2C%0A%20%20%20%20%20%20%20%20mcp.Items(mcp.StringSchema())%2C%0A%20%20%20%20)%2C%0A)%0A%0As.AddTool(tool%2C%20handleSearchDatabase)%0A%60%60%60%0A%0A%23%23%20Advanced%20Tool%20Patterns%0A%0A%23%23%23%20Streaming%20Results%0A%0AFor%20long-running%20operations%2C%20consider%20streaming%20results%3A%0A%0A%60%60%60go%0Afunc%20handleStreamingTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20For%20operations%20that%20take%20time%2C%20provide%20progress%20updates%0A%20%20%20%20results%20%3A%3D%20%5B%5Dstring%7B%7D%0A%20%20%20%20%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Simulate%20work%0A%20%20%20%20%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20cancellation%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20results%20%3D%20append(results%2C%20fmt.Sprintf(%22Processed%20item%20%25d%22%2C%20i%2B1))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20resultData%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%22completed%22%2C%0A%20%20%20%20%20%20%20%20%22results%22%3A%20results%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(resultData)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Conditional%20Tools%0A%0ATools%20that%20are%20only%20available%20under%20certain%20conditions%3A%0A%0A%60%60%60go%0Afunc%20addConditionalTools(s%20*server.MCPServer%2C%20userRole%20string)%20%7B%0A%20%20%20%20%2F%2F%20Admin-only%20tools%0A%20%20%20%20if%20userRole%20%3D%3D%20%22admin%22%20%7B%0A%20%20%20%20%20%20%20%20adminTool%20%3A%3D%20mcp.NewTool(%22delete_user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Delete%20a%20user%20account%20(admin%20only)%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22user_id%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20s.AddTool(adminTool%2C%20handleDeleteUser)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20User%20tools%20available%20to%20all%0A%20%20%20%20userTool%20%3A%3D%20mcp.NewTool(%22get_profile%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20user%20profile%20information%22)%2C%0A%20%20%20%20)%0A%20%20%20%20s.AddTool(userTool%2C%20handleGetProfile)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Learn%20to%20create%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20typed%20tools%2C%20middleware%2C%20and%20hooks%0A-%20**%5BResources%5D(%2Fservers%2Fresources)**%20-%20Learn%20about%20exposing%20data%20sources",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./http-BqNvPawF.js"),[]),path:"/transports/http",type:"mdx",filePath:"transports/http.mdx",content:"%23%20HTTP%20Transport%0A%0AHTTP%20transport%20provides%20traditional%20request%2Fresponse%20communication%20for%20MCP%20servers%2C%20perfect%20for%20REST-like%20interactions%2C%20stateless%20clients%2C%20and%20integration%20with%20existing%20web%20infrastructure.%0A%0A%23%23%20Use%20Cases%0A%0AHTTP%20transport%20excels%20in%20scenarios%20requiring%3A%0A%0A-%20**Web%20services**%3A%20Traditional%20REST%20API%20patterns%0A-%20**Stateless%20interactions**%3A%20Each%20request%20is%20independent%0A-%20**Load%20balancing**%3A%20Distribute%20requests%20across%20multiple%20servers%0A-%20**Caching**%3A%20Leverage%20HTTP%20caching%20mechanisms%0A-%20**Integration**%3A%20Work%20with%20existing%20HTTP%20infrastructure%0A-%20**Public%20APIs**%3A%20Expose%20MCP%20functionality%20as%20web%20APIs%0A%0A**Example%20applications%3A**%0A-%20Microservice%20architectures%0A-%20Public%20API%20endpoints%0A-%20Integration%20with%20API%20gateways%0A-%20Cached%20data%20services%0A-%20Rate-limited%20services%0A-%20Multi-tenant%20applications%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20HTTP%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22net%2Fhttp%22%0A%20%20%20%20%22strings%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22HTTP%20API%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20RESTful%20tools%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20user%20information%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22user_id%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleGetUser%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22create_user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Create%20a%20new%20user%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22name%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22email%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithInteger(%22age%22%2C%20mcp.Minimum(0))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleCreateUser%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22search_users%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Search%20users%20with%20filters%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22query%22%2C%20mcp.Description(%22Search%20query%22))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithInteger(%22limit%22%2C%20mcp.Default(10)%2C%20mcp.Maximum(100))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithInteger(%22offset%22%2C%20mcp.Default(0)%2C%20mcp.Minimum(0))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSearchUsers%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20resources%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22users%3A%2F%2F%7Buser_id%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22User%20Profile%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22User%20profile%20data%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleUserResource%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20HTTP%20server%0A%20%20%20%20log.Println(%22Starting%20HTTP%20server%20on%20%3A8080%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeHTTP(s%2C%20%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleGetUser(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20userID%20%3A%3D%20req.Params.Arguments%5B%22user_id%22%5D.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Simulate%20database%20lookup%0A%20%20%20%20user%2C%20err%20%3A%3D%20getUserFromDB(userID)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22user%20not%20found%3A%20%25s%22%2C%20userID)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(user)%2C%20nil%0A%7D%0A%0Afunc%20handleCreateUser(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20name%20%3A%3D%20req.Params.Arguments%5B%22name%22%5D.(string)%0A%20%20%20%20email%20%3A%3D%20req.Params.Arguments%5B%22email%22%5D.(string)%0A%20%20%20%20age%20%3A%3D%20int(req.Params.Arguments%5B%22age%22%5D.(float64))%0A%0A%20%20%20%20%2F%2F%20Validate%20input%0A%20%20%20%20if%20!isValidEmail(email)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20email%20format%3A%20%25s%22%2C%20email)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20user%0A%20%20%20%20user%20%3A%3D%20%26User%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20generateID()%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%20%20%20%20email%2C%0A%20%20%20%20%20%20%20%20Age%3A%20%20%20%20%20%20%20age%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20saveUserToDB(user)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20user%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22id%22%3A%20%20%20%20%20%20user.ID%2C%0A%20%20%20%20%20%20%20%20%22message%22%3A%20%22User%20created%20successfully%22%2C%0A%20%20%20%20%20%20%20%20%22user%22%3A%20%20%20%20user%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0A%2F%2F%20Helper%20functions%20and%20types%20for%20the%20examples%0Atype%20User%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20%20string%20%20%20%20%60json%3A%22id%22%60%0A%20%20%20%20Name%20%20%20%20%20%20string%20%20%20%20%60json%3A%22name%22%60%0A%20%20%20%20Email%20%20%20%20%20string%20%20%20%20%60json%3A%22email%22%60%0A%20%20%20%20Age%20%20%20%20%20%20%20int%20%20%20%20%20%20%20%60json%3A%22age%22%60%0A%20%20%20%20CreatedAt%20time.Time%20%60json%3A%22created_at%22%60%0A%7D%0A%0Afunc%20getUserFromDB(userID%20string)%20(*User%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20%26User%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20userID%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%22John%20Doe%22%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%22john%40example.com%22%2C%0A%20%20%20%20%20%20%20%20Age%3A%20%20%2030%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20isValidEmail(email%20string)%20bool%20%7B%0A%20%20%20%20%2F%2F%20Simple%20email%20validation%0A%20%20%20%20return%20strings.Contains(email%2C%20%22%40%22)%20%26%26%20strings.Contains(email%2C%20%22.%22)%0A%7D%0A%0Afunc%20generateID()%20string%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20fmt.Sprintf(%22user_%25d%22%2C%20time.Now().UnixNano())%0A%7D%0A%0Afunc%20saveUserToDB(user%20*User)%20error%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20handleSearchUsers(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20query%20%3A%3D%20getStringParam(req.Params.Arguments%2C%20%22query%22%2C%20%22%22)%0A%20%20%20%20limit%20%3A%3D%20int(getFloatParam(req.Params.Arguments%2C%20%22limit%22%2C%2010))%0A%20%20%20%20offset%20%3A%3D%20int(getFloatParam(req.Params.Arguments%2C%20%22offset%22%2C%200))%0A%0A%20%20%20%20%2F%2F%20Search%20users%20with%20pagination%0A%20%20%20%20users%2C%20total%2C%20err%20%3A%3D%20searchUsersInDB(query%2C%20limit%2C%20offset)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22search%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22users%22%3A%20%20users%2C%0A%20%20%20%20%20%20%20%20%22total%22%3A%20%20total%2C%0A%20%20%20%20%20%20%20%20%22limit%22%3A%20%20limit%2C%0A%20%20%20%20%20%20%20%20%22offset%22%3A%20offset%2C%0A%20%20%20%20%20%20%20%20%22query%22%3A%20%20query%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0Afunc%20handleUserResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20userID%20%3A%3D%20extractUserIDFromURI(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20user%2C%20err%20%3A%3D%20getUserFromDB(userID)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22user%20not%20found%3A%20%25s%22%2C%20userID)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewResourceResultJSON(user)%2C%20nil%0A%7D%0A%0A%2F%2F%20Additional%20helper%20functions%20for%20parameter%20handling%0Afunc%20getStringParam(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%2C%20defaultValue%20string)%20string%20%7B%0A%20%20%20%20if%20val%2C%20ok%20%3A%3D%20args%5Bkey%5D%3B%20ok%20%26%26%20val%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20str%2C%20ok%20%3A%3D%20val.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20str%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%0Afunc%20getFloatParam(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%20string%2C%20defaultValue%20float64)%20float64%20%7B%0A%20%20%20%20if%20val%2C%20ok%20%3A%3D%20args%5Bkey%5D%3B%20ok%20%26%26%20val%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20f%2C%20ok%20%3A%3D%20val.(float64)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20f%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%0Afunc%20searchUsersInDB(query%20string%2C%20limit%2C%20offset%20int)%20(%5B%5D*User%2C%20int%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20users%20%3A%3D%20%5B%5D*User%7B%0A%20%20%20%20%20%20%20%20%7BID%3A%20%221%22%2C%20Name%3A%20%22John%20Doe%22%2C%20Email%3A%20%22john%40example.com%22%2C%20Age%3A%2030%7D%2C%0A%20%20%20%20%20%20%20%20%7BID%3A%20%222%22%2C%20Name%3A%20%22Jane%20Smith%22%2C%20Email%3A%20%22jane%40example.com%22%2C%20Age%3A%2025%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20return%20users%2C%20len(users)%2C%20nil%0A%7D%0A%0Afunc%20extractUserIDFromURI(uri%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Extract%20user%20ID%20from%20URI%20like%20%22users%3A%2F%2F123%22%0A%20%20%20%20parts%20%3A%3D%20strings.Split(uri%2C%20%22%3A%2F%2F%22)%0A%20%20%20%20if%20len(parts)%20%3E%201%20%7B%0A%20%20%20%20%20%20%20%20return%20parts%5B1%5D%0A%20%20%20%20%7D%0A%20%20%20%20return%20uri%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20HTTP%20Configuration%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Advanced%20HTTP%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithAllCapabilities()%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(%26server.Hooks%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20OnToolCall%3A%20logToolCall%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20OnResourceRead%3A%20logResourceRead%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Configure%20HTTP-specific%20options%0A%20%20%20%20httpOptions%20%3A%3D%20server.HTTPOptions%7B%0A%20%20%20%20%20%20%20%20BasePath%3A%20%20%20%20%20%20%20%20%20%22%2Fapi%2Fv1%2Fmcp%22%2C%0A%20%20%20%20%20%20%20%20ReadTimeout%3A%20%20%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20WriteTimeout%3A%20%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20IdleTimeout%3A%20%20%20%20%20%2060%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20MaxBodySize%3A%20%20%20%20%20%2010%20*%201024%20*%201024%2C%20%2F%2F%2010MB%0A%20%20%20%20%20%20%20%20EnableCORS%3A%20%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20AllowedOrigins%3A%20%20%20%5B%5Dstring%7B%22https%3A%2F%2Fmyapp.com%22%2C%20%22http%3A%2F%2Flocalhost%3A3000%22%7D%2C%0A%20%20%20%20%20%20%20%20AllowedMethods%3A%20%20%20%5B%5Dstring%7B%22GET%22%2C%20%22POST%22%2C%20%22OPTIONS%22%7D%2C%0A%20%20%20%20%20%20%20%20AllowedHeaders%3A%20%20%20%5B%5Dstring%7B%22Content-Type%22%2C%20%22Authorization%22%7D%2C%0A%20%20%20%20%20%20%20%20EnableGzip%3A%20%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20TrustedProxies%3A%20%20%20%5B%5Dstring%7B%2210.0.0.0%2F8%22%2C%20%22172.16.0.0%2F12%22%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20middleware%0A%20%20%20%20addHTTPMiddleware(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20comprehensive%20tools%0A%20%20%20%20addCRUDTools(s)%0A%20%20%20%20addBatchTools(s)%0A%20%20%20%20addAnalyticsTools(s)%0A%0A%20%20%20%20log.Println(%22Starting%20advanced%20HTTP%20server%20on%20%3A8080%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeHTTPWithOptions(s%2C%20%22%3A8080%22%2C%20httpOptions)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20advanced%20example%0Afunc%20addCRUDTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20CRUD%20tools%0A%7D%0A%0Afunc%20addBatchTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20batch%20processing%20tools%0A%7D%0A%0Afunc%20addAnalyticsTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20analytics%20tools%0A%7D%0A%0Afunc%20logToolCall(sessionID%2C%20toolName%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20failed%3A%20%25v%22%2C%20toolName%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20completed%20in%20%25v%22%2C%20toolName%2C%20duration)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20logResourceRead(sessionID%2C%20uri%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Resource%20read%20%25s%20failed%3A%20%25v%22%2C%20uri%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Resource%20read%20%25s%20completed%20in%20%25v%22%2C%20uri%2C%20duration)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20addHTTPMiddleware(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Authentication%20middleware%0A%20%20%20%20s.AddToolMiddleware(func(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Extract%20and%20validate%20auth%20token%0A%20%20%20%20%20%20%20%20%20%20%20%20token%20%3A%3D%20extractAuthToken(ctx)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20token%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22authentication%20required%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20user%2C%20err%20%3A%3D%20validateToken(token)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20token%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20user%20to%20context%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx%20%3D%20context.WithValue(ctx%2C%20%22user%22%2C%20user)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Rate%20limiting%20middleware%0A%20%20%20%20s.AddToolMiddleware(func(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clientIP%20%3A%3D%20getClientIP(ctx)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!rateLimiter.Allow(clientIP)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22rate%20limit%20exceeded%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Caching%20middleware%0A%20%20%20%20s.AddResourceMiddleware(func(next%20server.ResourceHandler)%20server.ResourceHandler%20%7B%0A%20%20%20%20%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20cache%20first%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20cached%20%3A%3D%20getFromCache(req.Params.URI)%3B%20cached%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Cache%20successful%20results%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setCache(req.Params.URI%2C%20result%2C%205*time.Minute)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%20Endpoints%0A%0A%23%23%23%20Standard%20MCP%20Endpoints%0A%0AWhen%20you%20start%20an%20HTTP%20MCP%20server%2C%20it%20automatically%20creates%20these%20endpoints%3A%0A%0A%60%60%60%0APOST%20%2Fmcp%2Finitialize%20%20%20%20%20-%20Initialize%20MCP%20session%0APOST%20%2Fmcp%2Ftools%2Flist%20%20%20%20%20-%20List%20available%20tools%0APOST%20%2Fmcp%2Ftools%2Fcall%20%20%20%20%20-%20Call%20a%20tool%0APOST%20%2Fmcp%2Fresources%2Flist%20-%20List%20available%20resources%0APOST%20%2Fmcp%2Fresources%2Fread%20-%20Read%20a%20resource%0APOST%20%2Fmcp%2Fprompts%2Flist%20%20%20-%20List%20available%20prompts%0APOST%20%2Fmcp%2Fprompts%2Fget%20%20%20%20-%20Get%20a%20prompt%0AGET%20%20%2Fmcp%2Fhealth%20%20%20%20%20%20%20%20%20-%20Health%20check%0AGET%20%20%2Fmcp%2Fcapabilities%20%20%20-%20Server%20capabilities%0A%60%60%60%0A%0A%23%23%23%20Custom%20Endpoints%0A%0AAdd%20custom%20HTTP%20endpoints%20alongside%20MCP%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Custom%20HTTP%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20HTTP%20server%20with%20custom%20routes%0A%20%20%20%20mux%20%3A%3D%20http.NewServeMux()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20MCP%20endpoints%0A%20%20%20%20server.AddMCPRoutes(mux%2C%20s%2C%20%22%2Fmcp%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20custom%20endpoints%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fstatus%22%2C%20handleStatus)%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fmetrics%22%2C%20handleMetrics)%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fusers%22%2C%20handleUsersAPI)%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fupload%22%2C%20handleFileUpload)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20middleware%0A%20%20%20%20handler%20%3A%3D%20addMiddleware(mux)%0A%20%20%20%20%0A%20%20%20%20log.Println(%22Starting%20custom%20HTTP%20server%20on%20%3A8080%22)%0A%20%20%20%20if%20err%20%3A%3D%20http.ListenAndServe(%22%3A8080%22%2C%20handler)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleStatus(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20status%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%20%20%22healthy%22%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%22uptime%22%3A%20%20%20%20time.Since(startTime).String()%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20w.Header().Set(%22Content-Type%22%2C%20%22application%2Fjson%22)%0A%20%20%20%20json.NewEncoder(w).Encode(status)%0A%7D%0A%0Afunc%20handleMetrics(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20metrics%20%3A%3D%20collectMetrics()%0A%20%20%20%20%0A%20%20%20%20w.Header().Set(%22Content-Type%22%2C%20%22application%2Fjson%22)%0A%20%20%20%20json.NewEncoder(w).Encode(metrics)%0A%7D%0A%0Afunc%20handleUsersAPI(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20switch%20r.Method%20%7B%0A%20%20%20%20case%20%22GET%22%3A%0A%20%20%20%20%20%20%20%20handleListUsers(w%2C%20r)%0A%20%20%20%20case%20%22POST%22%3A%0A%20%20%20%20%20%20%20%20handleCreateUserAPI(w%2C%20r)%0A%20%20%20%20case%20%22PUT%22%3A%0A%20%20%20%20%20%20%20%20handleUpdateUser(w%2C%20r)%0A%20%20%20%20case%20%22DELETE%22%3A%0A%20%20%20%20%20%20%20%20handleDeleteUser(w%2C%20r)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20http.Error(w%2C%20%22Method%20not%20allowed%22%2C%20http.StatusMethodNotAllowed)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Request%2FResponse%20Patterns%0A%0A%23%23%23%23%20Standard%20MCP%20Request%0A%0A%60%60%60json%0APOST%20%2Fmcp%2Ftools%2Fcall%0AContent-Type%3A%20application%2Fjson%0A%0A%7B%0A%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%22id%22%3A%201%2C%0A%20%20%22method%22%3A%20%22tools%2Fcall%22%2C%0A%20%20%22params%22%3A%20%7B%0A%20%20%20%20%22name%22%3A%20%22search_users%22%2C%0A%20%20%20%20%22arguments%22%3A%20%7B%0A%20%20%20%20%20%20%22query%22%3A%20%22john%22%2C%0A%20%20%20%20%20%20%22limit%22%3A%2010%2C%0A%20%20%20%20%20%20%22offset%22%3A%200%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Standard%20MCP%20Response%0A%0A%60%60%60json%0A%7B%0A%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%22id%22%3A%201%2C%0A%20%20%22result%22%3A%20%7B%0A%20%20%20%20%22content%22%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22type%22%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%22text%22%3A%20%22%7B%5C%22users%5C%22%3A%5B...%5D%2C%5C%22total%5C%22%3A25%2C%5C%22limit%5C%22%3A10%2C%5C%22offset%5C%22%3A0%7D%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%5D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Error%20Response%0A%0A%60%60%60json%0A%7B%0A%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%22id%22%3A%201%2C%0A%20%20%22error%22%3A%20%7B%0A%20%20%20%20%22code%22%3A%20-32602%2C%0A%20%20%20%20%22message%22%3A%20%22Invalid%20params%22%2C%0A%20%20%20%20%22data%22%3A%20%7B%0A%20%20%20%20%20%20%22details%22%3A%20%22user_id%20is%20required%22%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Session%20Management%0A%0A%23%23%23%20Stateful%20vs%20Stateless%0A%0A%23%23%23%23%20Stateless%20Design%20(Recommended)%0A%0A%60%60%60go%0A%2F%2F%20Each%20request%20is%20independent%0Afunc%20handleStatelessTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20all%20needed%20information%20from%20request%0A%20%20%20%20userID%20%3A%3D%20extractUserFromToken(ctx)%0A%20%20%20%20params%20%3A%3D%20req.Params.Arguments%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20without%20relying%20on%20server%20state%0A%20%20%20%20result%2C%20err%20%3A%3D%20processRequest(userID%2C%20params)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultJSON(result)%2C%20nil%0A%7D%0A%0A%2F%2F%20Use%20external%20storage%20for%20persistence%0Afunc%20getUserPreferences(userID%20string)%20(map%5Bstring%5Dinterface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Load%20from%20database%2C%20cache%2C%20etc.%0A%20%20%20%20return%20loadFromRedis(fmt.Sprintf(%22user%3A%25s%3Aprefs%22%2C%20userID))%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Stateful%20Design%20(When%20Needed)%0A%0A%60%60%60go%0Atype%20HTTPSessionManager%20struct%20%7B%0A%20%20%20%20sessions%20map%5Bstring%5D*HTTPSession%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%20%20%20%20cleanup%20%20*time.Ticker%0A%7D%0A%0Atype%20HTTPSession%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20%20%20%20string%0A%20%20%20%20UserID%20%20%20%20%20%20string%0A%20%20%20%20CreatedAt%20%20%20time.Time%0A%20%20%20%20LastAccess%20%20time.Time%0A%20%20%20%20Data%20%20%20%20%20%20%20%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20ExpiresAt%20%20%20time.Time%0A%7D%0A%0Afunc%20NewHTTPSessionManager()%20*HTTPSessionManager%20%7B%0A%20%20%20%20sm%20%3A%3D%20%26HTTPSessionManager%7B%0A%20%20%20%20%20%20%20%20sessions%3A%20make(map%5Bstring%5D*HTTPSession)%2C%0A%20%20%20%20%20%20%20%20cleanup%3A%20%20time.NewTicker(1%20*%20time.Minute)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20go%20sm.cleanupExpiredSessions()%0A%20%20%20%20return%20sm%0A%7D%0A%0Afunc%20(sm%20*HTTPSessionManager)%20CreateSession(userID%20string)%20*HTTPSession%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20session%20%3A%3D%20%26HTTPSession%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20%20generateSessionID()%2C%0A%20%20%20%20%20%20%20%20UserID%3A%20%20%20%20%20userID%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20%20time.Now()%2C%0A%20%20%20%20%20%20%20%20LastAccess%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20Data%3A%20%20%20%20%20%20%20make(map%5Bstring%5Dinterface%7B%7D)%2C%0A%20%20%20%20%20%20%20%20ExpiresAt%3A%20%20time.Now().Add(30%20*%20time.Minute)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20sm.sessions%5Bsession.ID%5D%20%3D%20session%0A%20%20%20%20return%20session%0A%7D%0A%0Afunc%20(sm%20*HTTPSessionManager)%20GetSession(sessionID%20string)%20(*HTTPSession%2C%20bool)%20%7B%0A%20%20%20%20sm.mutex.RLock()%0A%20%20%20%20defer%20sm.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20session%2C%20exists%20%3A%3D%20sm.sessions%5BsessionID%5D%0A%20%20%20%20if%20!exists%20%7C%7C%20time.Now().After(session.ExpiresAt)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Update%20last%20access%0A%20%20%20%20session.LastAccess%20%3D%20time.Now()%0A%20%20%20%20session.ExpiresAt%20%3D%20time.Now().Add(30%20*%20time.Minute)%0A%20%20%20%20%0A%20%20%20%20return%20session%2C%20true%0A%7D%0A%0Afunc%20(sm%20*HTTPSessionManager)%20cleanupExpiredSessions()%20%7B%0A%20%20%20%20for%20range%20sm.cleanup.C%20%7B%0A%20%20%20%20%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20%20%20%20%20now%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20id%2C%20session%20%3A%3D%20range%20sm.sessions%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20now.After(session.ExpiresAt)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete(sm.sessions%2C%20id)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20sm.mutex.Unlock()%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Authentication%20and%20Authorization%0A%0A%60%60%60go%0Atype%20AuthMiddleware%20struct%20%7B%0A%20%20%20%20jwtSecret%20%5B%5Dbyte%0A%20%20%20%20userStore%20UserStore%0A%7D%0A%0Afunc%20NewAuthMiddleware(secret%20%5B%5Dbyte%2C%20store%20UserStore)%20*AuthMiddleware%20%7B%0A%20%20%20%20return%20%26AuthMiddleware%7B%0A%20%20%20%20%20%20%20%20jwtSecret%3A%20secret%2C%0A%20%20%20%20%20%20%20%20userStore%3A%20store%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*AuthMiddleware)%20Middleware(next%20http.Handler)%20http.Handler%20%7B%0A%20%20%20%20return%20http.HandlerFunc(func(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Extract%20token%20from%20Authorization%20header%0A%20%20%20%20%20%20%20%20authHeader%20%3A%3D%20r.Header.Get(%22Authorization%22)%0A%20%20%20%20%20%20%20%20if%20!strings.HasPrefix(authHeader%2C%20%22Bearer%20%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20http.Error(w%2C%20%22Missing%20or%20invalid%20authorization%20header%22%2C%20http.StatusUnauthorized)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20token%20%3A%3D%20strings.TrimPrefix(authHeader%2C%20%22Bearer%20%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Validate%20JWT%20token%0A%20%20%20%20%20%20%20%20claims%2C%20err%20%3A%3D%20m.validateJWT(token)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20http.Error(w%2C%20%22Invalid%20token%22%2C%20http.StatusUnauthorized)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Load%20user%20information%0A%20%20%20%20%20%20%20%20user%2C%20err%20%3A%3D%20m.userStore.GetUser(claims.UserID)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20http.Error(w%2C%20%22User%20not%20found%22%2C%20http.StatusUnauthorized)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20user%20to%20request%20context%0A%20%20%20%20%20%20%20%20ctx%20%3A%3D%20context.WithValue(r.Context()%2C%20%22user%22%2C%20user)%0A%20%20%20%20%20%20%20%20next.ServeHTTP(w%2C%20r.WithContext(ctx))%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(m%20*AuthMiddleware)%20validateJWT(tokenString%20string)%20(*Claims%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Note%3A%20This%20example%20uses%20a%20hypothetical%20JWT%20library%0A%20%20%20%20%2F%2F%20In%20practice%2C%20you%20would%20use%20a%20real%20JWT%20library%20like%20github.com%2Fgolang-jwt%2Fjwt%0A%20%20%20%20token%2C%20err%20%3A%3D%20jwt.ParseWithClaims(tokenString%2C%20%26Claims%7B%7D%2C%20func(token%20*jwt.Token)%20(interface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20m.jwtSecret%2C%20nil%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20claims%2C%20ok%20%3A%3D%20token.Claims.(*Claims)%3B%20ok%20%26%26%20token.Valid%20%7B%0A%20%20%20%20%20%20%20%20return%20claims%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20token%22)%0A%7D%0A%0Atype%20Claims%20struct%20%7B%0A%20%20%20%20UserID%20string%20%60json%3A%22user_id%22%60%0A%20%20%20%20Role%20%20%20string%20%60json%3A%22role%22%60%0A%20%20%20%20jwt.StandardClaims%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Integration%0A%0A%23%23%23%20Go%20HTTP%20Client%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22log%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20HTTP%20client%0A%20%20%20%20c%20%3A%3D%20client.NewHTTPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20authentication%0A%20%20%20%20c.SetHeader(%22Authorization%22%2C%20%22Bearer%20your-jwt-token%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20custom%20headers%0A%20%20%20%20c.SetHeader(%22X-API-Version%22%2C%20%22v1%22)%0A%20%20%20%20c.SetHeader(%22X-Client-ID%22%2C%20%22my-app%22)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20List%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%0A%20%20%20%20%2F%2F%20Call%20tool%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22search_users%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22query%22%3A%20%22john%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22limit%22%3A%205%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20JavaScript%2FFetch%20Client%0A%0A%60%60%60javascript%0Aclass%20MCPHTTPClient%20%7B%0A%20%20%20%20constructor(baseURL%2C%20options%20%3D%20%7B%7D)%20%7B%0A%20%20%20%20%20%20%20%20this.baseURL%20%3D%20baseURL%3B%0A%20%20%20%20%20%20%20%20this.headers%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'Content-Type'%3A%20'application%2Fjson'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20...options.headers%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20this.requestId%20%3D%201%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAuthToken(token)%20%7B%0A%20%20%20%20%20%20%20%20this.headers%5B'Authorization'%5D%20%3D%20%60Bearer%20%24%7Btoken%7D%60%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20sendRequest(method%2C%20params%20%3D%20%7B%7D)%20%7B%0A%20%20%20%20%20%20%20%20const%20id%20%3D%20this.requestId%2B%2B%3B%0A%20%20%20%20%20%20%20%20const%20request%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20jsonrpc%3A%20'2.0'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20id%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20method%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20params%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20const%20response%20%3D%20await%20fetch(%60%24%7Bthis.baseURL%7D%2F%24%7Bmethod.replace('%2F'%2C%20'%2F')%7D%60%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20method%3A%20'POST'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20headers%3A%20this.headers%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20body%3A%20JSON.stringify(request)%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!response.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%60HTTP%20%24%7Bresponse.status%7D%3A%20%24%7Bresponse.statusText%7D%60)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20result%20%3D%20await%20response.json()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(result.error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(result.error.message)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20result.result%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20initialize()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.sendRequest('initialize'%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20protocolVersion%3A%20'2024-11-05'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20capabilities%3A%20%7B%20tools%3A%20%7B%7D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20clientInfo%3A%20%7B%20name%3A%20'Web%20Client'%2C%20version%3A%20'1.0.0'%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20listTools()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.sendRequest('tools%2Flist')%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20callTool(name%2C%20arguments)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.sendRequest('tools%2Fcall'%2C%20%7B%20name%2C%20arguments%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20listResources()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.sendRequest('resources%2Flist')%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20readResource(uri)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.sendRequest('resources%2Fread'%2C%20%7B%20uri%20%7D)%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aconst%20client%20%3D%20new%20MCPHTTPClient('http%3A%2F%2Flocalhost%3A8080%2Fmcp')%3B%0Aclient.setAuthToken('your-jwt-token')%3B%0A%0Aasync%20function%20main()%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20await%20client.initialize()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20tools%20%3D%20await%20client.listTools()%3B%0A%20%20%20%20%20%20%20%20console.log('Available%20tools%3A'%2C%20tools)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20result%20%3D%20await%20client.callTool('search_users'%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20query%3A%20'john'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20limit%3A%2010%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20console.log('Search%20result%3A'%2C%20result)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20console.error('Error%3A'%2C%20error)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Amain()%3B%0A%60%60%60%0A%0A%23%23%23%20cURL%20Examples%0A%0A%60%60%60bash%0A%23%20Initialize%20session%0Acurl%20-X%20POST%20http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Finitialize%20%5C%0A%20%20-H%20%22Content-Type%3A%20application%2Fjson%22%20%5C%0A%20%20-H%20%22Authorization%3A%20Bearer%20your-token%22%20%5C%0A%20%20-d%20'%7B%0A%20%20%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%20%20%22id%22%3A%201%2C%0A%20%20%20%20%22method%22%3A%20%22initialize%22%2C%0A%20%20%20%20%22params%22%3A%20%7B%0A%20%20%20%20%20%20%22protocolVersion%22%3A%20%222024-11-05%22%2C%0A%20%20%20%20%20%20%22capabilities%22%3A%20%7B%22tools%22%3A%20%7B%7D%7D%2C%0A%20%20%20%20%20%20%22clientInfo%22%3A%20%7B%22name%22%3A%20%22curl%22%2C%20%22version%22%3A%20%221.0.0%22%7D%0A%20%20%20%20%7D%0A%20%20%7D'%0A%0A%23%20List%20tools%0Acurl%20-X%20POST%20http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Ftools%2Flist%20%5C%0A%20%20-H%20%22Content-Type%3A%20application%2Fjson%22%20%5C%0A%20%20-H%20%22Authorization%3A%20Bearer%20your-token%22%20%5C%0A%20%20-d%20'%7B%0A%20%20%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%20%20%22id%22%3A%202%2C%0A%20%20%20%20%22method%22%3A%20%22tools%2Flist%22%2C%0A%20%20%20%20%22params%22%3A%20%7B%7D%0A%20%20%7D'%0A%0A%23%20Call%20tool%0Acurl%20-X%20POST%20http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Ftools%2Fcall%20%5C%0A%20%20-H%20%22Content-Type%3A%20application%2Fjson%22%20%5C%0A%20%20-H%20%22Authorization%3A%20Bearer%20your-token%22%20%5C%0A%20%20-d%20'%7B%0A%20%20%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%20%20%22id%22%3A%203%2C%0A%20%20%20%20%22method%22%3A%20%22tools%2Fcall%22%2C%0A%20%20%20%20%22params%22%3A%20%7B%0A%20%20%20%20%20%20%22name%22%3A%20%22search_users%22%2C%0A%20%20%20%20%20%20%22arguments%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22query%22%3A%20%22john%22%2C%0A%20%20%20%20%20%20%20%20%22limit%22%3A%2010%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D'%0A%0A%23%20Read%20resource%0Acurl%20-X%20POST%20http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fresources%2Fread%20%5C%0A%20%20-H%20%22Content-Type%3A%20application%2Fjson%22%20%5C%0A%20%20-H%20%22Authorization%3A%20Bearer%20your-token%22%20%5C%0A%20%20-d%20'%7B%0A%20%20%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%20%20%22id%22%3A%204%2C%0A%20%20%20%20%22method%22%3A%20%22resources%2Fread%22%2C%0A%20%20%20%20%22params%22%3A%20%7B%0A%20%20%20%20%20%20%22uri%22%3A%20%22users%3A%2F%2F123%22%0A%20%20%20%20%7D%0A%20%20%7D'%0A%60%60%60%0A%0A%23%23%20Performance%20and%20Scaling%0A%0A%23%23%23%20Load%20Balancing%0A%0A%60%60%60go%0A%2F%2F%20Use%20with%20nginx%20or%20HAProxy%0Aupstream%20mcp_servers%20%7B%0A%20%20%20%20server%20127.0.0.1%3A8080%3B%0A%20%20%20%20server%20127.0.0.1%3A8081%3B%0A%20%20%20%20server%20127.0.0.1%3A8082%3B%0A%7D%0A%0Aserver%20%7B%0A%20%20%20%20listen%2080%3B%0A%20%20%20%20server_name%20api.example.com%3B%0A%20%20%20%20%0A%20%20%20%20location%20%2Fmcp%2F%20%7B%0A%20%20%20%20%20%20%20%20proxy_pass%20http%3A%2F%2Fmcp_servers%3B%0A%20%20%20%20%20%20%20%20proxy_set_header%20Host%20%24host%3B%0A%20%20%20%20%20%20%20%20proxy_set_header%20X-Real-IP%20%24remote_addr%3B%0A%20%20%20%20%20%20%20%20proxy_set_header%20X-Forwarded-For%20%24proxy_add_x_forwarded_for%3B%0A%20%20%20%20%20%20%20%20proxy_set_header%20X-Forwarded-Proto%20%24scheme%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Caching%20Strategies%0A%0A%60%60%60go%0Atype%20CacheMiddleware%20struct%20%7B%0A%20%20%20%20cache%20map%5Bstring%5DcacheEntry%0A%20%20%20%20mutex%20sync.RWMutex%0A%20%20%20%20ttl%20%20%20time.Duration%0A%7D%0A%0Atype%20cacheEntry%20struct%20%7B%0A%20%20%20%20data%20%20%20%20%20%20*mcp.ReadResourceResult%0A%20%20%20%20timestamp%20time.Time%0A%20%20%20%20etag%20%20%20%20%20%20string%0A%7D%0A%0Afunc%20(m%20*CacheMiddleware)%20ResourceMiddleware(next%20server.ResourceHandler)%20server.ResourceHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20cache%0A%20%20%20%20%20%20%20%20m.mutex.RLock()%0A%20%20%20%20%20%20%20%20entry%2C%20exists%20%3A%3D%20m.cache%5Breq.Params.URI%5D%0A%20%20%20%20%20%20%20%20m.mutex.RUnlock()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20exists%20%26%26%20time.Since(entry.timestamp)%20%3C%20m.ttl%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20cache%20headers%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20httpCtx%20%3A%3D%20getHTTPContext(ctx)%3B%20httpCtx%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20httpCtx.Header().Set(%22Cache-Control%22%2C%20fmt.Sprintf(%22max-age%3D%25d%22%2C%20int(m.ttl.Seconds())))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20httpCtx.Header().Set(%22ETag%22%2C%20entry.etag)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20entry.data%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Fetch%20fresh%20data%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Cache%20result%0A%20%20%20%20%20%20%20%20etag%20%3A%3D%20generateETag(result)%0A%20%20%20%20%20%20%20%20m.mutex.Lock()%0A%20%20%20%20%20%20%20%20m.cache%5Breq.Params.URI%5D%20%3D%20cacheEntry%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20%20%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20timestamp%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20etag%3A%20%20%20%20%20%20etag%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20m.mutex.Unlock()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Set%20cache%20headers%0A%20%20%20%20%20%20%20%20if%20httpCtx%20%3A%3D%20getHTTPContext(ctx)%3B%20httpCtx%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20httpCtx.Header().Set(%22Cache-Control%22%2C%20fmt.Sprintf(%22max-age%3D%25d%22%2C%20int(m.ttl.Seconds())))%0A%20%20%20%20%20%20%20%20%20%20%20%20httpCtx.Header().Set(%22ETag%22%2C%20etag)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Rate%20Limiting%0A%0A%60%60%60go%0Atype%20RateLimiter%20struct%20%7B%0A%20%20%20%20limiters%20map%5Bstring%5D*rate.Limiter%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%20%20%20%20rate%20%20%20%20%20rate.Limit%0A%20%20%20%20burst%20%20%20%20int%0A%7D%0A%0Afunc%20NewRateLimiter(requestsPerSecond%20float64%2C%20burst%20int)%20*RateLimiter%20%7B%0A%20%20%20%20return%20%26RateLimiter%7B%0A%20%20%20%20%20%20%20%20limiters%3A%20make(map%5Bstring%5D*rate.Limiter)%2C%0A%20%20%20%20%20%20%20%20rate%3A%20%20%20%20%20rate.Limit(requestsPerSecond)%2C%0A%20%20%20%20%20%20%20%20burst%3A%20%20%20%20burst%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rl%20*RateLimiter)%20getLimiter(clientIP%20string)%20*rate.Limiter%20%7B%0A%20%20%20%20rl.mutex.RLock()%0A%20%20%20%20limiter%2C%20exists%20%3A%3D%20rl.limiters%5BclientIP%5D%0A%20%20%20%20rl.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20rl.mutex.Lock()%0A%20%20%20%20%20%20%20%20limiter%20%3D%20rate.NewLimiter(rl.rate%2C%20rl.burst)%0A%20%20%20%20%20%20%20%20rl.limiters%5BclientIP%5D%20%3D%20limiter%0A%20%20%20%20%20%20%20%20rl.mutex.Unlock()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20limiter%0A%7D%0A%0Afunc%20(rl%20*RateLimiter)%20Allow(clientIP%20string)%20bool%20%7B%0A%20%20%20%20return%20rl.getLimiter(clientIP).Allow()%0A%7D%0A%0A%2F%2F%20HTTP%20middleware%0Afunc%20(rl%20*RateLimiter)%20Middleware(next%20http.Handler)%20http.Handler%20%7B%0A%20%20%20%20return%20http.HandlerFunc(func(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20%20%20%20%20clientIP%20%3A%3D%20getClientIP(r)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20!rl.Allow(clientIP)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20http.Error(w%2C%20%22Rate%20limit%20exceeded%22%2C%20http.StatusTooManyRequests)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20next.ServeHTTP(w%2C%20r)%0A%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Learn%20about%20embedded%20scenarios%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Build%20MCP%20clients%20for%20HTTP%20transport%0A-%20**%5BServer%20Basics%5D(%2Fservers%2Fbasics)**%20-%20Review%20fundamental%20server%20concepts",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./http-BqNvPawF.js"),[]),path:"/transports/http.html",type:"mdx",filePath:"transports/http.mdx",content:"%23%20HTTP%20Transport%0A%0AHTTP%20transport%20provides%20traditional%20request%2Fresponse%20communication%20for%20MCP%20servers%2C%20perfect%20for%20REST-like%20interactions%2C%20stateless%20clients%2C%20and%20integration%20with%20existing%20web%20infrastructure.%0A%0A%23%23%20Use%20Cases%0A%0AHTTP%20transport%20excels%20in%20scenarios%20requiring%3A%0A%0A-%20**Web%20services**%3A%20Traditional%20REST%20API%20patterns%0A-%20**Stateless%20interactions**%3A%20Each%20request%20is%20independent%0A-%20**Load%20balancing**%3A%20Distribute%20requests%20across%20multiple%20servers%0A-%20**Caching**%3A%20Leverage%20HTTP%20caching%20mechanisms%0A-%20**Integration**%3A%20Work%20with%20existing%20HTTP%20infrastructure%0A-%20**Public%20APIs**%3A%20Expose%20MCP%20functionality%20as%20web%20APIs%0A%0A**Example%20applications%3A**%0A-%20Microservice%20architectures%0A-%20Public%20API%20endpoints%0A-%20Integration%20with%20API%20gateways%0A-%20Cached%20data%20services%0A-%20Rate-limited%20services%0A-%20Multi-tenant%20applications%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20HTTP%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22net%2Fhttp%22%0A%20%20%20%20%22strings%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22HTTP%20API%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20RESTful%20tools%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20user%20information%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22user_id%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleGetUser%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22create_user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Create%20a%20new%20user%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22name%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22email%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithInteger(%22age%22%2C%20mcp.Minimum(0))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleCreateUser%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22search_users%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Search%20users%20with%20filters%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22query%22%2C%20mcp.Description(%22Search%20query%22))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithInteger(%22limit%22%2C%20mcp.Default(10)%2C%20mcp.Maximum(100))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithInteger(%22offset%22%2C%20mcp.Default(0)%2C%20mcp.Minimum(0))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSearchUsers%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20resources%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22users%3A%2F%2F%7Buser_id%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22User%20Profile%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22User%20profile%20data%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleUserResource%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20HTTP%20server%0A%20%20%20%20log.Println(%22Starting%20HTTP%20server%20on%20%3A8080%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeHTTP(s%2C%20%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleGetUser(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20userID%20%3A%3D%20req.Params.Arguments%5B%22user_id%22%5D.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Simulate%20database%20lookup%0A%20%20%20%20user%2C%20err%20%3A%3D%20getUserFromDB(userID)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22user%20not%20found%3A%20%25s%22%2C%20userID)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(user)%2C%20nil%0A%7D%0A%0Afunc%20handleCreateUser(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20name%20%3A%3D%20req.Params.Arguments%5B%22name%22%5D.(string)%0A%20%20%20%20email%20%3A%3D%20req.Params.Arguments%5B%22email%22%5D.(string)%0A%20%20%20%20age%20%3A%3D%20int(req.Params.Arguments%5B%22age%22%5D.(float64))%0A%0A%20%20%20%20%2F%2F%20Validate%20input%0A%20%20%20%20if%20!isValidEmail(email)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20email%20format%3A%20%25s%22%2C%20email)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20user%0A%20%20%20%20user%20%3A%3D%20%26User%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20generateID()%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%20%20%20%20email%2C%0A%20%20%20%20%20%20%20%20Age%3A%20%20%20%20%20%20%20age%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20saveUserToDB(user)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20user%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22id%22%3A%20%20%20%20%20%20user.ID%2C%0A%20%20%20%20%20%20%20%20%22message%22%3A%20%22User%20created%20successfully%22%2C%0A%20%20%20%20%20%20%20%20%22user%22%3A%20%20%20%20user%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0A%2F%2F%20Helper%20functions%20and%20types%20for%20the%20examples%0Atype%20User%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20%20string%20%20%20%20%60json%3A%22id%22%60%0A%20%20%20%20Name%20%20%20%20%20%20string%20%20%20%20%60json%3A%22name%22%60%0A%20%20%20%20Email%20%20%20%20%20string%20%20%20%20%60json%3A%22email%22%60%0A%20%20%20%20Age%20%20%20%20%20%20%20int%20%20%20%20%20%20%20%60json%3A%22age%22%60%0A%20%20%20%20CreatedAt%20time.Time%20%60json%3A%22created_at%22%60%0A%7D%0A%0Afunc%20getUserFromDB(userID%20string)%20(*User%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20%26User%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20userID%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%22John%20Doe%22%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%22john%40example.com%22%2C%0A%20%20%20%20%20%20%20%20Age%3A%20%20%2030%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20isValidEmail(email%20string)%20bool%20%7B%0A%20%20%20%20%2F%2F%20Simple%20email%20validation%0A%20%20%20%20return%20strings.Contains(email%2C%20%22%40%22)%20%26%26%20strings.Contains(email%2C%20%22.%22)%0A%7D%0A%0Afunc%20generateID()%20string%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20fmt.Sprintf(%22user_%25d%22%2C%20time.Now().UnixNano())%0A%7D%0A%0Afunc%20saveUserToDB(user%20*User)%20error%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20handleSearchUsers(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20query%20%3A%3D%20getStringParam(req.Params.Arguments%2C%20%22query%22%2C%20%22%22)%0A%20%20%20%20limit%20%3A%3D%20int(getFloatParam(req.Params.Arguments%2C%20%22limit%22%2C%2010))%0A%20%20%20%20offset%20%3A%3D%20int(getFloatParam(req.Params.Arguments%2C%20%22offset%22%2C%200))%0A%0A%20%20%20%20%2F%2F%20Search%20users%20with%20pagination%0A%20%20%20%20users%2C%20total%2C%20err%20%3A%3D%20searchUsersInDB(query%2C%20limit%2C%20offset)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22search%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22users%22%3A%20%20users%2C%0A%20%20%20%20%20%20%20%20%22total%22%3A%20%20total%2C%0A%20%20%20%20%20%20%20%20%22limit%22%3A%20%20limit%2C%0A%20%20%20%20%20%20%20%20%22offset%22%3A%20offset%2C%0A%20%20%20%20%20%20%20%20%22query%22%3A%20%20query%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0Afunc%20handleUserResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20userID%20%3A%3D%20extractUserIDFromURI(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20user%2C%20err%20%3A%3D%20getUserFromDB(userID)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22user%20not%20found%3A%20%25s%22%2C%20userID)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewResourceResultJSON(user)%2C%20nil%0A%7D%0A%0A%2F%2F%20Additional%20helper%20functions%20for%20parameter%20handling%0Afunc%20getStringParam(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%2C%20defaultValue%20string)%20string%20%7B%0A%20%20%20%20if%20val%2C%20ok%20%3A%3D%20args%5Bkey%5D%3B%20ok%20%26%26%20val%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20str%2C%20ok%20%3A%3D%20val.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20str%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%0Afunc%20getFloatParam(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%20string%2C%20defaultValue%20float64)%20float64%20%7B%0A%20%20%20%20if%20val%2C%20ok%20%3A%3D%20args%5Bkey%5D%3B%20ok%20%26%26%20val%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20f%2C%20ok%20%3A%3D%20val.(float64)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20f%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%0Afunc%20searchUsersInDB(query%20string%2C%20limit%2C%20offset%20int)%20(%5B%5D*User%2C%20int%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20users%20%3A%3D%20%5B%5D*User%7B%0A%20%20%20%20%20%20%20%20%7BID%3A%20%221%22%2C%20Name%3A%20%22John%20Doe%22%2C%20Email%3A%20%22john%40example.com%22%2C%20Age%3A%2030%7D%2C%0A%20%20%20%20%20%20%20%20%7BID%3A%20%222%22%2C%20Name%3A%20%22Jane%20Smith%22%2C%20Email%3A%20%22jane%40example.com%22%2C%20Age%3A%2025%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20return%20users%2C%20len(users)%2C%20nil%0A%7D%0A%0Afunc%20extractUserIDFromURI(uri%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Extract%20user%20ID%20from%20URI%20like%20%22users%3A%2F%2F123%22%0A%20%20%20%20parts%20%3A%3D%20strings.Split(uri%2C%20%22%3A%2F%2F%22)%0A%20%20%20%20if%20len(parts)%20%3E%201%20%7B%0A%20%20%20%20%20%20%20%20return%20parts%5B1%5D%0A%20%20%20%20%7D%0A%20%20%20%20return%20uri%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20HTTP%20Configuration%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Advanced%20HTTP%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithAllCapabilities()%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(%26server.Hooks%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20OnToolCall%3A%20logToolCall%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20OnResourceRead%3A%20logResourceRead%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Configure%20HTTP-specific%20options%0A%20%20%20%20httpOptions%20%3A%3D%20server.HTTPOptions%7B%0A%20%20%20%20%20%20%20%20BasePath%3A%20%20%20%20%20%20%20%20%20%22%2Fapi%2Fv1%2Fmcp%22%2C%0A%20%20%20%20%20%20%20%20ReadTimeout%3A%20%20%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20WriteTimeout%3A%20%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20IdleTimeout%3A%20%20%20%20%20%2060%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20MaxBodySize%3A%20%20%20%20%20%2010%20*%201024%20*%201024%2C%20%2F%2F%2010MB%0A%20%20%20%20%20%20%20%20EnableCORS%3A%20%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20AllowedOrigins%3A%20%20%20%5B%5Dstring%7B%22https%3A%2F%2Fmyapp.com%22%2C%20%22http%3A%2F%2Flocalhost%3A3000%22%7D%2C%0A%20%20%20%20%20%20%20%20AllowedMethods%3A%20%20%20%5B%5Dstring%7B%22GET%22%2C%20%22POST%22%2C%20%22OPTIONS%22%7D%2C%0A%20%20%20%20%20%20%20%20AllowedHeaders%3A%20%20%20%5B%5Dstring%7B%22Content-Type%22%2C%20%22Authorization%22%7D%2C%0A%20%20%20%20%20%20%20%20EnableGzip%3A%20%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20TrustedProxies%3A%20%20%20%5B%5Dstring%7B%2210.0.0.0%2F8%22%2C%20%22172.16.0.0%2F12%22%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20middleware%0A%20%20%20%20addHTTPMiddleware(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20comprehensive%20tools%0A%20%20%20%20addCRUDTools(s)%0A%20%20%20%20addBatchTools(s)%0A%20%20%20%20addAnalyticsTools(s)%0A%0A%20%20%20%20log.Println(%22Starting%20advanced%20HTTP%20server%20on%20%3A8080%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeHTTPWithOptions(s%2C%20%22%3A8080%22%2C%20httpOptions)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20advanced%20example%0Afunc%20addCRUDTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20CRUD%20tools%0A%7D%0A%0Afunc%20addBatchTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20batch%20processing%20tools%0A%7D%0A%0Afunc%20addAnalyticsTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20analytics%20tools%0A%7D%0A%0Afunc%20logToolCall(sessionID%2C%20toolName%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20failed%3A%20%25v%22%2C%20toolName%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20completed%20in%20%25v%22%2C%20toolName%2C%20duration)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20logResourceRead(sessionID%2C%20uri%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Resource%20read%20%25s%20failed%3A%20%25v%22%2C%20uri%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Resource%20read%20%25s%20completed%20in%20%25v%22%2C%20uri%2C%20duration)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20addHTTPMiddleware(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Authentication%20middleware%0A%20%20%20%20s.AddToolMiddleware(func(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Extract%20and%20validate%20auth%20token%0A%20%20%20%20%20%20%20%20%20%20%20%20token%20%3A%3D%20extractAuthToken(ctx)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20token%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22authentication%20required%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20user%2C%20err%20%3A%3D%20validateToken(token)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20token%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20user%20to%20context%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx%20%3D%20context.WithValue(ctx%2C%20%22user%22%2C%20user)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Rate%20limiting%20middleware%0A%20%20%20%20s.AddToolMiddleware(func(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clientIP%20%3A%3D%20getClientIP(ctx)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!rateLimiter.Allow(clientIP)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22rate%20limit%20exceeded%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Caching%20middleware%0A%20%20%20%20s.AddResourceMiddleware(func(next%20server.ResourceHandler)%20server.ResourceHandler%20%7B%0A%20%20%20%20%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20cache%20first%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20cached%20%3A%3D%20getFromCache(req.Params.URI)%3B%20cached%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Cache%20successful%20results%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setCache(req.Params.URI%2C%20result%2C%205*time.Minute)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%20Endpoints%0A%0A%23%23%23%20Standard%20MCP%20Endpoints%0A%0AWhen%20you%20start%20an%20HTTP%20MCP%20server%2C%20it%20automatically%20creates%20these%20endpoints%3A%0A%0A%60%60%60%0APOST%20%2Fmcp%2Finitialize%20%20%20%20%20-%20Initialize%20MCP%20session%0APOST%20%2Fmcp%2Ftools%2Flist%20%20%20%20%20-%20List%20available%20tools%0APOST%20%2Fmcp%2Ftools%2Fcall%20%20%20%20%20-%20Call%20a%20tool%0APOST%20%2Fmcp%2Fresources%2Flist%20-%20List%20available%20resources%0APOST%20%2Fmcp%2Fresources%2Fread%20-%20Read%20a%20resource%0APOST%20%2Fmcp%2Fprompts%2Flist%20%20%20-%20List%20available%20prompts%0APOST%20%2Fmcp%2Fprompts%2Fget%20%20%20%20-%20Get%20a%20prompt%0AGET%20%20%2Fmcp%2Fhealth%20%20%20%20%20%20%20%20%20-%20Health%20check%0AGET%20%20%2Fmcp%2Fcapabilities%20%20%20-%20Server%20capabilities%0A%60%60%60%0A%0A%23%23%23%20Custom%20Endpoints%0A%0AAdd%20custom%20HTTP%20endpoints%20alongside%20MCP%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Custom%20HTTP%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20HTTP%20server%20with%20custom%20routes%0A%20%20%20%20mux%20%3A%3D%20http.NewServeMux()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20MCP%20endpoints%0A%20%20%20%20server.AddMCPRoutes(mux%2C%20s%2C%20%22%2Fmcp%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20custom%20endpoints%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fstatus%22%2C%20handleStatus)%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fmetrics%22%2C%20handleMetrics)%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fusers%22%2C%20handleUsersAPI)%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fupload%22%2C%20handleFileUpload)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20middleware%0A%20%20%20%20handler%20%3A%3D%20addMiddleware(mux)%0A%20%20%20%20%0A%20%20%20%20log.Println(%22Starting%20custom%20HTTP%20server%20on%20%3A8080%22)%0A%20%20%20%20if%20err%20%3A%3D%20http.ListenAndServe(%22%3A8080%22%2C%20handler)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleStatus(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20status%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%20%20%22healthy%22%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%22uptime%22%3A%20%20%20%20time.Since(startTime).String()%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20w.Header().Set(%22Content-Type%22%2C%20%22application%2Fjson%22)%0A%20%20%20%20json.NewEncoder(w).Encode(status)%0A%7D%0A%0Afunc%20handleMetrics(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20metrics%20%3A%3D%20collectMetrics()%0A%20%20%20%20%0A%20%20%20%20w.Header().Set(%22Content-Type%22%2C%20%22application%2Fjson%22)%0A%20%20%20%20json.NewEncoder(w).Encode(metrics)%0A%7D%0A%0Afunc%20handleUsersAPI(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20switch%20r.Method%20%7B%0A%20%20%20%20case%20%22GET%22%3A%0A%20%20%20%20%20%20%20%20handleListUsers(w%2C%20r)%0A%20%20%20%20case%20%22POST%22%3A%0A%20%20%20%20%20%20%20%20handleCreateUserAPI(w%2C%20r)%0A%20%20%20%20case%20%22PUT%22%3A%0A%20%20%20%20%20%20%20%20handleUpdateUser(w%2C%20r)%0A%20%20%20%20case%20%22DELETE%22%3A%0A%20%20%20%20%20%20%20%20handleDeleteUser(w%2C%20r)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20http.Error(w%2C%20%22Method%20not%20allowed%22%2C%20http.StatusMethodNotAllowed)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Request%2FResponse%20Patterns%0A%0A%23%23%23%23%20Standard%20MCP%20Request%0A%0A%60%60%60json%0APOST%20%2Fmcp%2Ftools%2Fcall%0AContent-Type%3A%20application%2Fjson%0A%0A%7B%0A%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%22id%22%3A%201%2C%0A%20%20%22method%22%3A%20%22tools%2Fcall%22%2C%0A%20%20%22params%22%3A%20%7B%0A%20%20%20%20%22name%22%3A%20%22search_users%22%2C%0A%20%20%20%20%22arguments%22%3A%20%7B%0A%20%20%20%20%20%20%22query%22%3A%20%22john%22%2C%0A%20%20%20%20%20%20%22limit%22%3A%2010%2C%0A%20%20%20%20%20%20%22offset%22%3A%200%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Standard%20MCP%20Response%0A%0A%60%60%60json%0A%7B%0A%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%22id%22%3A%201%2C%0A%20%20%22result%22%3A%20%7B%0A%20%20%20%20%22content%22%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22type%22%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%22text%22%3A%20%22%7B%5C%22users%5C%22%3A%5B...%5D%2C%5C%22total%5C%22%3A25%2C%5C%22limit%5C%22%3A10%2C%5C%22offset%5C%22%3A0%7D%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%5D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Error%20Response%0A%0A%60%60%60json%0A%7B%0A%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%22id%22%3A%201%2C%0A%20%20%22error%22%3A%20%7B%0A%20%20%20%20%22code%22%3A%20-32602%2C%0A%20%20%20%20%22message%22%3A%20%22Invalid%20params%22%2C%0A%20%20%20%20%22data%22%3A%20%7B%0A%20%20%20%20%20%20%22details%22%3A%20%22user_id%20is%20required%22%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Session%20Management%0A%0A%23%23%23%20Stateful%20vs%20Stateless%0A%0A%23%23%23%23%20Stateless%20Design%20(Recommended)%0A%0A%60%60%60go%0A%2F%2F%20Each%20request%20is%20independent%0Afunc%20handleStatelessTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20all%20needed%20information%20from%20request%0A%20%20%20%20userID%20%3A%3D%20extractUserFromToken(ctx)%0A%20%20%20%20params%20%3A%3D%20req.Params.Arguments%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20without%20relying%20on%20server%20state%0A%20%20%20%20result%2C%20err%20%3A%3D%20processRequest(userID%2C%20params)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultJSON(result)%2C%20nil%0A%7D%0A%0A%2F%2F%20Use%20external%20storage%20for%20persistence%0Afunc%20getUserPreferences(userID%20string)%20(map%5Bstring%5Dinterface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Load%20from%20database%2C%20cache%2C%20etc.%0A%20%20%20%20return%20loadFromRedis(fmt.Sprintf(%22user%3A%25s%3Aprefs%22%2C%20userID))%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Stateful%20Design%20(When%20Needed)%0A%0A%60%60%60go%0Atype%20HTTPSessionManager%20struct%20%7B%0A%20%20%20%20sessions%20map%5Bstring%5D*HTTPSession%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%20%20%20%20cleanup%20%20*time.Ticker%0A%7D%0A%0Atype%20HTTPSession%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20%20%20%20string%0A%20%20%20%20UserID%20%20%20%20%20%20string%0A%20%20%20%20CreatedAt%20%20%20time.Time%0A%20%20%20%20LastAccess%20%20time.Time%0A%20%20%20%20Data%20%20%20%20%20%20%20%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20ExpiresAt%20%20%20time.Time%0A%7D%0A%0Afunc%20NewHTTPSessionManager()%20*HTTPSessionManager%20%7B%0A%20%20%20%20sm%20%3A%3D%20%26HTTPSessionManager%7B%0A%20%20%20%20%20%20%20%20sessions%3A%20make(map%5Bstring%5D*HTTPSession)%2C%0A%20%20%20%20%20%20%20%20cleanup%3A%20%20time.NewTicker(1%20*%20time.Minute)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20go%20sm.cleanupExpiredSessions()%0A%20%20%20%20return%20sm%0A%7D%0A%0Afunc%20(sm%20*HTTPSessionManager)%20CreateSession(userID%20string)%20*HTTPSession%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20session%20%3A%3D%20%26HTTPSession%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20%20generateSessionID()%2C%0A%20%20%20%20%20%20%20%20UserID%3A%20%20%20%20%20userID%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20%20time.Now()%2C%0A%20%20%20%20%20%20%20%20LastAccess%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20Data%3A%20%20%20%20%20%20%20make(map%5Bstring%5Dinterface%7B%7D)%2C%0A%20%20%20%20%20%20%20%20ExpiresAt%3A%20%20time.Now().Add(30%20*%20time.Minute)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20sm.sessions%5Bsession.ID%5D%20%3D%20session%0A%20%20%20%20return%20session%0A%7D%0A%0Afunc%20(sm%20*HTTPSessionManager)%20GetSession(sessionID%20string)%20(*HTTPSession%2C%20bool)%20%7B%0A%20%20%20%20sm.mutex.RLock()%0A%20%20%20%20defer%20sm.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20session%2C%20exists%20%3A%3D%20sm.sessions%5BsessionID%5D%0A%20%20%20%20if%20!exists%20%7C%7C%20time.Now().After(session.ExpiresAt)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Update%20last%20access%0A%20%20%20%20session.LastAccess%20%3D%20time.Now()%0A%20%20%20%20session.ExpiresAt%20%3D%20time.Now().Add(30%20*%20time.Minute)%0A%20%20%20%20%0A%20%20%20%20return%20session%2C%20true%0A%7D%0A%0Afunc%20(sm%20*HTTPSessionManager)%20cleanupExpiredSessions()%20%7B%0A%20%20%20%20for%20range%20sm.cleanup.C%20%7B%0A%20%20%20%20%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20%20%20%20%20now%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20id%2C%20session%20%3A%3D%20range%20sm.sessions%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20now.After(session.ExpiresAt)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete(sm.sessions%2C%20id)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20sm.mutex.Unlock()%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Authentication%20and%20Authorization%0A%0A%60%60%60go%0Atype%20AuthMiddleware%20struct%20%7B%0A%20%20%20%20jwtSecret%20%5B%5Dbyte%0A%20%20%20%20userStore%20UserStore%0A%7D%0A%0Afunc%20NewAuthMiddleware(secret%20%5B%5Dbyte%2C%20store%20UserStore)%20*AuthMiddleware%20%7B%0A%20%20%20%20return%20%26AuthMiddleware%7B%0A%20%20%20%20%20%20%20%20jwtSecret%3A%20secret%2C%0A%20%20%20%20%20%20%20%20userStore%3A%20store%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*AuthMiddleware)%20Middleware(next%20http.Handler)%20http.Handler%20%7B%0A%20%20%20%20return%20http.HandlerFunc(func(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Extract%20token%20from%20Authorization%20header%0A%20%20%20%20%20%20%20%20authHeader%20%3A%3D%20r.Header.Get(%22Authorization%22)%0A%20%20%20%20%20%20%20%20if%20!strings.HasPrefix(authHeader%2C%20%22Bearer%20%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20http.Error(w%2C%20%22Missing%20or%20invalid%20authorization%20header%22%2C%20http.StatusUnauthorized)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20token%20%3A%3D%20strings.TrimPrefix(authHeader%2C%20%22Bearer%20%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Validate%20JWT%20token%0A%20%20%20%20%20%20%20%20claims%2C%20err%20%3A%3D%20m.validateJWT(token)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20http.Error(w%2C%20%22Invalid%20token%22%2C%20http.StatusUnauthorized)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Load%20user%20information%0A%20%20%20%20%20%20%20%20user%2C%20err%20%3A%3D%20m.userStore.GetUser(claims.UserID)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20http.Error(w%2C%20%22User%20not%20found%22%2C%20http.StatusUnauthorized)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20user%20to%20request%20context%0A%20%20%20%20%20%20%20%20ctx%20%3A%3D%20context.WithValue(r.Context()%2C%20%22user%22%2C%20user)%0A%20%20%20%20%20%20%20%20next.ServeHTTP(w%2C%20r.WithContext(ctx))%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(m%20*AuthMiddleware)%20validateJWT(tokenString%20string)%20(*Claims%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Note%3A%20This%20example%20uses%20a%20hypothetical%20JWT%20library%0A%20%20%20%20%2F%2F%20In%20practice%2C%20you%20would%20use%20a%20real%20JWT%20library%20like%20github.com%2Fgolang-jwt%2Fjwt%0A%20%20%20%20token%2C%20err%20%3A%3D%20jwt.ParseWithClaims(tokenString%2C%20%26Claims%7B%7D%2C%20func(token%20*jwt.Token)%20(interface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20m.jwtSecret%2C%20nil%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20claims%2C%20ok%20%3A%3D%20token.Claims.(*Claims)%3B%20ok%20%26%26%20token.Valid%20%7B%0A%20%20%20%20%20%20%20%20return%20claims%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20token%22)%0A%7D%0A%0Atype%20Claims%20struct%20%7B%0A%20%20%20%20UserID%20string%20%60json%3A%22user_id%22%60%0A%20%20%20%20Role%20%20%20string%20%60json%3A%22role%22%60%0A%20%20%20%20jwt.StandardClaims%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Integration%0A%0A%23%23%23%20Go%20HTTP%20Client%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22log%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20HTTP%20client%0A%20%20%20%20c%20%3A%3D%20client.NewHTTPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20authentication%0A%20%20%20%20c.SetHeader(%22Authorization%22%2C%20%22Bearer%20your-jwt-token%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20custom%20headers%0A%20%20%20%20c.SetHeader(%22X-API-Version%22%2C%20%22v1%22)%0A%20%20%20%20c.SetHeader(%22X-Client-ID%22%2C%20%22my-app%22)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20List%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%0A%20%20%20%20%2F%2F%20Call%20tool%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22search_users%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22query%22%3A%20%22john%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22limit%22%3A%205%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20JavaScript%2FFetch%20Client%0A%0A%60%60%60javascript%0Aclass%20MCPHTTPClient%20%7B%0A%20%20%20%20constructor(baseURL%2C%20options%20%3D%20%7B%7D)%20%7B%0A%20%20%20%20%20%20%20%20this.baseURL%20%3D%20baseURL%3B%0A%20%20%20%20%20%20%20%20this.headers%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20'Content-Type'%3A%20'application%2Fjson'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20...options.headers%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20this.requestId%20%3D%201%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAuthToken(token)%20%7B%0A%20%20%20%20%20%20%20%20this.headers%5B'Authorization'%5D%20%3D%20%60Bearer%20%24%7Btoken%7D%60%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20sendRequest(method%2C%20params%20%3D%20%7B%7D)%20%7B%0A%20%20%20%20%20%20%20%20const%20id%20%3D%20this.requestId%2B%2B%3B%0A%20%20%20%20%20%20%20%20const%20request%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20jsonrpc%3A%20'2.0'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20id%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20method%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20params%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20const%20response%20%3D%20await%20fetch(%60%24%7Bthis.baseURL%7D%2F%24%7Bmethod.replace('%2F'%2C%20'%2F')%7D%60%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20method%3A%20'POST'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20headers%3A%20this.headers%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20body%3A%20JSON.stringify(request)%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!response.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%60HTTP%20%24%7Bresponse.status%7D%3A%20%24%7Bresponse.statusText%7D%60)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20result%20%3D%20await%20response.json()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(result.error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(result.error.message)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20result.result%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20initialize()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.sendRequest('initialize'%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20protocolVersion%3A%20'2024-11-05'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20capabilities%3A%20%7B%20tools%3A%20%7B%7D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20clientInfo%3A%20%7B%20name%3A%20'Web%20Client'%2C%20version%3A%20'1.0.0'%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20listTools()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.sendRequest('tools%2Flist')%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20callTool(name%2C%20arguments)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.sendRequest('tools%2Fcall'%2C%20%7B%20name%2C%20arguments%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20listResources()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.sendRequest('resources%2Flist')%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20readResource(uri)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.sendRequest('resources%2Fread'%2C%20%7B%20uri%20%7D)%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aconst%20client%20%3D%20new%20MCPHTTPClient('http%3A%2F%2Flocalhost%3A8080%2Fmcp')%3B%0Aclient.setAuthToken('your-jwt-token')%3B%0A%0Aasync%20function%20main()%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20await%20client.initialize()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20tools%20%3D%20await%20client.listTools()%3B%0A%20%20%20%20%20%20%20%20console.log('Available%20tools%3A'%2C%20tools)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20result%20%3D%20await%20client.callTool('search_users'%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20query%3A%20'john'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20limit%3A%2010%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20console.log('Search%20result%3A'%2C%20result)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20console.error('Error%3A'%2C%20error)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Amain()%3B%0A%60%60%60%0A%0A%23%23%23%20cURL%20Examples%0A%0A%60%60%60bash%0A%23%20Initialize%20session%0Acurl%20-X%20POST%20http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Finitialize%20%5C%0A%20%20-H%20%22Content-Type%3A%20application%2Fjson%22%20%5C%0A%20%20-H%20%22Authorization%3A%20Bearer%20your-token%22%20%5C%0A%20%20-d%20'%7B%0A%20%20%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%20%20%22id%22%3A%201%2C%0A%20%20%20%20%22method%22%3A%20%22initialize%22%2C%0A%20%20%20%20%22params%22%3A%20%7B%0A%20%20%20%20%20%20%22protocolVersion%22%3A%20%222024-11-05%22%2C%0A%20%20%20%20%20%20%22capabilities%22%3A%20%7B%22tools%22%3A%20%7B%7D%7D%2C%0A%20%20%20%20%20%20%22clientInfo%22%3A%20%7B%22name%22%3A%20%22curl%22%2C%20%22version%22%3A%20%221.0.0%22%7D%0A%20%20%20%20%7D%0A%20%20%7D'%0A%0A%23%20List%20tools%0Acurl%20-X%20POST%20http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Ftools%2Flist%20%5C%0A%20%20-H%20%22Content-Type%3A%20application%2Fjson%22%20%5C%0A%20%20-H%20%22Authorization%3A%20Bearer%20your-token%22%20%5C%0A%20%20-d%20'%7B%0A%20%20%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%20%20%22id%22%3A%202%2C%0A%20%20%20%20%22method%22%3A%20%22tools%2Flist%22%2C%0A%20%20%20%20%22params%22%3A%20%7B%7D%0A%20%20%7D'%0A%0A%23%20Call%20tool%0Acurl%20-X%20POST%20http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Ftools%2Fcall%20%5C%0A%20%20-H%20%22Content-Type%3A%20application%2Fjson%22%20%5C%0A%20%20-H%20%22Authorization%3A%20Bearer%20your-token%22%20%5C%0A%20%20-d%20'%7B%0A%20%20%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%20%20%22id%22%3A%203%2C%0A%20%20%20%20%22method%22%3A%20%22tools%2Fcall%22%2C%0A%20%20%20%20%22params%22%3A%20%7B%0A%20%20%20%20%20%20%22name%22%3A%20%22search_users%22%2C%0A%20%20%20%20%20%20%22arguments%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22query%22%3A%20%22john%22%2C%0A%20%20%20%20%20%20%20%20%22limit%22%3A%2010%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D'%0A%0A%23%20Read%20resource%0Acurl%20-X%20POST%20http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fresources%2Fread%20%5C%0A%20%20-H%20%22Content-Type%3A%20application%2Fjson%22%20%5C%0A%20%20-H%20%22Authorization%3A%20Bearer%20your-token%22%20%5C%0A%20%20-d%20'%7B%0A%20%20%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%20%20%22id%22%3A%204%2C%0A%20%20%20%20%22method%22%3A%20%22resources%2Fread%22%2C%0A%20%20%20%20%22params%22%3A%20%7B%0A%20%20%20%20%20%20%22uri%22%3A%20%22users%3A%2F%2F123%22%0A%20%20%20%20%7D%0A%20%20%7D'%0A%60%60%60%0A%0A%23%23%20Performance%20and%20Scaling%0A%0A%23%23%23%20Load%20Balancing%0A%0A%60%60%60go%0A%2F%2F%20Use%20with%20nginx%20or%20HAProxy%0Aupstream%20mcp_servers%20%7B%0A%20%20%20%20server%20127.0.0.1%3A8080%3B%0A%20%20%20%20server%20127.0.0.1%3A8081%3B%0A%20%20%20%20server%20127.0.0.1%3A8082%3B%0A%7D%0A%0Aserver%20%7B%0A%20%20%20%20listen%2080%3B%0A%20%20%20%20server_name%20api.example.com%3B%0A%20%20%20%20%0A%20%20%20%20location%20%2Fmcp%2F%20%7B%0A%20%20%20%20%20%20%20%20proxy_pass%20http%3A%2F%2Fmcp_servers%3B%0A%20%20%20%20%20%20%20%20proxy_set_header%20Host%20%24host%3B%0A%20%20%20%20%20%20%20%20proxy_set_header%20X-Real-IP%20%24remote_addr%3B%0A%20%20%20%20%20%20%20%20proxy_set_header%20X-Forwarded-For%20%24proxy_add_x_forwarded_for%3B%0A%20%20%20%20%20%20%20%20proxy_set_header%20X-Forwarded-Proto%20%24scheme%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Caching%20Strategies%0A%0A%60%60%60go%0Atype%20CacheMiddleware%20struct%20%7B%0A%20%20%20%20cache%20map%5Bstring%5DcacheEntry%0A%20%20%20%20mutex%20sync.RWMutex%0A%20%20%20%20ttl%20%20%20time.Duration%0A%7D%0A%0Atype%20cacheEntry%20struct%20%7B%0A%20%20%20%20data%20%20%20%20%20%20*mcp.ReadResourceResult%0A%20%20%20%20timestamp%20time.Time%0A%20%20%20%20etag%20%20%20%20%20%20string%0A%7D%0A%0Afunc%20(m%20*CacheMiddleware)%20ResourceMiddleware(next%20server.ResourceHandler)%20server.ResourceHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20cache%0A%20%20%20%20%20%20%20%20m.mutex.RLock()%0A%20%20%20%20%20%20%20%20entry%2C%20exists%20%3A%3D%20m.cache%5Breq.Params.URI%5D%0A%20%20%20%20%20%20%20%20m.mutex.RUnlock()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20exists%20%26%26%20time.Since(entry.timestamp)%20%3C%20m.ttl%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20cache%20headers%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20httpCtx%20%3A%3D%20getHTTPContext(ctx)%3B%20httpCtx%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20httpCtx.Header().Set(%22Cache-Control%22%2C%20fmt.Sprintf(%22max-age%3D%25d%22%2C%20int(m.ttl.Seconds())))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20httpCtx.Header().Set(%22ETag%22%2C%20entry.etag)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20entry.data%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Fetch%20fresh%20data%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Cache%20result%0A%20%20%20%20%20%20%20%20etag%20%3A%3D%20generateETag(result)%0A%20%20%20%20%20%20%20%20m.mutex.Lock()%0A%20%20%20%20%20%20%20%20m.cache%5Breq.Params.URI%5D%20%3D%20cacheEntry%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20%20%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20timestamp%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20etag%3A%20%20%20%20%20%20etag%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20m.mutex.Unlock()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Set%20cache%20headers%0A%20%20%20%20%20%20%20%20if%20httpCtx%20%3A%3D%20getHTTPContext(ctx)%3B%20httpCtx%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20httpCtx.Header().Set(%22Cache-Control%22%2C%20fmt.Sprintf(%22max-age%3D%25d%22%2C%20int(m.ttl.Seconds())))%0A%20%20%20%20%20%20%20%20%20%20%20%20httpCtx.Header().Set(%22ETag%22%2C%20etag)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Rate%20Limiting%0A%0A%60%60%60go%0Atype%20RateLimiter%20struct%20%7B%0A%20%20%20%20limiters%20map%5Bstring%5D*rate.Limiter%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%20%20%20%20rate%20%20%20%20%20rate.Limit%0A%20%20%20%20burst%20%20%20%20int%0A%7D%0A%0Afunc%20NewRateLimiter(requestsPerSecond%20float64%2C%20burst%20int)%20*RateLimiter%20%7B%0A%20%20%20%20return%20%26RateLimiter%7B%0A%20%20%20%20%20%20%20%20limiters%3A%20make(map%5Bstring%5D*rate.Limiter)%2C%0A%20%20%20%20%20%20%20%20rate%3A%20%20%20%20%20rate.Limit(requestsPerSecond)%2C%0A%20%20%20%20%20%20%20%20burst%3A%20%20%20%20burst%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rl%20*RateLimiter)%20getLimiter(clientIP%20string)%20*rate.Limiter%20%7B%0A%20%20%20%20rl.mutex.RLock()%0A%20%20%20%20limiter%2C%20exists%20%3A%3D%20rl.limiters%5BclientIP%5D%0A%20%20%20%20rl.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20rl.mutex.Lock()%0A%20%20%20%20%20%20%20%20limiter%20%3D%20rate.NewLimiter(rl.rate%2C%20rl.burst)%0A%20%20%20%20%20%20%20%20rl.limiters%5BclientIP%5D%20%3D%20limiter%0A%20%20%20%20%20%20%20%20rl.mutex.Unlock()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20limiter%0A%7D%0A%0Afunc%20(rl%20*RateLimiter)%20Allow(clientIP%20string)%20bool%20%7B%0A%20%20%20%20return%20rl.getLimiter(clientIP).Allow()%0A%7D%0A%0A%2F%2F%20HTTP%20middleware%0Afunc%20(rl%20*RateLimiter)%20Middleware(next%20http.Handler)%20http.Handler%20%7B%0A%20%20%20%20return%20http.HandlerFunc(func(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20%20%20%20%20clientIP%20%3A%3D%20getClientIP(r)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20!rl.Allow(clientIP)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20http.Error(w%2C%20%22Rate%20limit%20exceeded%22%2C%20http.StatusTooManyRequests)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20next.ServeHTTP(w%2C%20r)%0A%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Learn%20about%20embedded%20scenarios%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Build%20MCP%20clients%20for%20HTTP%20transport%0A-%20**%5BServer%20Basics%5D(%2Fservers%2Fbasics)**%20-%20Review%20fundamental%20server%20concepts",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./index-5g7b24kx.js"),[]),path:"/transports",type:"mdx",filePath:"transports/index.mdx",content:"%23%20Transport%20Options%0A%0AMCP-Go%20supports%20multiple%20transport%20methods%20to%20fit%20different%20deployment%20scenarios%20and%20integration%20patterns.%20Choose%20the%20right%20transport%20based%20on%20your%20use%20case%2C%20performance%20requirements%2C%20and%20client%20capabilities.%0A%0A%23%23%20Overview%0A%0ATransport%20layers%20handle%20the%20communication%20between%20MCP%20clients%20and%20servers.%20Each%20transport%20has%20different%20characteristics%20and%20is%20optimized%20for%20specific%20scenarios%3A%0A%0A-%20**%5BSTDIO%5D(%2Ftransports%2Fstdio)**%20-%20Standard%20input%2Foutput%20for%20command-line%20tools%0A-%20**%5BSSE%5D(%2Ftransports%2Fsse)**%20-%20Server-Sent%20Events%20for%20web%20applications%20%20%0A-%20**%5BHTTP%5D(%2Ftransports%2Fhttp)**%20-%20Traditional%20HTTP%20for%20REST-like%20interactions%0A-%20**%5BIn-Process%5D(%2Ftransports%2Finprocess)**%20-%20Direct%20integration%20for%20embedded%20scenarios%0A%0A%23%23%20Transport%20Comparison%0A%0A%7C%20Transport%20%7C%20Use%20Case%20%7C%20Pros%20%7C%20Cons%20%7C%0A%7C-----------%7C----------%7C------%7C------%7C%0A%7C%20**STDIO**%20%7C%20CLI%20tools%2C%20desktop%20apps%20%7C%20Simple%2C%20secure%2C%20no%20network%20%7C%20Single%20client%2C%20local%20only%20%7C%0A%7C%20**SSE**%20%7C%20Web%20apps%2C%20real-time%20%7C%20Multi-client%2C%20real-time%2C%20web-friendly%20%7C%20HTTP%20overhead%2C%20one-way%20streaming%20%7C%0A%7C%20**HTTP**%20%7C%20Web%20services%2C%20APIs%20%7C%20Standard%20protocol%2C%20caching%2C%20load%20balancing%20%7C%20No%20real-time%2C%20more%20complex%20%7C%0A%7C%20**In-Process**%20%7C%20Embedded%2C%20testing%20%7C%20No%20serialization%2C%20fastest%20%7C%20Same%20process%20only%20%7C%0A%0A%23%23%20Quick%20Example%0A%0AThe%20same%20server%20code%20works%20with%20any%20transport%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22os%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%20(transport-agnostic)%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Multi-Transport%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20simple%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22echo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Echo%20back%20the%20input%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22message%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleEcho%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Choose%20transport%20based%20on%20environment%0A%20%20%20%20transport%20%3A%3D%20os.Getenv(%22MCP_TRANSPORT%22)%0A%20%20%20%20port%20%3A%3D%20os.Getenv(%22PORT%22)%0A%20%20%20%20if%20port%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20port%20%3D%20%228080%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20switch%20transport%20%7B%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Starting%20SSE%20server%20on%20port%20%25s%5Cn%22%2C%20port)%0A%20%20%20%20%20%20%20%20server.ServeSSE(s%2C%20%22%3A%22%2Bport)%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Starting%20HTTP%20server%20on%20port%20%25s%5Cn%22%2C%20port)%0A%20%20%20%20%20%20%20%20server.ServeHTTP(s%2C%20%22%3A%22%2Bport)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20fmt.Println(%22Starting%20STDIO%20server%22)%0A%20%20%20%20%20%20%20%20server.ServeStdio(s)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleEcho(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20message%2C%20err%20%3A%3D%20req.RequireString(%22message%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Echo%3A%20%25s%22%2C%20message))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Choosing%20the%20Right%20Transport%0A%0A%23%23%23%20STDIO%20Transport%0A**Best%20for%3A**%0A-%20Command-line%20tools%20and%20utilities%0A-%20Desktop%20application%20integrations%0A-%20Local%20development%20and%20testing%0A-%20Single-user%20scenarios%0A%0A**Example%20use%20cases%3A**%0A-%20File%20system%20tools%20for%20IDEs%0A-%20Local%20database%20utilities%0A-%20Development%20workflow%20automation%0A-%20System%20administration%20tools%0A%0A%23%23%23%20SSE%20Transport%20%20%0A**Best%20for%3A**%0A-%20Web%20applications%20requiring%20real-time%20updates%0A-%20Browser-based%20LLM%20interfaces%0A-%20Multi-user%20collaborative%20tools%0A-%20Dashboard%20and%20monitoring%20applications%0A%0A**Example%20use%20cases%3A**%0A-%20Web-based%20chat%20interfaces%0A-%20Real-time%20data%20visualization%0A-%20Collaborative%20document%20editing%0A-%20Live%20system%20monitoring%0A%0A%23%23%23%20HTTP%20Transport%0A**Best%20for%3A**%0A-%20Traditional%20web%20services%0A-%20REST%20API%20integrations%0A-%20Load-balanced%20deployments%0A-%20Stateless%20interactions%0A%0A**Example%20use%20cases%3A**%0A-%20Microservice%20architectures%0A-%20Public%20API%20endpoints%0A-%20Integration%20with%20existing%20HTTP%20infrastructure%0A-%20Cached%20or%20rate-limited%20services%0A%0A%23%23%23%20In-Process%20Transport%0A**Best%20for%3A**%0A-%20Embedded%20MCP%20servers%0A-%20Testing%20and%20development%0A-%20High-performance%20scenarios%0A-%20Library%20integrations%0A%0A**Example%20use%20cases%3A**%0A-%20Testing%20MCP%20implementations%0A-%20Embedded%20analytics%20engines%0A-%20High-frequency%20trading%20systems%0A-%20Real-time%20game%20servers%0A%0A%23%23%20Transport%20Configuration%0A%0A%23%23%23%20Environment-Based%20Selection%0A%0A%60%60%60go%0Afunc%20startServer(s%20*server.MCPServer)%20error%20%7B%0A%20%20%20%20switch%20os.Getenv(%22MCP_TRANSPORT%22)%20%7B%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20return%20server.ServeSSE(s%2C%20getPort())%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20return%20server.ServeHTTP(s%2C%20getPort())%0A%20%20%20%20case%20%22inprocess%22%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20In-process%20transport%20doesn't%20use%20network%20ports%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20would%20typically%20be%20used%20differently%20in%20practice%0A%20%20%20%20%20%20%20%20client%20%3A%3D%20client.NewInProcessClient(s)%0A%20%20%20%20%20%20%20%20defer%20client.Close()%0A%20%20%20%20%20%20%20%20%2F%2F%20Keep%20the%20process%20running%0A%20%20%20%20%20%20%20%20select%20%7B%7D%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20server.ServeStdio(s)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20getPort()%20string%20%7B%0A%20%20%20%20if%20port%20%3A%3D%20os.Getenv(%22PORT%22)%3B%20port%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%3A%22%20%2B%20port%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22%3A8080%22%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multi-Transport%20Server%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Multi-Transport%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20your%20tools%2C%20resources%2C%20prompts...%0A%20%20%20%20setupServer(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20multiple%20transports%20concurrently%20with%20proper%20error%20handling%0A%20%20%20%20errChan%20%3A%3D%20make(chan%20error%2C%203)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20log.Println(%22Starting%20STDIO%20server...%22)%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22STDIO%20server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22STDIO%20server%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20log.Println(%22Starting%20SSE%20server%20on%20%3A8080...%22)%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20server.ServeSSE(s%2C%20%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22SSE%20server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22SSE%20server%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20log.Println(%22Starting%20HTTP%20server%20on%20%3A8081...%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeHTTP(s%2C%20%22%3A8081%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22HTTP%20server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22HTTP%20server%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20any%20server%20to%20fail%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20err%20%3A%3D%20%3C-errChan%3A%0A%20%20%20%20%20%20%20%20log.Printf(%22Server%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20function%20for%20the%20multi-transport%20example%0Afunc%20setupServer(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20tools%2C%20resources%2C%20etc.%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%20Considerations%0A%0A%23%23%23%20Latency%20Comparison%0A-%20**In-Process**%3A%20~1%CE%BCs%20(no%20serialization)%0A-%20**STDIO**%3A%20~100%CE%BCs%20(local%20pipes)%0A-%20**HTTP%2FSSE**%3A%20~1-10ms%20(network%20%2B%20HTTP%20overhead)%0A%0A%23%23%23%20Throughput%20Comparison%0A-%20**In-Process**%3A%20Limited%20by%20CPU%2Fmemory%0A-%20**STDIO**%3A%20Limited%20by%20pipe%20buffers%20(~64KB)%0A-%20**HTTP%2FSSE**%3A%20Limited%20by%20network%20bandwidth%0A%0A%23%23%23%20Memory%20Usage%0A-%20**In-Process**%3A%20Shared%20memory%20space%0A-%20**STDIO**%3A%20Minimal%20overhead%0A-%20**HTTP%2FSSE**%3A%20Connection%20pooling%2C%20request%20buffering%0A%0A%23%23%20Security%20Considerations%0A%0A%23%23%23%20STDIO%20Transport%0A-%20**Pros**%3A%20No%20network%20exposure%2C%20process%20isolation%0A-%20**Cons**%3A%20Inherits%20parent%20process%20permissions%0A-%20**Best%20practices**%3A%20Validate%20all%20inputs%2C%20use%20least%20privilege%0A%0A%23%23%23%20Network%20Transports%20(SSE%2FHTTP)%0A-%20**Authentication**%3A%20Implement%20proper%20auth%20middleware%0A-%20**Authorization**%3A%20Validate%20permissions%20per%20request%0A-%20**Rate%20limiting**%3A%20Prevent%20abuse%20and%20DoS%0A-%20**HTTPS**%3A%20Always%20use%20TLS%20in%20production%0A%0A%60%60%60go%0A%2F%2F%20Example%20with%20security%20middleware%0As%20%3A%3D%20server.NewMCPServer(%22Secure%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolMiddleware(authMiddleware)%2C%0A%20%20%20%20server.WithToolMiddleware(rateLimitMiddleware)%2C%0A%20%20%20%20server.WithRecovery()%2C%0A)%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0AExplore%20each%20transport%20in%20detail%3A%0A%0A-%20**%5BSTDIO%20Transport%5D(%2Ftransports%2Fstdio)**%20-%20Command-line%20integration%0A-%20**%5BSSE%20Transport%5D(%2Ftransports%2Fsse)**%20-%20Real-time%20web%20applications%0A-%20**%5BHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Traditional%20web%20services%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Embedded%20scenarios",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./index-5g7b24kx.js"),[]),path:"/transports.html",type:"mdx",filePath:"transports/index.mdx",content:"%23%20Transport%20Options%0A%0AMCP-Go%20supports%20multiple%20transport%20methods%20to%20fit%20different%20deployment%20scenarios%20and%20integration%20patterns.%20Choose%20the%20right%20transport%20based%20on%20your%20use%20case%2C%20performance%20requirements%2C%20and%20client%20capabilities.%0A%0A%23%23%20Overview%0A%0ATransport%20layers%20handle%20the%20communication%20between%20MCP%20clients%20and%20servers.%20Each%20transport%20has%20different%20characteristics%20and%20is%20optimized%20for%20specific%20scenarios%3A%0A%0A-%20**%5BSTDIO%5D(%2Ftransports%2Fstdio)**%20-%20Standard%20input%2Foutput%20for%20command-line%20tools%0A-%20**%5BSSE%5D(%2Ftransports%2Fsse)**%20-%20Server-Sent%20Events%20for%20web%20applications%20%20%0A-%20**%5BHTTP%5D(%2Ftransports%2Fhttp)**%20-%20Traditional%20HTTP%20for%20REST-like%20interactions%0A-%20**%5BIn-Process%5D(%2Ftransports%2Finprocess)**%20-%20Direct%20integration%20for%20embedded%20scenarios%0A%0A%23%23%20Transport%20Comparison%0A%0A%7C%20Transport%20%7C%20Use%20Case%20%7C%20Pros%20%7C%20Cons%20%7C%0A%7C-----------%7C----------%7C------%7C------%7C%0A%7C%20**STDIO**%20%7C%20CLI%20tools%2C%20desktop%20apps%20%7C%20Simple%2C%20secure%2C%20no%20network%20%7C%20Single%20client%2C%20local%20only%20%7C%0A%7C%20**SSE**%20%7C%20Web%20apps%2C%20real-time%20%7C%20Multi-client%2C%20real-time%2C%20web-friendly%20%7C%20HTTP%20overhead%2C%20one-way%20streaming%20%7C%0A%7C%20**HTTP**%20%7C%20Web%20services%2C%20APIs%20%7C%20Standard%20protocol%2C%20caching%2C%20load%20balancing%20%7C%20No%20real-time%2C%20more%20complex%20%7C%0A%7C%20**In-Process**%20%7C%20Embedded%2C%20testing%20%7C%20No%20serialization%2C%20fastest%20%7C%20Same%20process%20only%20%7C%0A%0A%23%23%20Quick%20Example%0A%0AThe%20same%20server%20code%20works%20with%20any%20transport%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22os%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%20(transport-agnostic)%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Multi-Transport%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20simple%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22echo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Echo%20back%20the%20input%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22message%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleEcho%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Choose%20transport%20based%20on%20environment%0A%20%20%20%20transport%20%3A%3D%20os.Getenv(%22MCP_TRANSPORT%22)%0A%20%20%20%20port%20%3A%3D%20os.Getenv(%22PORT%22)%0A%20%20%20%20if%20port%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20port%20%3D%20%228080%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20switch%20transport%20%7B%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Starting%20SSE%20server%20on%20port%20%25s%5Cn%22%2C%20port)%0A%20%20%20%20%20%20%20%20server.ServeSSE(s%2C%20%22%3A%22%2Bport)%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Starting%20HTTP%20server%20on%20port%20%25s%5Cn%22%2C%20port)%0A%20%20%20%20%20%20%20%20server.ServeHTTP(s%2C%20%22%3A%22%2Bport)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20fmt.Println(%22Starting%20STDIO%20server%22)%0A%20%20%20%20%20%20%20%20server.ServeStdio(s)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleEcho(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20message%2C%20err%20%3A%3D%20req.RequireString(%22message%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Echo%3A%20%25s%22%2C%20message))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Choosing%20the%20Right%20Transport%0A%0A%23%23%23%20STDIO%20Transport%0A**Best%20for%3A**%0A-%20Command-line%20tools%20and%20utilities%0A-%20Desktop%20application%20integrations%0A-%20Local%20development%20and%20testing%0A-%20Single-user%20scenarios%0A%0A**Example%20use%20cases%3A**%0A-%20File%20system%20tools%20for%20IDEs%0A-%20Local%20database%20utilities%0A-%20Development%20workflow%20automation%0A-%20System%20administration%20tools%0A%0A%23%23%23%20SSE%20Transport%20%20%0A**Best%20for%3A**%0A-%20Web%20applications%20requiring%20real-time%20updates%0A-%20Browser-based%20LLM%20interfaces%0A-%20Multi-user%20collaborative%20tools%0A-%20Dashboard%20and%20monitoring%20applications%0A%0A**Example%20use%20cases%3A**%0A-%20Web-based%20chat%20interfaces%0A-%20Real-time%20data%20visualization%0A-%20Collaborative%20document%20editing%0A-%20Live%20system%20monitoring%0A%0A%23%23%23%20HTTP%20Transport%0A**Best%20for%3A**%0A-%20Traditional%20web%20services%0A-%20REST%20API%20integrations%0A-%20Load-balanced%20deployments%0A-%20Stateless%20interactions%0A%0A**Example%20use%20cases%3A**%0A-%20Microservice%20architectures%0A-%20Public%20API%20endpoints%0A-%20Integration%20with%20existing%20HTTP%20infrastructure%0A-%20Cached%20or%20rate-limited%20services%0A%0A%23%23%23%20In-Process%20Transport%0A**Best%20for%3A**%0A-%20Embedded%20MCP%20servers%0A-%20Testing%20and%20development%0A-%20High-performance%20scenarios%0A-%20Library%20integrations%0A%0A**Example%20use%20cases%3A**%0A-%20Testing%20MCP%20implementations%0A-%20Embedded%20analytics%20engines%0A-%20High-frequency%20trading%20systems%0A-%20Real-time%20game%20servers%0A%0A%23%23%20Transport%20Configuration%0A%0A%23%23%23%20Environment-Based%20Selection%0A%0A%60%60%60go%0Afunc%20startServer(s%20*server.MCPServer)%20error%20%7B%0A%20%20%20%20switch%20os.Getenv(%22MCP_TRANSPORT%22)%20%7B%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20return%20server.ServeSSE(s%2C%20getPort())%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20return%20server.ServeHTTP(s%2C%20getPort())%0A%20%20%20%20case%20%22inprocess%22%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20In-process%20transport%20doesn't%20use%20network%20ports%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20would%20typically%20be%20used%20differently%20in%20practice%0A%20%20%20%20%20%20%20%20client%20%3A%3D%20client.NewInProcessClient(s)%0A%20%20%20%20%20%20%20%20defer%20client.Close()%0A%20%20%20%20%20%20%20%20%2F%2F%20Keep%20the%20process%20running%0A%20%20%20%20%20%20%20%20select%20%7B%7D%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20server.ServeStdio(s)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20getPort()%20string%20%7B%0A%20%20%20%20if%20port%20%3A%3D%20os.Getenv(%22PORT%22)%3B%20port%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%3A%22%20%2B%20port%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22%3A8080%22%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multi-Transport%20Server%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Multi-Transport%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20your%20tools%2C%20resources%2C%20prompts...%0A%20%20%20%20setupServer(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20multiple%20transports%20concurrently%20with%20proper%20error%20handling%0A%20%20%20%20errChan%20%3A%3D%20make(chan%20error%2C%203)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20log.Println(%22Starting%20STDIO%20server...%22)%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22STDIO%20server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22STDIO%20server%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20log.Println(%22Starting%20SSE%20server%20on%20%3A8080...%22)%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20server.ServeSSE(s%2C%20%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22SSE%20server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22SSE%20server%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20log.Println(%22Starting%20HTTP%20server%20on%20%3A8081...%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeHTTP(s%2C%20%22%3A8081%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22HTTP%20server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22HTTP%20server%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20any%20server%20to%20fail%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20err%20%3A%3D%20%3C-errChan%3A%0A%20%20%20%20%20%20%20%20log.Printf(%22Server%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20function%20for%20the%20multi-transport%20example%0Afunc%20setupServer(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20tools%2C%20resources%2C%20etc.%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%20Considerations%0A%0A%23%23%23%20Latency%20Comparison%0A-%20**In-Process**%3A%20~1%CE%BCs%20(no%20serialization)%0A-%20**STDIO**%3A%20~100%CE%BCs%20(local%20pipes)%0A-%20**HTTP%2FSSE**%3A%20~1-10ms%20(network%20%2B%20HTTP%20overhead)%0A%0A%23%23%23%20Throughput%20Comparison%0A-%20**In-Process**%3A%20Limited%20by%20CPU%2Fmemory%0A-%20**STDIO**%3A%20Limited%20by%20pipe%20buffers%20(~64KB)%0A-%20**HTTP%2FSSE**%3A%20Limited%20by%20network%20bandwidth%0A%0A%23%23%23%20Memory%20Usage%0A-%20**In-Process**%3A%20Shared%20memory%20space%0A-%20**STDIO**%3A%20Minimal%20overhead%0A-%20**HTTP%2FSSE**%3A%20Connection%20pooling%2C%20request%20buffering%0A%0A%23%23%20Security%20Considerations%0A%0A%23%23%23%20STDIO%20Transport%0A-%20**Pros**%3A%20No%20network%20exposure%2C%20process%20isolation%0A-%20**Cons**%3A%20Inherits%20parent%20process%20permissions%0A-%20**Best%20practices**%3A%20Validate%20all%20inputs%2C%20use%20least%20privilege%0A%0A%23%23%23%20Network%20Transports%20(SSE%2FHTTP)%0A-%20**Authentication**%3A%20Implement%20proper%20auth%20middleware%0A-%20**Authorization**%3A%20Validate%20permissions%20per%20request%0A-%20**Rate%20limiting**%3A%20Prevent%20abuse%20and%20DoS%0A-%20**HTTPS**%3A%20Always%20use%20TLS%20in%20production%0A%0A%60%60%60go%0A%2F%2F%20Example%20with%20security%20middleware%0As%20%3A%3D%20server.NewMCPServer(%22Secure%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolMiddleware(authMiddleware)%2C%0A%20%20%20%20server.WithToolMiddleware(rateLimitMiddleware)%2C%0A%20%20%20%20server.WithRecovery()%2C%0A)%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0AExplore%20each%20transport%20in%20detail%3A%0A%0A-%20**%5BSTDIO%20Transport%5D(%2Ftransports%2Fstdio)**%20-%20Command-line%20integration%0A-%20**%5BSSE%20Transport%5D(%2Ftransports%2Fsse)**%20-%20Real-time%20web%20applications%0A-%20**%5BHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Traditional%20web%20services%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Embedded%20scenarios",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./inprocess-CLmOUmRX.js"),[]),path:"/transports/inprocess",type:"mdx",filePath:"transports/inprocess.mdx",content:"%23%20In-Process%20Transport%0A%0AIn-process%20transport%20enables%20direct%20integration%20of%20MCP%20servers%20within%20the%20same%20process%2C%20eliminating%20serialization%20overhead%20and%20providing%20the%20highest%20performance%20option%20for%20embedded%20scenarios.%0A%0A%23%23%20Use%20Cases%0A%0AIn-process%20transport%20is%20perfect%20for%3A%0A%0A-%20**Embedded%20servers**%3A%20MCP%20functionality%20within%20existing%20applications%0A-%20**Testing%20and%20development**%3A%20Fast%2C%20reliable%20testing%20without%20network%20overhead%0A-%20**High-performance%20scenarios**%3A%20Microsecond%20latency%20requirements%0A-%20**Library%20integrations**%3A%20MCP%20as%20a%20library%20component%0A-%20**Single-process%20architectures**%3A%20Monolithic%20applications%20with%20MCP%20capabilities%0A%0A**Example%20applications%3A**%0A-%20Game%20engines%20with%20AI%20tool%20integration%0A-%20Real-time%20trading%20systems%0A-%20Embedded%20analytics%20engines%0A-%20Testing%20frameworks%0A-%20Desktop%20applications%20with%20plugin%20architectures%0A-%20High-frequency%20data%20processing%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20In-Process%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22runtime%22%0A%20%20%20%20%22strings%22%0A%20%20%20%20%22time%22%0A%20%20%20%20%22sync%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22In-Process%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20high-performance%20tools%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22fast_calculation%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Perform%20fast%20mathematical%20calculations%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22operation%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithArray(%22numbers%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleFastCalculation%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22process_data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Process%20data%20with%20zero-copy%20operations%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithObject(%22data%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22algorithm%22%2C%20mcp.Default(%22default%22))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleProcessData%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20in-memory%20resources%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22memory%3A%2F%2Fcache%2F%7Bkey%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Memory%20Cache%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22In-memory%20cached%20data%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleMemoryCache%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20in-process%20client%0A%20%20%20%20client%20%3A%3D%20client.NewInProcessClient(s)%0A%20%20%20%20defer%20client.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20(no%20network%20overhead)%0A%20%20%20%20if%20err%20%3A%3D%20client.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Demonstrate%20high-performance%20operations%0A%20%20%20%20demonstratePerformance(ctx%2C%20client)%0A%7D%0A%0Afunc%20handleFastCalculation(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20operation%20%3A%3D%20req.Params.Arguments%5B%22operation%22%5D.(string)%0A%20%20%20%20numbers%20%3A%3D%20req.Params.Arguments%5B%22numbers%22%5D.(%5B%5Dinterface%7B%7D)%0A%0A%20%20%20%20%2F%2F%20Convert%20to%20float64%20slice%0A%20%20%20%20values%20%3A%3D%20make(%5B%5Dfloat64%2C%20len(numbers))%0A%20%20%20%20for%20i%2C%20n%20%3A%3D%20range%20numbers%20%7B%0A%20%20%20%20%20%20%20%20values%5Bi%5D%20%3D%20n.(float64)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Perform%20calculation%0A%20%20%20%20var%20result%20float64%0A%20%20%20%20switch%20operation%20%7B%0A%20%20%20%20case%20%22sum%22%3A%0A%20%20%20%20%20%20%20%20for%20_%2C%20v%20%3A%3D%20range%20values%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20v%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22product%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%201%0A%20%20%20%20%20%20%20%20for%20_%2C%20v%20%3A%3D%20range%20values%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20*%3D%20v%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22average%22%3A%0A%20%20%20%20%20%20%20%20sum%20%3A%3D%200.0%0A%20%20%20%20%20%20%20%20for%20_%2C%20v%20%3A%3D%20range%20values%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sum%20%2B%3D%20v%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20result%20%3D%20sum%20%2F%20float64(len(values))%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20operation%3A%20%25s%22%2C%20operation)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22operation%22%3A%20operation%2C%0A%20%20%20%20%20%20%20%20%22result%22%3A%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20%22count%22%3A%20%20%20%20%20len(values)%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0Afunc%20handleProcessData(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20req.Params.Arguments%5B%22data%22%5D.(map%5Bstring%5Dinterface%7B%7D)%0A%20%20%20%20algorithm%20%3A%3D%20req.Params.Arguments%5B%22algorithm%22%5D.(string)%0A%0A%20%20%20%20%2F%2F%20Process%20data%20in-place%20(zero-copy%20when%20possible)%0A%20%20%20%20processed%20%3A%3D%20processDataInPlace(data%2C%20algorithm)%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22algorithm%22%3A%20algorithm%2C%0A%20%20%20%20%20%20%20%20%22processed%22%3A%20processed%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().UnixNano()%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0Avar%20(%0A%20%20%20%20memoryCache%20%3D%20make(map%5Bstring%5Dinterface%7B%7D)%0A%20%20%20%20cacheMutex%20%20sync.RWMutex%0A)%0A%0Afunc%20handleMemoryCache(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20extractKeyFromURI(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20cacheMutex.RLock()%0A%20%20%20%20value%2C%20exists%20%3A%3D%20memoryCache%5Bkey%5D%0A%20%20%20%20cacheMutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22key%20not%20found%3A%20%25s%22%2C%20key)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewResourceResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22key%22%3A%20%20%20key%2C%0A%20%20%20%20%20%20%20%20%22value%22%3A%20value%2C%0A%20%20%20%20%20%20%20%20%22type%22%3A%20%20fmt.Sprintf(%22%25T%22%2C%20value)%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20examples%0Afunc%20processDataInPlace(data%20map%5Bstring%5Dinterface%7B%7D%2C%20algorithm%20string)%20map%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20process%20data%20according%20to%20algorithm%0A%20%20%20%20result%20%3A%3D%20make(map%5Bstring%5Dinterface%7B%7D)%0A%20%20%20%20for%20k%2C%20v%20%3A%3D%20range%20data%20%7B%0A%20%20%20%20%20%20%20%20result%5Bk%5D%20%3D%20fmt.Sprintf(%22processed_%25v%22%2C%20v)%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%0A%7D%0A%0Afunc%20extractKeyFromURI(uri%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Extract%20key%20from%20URI%20like%20%22memory%3A%2F%2Fcache%2Fmykey%22%0A%20%20%20%20parts%20%3A%3D%20strings.Split(uri%2C%20%22%2F%22)%0A%20%20%20%20if%20len(parts)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20return%20parts%5Blen(parts)-1%5D%0A%20%20%20%20%7D%0A%20%20%20%20return%20uri%0A%7D%0A%0Afunc%20demonstratePerformance(ctx%20context.Context%2C%20client%20*client.InProcessClient)%20%7B%0A%20%20%20%20%2F%2F%20Benchmark%20tool%20calls%0A%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20iterations%20%3A%3D%2010000%0A%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20iterations%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20_%2C%20err%20%3A%3D%20client.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22fast_calculation%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22operation%22%3A%20%22sum%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22numbers%22%3A%20%20%20%5B%5Dinterface%7B%7D%7B1.0%2C%202.0%2C%203.0%2C%204.0%2C%205.0%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20duration%20%3A%3D%20time.Since(start)%0A%20%20%20%20avgLatency%20%3A%3D%20duration%20%2F%20time.Duration(iterations)%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22Completed%20%25d%20tool%20calls%20in%20%25v%22%2C%20iterations%2C%20duration)%0A%20%20%20%20log.Printf(%22Average%20latency%3A%20%25v%22%2C%20avgLatency)%0A%20%20%20%20log.Printf(%22Throughput%3A%20%25.0f%20calls%2Fsecond%22%2C%20float64(iterations)%2Fduration.Seconds())%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20In-Process%20Integration%0A%0A%60%60%60go%0A%2F%2F%20Embedded%20MCP%20server%20in%20a%20larger%20application%0Atype%20Application%20struct%20%7B%0A%20%20%20%20mcpServer%20*server.MCPServer%0A%20%20%20%20mcpClient%20*client.InProcessClient%0A%20%20%20%20dataStore%20*DataStore%0A%20%20%20%20config%20%20%20%20*Config%0A%20%20%20%20startTime%20time.Time%0A%7D%0A%0Afunc%20NewApplication(config%20*Config)%20*Application%20%7B%0A%20%20%20%20app%20%3A%3D%20%26Application%7B%0A%20%20%20%20%20%20%20%20config%3A%20%20%20%20config%2C%0A%20%20%20%20%20%20%20%20dataStore%3A%20NewDataStore()%2C%0A%20%20%20%20%20%20%20%20startTime%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20embedded%20MCP%20server%0A%20%20%20%20app.mcpServer%20%3D%20server.NewMCPServer(%22Embedded%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithAllCapabilities()%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20application-specific%20tools%0A%20%20%20%20app.addApplicationTools()%0A%20%20%20%20app.addDataTools()%0A%20%20%20%20app.addAnalyticsTools()%0A%0A%20%20%20%20%2F%2F%20Create%20in-process%20client%20for%20internal%20use%0A%20%20%20%20app.mcpClient%20%3D%20client.NewInProcessClient(app.mcpServer)%0A%0A%20%20%20%20return%20app%0A%7D%0A%0A%2F%2F%20Helper%20types%20and%20functions%20for%20the%20application%20example%0Atype%20DataStore%20struct%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Atype%20Config%20struct%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20NewDataStore()%20*DataStore%20%7B%0A%20%20%20%20return%20%26DataStore%7B%7D%0A%7D%0A%0Afunc%20(ds%20*DataStore)%20Query(query%20string%2C%20params%20map%5Bstring%5Dinterface%7B%7D)%20(interface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20map%5Bstring%5Dinterface%7B%7D%7B%22result%22%3A%20%22data%22%7D%2C%20nil%0A%7D%0A%0Afunc%20(c%20*Config)%20Public()%20map%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20map%5Bstring%5Dinterface%7B%7D%7B%22debug%22%3A%20true%7D%0A%7D%0A%0Afunc%20getMemoryUsage()%20map%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20var%20m%20runtime.MemStats%0A%20%20%20%20runtime.ReadMemStats(%26m)%0A%20%20%20%20return%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22alloc%22%3A%20%20%20%20%20%20m.Alloc%2C%0A%20%20%20%20%20%20%20%20%22total_alloc%22%3A%20m.TotalAlloc%2C%0A%20%20%20%20%20%20%20%20%22sys%22%3A%20%20%20%20%20%20%20%20m.Sys%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(app%20*Application)%20addDataTools()%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20(app%20*Application)%20addAnalyticsTools()%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20(app%20*Application)%20addApplicationTools()%20%7B%0A%20%20%20%20%2F%2F%20Direct%20access%20to%20application%20state%0A%20%20%20%20app.mcpServer.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_app_status%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20current%20application%20status%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20status%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22uptime%22%3A%20%20%20%20%20time.Since(app.startTime).String()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22memory%22%3A%20%20%20%20%20getMemoryUsage()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22goroutines%22%3A%20runtime.NumGoroutine()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22config%22%3A%20%20%20%20%20app.config.Public()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultJSON(status)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Direct%20data%20store%20access%0A%20%20%20%20app.mcpServer.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22query_data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Query%20application%20data%20store%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22query%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithObject(%22params%22%2C%20mcp.Description(%22Query%20parameters%22))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20query%20%3A%3D%20req.Params.Arguments%5B%22query%22%5D.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20params%20%3A%3D%20req.Params.Arguments%5B%22params%22%5D.(map%5Bstring%5Dinterface%7B%7D)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Direct%20access%20to%20data%20store%20(no%20serialization)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%2C%20err%20%3A%3D%20app.dataStore.Query(query%2C%20params)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultJSON(results)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%7D%0A%0Afunc%20(app%20*Application)%20ProcessWithMCP(ctx%20context.Context%2C%20input%20interface%7B%7D)%20(interface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Use%20MCP%20tools%20internally%20for%20processing%0A%20%20%20%20result%2C%20err%20%3A%3D%20app.mcpClient.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22process_data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20%20%20%20%20%20input%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22algorithm%22%3A%20%22optimized%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Extract%20result%20(no%20JSON%20parsing%20overhead)%0A%20%20%20%20return%20result.Content%5B0%5D.Text%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Zero-Copy%20Operations%0A%0A%60%60%60go%0A%2F%2F%20Shared%20data%20structures%20for%20zero-copy%20operations%0Atype%20SharedBuffer%20struct%20%7B%0A%20%20%20%20data%20%20%20%5B%5Dbyte%0A%20%20%20%20offset%20int%0A%20%20%20%20length%20int%0A%20%20%20%20mutex%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewSharedBuffer(size%20int)%20*SharedBuffer%20%7B%0A%20%20%20%20return%20%26SharedBuffer%7B%0A%20%20%20%20%20%20%20%20data%3A%20make(%5B%5Dbyte%2C%20size)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sb%20*SharedBuffer)%20Write(data%20%5B%5Dbyte)%20error%20%7B%0A%20%20%20%20sb.mutex.Lock()%0A%20%20%20%20defer%20sb.mutex.Unlock()%0A%0A%20%20%20%20if%20len(data)%20%3E%20len(sb.data)-sb.offset%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22buffer%20overflow%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20copy(sb.data%5Bsb.offset%3A%5D%2C%20data)%0A%20%20%20%20sb.length%20%3D%20len(data)%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(sb%20*SharedBuffer)%20Read()%20%5B%5Dbyte%20%7B%0A%20%20%20%20sb.mutex.RLock()%0A%20%20%20%20defer%20sb.mutex.RUnlock()%0A%0A%20%20%20%20%2F%2F%20Return%20slice%20of%20underlying%20array%20(zero-copy)%0A%20%20%20%20return%20sb.data%5Bsb.offset%20%3A%20sb.offset%2Bsb.length%5D%0A%7D%0A%0A%2F%2F%20Tool%20that%20operates%20on%20shared%20buffers%0Afunc%20handleZeroCopyOperation(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20shared%20buffer%20from%20context%20(passed%20by%20reference)%0A%20%20%20%20buffer%20%3A%3D%20getSharedBuffer(ctx)%0A%20%20%20%20if%20buffer%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20shared%20buffer%20available%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Operate%20directly%20on%20buffer%20data%0A%20%20%20%20data%20%3A%3D%20buffer.Read()%0A%20%20%20%20processed%20%3A%3D%20processInPlace(data)%20%2F%2F%20Modifies%20data%20in-place%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Processed%20%25d%20bytes%22%2C%20len(processed)))%2C%20nil%0A%7D%0A%0A%2F%2F%20Context%20key%20for%20shared%20buffer%0Atype%20sharedBufferKey%20struct%7B%7D%0A%0A%2F%2F%20Helper%20functions%20for%20zero-copy%20operations%0Afunc%20getSharedBuffer(ctx%20context.Context)%20*SharedBuffer%20%7B%0A%20%20%20%20if%20buffer%2C%20ok%20%3A%3D%20ctx.Value(sharedBufferKey%7B%7D).(*SharedBuffer)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20return%20buffer%0A%20%20%20%20%7D%0A%20%20%20%20return%20nil%0A%7D%0A%0A%2F%2F%20Helper%20function%20to%20add%20shared%20buffer%20to%20context%0Afunc%20withSharedBuffer(ctx%20context.Context%2C%20buffer%20*SharedBuffer)%20context.Context%20%7B%0A%20%20%20%20return%20context.WithValue(ctx%2C%20sharedBufferKey%7B%7D%2C%20buffer)%0A%7D%0A%0Afunc%20processInPlace(data%20%5B%5Dbyte)%20%5B%5Dbyte%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20process%20data%20in-place%0A%20%20%20%20return%20data%0A%7D%0A%0A%2F%2F%20Example%20usage%20of%20shared%20buffer%20with%20context%0Afunc%20exampleZeroCopyUsage()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20shared%20buffer%0A%20%20%20%20buffer%20%3A%3D%20NewSharedBuffer(1024)%0A%20%20%20%20buffer.Write(%5B%5Dbyte(%22example%20data%22))%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20context%20with%20shared%20buffer%0A%20%20%20%20ctx%20%3A%3D%20withSharedBuffer(context.Background()%2C%20buffer)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Call%20tool%20with%20shared%20buffer%20context%0A%20%20%20%20req%20%3A%3D%20mcp.CallToolRequest%7BName%3A%20%22zero-copy-op%22%7D%0A%20%20%20%20result%2C%20err%20%3A%3D%20handleZeroCopyOperation(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22Result%3A%20%25s%22%2C%20result.Content%5B0%5D.Text)%0A%7D%0A%60%60%60%0A%0A%23%23%20Direct%20Server%20Integration%0A%0A%23%23%23%20Library-Style%20Integration%0A%0A%60%60%60go%0A%2F%2F%20MCP%20as%20a%20library%20component%0Atype%20MCPEngine%20struct%20%7B%0A%20%20%20%20server%20*server.MCPServer%0A%20%20%20%20client%20*client.InProcessClient%0A%7D%0A%0Afunc%20NewMCPEngine()%20*MCPEngine%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Engine%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20engine%20%3A%3D%20%26MCPEngine%7B%0A%20%20%20%20%20%20%20%20server%3A%20s%2C%0A%20%20%20%20%20%20%20%20client%3A%20client.NewInProcessClient(s)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20engine.registerBuiltinTools()%0A%20%20%20%20return%20engine%0A%7D%0A%0Afunc%20(e%20*MCPEngine)%20RegisterTool(name%2C%20description%20string%2C%20handler%20server.ToolHandler)%20%7B%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(name%2C%20mcp.WithDescription(description))%0A%20%20%20%20e.server.AddTool(tool%2C%20handler)%0A%7D%0A%0Afunc%20(e%20*MCPEngine)%20Execute(ctx%20context.Context%2C%20toolName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(interface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20e.client.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20toolName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Return%20native%20Go%20types%20(no%20JSON%20overhead)%0A%20%20%20%20return%20parseResult(result)%2C%20nil%0A%7D%0A%0Afunc%20(e%20*MCPEngine)%20registerBuiltinTools()%20%7B%0A%20%20%20%20%2F%2F%20Math%20operations%0A%20%20%20%20e.RegisterTool(%22add%22%2C%20%22Add%20two%20numbers%22%2C%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20a%20%3A%3D%20req.Params.Arguments%5B%22a%22%5D.(float64)%0A%20%20%20%20%20%20%20%20b%20%3A%3D%20req.Params.Arguments%5B%22b%22%5D.(float64)%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultJSON(a%20%2B%20b)%2C%20nil%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20String%20operations%0A%20%20%20%20e.RegisterTool(%22concat%22%2C%20%22Concatenate%20strings%22%2C%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20parts%20%3A%3D%20req.Params.Arguments%5B%22parts%22%5D.(%5B%5Dinterface%7B%7D)%0A%20%20%20%20%20%20%20%20var%20result%20strings.Builder%0A%20%20%20%20%20%20%20%20for%20_%2C%20part%20%3A%3D%20range%20parts%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result.WriteString(fmt.Sprintf(%22%25v%22%2C%20part))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(result.String())%2C%20nil%0A%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Usage%20in%20application%0Afunc%20main()%20%7B%0A%20%20%20%20engine%20%3A%3D%20NewMCPEngine()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Register%20custom%20tools%0A%20%20%20%20engine.RegisterTool(%22custom_logic%22%2C%20%22Custom%20business%20logic%22%2C%20handleCustomLogic)%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Execute%20tools%20directly%0A%20%20%20%20result%2C%20err%20%3A%3D%20engine.Execute(ctx%2C%20%22add%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22a%22%3A%2010.0%2C%0A%20%20%20%20%20%20%20%20%22b%22%3A%2020.0%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20fmt.Printf(%22Result%3A%20%25v%5Cn%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Plugin%20Architecture%0A%0A%60%60%60go%0A%2F%2F%20Plugin%20interface%0Atype%20Plugin%20interface%20%7B%0A%20%20%20%20Name()%20string%0A%20%20%20%20Version()%20string%0A%20%20%20%20RegisterTools(server%20*server.MCPServer)%20error%0A%20%20%20%20RegisterResources(server%20*server.MCPServer)%20error%0A%7D%0A%0A%2F%2F%20Plugin%20manager%20with%20in-process%20MCP%0Atype%20PluginManager%20struct%20%7B%0A%20%20%20%20mcpServer%20*server.MCPServer%0A%20%20%20%20mcpClient%20*client.InProcessClient%0A%20%20%20%20plugins%20%20%20map%5Bstring%5DPlugin%0A%7D%0A%0Afunc%20NewPluginManager()%20*PluginManager%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Plugin%20Manager%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithAllCapabilities()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20return%20%26PluginManager%7B%0A%20%20%20%20%20%20%20%20mcpServer%3A%20s%2C%0A%20%20%20%20%20%20%20%20mcpClient%3A%20client.NewInProcessClient(s)%2C%0A%20%20%20%20%20%20%20%20plugins%3A%20%20%20make(map%5Bstring%5DPlugin)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(pm%20*PluginManager)%20LoadPlugin(plugin%20Plugin)%20error%20%7B%0A%20%20%20%20name%20%3A%3D%20plugin.Name()%0A%20%20%20%20%0A%20%20%20%20if%20_%2C%20exists%20%3A%3D%20pm.plugins%5Bname%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22plugin%20%25s%20already%20loaded%22%2C%20name)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Register%20plugin%20tools%20and%20resources%0A%20%20%20%20if%20err%20%3A%3D%20plugin.RegisterTools(pm.mcpServer)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20register%20tools%20for%20plugin%20%25s%3A%20%25w%22%2C%20name%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20plugin.RegisterResources(pm.mcpServer)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20register%20resources%20for%20plugin%20%25s%3A%20%25w%22%2C%20name%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20pm.plugins%5Bname%5D%20%3D%20plugin%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(pm%20*PluginManager)%20ExecutePluginTool(ctx%20context.Context%2C%20toolName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(interface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20return%20pm.mcpClient.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20toolName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Example%20plugin%0Atype%20MathPlugin%20struct%7B%7D%0A%0Afunc%20(p%20*MathPlugin)%20Name()%20string%20%20%20%20%7B%20return%20%22math%22%20%7D%0Afunc%20(p%20*MathPlugin)%20Version()%20string%20%7B%20return%20%221.0.0%22%20%7D%0A%0Afunc%20(p%20*MathPlugin)%20RegisterTools(s%20*server.MCPServer)%20error%20%7B%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22math.factorial%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Calculate%20factorial%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithInteger(%22n%22%2C%20mcp.Required()%2C%20mcp.Minimum(0))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20p.handleFactorial%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22math.fibonacci%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Calculate%20Fibonacci%20number%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithInteger(%22n%22%2C%20mcp.Required()%2C%20mcp.Minimum(0))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20p.handleFibonacci%2C%0A%20%20%20%20)%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(p%20*MathPlugin)%20RegisterResources(s%20*server.MCPServer)%20error%20%7B%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22math%3A%2F%2Fconstants%2F%7Bname%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Mathematical%20Constants%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Common%20mathematical%20constants%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20p.handleConstants%2C%0A%20%20%20%20)%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(p%20*MathPlugin)%20handleFactorial(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20n%20%3A%3D%20int(req.Params.Arguments%5B%22n%22%5D.(float64))%0A%20%20%20%20%0A%20%20%20%20result%20%3A%3D%201%0A%20%20%20%20for%20i%20%3A%3D%202%3B%20i%20%3C%3D%20n%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20result%20*%3D%20i%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22input%22%3A%20%20n%2C%0A%20%20%20%20%20%20%20%20%22result%22%3A%20result%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0Afunc%20(p%20*MathPlugin)%20handleFibonacci(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20n%20%3A%3D%20int(req.Params.Arguments%5B%22n%22%5D.(float64))%0A%20%20%20%20%0A%20%20%20%20if%20n%20%3C%3D%201%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultJSON(n)%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20a%2C%20b%20%3A%3D%200%2C%201%0A%20%20%20%20for%20i%20%3A%3D%202%3B%20i%20%3C%3D%20n%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20a%2C%20b%20%3D%20b%2C%20a%2Bb%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(b)%2C%20nil%0A%7D%0A%0Afunc%20(p%20*MathPlugin)%20handleConstants(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20name%20%3A%3D%20extractNameFromURI(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20constants%20%3A%3D%20map%5Bstring%5Dfloat64%7B%0A%20%20%20%20%20%20%20%20%22pi%22%3A%20%203.141592653589793%2C%0A%20%20%20%20%20%20%20%20%22e%22%3A%20%20%202.718281828459045%2C%0A%20%20%20%20%20%20%20%20%22phi%22%3A%201.618033988749895%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20value%2C%20exists%20%3A%3D%20constants%5Bname%5D%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20constant%3A%20%25s%22%2C%20name)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewResourceResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%20name%2C%0A%20%20%20%20%20%20%20%20%22value%22%3A%20value%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%20Benefits%0A%0A%23%23%23%20Latency%20Comparison%0A%0A%60%60%60go%0Afunc%20benchmarkTransports()%20%7B%0A%20%20%20%20%2F%2F%20In-process%0A%20%20%20%20inProcessServer%20%3A%3D%20server.NewMCPServer(%22Benchmark%22%2C%20%221.0.0%22)%0A%20%20%20%20inProcessClient%20%3A%3D%20client.NewInProcessClient(inProcessServer)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20STDIO%20(for%20comparison)%0A%20%20%20%20stdioClient%2C%20_%20%3A%3D%20client.NewStdioClient(%22go%22%2C%20%22run%22%2C%20%22server.go%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20HTTP%20(for%20comparison)%0A%20%20%20%20httpClient%20%3A%3D%20client.NewHTTPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20iterations%20%3A%3D%2010000%0A%0A%20%20%20%20%2F%2F%20Benchmark%20in-process%0A%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20iterations%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20inProcessClient.CallTool(ctx%2C%20simpleToolRequest)%0A%20%20%20%20%7D%0A%20%20%20%20inProcessDuration%20%3A%3D%20time.Since(start)%0A%0A%20%20%20%20%2F%2F%20Benchmark%20STDIO%0A%20%20%20%20start%20%3D%20time.Now()%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20iterations%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20stdioClient.CallTool(ctx%2C%20simpleToolRequest)%0A%20%20%20%20%7D%0A%20%20%20%20stdioDuration%20%3A%3D%20time.Since(start)%0A%0A%20%20%20%20%2F%2F%20Benchmark%20HTTP%0A%20%20%20%20start%20%3D%20time.Now()%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20iterations%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20httpClient.CallTool(ctx%2C%20simpleToolRequest)%0A%20%20%20%20%7D%0A%20%20%20%20httpDuration%20%3A%3D%20time.Since(start)%0A%0A%20%20%20%20fmt.Printf(%22In-Process%3A%20%25v%20(%25.2f%20%CE%BCs%2Fcall)%5Cn%22%2C%20%0A%20%20%20%20%20%20%20%20inProcessDuration%2C%20%0A%20%20%20%20%20%20%20%20float64(inProcessDuration.Nanoseconds())%2Ffloat64(iterations)%2F1000)%0A%20%20%20%20%0A%20%20%20%20fmt.Printf(%22STDIO%3A%20%25v%20(%25.2f%20%CE%BCs%2Fcall)%5Cn%22%2C%20%0A%20%20%20%20%20%20%20%20stdioDuration%2C%20%0A%20%20%20%20%20%20%20%20float64(stdioDuration.Nanoseconds())%2Ffloat64(iterations)%2F1000)%0A%20%20%20%20%0A%20%20%20%20fmt.Printf(%22HTTP%3A%20%25v%20(%25.2f%20%CE%BCs%2Fcall)%5Cn%22%2C%20%0A%20%20%20%20%20%20%20%20httpDuration%2C%20%0A%20%20%20%20%20%20%20%20float64(httpDuration.Nanoseconds())%2Ffloat64(iterations)%2F1000)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Memory%20Efficiency%0A%0A%60%60%60go%0A%2F%2F%20Shared%20data%20structures%20reduce%20memory%20allocation%0Atype%20SharedDataPool%20struct%20%7B%0A%20%20%20%20buffers%20chan%20%5B%5Dbyte%0A%20%20%20%20size%20%20%20%20int%0A%7D%0A%0Afunc%20NewSharedDataPool(poolSize%2C%20bufferSize%20int)%20*SharedDataPool%20%7B%0A%20%20%20%20pool%20%3A%3D%20%26SharedDataPool%7B%0A%20%20%20%20%20%20%20%20buffers%3A%20make(chan%20%5B%5Dbyte%2C%20poolSize)%2C%0A%20%20%20%20%20%20%20%20size%3A%20%20%20%20bufferSize%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Pre-allocate%20buffers%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20poolSize%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20pool.buffers%20%3C-%20make(%5B%5Dbyte%2C%20bufferSize)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20pool%0A%7D%0A%0Afunc%20(p%20*SharedDataPool)%20Get()%20%5B%5Dbyte%20%7B%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20buffer%20%3A%3D%20%3C-p.buffers%3A%0A%20%20%20%20%20%20%20%20return%20buffer%5B%3A0%5D%20%2F%2F%20Reset%20length%20but%20keep%20capacity%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20make(%5B%5Dbyte%2C%200%2C%20p.size)%20%2F%2F%20Fallback%20allocation%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(p%20*SharedDataPool)%20Put(buffer%20%5B%5Dbyte)%20%7B%0A%20%20%20%20if%20cap(buffer)%20!%3D%20p.size%20%7B%0A%20%20%20%20%20%20%20%20return%20%2F%2F%20Don't%20pool%20buffers%20of%20wrong%20size%0A%20%20%20%20%7D%0A%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20p.buffers%20%3C-%20buffer%3A%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Pool%20full%2C%20let%20GC%20handle%20it%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Use%20shared%20pool%20in%20tools%0Avar%20dataPool%20%3D%20NewSharedDataPool(100%2C%204096)%0A%0Afunc%20handlePooledOperation(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20buffer%20%3A%3D%20dataPool.Get()%0A%20%20%20%20defer%20dataPool.Put(buffer)%0A%0A%20%20%20%20%2F%2F%20Use%20buffer%20for%20processing%0A%20%20%20%20result%20%3A%3D%20processWithBuffer(buffer%2C%20req.Params.Arguments)%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultJSON(result)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Build%20MCP%20clients%20for%20all%20transports%0A-%20**%5BHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Learn%20about%20web-based%20scenarios%0A-%20**%5BServer%20Advanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20production-ready%20features",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./inprocess-CLmOUmRX.js"),[]),path:"/transports/inprocess.html",type:"mdx",filePath:"transports/inprocess.mdx",content:"%23%20In-Process%20Transport%0A%0AIn-process%20transport%20enables%20direct%20integration%20of%20MCP%20servers%20within%20the%20same%20process%2C%20eliminating%20serialization%20overhead%20and%20providing%20the%20highest%20performance%20option%20for%20embedded%20scenarios.%0A%0A%23%23%20Use%20Cases%0A%0AIn-process%20transport%20is%20perfect%20for%3A%0A%0A-%20**Embedded%20servers**%3A%20MCP%20functionality%20within%20existing%20applications%0A-%20**Testing%20and%20development**%3A%20Fast%2C%20reliable%20testing%20without%20network%20overhead%0A-%20**High-performance%20scenarios**%3A%20Microsecond%20latency%20requirements%0A-%20**Library%20integrations**%3A%20MCP%20as%20a%20library%20component%0A-%20**Single-process%20architectures**%3A%20Monolithic%20applications%20with%20MCP%20capabilities%0A%0A**Example%20applications%3A**%0A-%20Game%20engines%20with%20AI%20tool%20integration%0A-%20Real-time%20trading%20systems%0A-%20Embedded%20analytics%20engines%0A-%20Testing%20frameworks%0A-%20Desktop%20applications%20with%20plugin%20architectures%0A-%20High-frequency%20data%20processing%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20In-Process%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22runtime%22%0A%20%20%20%20%22strings%22%0A%20%20%20%20%22time%22%0A%20%20%20%20%22sync%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22In-Process%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20high-performance%20tools%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22fast_calculation%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Perform%20fast%20mathematical%20calculations%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22operation%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithArray(%22numbers%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleFastCalculation%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22process_data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Process%20data%20with%20zero-copy%20operations%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithObject(%22data%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22algorithm%22%2C%20mcp.Default(%22default%22))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleProcessData%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20in-memory%20resources%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22memory%3A%2F%2Fcache%2F%7Bkey%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Memory%20Cache%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22In-memory%20cached%20data%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleMemoryCache%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20in-process%20client%0A%20%20%20%20client%20%3A%3D%20client.NewInProcessClient(s)%0A%20%20%20%20defer%20client.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20(no%20network%20overhead)%0A%20%20%20%20if%20err%20%3A%3D%20client.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Demonstrate%20high-performance%20operations%0A%20%20%20%20demonstratePerformance(ctx%2C%20client)%0A%7D%0A%0Afunc%20handleFastCalculation(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20operation%20%3A%3D%20req.Params.Arguments%5B%22operation%22%5D.(string)%0A%20%20%20%20numbers%20%3A%3D%20req.Params.Arguments%5B%22numbers%22%5D.(%5B%5Dinterface%7B%7D)%0A%0A%20%20%20%20%2F%2F%20Convert%20to%20float64%20slice%0A%20%20%20%20values%20%3A%3D%20make(%5B%5Dfloat64%2C%20len(numbers))%0A%20%20%20%20for%20i%2C%20n%20%3A%3D%20range%20numbers%20%7B%0A%20%20%20%20%20%20%20%20values%5Bi%5D%20%3D%20n.(float64)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Perform%20calculation%0A%20%20%20%20var%20result%20float64%0A%20%20%20%20switch%20operation%20%7B%0A%20%20%20%20case%20%22sum%22%3A%0A%20%20%20%20%20%20%20%20for%20_%2C%20v%20%3A%3D%20range%20values%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%2B%3D%20v%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22product%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%201%0A%20%20%20%20%20%20%20%20for%20_%2C%20v%20%3A%3D%20range%20values%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20*%3D%20v%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22average%22%3A%0A%20%20%20%20%20%20%20%20sum%20%3A%3D%200.0%0A%20%20%20%20%20%20%20%20for%20_%2C%20v%20%3A%3D%20range%20values%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sum%20%2B%3D%20v%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20result%20%3D%20sum%20%2F%20float64(len(values))%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20operation%3A%20%25s%22%2C%20operation)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22operation%22%3A%20operation%2C%0A%20%20%20%20%20%20%20%20%22result%22%3A%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20%22count%22%3A%20%20%20%20%20len(values)%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0Afunc%20handleProcessData(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20req.Params.Arguments%5B%22data%22%5D.(map%5Bstring%5Dinterface%7B%7D)%0A%20%20%20%20algorithm%20%3A%3D%20req.Params.Arguments%5B%22algorithm%22%5D.(string)%0A%0A%20%20%20%20%2F%2F%20Process%20data%20in-place%20(zero-copy%20when%20possible)%0A%20%20%20%20processed%20%3A%3D%20processDataInPlace(data%2C%20algorithm)%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22algorithm%22%3A%20algorithm%2C%0A%20%20%20%20%20%20%20%20%22processed%22%3A%20processed%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().UnixNano()%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0Avar%20(%0A%20%20%20%20memoryCache%20%3D%20make(map%5Bstring%5Dinterface%7B%7D)%0A%20%20%20%20cacheMutex%20%20sync.RWMutex%0A)%0A%0Afunc%20handleMemoryCache(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20extractKeyFromURI(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20cacheMutex.RLock()%0A%20%20%20%20value%2C%20exists%20%3A%3D%20memoryCache%5Bkey%5D%0A%20%20%20%20cacheMutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22key%20not%20found%3A%20%25s%22%2C%20key)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewResourceResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22key%22%3A%20%20%20key%2C%0A%20%20%20%20%20%20%20%20%22value%22%3A%20value%2C%0A%20%20%20%20%20%20%20%20%22type%22%3A%20%20fmt.Sprintf(%22%25T%22%2C%20value)%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20examples%0Afunc%20processDataInPlace(data%20map%5Bstring%5Dinterface%7B%7D%2C%20algorithm%20string)%20map%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20process%20data%20according%20to%20algorithm%0A%20%20%20%20result%20%3A%3D%20make(map%5Bstring%5Dinterface%7B%7D)%0A%20%20%20%20for%20k%2C%20v%20%3A%3D%20range%20data%20%7B%0A%20%20%20%20%20%20%20%20result%5Bk%5D%20%3D%20fmt.Sprintf(%22processed_%25v%22%2C%20v)%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%0A%7D%0A%0Afunc%20extractKeyFromURI(uri%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Extract%20key%20from%20URI%20like%20%22memory%3A%2F%2Fcache%2Fmykey%22%0A%20%20%20%20parts%20%3A%3D%20strings.Split(uri%2C%20%22%2F%22)%0A%20%20%20%20if%20len(parts)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20return%20parts%5Blen(parts)-1%5D%0A%20%20%20%20%7D%0A%20%20%20%20return%20uri%0A%7D%0A%0Afunc%20demonstratePerformance(ctx%20context.Context%2C%20client%20*client.InProcessClient)%20%7B%0A%20%20%20%20%2F%2F%20Benchmark%20tool%20calls%0A%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20iterations%20%3A%3D%2010000%0A%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20iterations%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20_%2C%20err%20%3A%3D%20client.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22fast_calculation%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22operation%22%3A%20%22sum%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22numbers%22%3A%20%20%20%5B%5Dinterface%7B%7D%7B1.0%2C%202.0%2C%203.0%2C%204.0%2C%205.0%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20duration%20%3A%3D%20time.Since(start)%0A%20%20%20%20avgLatency%20%3A%3D%20duration%20%2F%20time.Duration(iterations)%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22Completed%20%25d%20tool%20calls%20in%20%25v%22%2C%20iterations%2C%20duration)%0A%20%20%20%20log.Printf(%22Average%20latency%3A%20%25v%22%2C%20avgLatency)%0A%20%20%20%20log.Printf(%22Throughput%3A%20%25.0f%20calls%2Fsecond%22%2C%20float64(iterations)%2Fduration.Seconds())%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20In-Process%20Integration%0A%0A%60%60%60go%0A%2F%2F%20Embedded%20MCP%20server%20in%20a%20larger%20application%0Atype%20Application%20struct%20%7B%0A%20%20%20%20mcpServer%20*server.MCPServer%0A%20%20%20%20mcpClient%20*client.InProcessClient%0A%20%20%20%20dataStore%20*DataStore%0A%20%20%20%20config%20%20%20%20*Config%0A%20%20%20%20startTime%20time.Time%0A%7D%0A%0Afunc%20NewApplication(config%20*Config)%20*Application%20%7B%0A%20%20%20%20app%20%3A%3D%20%26Application%7B%0A%20%20%20%20%20%20%20%20config%3A%20%20%20%20config%2C%0A%20%20%20%20%20%20%20%20dataStore%3A%20NewDataStore()%2C%0A%20%20%20%20%20%20%20%20startTime%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20embedded%20MCP%20server%0A%20%20%20%20app.mcpServer%20%3D%20server.NewMCPServer(%22Embedded%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithAllCapabilities()%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20application-specific%20tools%0A%20%20%20%20app.addApplicationTools()%0A%20%20%20%20app.addDataTools()%0A%20%20%20%20app.addAnalyticsTools()%0A%0A%20%20%20%20%2F%2F%20Create%20in-process%20client%20for%20internal%20use%0A%20%20%20%20app.mcpClient%20%3D%20client.NewInProcessClient(app.mcpServer)%0A%0A%20%20%20%20return%20app%0A%7D%0A%0A%2F%2F%20Helper%20types%20and%20functions%20for%20the%20application%20example%0Atype%20DataStore%20struct%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Atype%20Config%20struct%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20NewDataStore()%20*DataStore%20%7B%0A%20%20%20%20return%20%26DataStore%7B%7D%0A%7D%0A%0Afunc%20(ds%20*DataStore)%20Query(query%20string%2C%20params%20map%5Bstring%5Dinterface%7B%7D)%20(interface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20map%5Bstring%5Dinterface%7B%7D%7B%22result%22%3A%20%22data%22%7D%2C%20nil%0A%7D%0A%0Afunc%20(c%20*Config)%20Public()%20map%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20map%5Bstring%5Dinterface%7B%7D%7B%22debug%22%3A%20true%7D%0A%7D%0A%0Afunc%20getMemoryUsage()%20map%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20var%20m%20runtime.MemStats%0A%20%20%20%20runtime.ReadMemStats(%26m)%0A%20%20%20%20return%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22alloc%22%3A%20%20%20%20%20%20m.Alloc%2C%0A%20%20%20%20%20%20%20%20%22total_alloc%22%3A%20m.TotalAlloc%2C%0A%20%20%20%20%20%20%20%20%22sys%22%3A%20%20%20%20%20%20%20%20m.Sys%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(app%20*Application)%20addDataTools()%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20(app%20*Application)%20addAnalyticsTools()%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20(app%20*Application)%20addApplicationTools()%20%7B%0A%20%20%20%20%2F%2F%20Direct%20access%20to%20application%20state%0A%20%20%20%20app.mcpServer.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_app_status%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20current%20application%20status%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20status%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22uptime%22%3A%20%20%20%20%20time.Since(app.startTime).String()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22memory%22%3A%20%20%20%20%20getMemoryUsage()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22goroutines%22%3A%20runtime.NumGoroutine()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22config%22%3A%20%20%20%20%20app.config.Public()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultJSON(status)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Direct%20data%20store%20access%0A%20%20%20%20app.mcpServer.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22query_data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Query%20application%20data%20store%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22query%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithObject(%22params%22%2C%20mcp.Description(%22Query%20parameters%22))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20query%20%3A%3D%20req.Params.Arguments%5B%22query%22%5D.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20params%20%3A%3D%20req.Params.Arguments%5B%22params%22%5D.(map%5Bstring%5Dinterface%7B%7D)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Direct%20access%20to%20data%20store%20(no%20serialization)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%2C%20err%20%3A%3D%20app.dataStore.Query(query%2C%20params)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultJSON(results)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%7D%0A%0Afunc%20(app%20*Application)%20ProcessWithMCP(ctx%20context.Context%2C%20input%20interface%7B%7D)%20(interface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Use%20MCP%20tools%20internally%20for%20processing%0A%20%20%20%20result%2C%20err%20%3A%3D%20app.mcpClient.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22process_data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20%20%20%20%20%20input%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22algorithm%22%3A%20%22optimized%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Extract%20result%20(no%20JSON%20parsing%20overhead)%0A%20%20%20%20return%20result.Content%5B0%5D.Text%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Zero-Copy%20Operations%0A%0A%60%60%60go%0A%2F%2F%20Shared%20data%20structures%20for%20zero-copy%20operations%0Atype%20SharedBuffer%20struct%20%7B%0A%20%20%20%20data%20%20%20%5B%5Dbyte%0A%20%20%20%20offset%20int%0A%20%20%20%20length%20int%0A%20%20%20%20mutex%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewSharedBuffer(size%20int)%20*SharedBuffer%20%7B%0A%20%20%20%20return%20%26SharedBuffer%7B%0A%20%20%20%20%20%20%20%20data%3A%20make(%5B%5Dbyte%2C%20size)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sb%20*SharedBuffer)%20Write(data%20%5B%5Dbyte)%20error%20%7B%0A%20%20%20%20sb.mutex.Lock()%0A%20%20%20%20defer%20sb.mutex.Unlock()%0A%0A%20%20%20%20if%20len(data)%20%3E%20len(sb.data)-sb.offset%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22buffer%20overflow%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20copy(sb.data%5Bsb.offset%3A%5D%2C%20data)%0A%20%20%20%20sb.length%20%3D%20len(data)%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(sb%20*SharedBuffer)%20Read()%20%5B%5Dbyte%20%7B%0A%20%20%20%20sb.mutex.RLock()%0A%20%20%20%20defer%20sb.mutex.RUnlock()%0A%0A%20%20%20%20%2F%2F%20Return%20slice%20of%20underlying%20array%20(zero-copy)%0A%20%20%20%20return%20sb.data%5Bsb.offset%20%3A%20sb.offset%2Bsb.length%5D%0A%7D%0A%0A%2F%2F%20Tool%20that%20operates%20on%20shared%20buffers%0Afunc%20handleZeroCopyOperation(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20shared%20buffer%20from%20context%20(passed%20by%20reference)%0A%20%20%20%20buffer%20%3A%3D%20getSharedBuffer(ctx)%0A%20%20%20%20if%20buffer%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20shared%20buffer%20available%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Operate%20directly%20on%20buffer%20data%0A%20%20%20%20data%20%3A%3D%20buffer.Read()%0A%20%20%20%20processed%20%3A%3D%20processInPlace(data)%20%2F%2F%20Modifies%20data%20in-place%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Processed%20%25d%20bytes%22%2C%20len(processed)))%2C%20nil%0A%7D%0A%0A%2F%2F%20Context%20key%20for%20shared%20buffer%0Atype%20sharedBufferKey%20struct%7B%7D%0A%0A%2F%2F%20Helper%20functions%20for%20zero-copy%20operations%0Afunc%20getSharedBuffer(ctx%20context.Context)%20*SharedBuffer%20%7B%0A%20%20%20%20if%20buffer%2C%20ok%20%3A%3D%20ctx.Value(sharedBufferKey%7B%7D).(*SharedBuffer)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20return%20buffer%0A%20%20%20%20%7D%0A%20%20%20%20return%20nil%0A%7D%0A%0A%2F%2F%20Helper%20function%20to%20add%20shared%20buffer%20to%20context%0Afunc%20withSharedBuffer(ctx%20context.Context%2C%20buffer%20*SharedBuffer)%20context.Context%20%7B%0A%20%20%20%20return%20context.WithValue(ctx%2C%20sharedBufferKey%7B%7D%2C%20buffer)%0A%7D%0A%0Afunc%20processInPlace(data%20%5B%5Dbyte)%20%5B%5Dbyte%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20process%20data%20in-place%0A%20%20%20%20return%20data%0A%7D%0A%0A%2F%2F%20Example%20usage%20of%20shared%20buffer%20with%20context%0Afunc%20exampleZeroCopyUsage()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20shared%20buffer%0A%20%20%20%20buffer%20%3A%3D%20NewSharedBuffer(1024)%0A%20%20%20%20buffer.Write(%5B%5Dbyte(%22example%20data%22))%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20context%20with%20shared%20buffer%0A%20%20%20%20ctx%20%3A%3D%20withSharedBuffer(context.Background()%2C%20buffer)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Call%20tool%20with%20shared%20buffer%20context%0A%20%20%20%20req%20%3A%3D%20mcp.CallToolRequest%7BName%3A%20%22zero-copy-op%22%7D%0A%20%20%20%20result%2C%20err%20%3A%3D%20handleZeroCopyOperation(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22Result%3A%20%25s%22%2C%20result.Content%5B0%5D.Text)%0A%7D%0A%60%60%60%0A%0A%23%23%20Direct%20Server%20Integration%0A%0A%23%23%23%20Library-Style%20Integration%0A%0A%60%60%60go%0A%2F%2F%20MCP%20as%20a%20library%20component%0Atype%20MCPEngine%20struct%20%7B%0A%20%20%20%20server%20*server.MCPServer%0A%20%20%20%20client%20*client.InProcessClient%0A%7D%0A%0Afunc%20NewMCPEngine()%20*MCPEngine%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Engine%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20engine%20%3A%3D%20%26MCPEngine%7B%0A%20%20%20%20%20%20%20%20server%3A%20s%2C%0A%20%20%20%20%20%20%20%20client%3A%20client.NewInProcessClient(s)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20engine.registerBuiltinTools()%0A%20%20%20%20return%20engine%0A%7D%0A%0Afunc%20(e%20*MCPEngine)%20RegisterTool(name%2C%20description%20string%2C%20handler%20server.ToolHandler)%20%7B%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(name%2C%20mcp.WithDescription(description))%0A%20%20%20%20e.server.AddTool(tool%2C%20handler)%0A%7D%0A%0Afunc%20(e%20*MCPEngine)%20Execute(ctx%20context.Context%2C%20toolName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(interface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20e.client.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20toolName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Return%20native%20Go%20types%20(no%20JSON%20overhead)%0A%20%20%20%20return%20parseResult(result)%2C%20nil%0A%7D%0A%0Afunc%20(e%20*MCPEngine)%20registerBuiltinTools()%20%7B%0A%20%20%20%20%2F%2F%20Math%20operations%0A%20%20%20%20e.RegisterTool(%22add%22%2C%20%22Add%20two%20numbers%22%2C%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20a%20%3A%3D%20req.Params.Arguments%5B%22a%22%5D.(float64)%0A%20%20%20%20%20%20%20%20b%20%3A%3D%20req.Params.Arguments%5B%22b%22%5D.(float64)%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultJSON(a%20%2B%20b)%2C%20nil%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20String%20operations%0A%20%20%20%20e.RegisterTool(%22concat%22%2C%20%22Concatenate%20strings%22%2C%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20parts%20%3A%3D%20req.Params.Arguments%5B%22parts%22%5D.(%5B%5Dinterface%7B%7D)%0A%20%20%20%20%20%20%20%20var%20result%20strings.Builder%0A%20%20%20%20%20%20%20%20for%20_%2C%20part%20%3A%3D%20range%20parts%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result.WriteString(fmt.Sprintf(%22%25v%22%2C%20part))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(result.String())%2C%20nil%0A%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Usage%20in%20application%0Afunc%20main()%20%7B%0A%20%20%20%20engine%20%3A%3D%20NewMCPEngine()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Register%20custom%20tools%0A%20%20%20%20engine.RegisterTool(%22custom_logic%22%2C%20%22Custom%20business%20logic%22%2C%20handleCustomLogic)%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Execute%20tools%20directly%0A%20%20%20%20result%2C%20err%20%3A%3D%20engine.Execute(ctx%2C%20%22add%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22a%22%3A%2010.0%2C%0A%20%20%20%20%20%20%20%20%22b%22%3A%2020.0%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20fmt.Printf(%22Result%3A%20%25v%5Cn%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Plugin%20Architecture%0A%0A%60%60%60go%0A%2F%2F%20Plugin%20interface%0Atype%20Plugin%20interface%20%7B%0A%20%20%20%20Name()%20string%0A%20%20%20%20Version()%20string%0A%20%20%20%20RegisterTools(server%20*server.MCPServer)%20error%0A%20%20%20%20RegisterResources(server%20*server.MCPServer)%20error%0A%7D%0A%0A%2F%2F%20Plugin%20manager%20with%20in-process%20MCP%0Atype%20PluginManager%20struct%20%7B%0A%20%20%20%20mcpServer%20*server.MCPServer%0A%20%20%20%20mcpClient%20*client.InProcessClient%0A%20%20%20%20plugins%20%20%20map%5Bstring%5DPlugin%0A%7D%0A%0Afunc%20NewPluginManager()%20*PluginManager%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Plugin%20Manager%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithAllCapabilities()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20return%20%26PluginManager%7B%0A%20%20%20%20%20%20%20%20mcpServer%3A%20s%2C%0A%20%20%20%20%20%20%20%20mcpClient%3A%20client.NewInProcessClient(s)%2C%0A%20%20%20%20%20%20%20%20plugins%3A%20%20%20make(map%5Bstring%5DPlugin)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(pm%20*PluginManager)%20LoadPlugin(plugin%20Plugin)%20error%20%7B%0A%20%20%20%20name%20%3A%3D%20plugin.Name()%0A%20%20%20%20%0A%20%20%20%20if%20_%2C%20exists%20%3A%3D%20pm.plugins%5Bname%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22plugin%20%25s%20already%20loaded%22%2C%20name)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Register%20plugin%20tools%20and%20resources%0A%20%20%20%20if%20err%20%3A%3D%20plugin.RegisterTools(pm.mcpServer)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20register%20tools%20for%20plugin%20%25s%3A%20%25w%22%2C%20name%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20plugin.RegisterResources(pm.mcpServer)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20register%20resources%20for%20plugin%20%25s%3A%20%25w%22%2C%20name%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20pm.plugins%5Bname%5D%20%3D%20plugin%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(pm%20*PluginManager)%20ExecutePluginTool(ctx%20context.Context%2C%20toolName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(interface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20return%20pm.mcpClient.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20toolName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Example%20plugin%0Atype%20MathPlugin%20struct%7B%7D%0A%0Afunc%20(p%20*MathPlugin)%20Name()%20string%20%20%20%20%7B%20return%20%22math%22%20%7D%0Afunc%20(p%20*MathPlugin)%20Version()%20string%20%7B%20return%20%221.0.0%22%20%7D%0A%0Afunc%20(p%20*MathPlugin)%20RegisterTools(s%20*server.MCPServer)%20error%20%7B%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22math.factorial%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Calculate%20factorial%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithInteger(%22n%22%2C%20mcp.Required()%2C%20mcp.Minimum(0))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20p.handleFactorial%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22math.fibonacci%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Calculate%20Fibonacci%20number%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithInteger(%22n%22%2C%20mcp.Required()%2C%20mcp.Minimum(0))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20p.handleFibonacci%2C%0A%20%20%20%20)%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(p%20*MathPlugin)%20RegisterResources(s%20*server.MCPServer)%20error%20%7B%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22math%3A%2F%2Fconstants%2F%7Bname%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Mathematical%20Constants%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Common%20mathematical%20constants%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20p.handleConstants%2C%0A%20%20%20%20)%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(p%20*MathPlugin)%20handleFactorial(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20n%20%3A%3D%20int(req.Params.Arguments%5B%22n%22%5D.(float64))%0A%20%20%20%20%0A%20%20%20%20result%20%3A%3D%201%0A%20%20%20%20for%20i%20%3A%3D%202%3B%20i%20%3C%3D%20n%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20result%20*%3D%20i%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22input%22%3A%20%20n%2C%0A%20%20%20%20%20%20%20%20%22result%22%3A%20result%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0Afunc%20(p%20*MathPlugin)%20handleFibonacci(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20n%20%3A%3D%20int(req.Params.Arguments%5B%22n%22%5D.(float64))%0A%20%20%20%20%0A%20%20%20%20if%20n%20%3C%3D%201%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultJSON(n)%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20a%2C%20b%20%3A%3D%200%2C%201%0A%20%20%20%20for%20i%20%3A%3D%202%3B%20i%20%3C%3D%20n%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20a%2C%20b%20%3D%20b%2C%20a%2Bb%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(b)%2C%20nil%0A%7D%0A%0Afunc%20(p%20*MathPlugin)%20handleConstants(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20name%20%3A%3D%20extractNameFromURI(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20constants%20%3A%3D%20map%5Bstring%5Dfloat64%7B%0A%20%20%20%20%20%20%20%20%22pi%22%3A%20%203.141592653589793%2C%0A%20%20%20%20%20%20%20%20%22e%22%3A%20%20%202.718281828459045%2C%0A%20%20%20%20%20%20%20%20%22phi%22%3A%201.618033988749895%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20value%2C%20exists%20%3A%3D%20constants%5Bname%5D%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20constant%3A%20%25s%22%2C%20name)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewResourceResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%20name%2C%0A%20%20%20%20%20%20%20%20%22value%22%3A%20value%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%20Benefits%0A%0A%23%23%23%20Latency%20Comparison%0A%0A%60%60%60go%0Afunc%20benchmarkTransports()%20%7B%0A%20%20%20%20%2F%2F%20In-process%0A%20%20%20%20inProcessServer%20%3A%3D%20server.NewMCPServer(%22Benchmark%22%2C%20%221.0.0%22)%0A%20%20%20%20inProcessClient%20%3A%3D%20client.NewInProcessClient(inProcessServer)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20STDIO%20(for%20comparison)%0A%20%20%20%20stdioClient%2C%20_%20%3A%3D%20client.NewStdioClient(%22go%22%2C%20%22run%22%2C%20%22server.go%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20HTTP%20(for%20comparison)%0A%20%20%20%20httpClient%20%3A%3D%20client.NewHTTPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20iterations%20%3A%3D%2010000%0A%0A%20%20%20%20%2F%2F%20Benchmark%20in-process%0A%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20iterations%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20inProcessClient.CallTool(ctx%2C%20simpleToolRequest)%0A%20%20%20%20%7D%0A%20%20%20%20inProcessDuration%20%3A%3D%20time.Since(start)%0A%0A%20%20%20%20%2F%2F%20Benchmark%20STDIO%0A%20%20%20%20start%20%3D%20time.Now()%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20iterations%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20stdioClient.CallTool(ctx%2C%20simpleToolRequest)%0A%20%20%20%20%7D%0A%20%20%20%20stdioDuration%20%3A%3D%20time.Since(start)%0A%0A%20%20%20%20%2F%2F%20Benchmark%20HTTP%0A%20%20%20%20start%20%3D%20time.Now()%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20iterations%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20httpClient.CallTool(ctx%2C%20simpleToolRequest)%0A%20%20%20%20%7D%0A%20%20%20%20httpDuration%20%3A%3D%20time.Since(start)%0A%0A%20%20%20%20fmt.Printf(%22In-Process%3A%20%25v%20(%25.2f%20%CE%BCs%2Fcall)%5Cn%22%2C%20%0A%20%20%20%20%20%20%20%20inProcessDuration%2C%20%0A%20%20%20%20%20%20%20%20float64(inProcessDuration.Nanoseconds())%2Ffloat64(iterations)%2F1000)%0A%20%20%20%20%0A%20%20%20%20fmt.Printf(%22STDIO%3A%20%25v%20(%25.2f%20%CE%BCs%2Fcall)%5Cn%22%2C%20%0A%20%20%20%20%20%20%20%20stdioDuration%2C%20%0A%20%20%20%20%20%20%20%20float64(stdioDuration.Nanoseconds())%2Ffloat64(iterations)%2F1000)%0A%20%20%20%20%0A%20%20%20%20fmt.Printf(%22HTTP%3A%20%25v%20(%25.2f%20%CE%BCs%2Fcall)%5Cn%22%2C%20%0A%20%20%20%20%20%20%20%20httpDuration%2C%20%0A%20%20%20%20%20%20%20%20float64(httpDuration.Nanoseconds())%2Ffloat64(iterations)%2F1000)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Memory%20Efficiency%0A%0A%60%60%60go%0A%2F%2F%20Shared%20data%20structures%20reduce%20memory%20allocation%0Atype%20SharedDataPool%20struct%20%7B%0A%20%20%20%20buffers%20chan%20%5B%5Dbyte%0A%20%20%20%20size%20%20%20%20int%0A%7D%0A%0Afunc%20NewSharedDataPool(poolSize%2C%20bufferSize%20int)%20*SharedDataPool%20%7B%0A%20%20%20%20pool%20%3A%3D%20%26SharedDataPool%7B%0A%20%20%20%20%20%20%20%20buffers%3A%20make(chan%20%5B%5Dbyte%2C%20poolSize)%2C%0A%20%20%20%20%20%20%20%20size%3A%20%20%20%20bufferSize%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Pre-allocate%20buffers%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20poolSize%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20pool.buffers%20%3C-%20make(%5B%5Dbyte%2C%20bufferSize)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20pool%0A%7D%0A%0Afunc%20(p%20*SharedDataPool)%20Get()%20%5B%5Dbyte%20%7B%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20buffer%20%3A%3D%20%3C-p.buffers%3A%0A%20%20%20%20%20%20%20%20return%20buffer%5B%3A0%5D%20%2F%2F%20Reset%20length%20but%20keep%20capacity%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20make(%5B%5Dbyte%2C%200%2C%20p.size)%20%2F%2F%20Fallback%20allocation%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(p%20*SharedDataPool)%20Put(buffer%20%5B%5Dbyte)%20%7B%0A%20%20%20%20if%20cap(buffer)%20!%3D%20p.size%20%7B%0A%20%20%20%20%20%20%20%20return%20%2F%2F%20Don't%20pool%20buffers%20of%20wrong%20size%0A%20%20%20%20%7D%0A%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20p.buffers%20%3C-%20buffer%3A%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Pool%20full%2C%20let%20GC%20handle%20it%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Use%20shared%20pool%20in%20tools%0Avar%20dataPool%20%3D%20NewSharedDataPool(100%2C%204096)%0A%0Afunc%20handlePooledOperation(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20buffer%20%3A%3D%20dataPool.Get()%0A%20%20%20%20defer%20dataPool.Put(buffer)%0A%0A%20%20%20%20%2F%2F%20Use%20buffer%20for%20processing%0A%20%20%20%20result%20%3A%3D%20processWithBuffer(buffer%2C%20req.Params.Arguments)%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultJSON(result)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Build%20MCP%20clients%20for%20all%20transports%0A-%20**%5BHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Learn%20about%20web-based%20scenarios%0A-%20**%5BServer%20Advanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20production-ready%20features",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./sse-CP4MLC3B.js"),[]),path:"/transports/sse",type:"mdx",filePath:"transports/sse.mdx",content:"%23%20SSE%20Transport%0A%0AServer-Sent%20Events%20(SSE)%20transport%20enables%20real-time%2C%20web-friendly%20communication%20between%20MCP%20clients%20and%20servers.%20Perfect%20for%20web%20applications%20that%20need%20live%20updates%20and%20multi-client%20support.%0A%0A%23%23%20Use%20Cases%0A%0ASSE%20transport%20is%20ideal%20for%3A%0A%0A-%20**Web%20applications**%3A%20Browser-based%20LLM%20interfaces%0A-%20**Real-time%20dashboards**%3A%20Live%20data%20monitoring%20and%20visualization%0A-%20**Collaborative%20tools**%3A%20Multi-user%20environments%20with%20shared%20state%0A-%20**Streaming%20responses**%3A%20Long-running%20operations%20with%20progress%20updates%0A-%20**Event-driven%20systems**%3A%20Applications%20that%20need%20server-initiated%20communication%0A%0A**Example%20applications%3A**%0A-%20Web-based%20chat%20interfaces%20with%20LLMs%0A-%20Real-time%20analytics%20dashboards%0A-%20Collaborative%20document%20editing%0A-%20Live%20system%20monitoring%20tools%0A-%20Streaming%20data%20processing%20interfaces%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20SSE%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22SSE%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20real-time%20tools%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22stream_data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Stream%20data%20with%20real-time%20updates%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22source%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithInteger(%22count%22%2C%20mcp.Default(10))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleStreamData%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22monitor_system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Monitor%20system%20metrics%20in%20real-time%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithInteger(%22duration%22%2C%20mcp.Default(60))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSystemMonitor%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20dynamic%20resources%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22metrics%3A%2F%2Fcurrent%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Current%20System%20Metrics%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Real-time%20system%20metrics%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleCurrentMetrics%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20SSE%20server%0A%20%20%20%20log.Println(%22Starting%20SSE%20server%20on%20%3A8080%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeSSE(s%2C%20%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleStreamData(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20source%20%3A%3D%20req.Params.Arguments%5B%22source%22%5D.(string)%0A%20%20%20%20count%20%3A%3D%20int(req.Params.Arguments%5B%22count%22%5D.(float64))%0A%0A%20%20%20%20%2F%2F%20Get%20notifier%20for%20real-time%20updates%20(hypothetical%20functions)%0A%20%20%20%20%2F%2F%20Note%3A%20These%20functions%20would%20be%20provided%20by%20the%20SSE%20transport%20implementation%0A%20%20%20%20notifier%20%3A%3D%20getNotifierFromContext(ctx)%20%2F%2F%20Hypothetical%20function%0A%20%20%20%20sessionID%20%3A%3D%20getSessionIDFromContext(ctx)%20%2F%2F%20Hypothetical%20function%0A%0A%20%20%20%20%2F%2F%20Stream%20data%20with%20progress%20updates%0A%20%20%20%20var%20results%20%5B%5Dmap%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20count%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20cancellation%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Simulate%20data%20processing%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20generateData(source%2C%20i)%0A%20%20%20%20%20%20%20%20results%20%3D%20append(results%2C%20data)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Send%20progress%20notification%0A%20%20%20%20%20%20%20%20if%20notifier%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20ProgressNotification%20would%20be%20defined%20by%20the%20MCP%20protocol%0A%20%20%20%20%20%20%20%20%20%20%20%20notifier.SendProgress(sessionID%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22progress%22%3A%20i%20%2B%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22total%22%3A%20%20%20%20count%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20fmt.Sprintf(%22Processed%20%25d%2F%25d%20items%20from%20%25s%22%2C%20i%2B1%2C%20count%2C%20source)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22source%22%3A%20%20source%2C%0A%20%20%20%20%20%20%20%20%22results%22%3A%20results%2C%0A%20%20%20%20%20%20%20%20%22count%22%3A%20%20%20len(results)%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20examples%0Afunc%20generateData(source%20string%2C%20index%20int)%20map%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20return%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22source%22%3A%20source%2C%0A%20%20%20%20%20%20%20%20%22index%22%3A%20%20index%2C%0A%20%20%20%20%20%20%20%20%22value%22%3A%20%20fmt.Sprintf(%22data_%25d%22%2C%20index)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20getNotifierFromContext(ctx%20context.Context)%20interface%7B%7D%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20be%20provided%20by%20SSE%20transport%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20getSessionIDFromContext(ctx%20context.Context)%20string%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20be%20provided%20by%20SSE%20transport%0A%20%20%20%20return%20%22session_123%22%0A%7D%0A%0Afunc%20handleSystemMonitor(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20duration%20%3A%3D%20int(req.Params.Arguments%5B%22duration%22%5D.(float64))%0A%20%20%20%20%0A%20%20%20%20notifier%20%3A%3D%20getNotifierFromContext(ctx)%0A%20%20%20%20sessionID%20%3A%3D%20getSessionIDFromContext(ctx)%0A%0A%20%20%20%20%2F%2F%20Monitor%20system%20for%20specified%20duration%0A%20%20%20%20ticker%20%3A%3D%20time.NewTicker(5%20*%20time.Second)%0A%20%20%20%20defer%20ticker.Stop()%0A%0A%20%20%20%20timeout%20%3A%3D%20time.After(time.Duration(duration)%20*%20time.Second)%0A%20%20%20%20var%20metrics%20%5B%5Dmap%5Bstring%5Dinterface%7B%7D%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20case%20%3C-timeout%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22duration%22%3A%20duration%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22metrics%22%3A%20%20metrics%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22samples%22%3A%20%20len(metrics)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%20nil%0A%20%20%20%20%20%20%20%20case%20%3C-ticker.C%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Collect%20current%20metrics%0A%20%20%20%20%20%20%20%20%20%20%20%20currentMetrics%20%3A%3D%20collectSystemMetrics()%0A%20%20%20%20%20%20%20%20%20%20%20%20metrics%20%3D%20append(metrics%2C%20currentMetrics)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Send%20real-time%20update%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20notifier%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20SendCustom%20would%20be%20a%20method%20on%20the%20notifier%20interface%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20notifier.SendCustom(sessionID%2C%20%22system_metrics%22%2C%20currentMetrics)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20collectSystemMetrics()%20map%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22cpu%22%3A%20%20%20%2050.5%2C%0A%20%20%20%20%20%20%20%20%22memory%22%3A%2075.2%2C%0A%20%20%20%20%20%20%20%20%22disk%22%3A%20%20%2030.1%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleCurrentMetrics(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20metrics%20%3A%3D%20collectSystemMetrics()%0A%20%20%20%20return%20mcp.NewResourceResultJSON(metrics)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20SSE%20Configuration%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Advanced%20SSE%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithAllCapabilities()%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(%26server.Hooks%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20OnSessionStart%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22SSE%20client%20connected%3A%20%25s%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20broadcastUserCount()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20OnSessionEnd%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22SSE%20client%20disconnected%3A%20%25s%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20broadcastUserCount()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Configure%20SSE-specific%20options%0A%20%20%20%20sseOptions%20%3A%3D%20server.SSEOptions%7B%0A%20%20%20%20%20%20%20%20BasePath%3A%20%20%20%20%20%20%20%20%20%20%20%22%2Fmcp%22%2C%0A%20%20%20%20%20%20%20%20AllowedOrigins%3A%20%20%20%20%20%5B%5Dstring%7B%22http%3A%2F%2Flocalhost%3A3000%22%2C%20%22https%3A%2F%2Fmyapp.com%22%7D%2C%0A%20%20%20%20%20%20%20%20HeartbeatInterval%3A%20%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20MaxConnections%3A%20%20%20%20%20100%2C%0A%20%20%20%20%20%20%20%20ConnectionTimeout%3A%20%205%20*%20time.Minute%2C%0A%20%20%20%20%20%20%20%20EnableCompression%3A%20%20true%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20collaborative%20tools%0A%20%20%20%20addCollaborativeTools(s)%0A%20%20%20%20addRealTimeResources(s)%0A%0A%20%20%20%20log.Println(%22Starting%20advanced%20SSE%20server%20on%20%3A8080%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeSSEWithOptions(s%2C%20%22%3A8080%22%2C%20sseOptions)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20advanced%20example%0Afunc%20broadcastUserCount()%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20log.Println(%22Broadcasting%20user%20count%20update%22)%0A%7D%0A%0Afunc%20addCollaborativeToolsPlaceholder(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20collaborative%20tools%0A%7D%0A%0Afunc%20addRealTimeResources(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20real-time%20resources%0A%7D%0A%0Afunc%20addCollaborativeTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Shared%20document%20editing%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22edit_document%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Edit%20a%20shared%20document%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22doc_id%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22operation%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithObject(%22data%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleDocumentEdit%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Real-time%20chat%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22send_message%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Send%20a%20message%20to%20all%20connected%20clients%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22message%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22channel%22%2C%20mcp.Default(%22general%22))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSendMessage%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Live%20data%20updates%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22subscribe_updates%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Subscribe%20to%20real-time%20data%20updates%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22topic%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithArray(%22filters%22%2C%20mcp.Description(%22Optional%20filters%22))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSubscribeUpdates%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Configuration%0A%0A%23%23%23%20Base%20URLs%20and%20Paths%0A%0A%60%60%60go%0A%2F%2F%20Custom%20SSE%20endpoint%20configuration%0AsseOptions%20%3A%3D%20server.SSEOptions%7B%0A%20%20%20%20BasePath%3A%20%22%2Fapi%2Fmcp%22%2C%20%20%2F%2F%20SSE%20endpoint%20will%20be%20%2Fapi%2Fmcp%2Fsse%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Additional%20HTTP%20endpoints%0A%20%20%20%20HealthPath%3A%20%20%20%22%2Fapi%2Fhealth%22%2C%0A%20%20%20%20MetricsPath%3A%20%20%22%2Fapi%2Fmetrics%22%2C%0A%20%20%20%20StatusPath%3A%20%20%20%22%2Fapi%2Fstatus%22%2C%0A%7D%0A%0A%2F%2F%20Start%20server%20with%20custom%20paths%0Aserver.ServeSSEWithOptions(s%2C%20%22%3A8080%22%2C%20sseOptions)%0A%60%60%60%0A%0A**Resulting%20endpoints%3A**%0A-%20SSE%20stream%3A%20%60http%3A%2F%2Flocalhost%3A8080%2Fapi%2Fmcp%2Fsse%60%0A-%20Health%20check%3A%20%60http%3A%2F%2Flocalhost%3A8080%2Fapi%2Fhealth%60%0A-%20Metrics%3A%20%60http%3A%2F%2Flocalhost%3A8080%2Fapi%2Fmetrics%60%0A-%20Status%3A%20%60http%3A%2F%2Flocalhost%3A8080%2Fapi%2Fstatus%60%0A%0A%23%23%23%20CORS%20Configuration%0A%0A%60%60%60go%0AsseOptions%20%3A%3D%20server.SSEOptions%7B%0A%20%20%20%20%2F%2F%20Allow%20specific%20origins%0A%20%20%20%20AllowedOrigins%3A%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22http%3A%2F%2Flocalhost%3A3000%22%2C%0A%20%20%20%20%20%20%20%20%22https%3A%2F%2Fmyapp.com%22%2C%0A%20%20%20%20%20%20%20%20%22https%3A%2F%2F*.myapp.com%22%2C%0A%20%20%20%20%7D%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Allow%20all%20origins%20(development%20only)%0A%20%20%20%20AllowAllOrigins%3A%20true%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Custom%20CORS%20headers%0A%20%20%20%20AllowedHeaders%3A%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22Authorization%22%2C%0A%20%20%20%20%20%20%20%20%22Content-Type%22%2C%0A%20%20%20%20%20%20%20%20%22X-API-Key%22%2C%0A%20%20%20%20%7D%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Allow%20credentials%0A%20%20%20%20AllowCredentials%3A%20true%2C%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Connection%20Management%0A%0A%60%60%60go%0AsseOptions%20%3A%3D%20server.SSEOptions%7B%0A%20%20%20%20%2F%2F%20Connection%20limits%0A%20%20%20%20MaxConnections%3A%20%20%20%20100%2C%0A%20%20%20%20MaxConnectionsPerIP%3A%2010%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Timeouts%0A%20%20%20%20ConnectionTimeout%3A%205%20*%20time.Minute%2C%0A%20%20%20%20WriteTimeout%3A%20%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20ReadTimeout%3A%20%20%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Heartbeat%20to%20keep%20connections%20alive%0A%20%20%20%20HeartbeatInterval%3A%2030%20*%20time.Second%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Buffer%20sizes%0A%20%20%20%20WriteBufferSize%3A%204096%2C%0A%20%20%20%20ReadBufferSize%3A%20%204096%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Compression%0A%20%20%20%20EnableCompression%3A%20true%2C%0A%20%20%20%20CompressionLevel%3A%20%206%2C%0A%7D%0A%60%60%60%0A%0A%23%23%20Session%20Handling%0A%0A%23%23%23%20Multi-Client%20State%20Management%0A%0A%60%60%60go%0Atype%20SessionManager%20struct%20%7B%0A%20%20%20%20sessions%20map%5Bstring%5D*ClientSession%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%20%20%20%20notifier%20*SSENotifier%0A%7D%0A%0Atype%20ClientSession%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20%20%20%20string%0A%20%20%20%20UserID%20%20%20%20%20%20string%0A%20%20%20%20ConnectedAt%20time.Time%0A%20%20%20%20LastSeen%20%20%20%20time.Time%0A%20%20%20%20Subscriptions%20map%5Bstring%5Dbool%0A%20%20%20%20Metadata%20%20%20%20map%5Bstring%5Dinterface%7B%7D%0A%7D%0A%0Afunc%20NewSessionManager()%20*SessionManager%20%7B%0A%20%20%20%20return%20%26SessionManager%7B%0A%20%20%20%20%20%20%20%20sessions%3A%20make(map%5Bstring%5D*ClientSession)%2C%0A%20%20%20%20%20%20%20%20notifier%3A%20NewSSENotifier()%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20OnSessionStart(sessionID%20string)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20session%20%3A%3D%20%26ClientSession%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%0A%20%20%20%20%20%20%20%20ConnectedAt%3A%20%20%20time.Now()%2C%0A%20%20%20%20%20%20%20%20LastSeen%3A%20%20%20%20%20%20time.Now()%2C%0A%20%20%20%20%20%20%20%20Subscriptions%3A%20make(map%5Bstring%5Dbool)%2C%0A%20%20%20%20%20%20%20%20Metadata%3A%20%20%20%20%20%20make(map%5Bstring%5Dinterface%7B%7D)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20sm.sessions%5BsessionID%5D%20%3D%20session%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Notify%20other%20clients%0A%20%20%20%20sm.notifier.BroadcastExcept(sessionID%2C%20%22user_joined%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22session_id%22%3A%20sessionID%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20%20time.Now().Unix()%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20OnSessionEnd(sessionID%20string)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20delete(sm.sessions%2C%20sessionID)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Notify%20other%20clients%0A%20%20%20%20sm.notifier.Broadcast(%22user_left%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22session_id%22%3A%20sessionID%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20%20time.Now().Unix()%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20GetActiveSessions()%20%5B%5DClientSession%20%7B%0A%20%20%20%20sm.mutex.RLock()%0A%20%20%20%20defer%20sm.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20var%20sessions%20%5B%5DClientSession%0A%20%20%20%20for%20_%2C%20session%20%3A%3D%20range%20sm.sessions%20%7B%0A%20%20%20%20%20%20%20%20sessions%20%3D%20append(sessions%2C%20*session)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20sessions%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Real-Time%20Notifications%0A%0A%60%60%60go%0Atype%20SSENotifier%20struct%20%7B%0A%20%20%20%20clients%20map%5Bstring%5Dchan%20mcp.Notification%0A%20%20%20%20mutex%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewSSENotifier()%20*SSENotifier%20%7B%0A%20%20%20%20return%20%26SSENotifier%7B%0A%20%20%20%20%20%20%20%20clients%3A%20make(map%5Bstring%5Dchan%20mcp.Notification)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*SSENotifier)%20RegisterClient(sessionID%20string)%20%3C-chan%20mcp.Notification%20%7B%0A%20%20%20%20n.mutex.Lock()%0A%20%20%20%20defer%20n.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20ch%20%3A%3D%20make(chan%20mcp.Notification%2C%20100)%0A%20%20%20%20n.clients%5BsessionID%5D%20%3D%20ch%0A%20%20%20%20return%20ch%0A%7D%0A%0Afunc%20(n%20*SSENotifier)%20UnregisterClient(sessionID%20string)%20%7B%0A%20%20%20%20n.mutex.Lock()%0A%20%20%20%20defer%20n.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20if%20ch%2C%20exists%20%3A%3D%20n.clients%5BsessionID%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20close(ch)%0A%20%20%20%20%20%20%20%20delete(n.clients%2C%20sessionID)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*SSENotifier)%20SendToClient(sessionID%20string%2C%20notification%20mcp.Notification)%20%7B%0A%20%20%20%20n.mutex.RLock()%0A%20%20%20%20defer%20n.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20ch%2C%20exists%20%3A%3D%20n.clients%5BsessionID%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20ch%20%3C-%20notification%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Channel%20full%2C%20drop%20notification%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*SSENotifier)%20Broadcast(eventType%20string%2C%20data%20interface%7B%7D)%20%7B%0A%20%20%20%20notification%20%3A%3D%20mcp.Notification%7B%0A%20%20%20%20%20%20%20%20Type%3A%20eventType%2C%0A%20%20%20%20%20%20%20%20Data%3A%20data%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.mutex.RLock()%0A%20%20%20%20defer%20n.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20ch%20%3A%3D%20range%20n.clients%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20ch%20%3C-%20notification%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Channel%20full%2C%20skip%20this%20client%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*SSENotifier)%20BroadcastExcept(excludeSessionID%2C%20eventType%20string%2C%20data%20interface%7B%7D)%20%7B%0A%20%20%20%20notification%20%3A%3D%20mcp.Notification%7B%0A%20%20%20%20%20%20%20%20Type%3A%20eventType%2C%0A%20%20%20%20%20%20%20%20Data%3A%20data%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.mutex.RLock()%0A%20%20%20%20defer%20n.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20for%20sessionID%2C%20ch%20%3A%3D%20range%20n.clients%20%7B%0A%20%20%20%20%20%20%20%20if%20sessionID%20%3D%3D%20excludeSessionID%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20ch%20%3C-%20notification%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Channel%20full%2C%20skip%20this%20client%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Integration%0A%0A%23%23%23%20JavaScript%2FBrowser%20Client%0A%0A%60%60%60javascript%0Aclass%20MCPSSEClient%20%7B%0A%20%20%20%20constructor(baseURL)%20%7B%0A%20%20%20%20%20%20%20%20this.baseURL%20%3D%20baseURL%3B%0A%20%20%20%20%20%20%20%20this.eventSource%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.requestId%20%3D%201%3B%0A%20%20%20%20%20%20%20%20this.pendingRequests%20%3D%20new%20Map()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20connect()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Initialize%20SSE%20connection%0A%20%20%20%20%20%20%20%20this.eventSource%20%3D%20new%20EventSource(%60%24%7Bthis.baseURL%7D%2Fsse%60)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20this.eventSource.onopen%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('SSE%20connection%20opened')%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20this.eventSource.onmessage%20%3D%20(event)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.handleMessage(JSON.parse(event.data))%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20this.eventSource.onerror%20%3D%20(error)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.error('SSE%20error%3A'%2C%20error)%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Send%20initialization%20request%20via%20separate%20HTTP%20endpoint%0A%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20SSE%20is%20unidirectional%20-%20initialization%20would%20typically%20happen%0A%20%20%20%20%20%20%20%20%2F%2F%20via%20a%20separate%20HTTP%20POST%20endpoint%2C%20not%20through%20the%20SSE%20stream%0A%20%20%20%20%20%20%20%20return%20this.sendInitRequest('initialize'%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20protocolVersion%3A%20'2024-11-05'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20capabilities%3A%20%7B%20tools%3A%20%7B%7D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20clientInfo%3A%20%7B%20name%3A%20'Web%20Client'%2C%20version%3A%20'1.0.0'%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20sendInitRequest(method%2C%20params%20%3D%20%7B%7D)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Use%20a%20separate%20HTTP%20endpoint%20for%20initialization%20and%20commands%0A%20%20%20%20%20%20%20%20const%20response%20%3D%20await%20fetch(%60%24%7Bthis.baseURL%7D%2Finit%60%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20method%3A%20'POST'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20headers%3A%20%7B%20'Content-Type'%3A%20'application%2Fjson'%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20body%3A%20JSON.stringify(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20jsonrpc%3A%20'2.0'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20this.requestId%2B%2B%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20method%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20params%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!response.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%60HTTP%20%24%7Bresponse.status%7D%3A%20%24%7Bresponse.statusText%7D%60)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20response.json()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20sendRequest(method%2C%20params%20%3D%20%7B%7D)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20For%20tool%20calls%20and%20other%20requests%2C%20use%20HTTP%20POST%0A%20%20%20%20%20%20%20%20%2F%2F%20SSE%20is%20only%20for%20receiving%20server-initiated%20notifications%0A%20%20%20%20%20%20%20%20const%20id%20%3D%20this.requestId%2B%2B%3B%0A%20%20%20%20%20%20%20%20const%20request%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20jsonrpc%3A%20'2.0'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20id%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20method%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20params%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20const%20response%20%3D%20await%20fetch(%60%24%7Bthis.baseURL%7D%2Frequest%60%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20method%3A%20'POST'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20headers%3A%20%7B%20'Content-Type'%3A%20'application%2Fjson'%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20body%3A%20JSON.stringify(request)%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!response.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%60HTTP%20%24%7Bresponse.status%7D%3A%20%24%7Bresponse.statusText%7D%60)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20response.json()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20handleMessage(message)%20%7B%0A%20%20%20%20%20%20%20%20if%20(message.id%20%26%26%20this.pendingRequests.has(message.id))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Handle%20response%20to%20our%20request%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20%7B%20resolve%2C%20reject%20%7D%20%3D%20this.pendingRequests.get(message.id)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.pendingRequests.delete(message.id)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(message.error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20reject(new%20Error(message.error.message))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve(message.result)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(message.method)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Handle%20server-initiated%20notification%0A%20%20%20%20%20%20%20%20%20%20%20%20this.handleNotification(message)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20handleNotification(notification)%20%7B%0A%20%20%20%20%20%20%20%20switch%20(notification.method)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'notifications%2Fprogress'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.onProgress(notification.params)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'notifications%2Fmessage'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.onMessage(notification.params)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Unknown%20notification%3A'%2C%20notification)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20onProgress(progress)%20%7B%0A%20%20%20%20%20%20%20%20console.log(%60Progress%3A%20%24%7Bprogress.progress%7D%2F%24%7Bprogress.total%7D%20-%20%24%7Bprogress.message%7D%60)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20onMessage(message)%20%7B%0A%20%20%20%20%20%20%20%20console.log('Server%20message%3A'%2C%20message)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20listTools()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.sendRequest('tools%2Flist')%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20callTool(name%2C%20arguments)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.sendRequest('tools%2Fcall'%2C%20%7B%20name%2C%20arguments%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20disconnect()%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.eventSource)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.eventSource.close()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.eventSource%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aconst%20client%20%3D%20new%20MCPSSEClient('http%3A%2F%2Flocalhost%3A8080%2Fmcp')%3B%0A%0Aasync%20function%20main()%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20await%20client.connect()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20tools%20%3D%20await%20client.listTools()%3B%0A%20%20%20%20%20%20%20%20console.log('Available%20tools%3A'%2C%20tools)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20result%20%3D%20await%20client.callTool('stream_data'%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20source%3A%20'api'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20count%3A%205%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20console.log('Tool%20result%3A'%2C%20result)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20console.error('Error%3A'%2C%20error)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Amain()%3B%0A%60%60%60%0A%0A%23%23%23%20React%20Integration%0A%0A%60%60%60jsx%0Aimport%20React%2C%20%7B%20useState%2C%20useEffect%2C%20useCallback%20%7D%20from%20'react'%3B%0A%0Afunction%20MCPDashboard()%20%7B%0A%20%20%20%20const%20%5Bclient%2C%20setClient%5D%20%3D%20useState(null)%3B%0A%20%20%20%20const%20%5Bconnected%2C%20setConnected%5D%20%3D%20useState(false)%3B%0A%20%20%20%20const%20%5Btools%2C%20setTools%5D%20%3D%20useState(%5B%5D)%3B%0A%20%20%20%20const%20%5Bmessages%2C%20setMessages%5D%20%3D%20useState(%5B%5D)%3B%0A%20%20%20%20const%20%5Bprogress%2C%20setProgress%5D%20%3D%20useState(null)%3B%0A%0A%20%20%20%20useEffect(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20mcpClient%20%3D%20new%20MCPSSEClient('http%3A%2F%2Flocalhost%3A8080%2Fmcp')%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20mcpClient.onProgress%20%3D%20(progressData)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20setProgress(progressData)%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20mcpClient.onMessage%20%3D%20(message)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20setMessages(prev%20%3D%3E%20%5B...prev%2C%20message%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20mcpClient.connect()%0A%20%20%20%20%20%20%20%20%20%20%20%20.then(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setConnected(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20mcpClient.listTools()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20.then(toolList%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTools(toolList.tools)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20.catch(error%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.error('Connection%20failed%3A'%2C%20error)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20setClient(mcpClient)%3B%0A%0A%20%20%20%20%20%20%20%20return%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcpClient.disconnect()%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%2C%20%5B%5D)%3B%0A%0A%20%20%20%20const%20callTool%20%3D%20useCallback(async%20(toolName%2C%20args)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(!client)%20return%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20result%20%3D%20await%20client.callTool(toolName%2C%20args)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20setMessages(prev%20%3D%3E%20%5B...prev%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20'tool_result'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tool%3A%20toolName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20timestamp%3A%20Date.now()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.error('Tool%20call%20failed%3A'%2C%20error)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%20%5Bclient%5D)%3B%0A%0A%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22mcp-dashboard%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22status%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Status%3A%20%7Bconnected%20%3F%20'Connected'%20%3A%20'Disconnected'%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%7Bprogress%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22progress%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22progress-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22progress-fill%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20style%3D%7B%7B%20width%3A%20%60%24%7B(progress.progress%20%2F%20progress.total)%20*%20100%7D%25%60%20%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22progress-text%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bprogress.message%7D%20(%7Bprogress.progress%7D%2F%7Bprogress.total%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20)%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22tools%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch3%3EAvailable%20Tools%3C%2Fh3%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Btools.map(tool%20%3D%3E%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20key%3D%7Btool.name%7D%20className%3D%22tool%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch4%3E%7Btool.name%7D%3C%2Fh4%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%3E%7Btool.description%7D%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20onClick%3D%7B()%20%3D%3E%20callTool(tool.name%2C%20%7B%7D)%7D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Call%20Tool%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22messages%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch3%3EMessages%3C%2Fh3%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bmessages.map((message%2C%20index)%20%3D%3E%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20key%3D%7Bindex%7D%20className%3D%22message%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpre%3E%7BJSON.stringify(message%2C%20null%2C%202)%7D%3C%2Fpre%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20)%3B%0A%7D%0A%0Aexport%20default%20MCPDashboard%3B%0A%60%60%60%0A%0A%23%23%20Performance%20and%20Scaling%0A%0A%23%23%23%20Connection%20Pooling%0A%0A%60%60%60go%0Atype%20ConnectionPool%20struct%20%7B%0A%20%20%20%20connections%20map%5Bstring%5D*Connection%0A%20%20%20%20mutex%20%20%20%20%20%20%20sync.RWMutex%0A%20%20%20%20maxConns%20%20%20%20int%0A%20%20%20%20cleanup%20%20%20%20%20*time.Ticker%0A%7D%0A%0Afunc%20NewConnectionPool(maxConns%20int)%20*ConnectionPool%20%7B%0A%20%20%20%20pool%20%3A%3D%20%26ConnectionPool%7B%0A%20%20%20%20%20%20%20%20connections%3A%20make(map%5Bstring%5D*Connection)%2C%0A%20%20%20%20%20%20%20%20maxConns%3A%20%20%20%20maxConns%2C%0A%20%20%20%20%20%20%20%20cleanup%3A%20%20%20%20%20time.NewTicker(1%20*%20time.Minute)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20go%20pool.cleanupLoop()%0A%20%20%20%20return%20pool%0A%7D%0A%0Afunc%20(p%20*ConnectionPool)%20cleanupLoop()%20%7B%0A%20%20%20%20for%20range%20p.cleanup.C%20%7B%0A%20%20%20%20%20%20%20%20p.mutex.Lock()%0A%20%20%20%20%20%20%20%20now%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20id%2C%20conn%20%3A%3D%20range%20p.connections%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20now.Sub(conn.LastSeen)%20%3E%205*time.Minute%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20conn.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete(p.connections%2C%20id)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20p.mutex.Unlock()%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Load%20Balancing%0A%0A%60%60%60go%0Atype%20LoadBalancer%20struct%20%7B%0A%20%20%20%20servers%20%5B%5Dstring%0A%20%20%20%20current%20int%0A%20%20%20%20mutex%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20NewLoadBalancer(servers%20%5B%5Dstring)%20*LoadBalancer%20%7B%0A%20%20%20%20return%20%26LoadBalancer%7B%0A%20%20%20%20%20%20%20%20servers%3A%20servers%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(lb%20*LoadBalancer)%20NextServer()%20string%20%7B%0A%20%20%20%20lb.mutex.Lock()%0A%20%20%20%20defer%20lb.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20server%20%3A%3D%20lb.servers%5Blb.current%5D%0A%20%20%20%20lb.current%20%3D%20(lb.current%20%2B%201)%20%25%20len(lb.servers)%0A%20%20%20%20return%20server%0A%7D%0A%0A%2F%2F%20Use%20with%20reverse%20proxy%0Afunc%20setupReverseProxy()%20%7B%0A%20%20%20%20lb%20%3A%3D%20NewLoadBalancer(%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22http%3A%2F%2Fserver1%3A8080%22%2C%0A%20%20%20%20%20%20%20%20%22http%3A%2F%2Fserver2%3A8080%22%2C%0A%20%20%20%20%20%20%20%20%22http%3A%2F%2Fserver3%3A8080%22%2C%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20http.HandleFunc(%22%2Fmcp%2F%22%2C%20func(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20%20%20%20%20target%20%3A%3D%20lb.NextServer()%0A%20%20%20%20%20%20%20%20proxy%20%3A%3D%20httputil.NewSingleHostReverseProxy(mustParseURL(target))%0A%20%20%20%20%20%20%20%20proxy.ServeHTTP(w%2C%20r)%0A%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Learn%20about%20traditional%20web%20service%20patterns%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Explore%20embedded%20scenarios%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Build%20MCP%20clients%20for%20different%20transports",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./sse-CP4MLC3B.js"),[]),path:"/transports/sse.html",type:"mdx",filePath:"transports/sse.mdx",content:"%23%20SSE%20Transport%0A%0AServer-Sent%20Events%20(SSE)%20transport%20enables%20real-time%2C%20web-friendly%20communication%20between%20MCP%20clients%20and%20servers.%20Perfect%20for%20web%20applications%20that%20need%20live%20updates%20and%20multi-client%20support.%0A%0A%23%23%20Use%20Cases%0A%0ASSE%20transport%20is%20ideal%20for%3A%0A%0A-%20**Web%20applications**%3A%20Browser-based%20LLM%20interfaces%0A-%20**Real-time%20dashboards**%3A%20Live%20data%20monitoring%20and%20visualization%0A-%20**Collaborative%20tools**%3A%20Multi-user%20environments%20with%20shared%20state%0A-%20**Streaming%20responses**%3A%20Long-running%20operations%20with%20progress%20updates%0A-%20**Event-driven%20systems**%3A%20Applications%20that%20need%20server-initiated%20communication%0A%0A**Example%20applications%3A**%0A-%20Web-based%20chat%20interfaces%20with%20LLMs%0A-%20Real-time%20analytics%20dashboards%0A-%20Collaborative%20document%20editing%0A-%20Live%20system%20monitoring%20tools%0A-%20Streaming%20data%20processing%20interfaces%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20SSE%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22SSE%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20real-time%20tools%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22stream_data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Stream%20data%20with%20real-time%20updates%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22source%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithInteger(%22count%22%2C%20mcp.Default(10))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleStreamData%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22monitor_system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Monitor%20system%20metrics%20in%20real-time%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithInteger(%22duration%22%2C%20mcp.Default(60))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSystemMonitor%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20dynamic%20resources%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22metrics%3A%2F%2Fcurrent%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Current%20System%20Metrics%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Real-time%20system%20metrics%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleCurrentMetrics%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20SSE%20server%0A%20%20%20%20log.Println(%22Starting%20SSE%20server%20on%20%3A8080%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeSSE(s%2C%20%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleStreamData(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20source%20%3A%3D%20req.Params.Arguments%5B%22source%22%5D.(string)%0A%20%20%20%20count%20%3A%3D%20int(req.Params.Arguments%5B%22count%22%5D.(float64))%0A%0A%20%20%20%20%2F%2F%20Get%20notifier%20for%20real-time%20updates%20(hypothetical%20functions)%0A%20%20%20%20%2F%2F%20Note%3A%20These%20functions%20would%20be%20provided%20by%20the%20SSE%20transport%20implementation%0A%20%20%20%20notifier%20%3A%3D%20getNotifierFromContext(ctx)%20%2F%2F%20Hypothetical%20function%0A%20%20%20%20sessionID%20%3A%3D%20getSessionIDFromContext(ctx)%20%2F%2F%20Hypothetical%20function%0A%0A%20%20%20%20%2F%2F%20Stream%20data%20with%20progress%20updates%0A%20%20%20%20var%20results%20%5B%5Dmap%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20count%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20cancellation%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Simulate%20data%20processing%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20generateData(source%2C%20i)%0A%20%20%20%20%20%20%20%20results%20%3D%20append(results%2C%20data)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Send%20progress%20notification%0A%20%20%20%20%20%20%20%20if%20notifier%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20ProgressNotification%20would%20be%20defined%20by%20the%20MCP%20protocol%0A%20%20%20%20%20%20%20%20%20%20%20%20notifier.SendProgress(sessionID%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22progress%22%3A%20i%20%2B%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22total%22%3A%20%20%20%20count%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20fmt.Sprintf(%22Processed%20%25d%2F%25d%20items%20from%20%25s%22%2C%20i%2B1%2C%20count%2C%20source)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22source%22%3A%20%20source%2C%0A%20%20%20%20%20%20%20%20%22results%22%3A%20results%2C%0A%20%20%20%20%20%20%20%20%22count%22%3A%20%20%20len(results)%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20examples%0Afunc%20generateData(source%20string%2C%20index%20int)%20map%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20return%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22source%22%3A%20source%2C%0A%20%20%20%20%20%20%20%20%22index%22%3A%20%20index%2C%0A%20%20%20%20%20%20%20%20%22value%22%3A%20%20fmt.Sprintf(%22data_%25d%22%2C%20index)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20getNotifierFromContext(ctx%20context.Context)%20interface%7B%7D%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20be%20provided%20by%20SSE%20transport%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20getSessionIDFromContext(ctx%20context.Context)%20string%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20be%20provided%20by%20SSE%20transport%0A%20%20%20%20return%20%22session_123%22%0A%7D%0A%0Afunc%20handleSystemMonitor(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20duration%20%3A%3D%20int(req.Params.Arguments%5B%22duration%22%5D.(float64))%0A%20%20%20%20%0A%20%20%20%20notifier%20%3A%3D%20getNotifierFromContext(ctx)%0A%20%20%20%20sessionID%20%3A%3D%20getSessionIDFromContext(ctx)%0A%0A%20%20%20%20%2F%2F%20Monitor%20system%20for%20specified%20duration%0A%20%20%20%20ticker%20%3A%3D%20time.NewTicker(5%20*%20time.Second)%0A%20%20%20%20defer%20ticker.Stop()%0A%0A%20%20%20%20timeout%20%3A%3D%20time.After(time.Duration(duration)%20*%20time.Second)%0A%20%20%20%20var%20metrics%20%5B%5Dmap%5Bstring%5Dinterface%7B%7D%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20case%20%3C-timeout%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22duration%22%3A%20duration%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22metrics%22%3A%20%20metrics%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22samples%22%3A%20%20len(metrics)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%20nil%0A%20%20%20%20%20%20%20%20case%20%3C-ticker.C%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Collect%20current%20metrics%0A%20%20%20%20%20%20%20%20%20%20%20%20currentMetrics%20%3A%3D%20collectSystemMetrics()%0A%20%20%20%20%20%20%20%20%20%20%20%20metrics%20%3D%20append(metrics%2C%20currentMetrics)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Send%20real-time%20update%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20notifier%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20SendCustom%20would%20be%20a%20method%20on%20the%20notifier%20interface%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20notifier.SendCustom(sessionID%2C%20%22system_metrics%22%2C%20currentMetrics)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20collectSystemMetrics()%20map%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22cpu%22%3A%20%20%20%2050.5%2C%0A%20%20%20%20%20%20%20%20%22memory%22%3A%2075.2%2C%0A%20%20%20%20%20%20%20%20%22disk%22%3A%20%20%2030.1%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleCurrentMetrics(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20metrics%20%3A%3D%20collectSystemMetrics()%0A%20%20%20%20return%20mcp.NewResourceResultJSON(metrics)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20SSE%20Configuration%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Advanced%20SSE%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithAllCapabilities()%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(%26server.Hooks%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20OnSessionStart%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22SSE%20client%20connected%3A%20%25s%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20broadcastUserCount()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20OnSessionEnd%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22SSE%20client%20disconnected%3A%20%25s%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20broadcastUserCount()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Configure%20SSE-specific%20options%0A%20%20%20%20sseOptions%20%3A%3D%20server.SSEOptions%7B%0A%20%20%20%20%20%20%20%20BasePath%3A%20%20%20%20%20%20%20%20%20%20%20%22%2Fmcp%22%2C%0A%20%20%20%20%20%20%20%20AllowedOrigins%3A%20%20%20%20%20%5B%5Dstring%7B%22http%3A%2F%2Flocalhost%3A3000%22%2C%20%22https%3A%2F%2Fmyapp.com%22%7D%2C%0A%20%20%20%20%20%20%20%20HeartbeatInterval%3A%20%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20MaxConnections%3A%20%20%20%20%20100%2C%0A%20%20%20%20%20%20%20%20ConnectionTimeout%3A%20%205%20*%20time.Minute%2C%0A%20%20%20%20%20%20%20%20EnableCompression%3A%20%20true%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20collaborative%20tools%0A%20%20%20%20addCollaborativeTools(s)%0A%20%20%20%20addRealTimeResources(s)%0A%0A%20%20%20%20log.Println(%22Starting%20advanced%20SSE%20server%20on%20%3A8080%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeSSEWithOptions(s%2C%20%22%3A8080%22%2C%20sseOptions)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20advanced%20example%0Afunc%20broadcastUserCount()%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20log.Println(%22Broadcasting%20user%20count%20update%22)%0A%7D%0A%0Afunc%20addCollaborativeToolsPlaceholder(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20collaborative%20tools%0A%7D%0A%0Afunc%20addRealTimeResources(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20real-time%20resources%0A%7D%0A%0Afunc%20addCollaborativeTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Shared%20document%20editing%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22edit_document%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Edit%20a%20shared%20document%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22doc_id%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22operation%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithObject(%22data%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleDocumentEdit%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Real-time%20chat%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22send_message%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Send%20a%20message%20to%20all%20connected%20clients%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22message%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22channel%22%2C%20mcp.Default(%22general%22))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSendMessage%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Live%20data%20updates%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22subscribe_updates%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Subscribe%20to%20real-time%20data%20updates%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22topic%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithArray(%22filters%22%2C%20mcp.Description(%22Optional%20filters%22))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSubscribeUpdates%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Configuration%0A%0A%23%23%23%20Base%20URLs%20and%20Paths%0A%0A%60%60%60go%0A%2F%2F%20Custom%20SSE%20endpoint%20configuration%0AsseOptions%20%3A%3D%20server.SSEOptions%7B%0A%20%20%20%20BasePath%3A%20%22%2Fapi%2Fmcp%22%2C%20%20%2F%2F%20SSE%20endpoint%20will%20be%20%2Fapi%2Fmcp%2Fsse%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Additional%20HTTP%20endpoints%0A%20%20%20%20HealthPath%3A%20%20%20%22%2Fapi%2Fhealth%22%2C%0A%20%20%20%20MetricsPath%3A%20%20%22%2Fapi%2Fmetrics%22%2C%0A%20%20%20%20StatusPath%3A%20%20%20%22%2Fapi%2Fstatus%22%2C%0A%7D%0A%0A%2F%2F%20Start%20server%20with%20custom%20paths%0Aserver.ServeSSEWithOptions(s%2C%20%22%3A8080%22%2C%20sseOptions)%0A%60%60%60%0A%0A**Resulting%20endpoints%3A**%0A-%20SSE%20stream%3A%20%60http%3A%2F%2Flocalhost%3A8080%2Fapi%2Fmcp%2Fsse%60%0A-%20Health%20check%3A%20%60http%3A%2F%2Flocalhost%3A8080%2Fapi%2Fhealth%60%0A-%20Metrics%3A%20%60http%3A%2F%2Flocalhost%3A8080%2Fapi%2Fmetrics%60%0A-%20Status%3A%20%60http%3A%2F%2Flocalhost%3A8080%2Fapi%2Fstatus%60%0A%0A%23%23%23%20CORS%20Configuration%0A%0A%60%60%60go%0AsseOptions%20%3A%3D%20server.SSEOptions%7B%0A%20%20%20%20%2F%2F%20Allow%20specific%20origins%0A%20%20%20%20AllowedOrigins%3A%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22http%3A%2F%2Flocalhost%3A3000%22%2C%0A%20%20%20%20%20%20%20%20%22https%3A%2F%2Fmyapp.com%22%2C%0A%20%20%20%20%20%20%20%20%22https%3A%2F%2F*.myapp.com%22%2C%0A%20%20%20%20%7D%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Allow%20all%20origins%20(development%20only)%0A%20%20%20%20AllowAllOrigins%3A%20true%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Custom%20CORS%20headers%0A%20%20%20%20AllowedHeaders%3A%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22Authorization%22%2C%0A%20%20%20%20%20%20%20%20%22Content-Type%22%2C%0A%20%20%20%20%20%20%20%20%22X-API-Key%22%2C%0A%20%20%20%20%7D%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Allow%20credentials%0A%20%20%20%20AllowCredentials%3A%20true%2C%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Connection%20Management%0A%0A%60%60%60go%0AsseOptions%20%3A%3D%20server.SSEOptions%7B%0A%20%20%20%20%2F%2F%20Connection%20limits%0A%20%20%20%20MaxConnections%3A%20%20%20%20100%2C%0A%20%20%20%20MaxConnectionsPerIP%3A%2010%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Timeouts%0A%20%20%20%20ConnectionTimeout%3A%205%20*%20time.Minute%2C%0A%20%20%20%20WriteTimeout%3A%20%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20ReadTimeout%3A%20%20%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Heartbeat%20to%20keep%20connections%20alive%0A%20%20%20%20HeartbeatInterval%3A%2030%20*%20time.Second%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Buffer%20sizes%0A%20%20%20%20WriteBufferSize%3A%204096%2C%0A%20%20%20%20ReadBufferSize%3A%20%204096%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Compression%0A%20%20%20%20EnableCompression%3A%20true%2C%0A%20%20%20%20CompressionLevel%3A%20%206%2C%0A%7D%0A%60%60%60%0A%0A%23%23%20Session%20Handling%0A%0A%23%23%23%20Multi-Client%20State%20Management%0A%0A%60%60%60go%0Atype%20SessionManager%20struct%20%7B%0A%20%20%20%20sessions%20map%5Bstring%5D*ClientSession%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%20%20%20%20notifier%20*SSENotifier%0A%7D%0A%0Atype%20ClientSession%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20%20%20%20string%0A%20%20%20%20UserID%20%20%20%20%20%20string%0A%20%20%20%20ConnectedAt%20time.Time%0A%20%20%20%20LastSeen%20%20%20%20time.Time%0A%20%20%20%20Subscriptions%20map%5Bstring%5Dbool%0A%20%20%20%20Metadata%20%20%20%20map%5Bstring%5Dinterface%7B%7D%0A%7D%0A%0Afunc%20NewSessionManager()%20*SessionManager%20%7B%0A%20%20%20%20return%20%26SessionManager%7B%0A%20%20%20%20%20%20%20%20sessions%3A%20make(map%5Bstring%5D*ClientSession)%2C%0A%20%20%20%20%20%20%20%20notifier%3A%20NewSSENotifier()%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20OnSessionStart(sessionID%20string)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20session%20%3A%3D%20%26ClientSession%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%0A%20%20%20%20%20%20%20%20ConnectedAt%3A%20%20%20time.Now()%2C%0A%20%20%20%20%20%20%20%20LastSeen%3A%20%20%20%20%20%20time.Now()%2C%0A%20%20%20%20%20%20%20%20Subscriptions%3A%20make(map%5Bstring%5Dbool)%2C%0A%20%20%20%20%20%20%20%20Metadata%3A%20%20%20%20%20%20make(map%5Bstring%5Dinterface%7B%7D)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20sm.sessions%5BsessionID%5D%20%3D%20session%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Notify%20other%20clients%0A%20%20%20%20sm.notifier.BroadcastExcept(sessionID%2C%20%22user_joined%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22session_id%22%3A%20sessionID%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20%20time.Now().Unix()%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20OnSessionEnd(sessionID%20string)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20delete(sm.sessions%2C%20sessionID)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Notify%20other%20clients%0A%20%20%20%20sm.notifier.Broadcast(%22user_left%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22session_id%22%3A%20sessionID%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20%20time.Now().Unix()%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20GetActiveSessions()%20%5B%5DClientSession%20%7B%0A%20%20%20%20sm.mutex.RLock()%0A%20%20%20%20defer%20sm.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20var%20sessions%20%5B%5DClientSession%0A%20%20%20%20for%20_%2C%20session%20%3A%3D%20range%20sm.sessions%20%7B%0A%20%20%20%20%20%20%20%20sessions%20%3D%20append(sessions%2C%20*session)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20sessions%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Real-Time%20Notifications%0A%0A%60%60%60go%0Atype%20SSENotifier%20struct%20%7B%0A%20%20%20%20clients%20map%5Bstring%5Dchan%20mcp.Notification%0A%20%20%20%20mutex%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewSSENotifier()%20*SSENotifier%20%7B%0A%20%20%20%20return%20%26SSENotifier%7B%0A%20%20%20%20%20%20%20%20clients%3A%20make(map%5Bstring%5Dchan%20mcp.Notification)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*SSENotifier)%20RegisterClient(sessionID%20string)%20%3C-chan%20mcp.Notification%20%7B%0A%20%20%20%20n.mutex.Lock()%0A%20%20%20%20defer%20n.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20ch%20%3A%3D%20make(chan%20mcp.Notification%2C%20100)%0A%20%20%20%20n.clients%5BsessionID%5D%20%3D%20ch%0A%20%20%20%20return%20ch%0A%7D%0A%0Afunc%20(n%20*SSENotifier)%20UnregisterClient(sessionID%20string)%20%7B%0A%20%20%20%20n.mutex.Lock()%0A%20%20%20%20defer%20n.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20if%20ch%2C%20exists%20%3A%3D%20n.clients%5BsessionID%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20close(ch)%0A%20%20%20%20%20%20%20%20delete(n.clients%2C%20sessionID)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*SSENotifier)%20SendToClient(sessionID%20string%2C%20notification%20mcp.Notification)%20%7B%0A%20%20%20%20n.mutex.RLock()%0A%20%20%20%20defer%20n.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20ch%2C%20exists%20%3A%3D%20n.clients%5BsessionID%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20ch%20%3C-%20notification%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Channel%20full%2C%20drop%20notification%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*SSENotifier)%20Broadcast(eventType%20string%2C%20data%20interface%7B%7D)%20%7B%0A%20%20%20%20notification%20%3A%3D%20mcp.Notification%7B%0A%20%20%20%20%20%20%20%20Type%3A%20eventType%2C%0A%20%20%20%20%20%20%20%20Data%3A%20data%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.mutex.RLock()%0A%20%20%20%20defer%20n.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20ch%20%3A%3D%20range%20n.clients%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20ch%20%3C-%20notification%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Channel%20full%2C%20skip%20this%20client%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*SSENotifier)%20BroadcastExcept(excludeSessionID%2C%20eventType%20string%2C%20data%20interface%7B%7D)%20%7B%0A%20%20%20%20notification%20%3A%3D%20mcp.Notification%7B%0A%20%20%20%20%20%20%20%20Type%3A%20eventType%2C%0A%20%20%20%20%20%20%20%20Data%3A%20data%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.mutex.RLock()%0A%20%20%20%20defer%20n.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20for%20sessionID%2C%20ch%20%3A%3D%20range%20n.clients%20%7B%0A%20%20%20%20%20%20%20%20if%20sessionID%20%3D%3D%20excludeSessionID%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20ch%20%3C-%20notification%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Channel%20full%2C%20skip%20this%20client%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Integration%0A%0A%23%23%23%20JavaScript%2FBrowser%20Client%0A%0A%60%60%60javascript%0Aclass%20MCPSSEClient%20%7B%0A%20%20%20%20constructor(baseURL)%20%7B%0A%20%20%20%20%20%20%20%20this.baseURL%20%3D%20baseURL%3B%0A%20%20%20%20%20%20%20%20this.eventSource%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.requestId%20%3D%201%3B%0A%20%20%20%20%20%20%20%20this.pendingRequests%20%3D%20new%20Map()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20connect()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Initialize%20SSE%20connection%0A%20%20%20%20%20%20%20%20this.eventSource%20%3D%20new%20EventSource(%60%24%7Bthis.baseURL%7D%2Fsse%60)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20this.eventSource.onopen%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log('SSE%20connection%20opened')%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20this.eventSource.onmessage%20%3D%20(event)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.handleMessage(JSON.parse(event.data))%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20this.eventSource.onerror%20%3D%20(error)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.error('SSE%20error%3A'%2C%20error)%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Send%20initialization%20request%20via%20separate%20HTTP%20endpoint%0A%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20SSE%20is%20unidirectional%20-%20initialization%20would%20typically%20happen%0A%20%20%20%20%20%20%20%20%2F%2F%20via%20a%20separate%20HTTP%20POST%20endpoint%2C%20not%20through%20the%20SSE%20stream%0A%20%20%20%20%20%20%20%20return%20this.sendInitRequest('initialize'%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20protocolVersion%3A%20'2024-11-05'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20capabilities%3A%20%7B%20tools%3A%20%7B%7D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20clientInfo%3A%20%7B%20name%3A%20'Web%20Client'%2C%20version%3A%20'1.0.0'%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20sendInitRequest(method%2C%20params%20%3D%20%7B%7D)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Use%20a%20separate%20HTTP%20endpoint%20for%20initialization%20and%20commands%0A%20%20%20%20%20%20%20%20const%20response%20%3D%20await%20fetch(%60%24%7Bthis.baseURL%7D%2Finit%60%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20method%3A%20'POST'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20headers%3A%20%7B%20'Content-Type'%3A%20'application%2Fjson'%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20body%3A%20JSON.stringify(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20jsonrpc%3A%20'2.0'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20this.requestId%2B%2B%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20method%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20params%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!response.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%60HTTP%20%24%7Bresponse.status%7D%3A%20%24%7Bresponse.statusText%7D%60)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20response.json()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20sendRequest(method%2C%20params%20%3D%20%7B%7D)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20For%20tool%20calls%20and%20other%20requests%2C%20use%20HTTP%20POST%0A%20%20%20%20%20%20%20%20%2F%2F%20SSE%20is%20only%20for%20receiving%20server-initiated%20notifications%0A%20%20%20%20%20%20%20%20const%20id%20%3D%20this.requestId%2B%2B%3B%0A%20%20%20%20%20%20%20%20const%20request%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20jsonrpc%3A%20'2.0'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20id%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20method%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20params%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20const%20response%20%3D%20await%20fetch(%60%24%7Bthis.baseURL%7D%2Frequest%60%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20method%3A%20'POST'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20headers%3A%20%7B%20'Content-Type'%3A%20'application%2Fjson'%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20body%3A%20JSON.stringify(request)%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(!response.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%60HTTP%20%24%7Bresponse.status%7D%3A%20%24%7Bresponse.statusText%7D%60)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20response.json()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20handleMessage(message)%20%7B%0A%20%20%20%20%20%20%20%20if%20(message.id%20%26%26%20this.pendingRequests.has(message.id))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Handle%20response%20to%20our%20request%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20%7B%20resolve%2C%20reject%20%7D%20%3D%20this.pendingRequests.get(message.id)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.pendingRequests.delete(message.id)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(message.error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20reject(new%20Error(message.error.message))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve(message.result)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(message.method)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Handle%20server-initiated%20notification%0A%20%20%20%20%20%20%20%20%20%20%20%20this.handleNotification(message)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20handleNotification(notification)%20%7B%0A%20%20%20%20%20%20%20%20switch%20(notification.method)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'notifications%2Fprogress'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.onProgress(notification.params)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'notifications%2Fmessage'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.onMessage(notification.params)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log('Unknown%20notification%3A'%2C%20notification)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20onProgress(progress)%20%7B%0A%20%20%20%20%20%20%20%20console.log(%60Progress%3A%20%24%7Bprogress.progress%7D%2F%24%7Bprogress.total%7D%20-%20%24%7Bprogress.message%7D%60)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20onMessage(message)%20%7B%0A%20%20%20%20%20%20%20%20console.log('Server%20message%3A'%2C%20message)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20listTools()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.sendRequest('tools%2Flist')%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20callTool(name%2C%20arguments)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.sendRequest('tools%2Fcall'%2C%20%7B%20name%2C%20arguments%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20disconnect()%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.eventSource)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.eventSource.close()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.eventSource%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aconst%20client%20%3D%20new%20MCPSSEClient('http%3A%2F%2Flocalhost%3A8080%2Fmcp')%3B%0A%0Aasync%20function%20main()%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20await%20client.connect()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20tools%20%3D%20await%20client.listTools()%3B%0A%20%20%20%20%20%20%20%20console.log('Available%20tools%3A'%2C%20tools)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20result%20%3D%20await%20client.callTool('stream_data'%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20source%3A%20'api'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20count%3A%205%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20console.log('Tool%20result%3A'%2C%20result)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20console.error('Error%3A'%2C%20error)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Amain()%3B%0A%60%60%60%0A%0A%23%23%23%20React%20Integration%0A%0A%60%60%60jsx%0Aimport%20React%2C%20%7B%20useState%2C%20useEffect%2C%20useCallback%20%7D%20from%20'react'%3B%0A%0Afunction%20MCPDashboard()%20%7B%0A%20%20%20%20const%20%5Bclient%2C%20setClient%5D%20%3D%20useState(null)%3B%0A%20%20%20%20const%20%5Bconnected%2C%20setConnected%5D%20%3D%20useState(false)%3B%0A%20%20%20%20const%20%5Btools%2C%20setTools%5D%20%3D%20useState(%5B%5D)%3B%0A%20%20%20%20const%20%5Bmessages%2C%20setMessages%5D%20%3D%20useState(%5B%5D)%3B%0A%20%20%20%20const%20%5Bprogress%2C%20setProgress%5D%20%3D%20useState(null)%3B%0A%0A%20%20%20%20useEffect(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20mcpClient%20%3D%20new%20MCPSSEClient('http%3A%2F%2Flocalhost%3A8080%2Fmcp')%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20mcpClient.onProgress%20%3D%20(progressData)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20setProgress(progressData)%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20mcpClient.onMessage%20%3D%20(message)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20setMessages(prev%20%3D%3E%20%5B...prev%2C%20message%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20mcpClient.connect()%0A%20%20%20%20%20%20%20%20%20%20%20%20.then(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setConnected(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20mcpClient.listTools()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20.then(toolList%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTools(toolList.tools)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20.catch(error%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.error('Connection%20failed%3A'%2C%20error)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20setClient(mcpClient)%3B%0A%0A%20%20%20%20%20%20%20%20return%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcpClient.disconnect()%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%2C%20%5B%5D)%3B%0A%0A%20%20%20%20const%20callTool%20%3D%20useCallback(async%20(toolName%2C%20args)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(!client)%20return%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20result%20%3D%20await%20client.callTool(toolName%2C%20args)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20setMessages(prev%20%3D%3E%20%5B...prev%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20'tool_result'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tool%3A%20toolName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20timestamp%3A%20Date.now()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.error('Tool%20call%20failed%3A'%2C%20error)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%20%5Bclient%5D)%3B%0A%0A%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22mcp-dashboard%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22status%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Status%3A%20%7Bconnected%20%3F%20'Connected'%20%3A%20'Disconnected'%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%7Bprogress%20%26%26%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22progress%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22progress-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20className%3D%22progress-fill%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20style%3D%7B%7B%20width%3A%20%60%24%7B(progress.progress%20%2F%20progress.total)%20*%20100%7D%25%60%20%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22progress-text%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bprogress.message%7D%20(%7Bprogress.progress%7D%2F%7Bprogress.total%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20)%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22tools%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch3%3EAvailable%20Tools%3C%2Fh3%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Btools.map(tool%20%3D%3E%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20key%3D%7Btool.name%7D%20className%3D%22tool%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch4%3E%7Btool.name%7D%3C%2Fh4%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%3E%7Btool.description%7D%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20onClick%3D%7B()%20%3D%3E%20callTool(tool.name%2C%20%7B%7D)%7D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Call%20Tool%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20className%3D%22messages%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch3%3EMessages%3C%2Fh3%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bmessages.map((message%2C%20index)%20%3D%3E%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20key%3D%7Bindex%7D%20className%3D%22message%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpre%3E%7BJSON.stringify(message%2C%20null%2C%202)%7D%3C%2Fpre%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20)%3B%0A%7D%0A%0Aexport%20default%20MCPDashboard%3B%0A%60%60%60%0A%0A%23%23%20Performance%20and%20Scaling%0A%0A%23%23%23%20Connection%20Pooling%0A%0A%60%60%60go%0Atype%20ConnectionPool%20struct%20%7B%0A%20%20%20%20connections%20map%5Bstring%5D*Connection%0A%20%20%20%20mutex%20%20%20%20%20%20%20sync.RWMutex%0A%20%20%20%20maxConns%20%20%20%20int%0A%20%20%20%20cleanup%20%20%20%20%20*time.Ticker%0A%7D%0A%0Afunc%20NewConnectionPool(maxConns%20int)%20*ConnectionPool%20%7B%0A%20%20%20%20pool%20%3A%3D%20%26ConnectionPool%7B%0A%20%20%20%20%20%20%20%20connections%3A%20make(map%5Bstring%5D*Connection)%2C%0A%20%20%20%20%20%20%20%20maxConns%3A%20%20%20%20maxConns%2C%0A%20%20%20%20%20%20%20%20cleanup%3A%20%20%20%20%20time.NewTicker(1%20*%20time.Minute)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20go%20pool.cleanupLoop()%0A%20%20%20%20return%20pool%0A%7D%0A%0Afunc%20(p%20*ConnectionPool)%20cleanupLoop()%20%7B%0A%20%20%20%20for%20range%20p.cleanup.C%20%7B%0A%20%20%20%20%20%20%20%20p.mutex.Lock()%0A%20%20%20%20%20%20%20%20now%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20id%2C%20conn%20%3A%3D%20range%20p.connections%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20now.Sub(conn.LastSeen)%20%3E%205*time.Minute%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20conn.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete(p.connections%2C%20id)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20p.mutex.Unlock()%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Load%20Balancing%0A%0A%60%60%60go%0Atype%20LoadBalancer%20struct%20%7B%0A%20%20%20%20servers%20%5B%5Dstring%0A%20%20%20%20current%20int%0A%20%20%20%20mutex%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20NewLoadBalancer(servers%20%5B%5Dstring)%20*LoadBalancer%20%7B%0A%20%20%20%20return%20%26LoadBalancer%7B%0A%20%20%20%20%20%20%20%20servers%3A%20servers%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(lb%20*LoadBalancer)%20NextServer()%20string%20%7B%0A%20%20%20%20lb.mutex.Lock()%0A%20%20%20%20defer%20lb.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20server%20%3A%3D%20lb.servers%5Blb.current%5D%0A%20%20%20%20lb.current%20%3D%20(lb.current%20%2B%201)%20%25%20len(lb.servers)%0A%20%20%20%20return%20server%0A%7D%0A%0A%2F%2F%20Use%20with%20reverse%20proxy%0Afunc%20setupReverseProxy()%20%7B%0A%20%20%20%20lb%20%3A%3D%20NewLoadBalancer(%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22http%3A%2F%2Fserver1%3A8080%22%2C%0A%20%20%20%20%20%20%20%20%22http%3A%2F%2Fserver2%3A8080%22%2C%0A%20%20%20%20%20%20%20%20%22http%3A%2F%2Fserver3%3A8080%22%2C%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20http.HandleFunc(%22%2Fmcp%2F%22%2C%20func(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20%20%20%20%20target%20%3A%3D%20lb.NextServer()%0A%20%20%20%20%20%20%20%20proxy%20%3A%3D%20httputil.NewSingleHostReverseProxy(mustParseURL(target))%0A%20%20%20%20%20%20%20%20proxy.ServeHTTP(w%2C%20r)%0A%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Learn%20about%20traditional%20web%20service%20patterns%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Explore%20embedded%20scenarios%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Build%20MCP%20clients%20for%20different%20transports",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./stdio-t7nxeO-T.js"),[]),path:"/transports/stdio",type:"mdx",filePath:"transports/stdio.mdx",content:"%23%20STDIO%20Transport%0A%0ASTDIO%20(Standard%20Input%2FOutput)%20transport%20is%20the%20most%20common%20MCP%20transport%20method%2C%20perfect%20for%20command-line%20tools%2C%20desktop%20applications%2C%20and%20local%20integrations.%0A%0A%23%23%20Use%20Cases%0A%0ASTDIO%20transport%20excels%20in%20scenarios%20where%3A%0A%0A-%20**Command-line%20tools**%3A%20CLI%20utilities%20that%20LLMs%20can%20invoke%0A-%20**Desktop%20applications**%3A%20IDE%20plugins%2C%20text%20editors%2C%20local%20tools%0A-%20**Subprocess%20communication**%3A%20Parent%20processes%20managing%20MCP%20servers%0A-%20**Local%20development**%3A%20Testing%20and%20debugging%20MCP%20implementations%0A-%20**Single-user%20scenarios**%3A%20Personal%20productivity%20tools%0A%0A**Example%20applications%3A**%0A-%20File%20system%20browsers%20for%20IDEs%0A-%20Local%20database%20query%20tools%0A-%20Git%20repository%20analyzers%0A-%20System%20monitoring%20utilities%0A-%20Development%20workflow%20automation%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20STDIO%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22os%22%0A%20%20%20%20%22path%2Ffilepath%22%0A%20%20%20%20%22strings%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22File%20Tools%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20file%20listing%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22list_files%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22List%20files%20in%20a%20directory%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22path%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Directory%20path%20to%20list%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithBoolean(%22recursive%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Default(false)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22List%20files%20recursively%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleListFiles%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20file%20content%20resource%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22file%3A%2F%2F%7Bpath%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22File%20Content%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Read%20file%20contents%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22text%2Fplain%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleFileContent%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20STDIO%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Fprintf(os.Stderr%2C%20%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleListFiles(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20path%2C%20err%20%3A%3D%20req.RequireString(%22path%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20recursive%2C%20err%20%3A%3D%20req.RequireBool(%22recursive%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Security%3A%20validate%20path%0A%20%20%20%20if%20!isValidPath(path)%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22invalid%20path%3A%20%25s%22%2C%20path))%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20files%2C%20err%20%3A%3D%20listFiles(path%2C%20recursive)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20list%20files%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22path%22%3A%20%20%20%20%20%20path%2C%0A%20%20%20%20%20%20%20%20%22files%22%3A%20%20%20%20%20files%2C%0A%20%20%20%20%20%20%20%20%22count%22%3A%20%20%20%20%20len(files)%2C%0A%20%20%20%20%20%20%20%20%22recursive%22%3A%20recursive%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0Afunc%20handleFileContent(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20path%20from%20URI%3A%20%22file%3A%2F%2F%2Fpath%2Fto%2Ffile%22%20-%3E%20%22%2Fpath%2Fto%2Ffile%22%0A%20%20%20%20path%20%3A%3D%20extractPathFromURI(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20if%20!isValidPath(path)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20path%3A%20%25s%22%2C%20path)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%2C%20err%20%3A%3D%20os.ReadFile(path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20file%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20detectMIMEType(path)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(content)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20isValidPath(path%20string)%20bool%20%7B%0A%20%20%20%20%2F%2F%20Clean%20the%20path%20to%20resolve%20any%20.%20or%20..%20components%0A%20%20%20%20clean%20%3A%3D%20filepath.Clean(path)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20for%20directory%20traversal%20patterns%0A%20%20%20%20if%20strings.Contains(clean%2C%20%22..%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20absolute%20paths%2C%20ensure%20they're%20within%20a%20safe%20base%20directory%0A%20%20%20%20if%20filepath.IsAbs(clean)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Define%20safe%20base%20directories%20(adjust%20as%20needed%20for%20your%20use%20case)%0A%20%20%20%20%20%20%20%20safeBaseDirs%20%3A%3D%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2Ftmp%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2Fvar%2Ftmp%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2Fhome%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2FUsers%22%2C%20%2F%2F%20macOS%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20the%20path%20starts%20with%20any%20safe%20base%20directory%0A%20%20%20%20%20%20%20%20for%20_%2C%20baseDir%20%3A%3D%20range%20safeBaseDirs%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20strings.HasPrefix(clean%2C%20baseDir)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20relative%20paths%2C%20ensure%20they%20don't%20escape%20the%20current%20directory%0A%20%20%20%20return%20!strings.HasPrefix(clean%2C%20%22..%22)%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20examples%0Afunc%20listFiles(path%20string%2C%20recursive%20bool)%20(%5B%5Dstring%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20%5B%5Dstring%7B%22file1.txt%22%2C%20%22file2.txt%22%7D%2C%20nil%0A%7D%0A%0Afunc%20extractPathFromURI(uri%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Extract%20path%20from%20URI%3A%20%22file%3A%2F%2F%2Fpath%2Fto%2Ffile%22%20-%3E%20%22%2Fpath%2Fto%2Ffile%22%0A%20%20%20%20if%20strings.HasPrefix(uri%2C%20%22file%3A%2F%2F%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20strings.TrimPrefix(uri%2C%20%22file%3A%2F%2F%22)%0A%20%20%20%20%7D%0A%20%20%20%20return%20uri%0A%7D%0A%0Afunc%20detectMIMEType(path%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Simple%20MIME%20type%20detection%20based%20on%20extension%0A%20%20%20%20ext%20%3A%3D%20filepath.Ext(path)%0A%20%20%20%20switch%20ext%20%7B%0A%20%20%20%20case%20%22.txt%22%3A%0A%20%20%20%20%20%20%20%20return%20%22text%2Fplain%22%0A%20%20%20%20case%20%22.json%22%3A%0A%20%20%20%20%20%20%20%20return%20%22application%2Fjson%22%0A%20%20%20%20case%20%22.html%22%3A%0A%20%20%20%20%20%20%20%20return%20%22text%2Fhtml%22%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20%22application%2Foctet-stream%22%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20STDIO%20Server%0A%0A%60%60%60go%0Apackage%20main%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22os%22%0A%20%20%20%20%22os%2Fsignal%22%0A%20%20%20%20%22syscall%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Advanced%20CLI%20Tool%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithAllCapabilities()%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(%26server.Hooks%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20OnSessionStart%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20logToFile(fmt.Sprintf(%22Session%20started%3A%20%25s%22%2C%20sessionID))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20OnSessionEnd%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20logToFile(fmt.Sprintf(%22Session%20ended%3A%20%25s%22%2C%20sessionID))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20comprehensive%20tools%0A%20%20%20%20addSystemTools(s)%0A%20%20%20%20addFileTools(s)%0A%20%20%20%20addGitTools(s)%0A%20%20%20%20addDatabaseTools(s)%0A%0A%20%20%20%20%2F%2F%20Handle%20graceful%20shutdown%0A%20%20%20%20setupGracefulShutdown(s)%0A%0A%20%20%20%20%2F%2F%20Start%20with%20error%20handling%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Server%20error%3A%20%25v%22%2C%20err))%0A%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20advanced%20example%0Afunc%20logToFile(message%20string)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20log.Println(message)%0A%7D%0A%0Afunc%20logError(message%20string)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20log.Printf(%22ERROR%3A%20%25s%22%2C%20message)%0A%7D%0A%0Afunc%20addSystemTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20addFileTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20addGitTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20addDatabaseTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20setupGracefulShutdown(s%20*server.MCPServer)%20%7B%0A%20%20%20%20c%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(c%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%3C-c%0A%20%20%20%20%20%20%20%20logToFile(%22Received%20shutdown%20signal%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%205*time.Second)%0A%20%20%20%20%20%20%20%20defer%20cancel()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20s.Shutdown(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Shutdown%20error%3A%20%25v%22%2C%20err))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20os.Exit(0)%0A%20%20%20%20%7D()%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Integration%0A%0A%23%23%23%20How%20LLM%20Applications%20Connect%0A%0ALLM%20applications%20typically%20connect%20to%20STDIO%20MCP%20servers%20by%3A%0A%0A1.%20**Spawning%20the%20process**%3A%20Starting%20your%20server%20as%20a%20subprocess%0A2.%20**Pipe%20communication**%3A%20Using%20stdin%2Fstdout%20for%20JSON-RPC%20messages%0A3.%20**Lifecycle%20management**%3A%20Handling%20process%20startup%2C%20shutdown%2C%20and%20errors%0A%0A%23%23%23%20Claude%20Desktop%20Integration%0A%0AConfigure%20your%20STDIO%20server%20in%20Claude%20Desktop%3A%0A%0A%60%60%60json%0A%7B%0A%20%20%22mcpServers%22%3A%20%7B%0A%20%20%20%20%22file-tools%22%3A%20%7B%0A%20%20%20%20%20%20%22command%22%3A%20%22go%22%2C%0A%20%20%20%20%20%20%22args%22%3A%20%5B%22run%22%2C%20%22%2Fpath%2Fto%2Fyour%2Fserver%2Fmain.go%22%5D%2C%0A%20%20%20%20%20%20%22env%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22LOG_LEVEL%22%3A%20%22info%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A**macOS**%3A%20%60~%2FLibrary%2FApplication%20Support%2FClaude%2Fclaude_desktop_config.json%60%0A**Windows**%3A%20%60%25APPDATA%25%5CClaude%5Cclaude_desktop_config.json%60%0A%0A%23%23%23%20Custom%20Client%20Integration%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22log%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20STDIO%20client%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22-%20%25s%3A%20%25s%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20tool%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22list_files%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22path%22%3A%20%20%20%20%20%20%22.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22recursive%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%20Debugging%0A%0A%23%23%23%20Command%20Line%20Testing%0A%0ATest%20your%20STDIO%20server%20directly%20from%20the%20command%20line%3A%0A%0A%60%60%60bash%0A%23%20Start%20your%20server%0Ago%20run%20main.go%0A%0A%23%20Send%20initialization%20request%0Aecho%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A1%2C%22method%22%3A%22initialize%22%2C%22params%22%3A%7B%22protocolVersion%22%3A%222024-11-05%22%2C%22capabilities%22%3A%7B%22tools%22%3A%7B%7D%7D%2C%22clientInfo%22%3A%7B%22name%22%3A%22test%22%2C%22version%22%3A%221.0.0%22%7D%7D%7D'%20%7C%20go%20run%20main.go%0A%0A%23%20List%20tools%0Aecho%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A2%2C%22method%22%3A%22tools%2Flist%22%2C%22params%22%3A%7B%7D%7D'%20%7C%20go%20run%20main.go%0A%0A%23%20Call%20a%20tool%0Aecho%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A3%2C%22method%22%3A%22tools%2Fcall%22%2C%22params%22%3A%7B%22name%22%3A%22list_files%22%2C%22arguments%22%3A%7B%22path%22%3A%22.%22%2C%22recursive%22%3Afalse%7D%7D%7D'%20%7C%20go%20run%20main.go%0A%60%60%60%0A%0A%23%23%23%20Interactive%20Testing%20Script%0A%0A%60%60%60bash%0A%23!%2Fbin%2Fbash%0A%0A%23%20interactive_test.sh%0ASERVER_CMD%3D%22go%20run%20main.go%22%0A%0Aecho%20%22Starting%20MCP%20STDIO%20server%20test...%22%0A%0A%23%20Function%20to%20send%20JSON-RPC%20request%0Asend_request()%20%7B%0A%20%20%20%20local%20request%3D%22%241%22%0A%20%20%20%20echo%20%22Sending%3A%20%24request%22%0A%20%20%20%20echo%20%22%24request%22%20%7C%20%24SERVER_CMD%0A%20%20%20%20echo%20%22---%22%0A%7D%0A%0A%23%20Initialize%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A1%2C%22method%22%3A%22initialize%22%2C%22params%22%3A%7B%22protocolVersion%22%3A%222024-11-05%22%2C%22capabilities%22%3A%7B%22tools%22%3A%7B%7D%7D%2C%22clientInfo%22%3A%7B%22name%22%3A%22test%22%2C%22version%22%3A%221.0.0%22%7D%7D%7D'%0A%0A%23%20List%20tools%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A2%2C%22method%22%3A%22tools%2Flist%22%2C%22params%22%3A%7B%7D%7D'%0A%0A%23%20List%20resources%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A3%2C%22method%22%3A%22resources%2Flist%22%2C%22params%22%3A%7B%7D%7D'%0A%0A%23%20Call%20tool%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A4%2C%22method%22%3A%22tools%2Fcall%22%2C%22params%22%3A%7B%22name%22%3A%22list_files%22%2C%22arguments%22%3A%7B%22path%22%3A%22.%22%2C%22recursive%22%3Afalse%7D%7D%7D'%0A%0Aecho%20%22Test%20completed.%22%0A%60%60%60%0A%0A%23%23%23%20Debug%20Logging%0A%0AAdd%20debug%20logging%20to%20your%20STDIO%20server%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Setup%20debug%20logging%0A%20%20%20%20logFile%2C%20err%20%3A%3D%20os.OpenFile(%22mcp-server.log%22%2C%20os.O_CREATE%7Cos.O_WRONLY%7Cos.O_APPEND%2C%200666)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20logFile.Close()%0A%0A%20%20%20%20logger%20%3A%3D%20log.New(logFile%2C%20%22%5BMCP%5D%20%22%2C%20log.LstdFlags%7Clog.Lshortfile)%0A%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Debug%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(%26server.Hooks%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20OnSessionStart%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20logger.Printf(%22Session%20started%3A%20%25s%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20OnToolCall%3A%20func(sessionID%2C%20toolName%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20logger.Printf(%22Tool%20%25s%20failed%3A%20%25v%22%2C%20toolName%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20logger.Printf(%22Tool%20%25s%20completed%20in%20%25v%22%2C%20toolName%2C%20duration)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tools%20with%20debug%20logging%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22debug_echo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Echo%20with%20debug%20logging%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22message%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20message%20%3A%3D%20req.Params.Arguments%5B%22message%22%5D.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20logger.Printf(%22Echo%20tool%20called%20with%20message%3A%20%25s%22%2C%20message)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Echo%3A%20%25s%22%2C%20message))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%0A%20%20%20%20logger.Println(%22Starting%20STDIO%20server...%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20logger.Printf(%22Server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20MCP%20Inspector%20Integration%0A%0AUse%20the%20MCP%20Inspector%20for%20visual%20debugging%3A%0A%0A%60%60%60bash%0A%23%20Install%20MCP%20Inspector%0Anpm%20install%20-g%20%40modelcontextprotocol%2Finspector%0A%0A%23%20Run%20your%20server%20with%20inspector%0Amcp-inspector%20go%20run%20main.go%0A%60%60%60%0A%0AThis%20opens%20a%20web%20interface%20where%20you%20can%3A%0A-%20View%20available%20tools%20and%20resources%0A-%20Test%20tool%20calls%20interactively%0A-%20Inspect%20request%2Fresponse%20messages%0A-%20Debug%20protocol%20issues%0A%0A%23%23%20Error%20Handling%0A%0A%23%23%23%20Robust%20Error%20Handling%0A%0A%60%60%60go%0Afunc%20handleToolWithErrors(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Validate%20required%20parameters%0A%20%20%20%20path%2C%20ok%20%3A%3D%20req.Params.Arguments%5B%22path%22%5D.(string)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22path%20parameter%20is%20required%20and%20must%20be%20a%20string%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Validate%20path%20security%0A%20%20%20%20if%20!isValidPath(path)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20or%20unsafe%20path%3A%20%25s%22%2C%20path)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Check%20if%20path%20exists%0A%20%20%20%20if%20_%2C%20err%20%3A%3D%20os.Stat(path)%3B%20os.IsNotExist(err)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22path%20does%20not%20exist%3A%20%25s%22%2C%20path)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Handle%20context%20cancellation%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20default%3A%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Perform%20operation%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20performOperation(ctx%2C%20path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Log%20error%20for%20debugging%0A%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Operation%20failed%20for%20path%20%25s%3A%20%25v%22%2C%20path%2C%20err))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20user-friendly%20error%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.DeadlineExceeded)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22operation%20timed%20out%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22operation%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(result)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Process%20Management%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Handle%20panics%20gracefully%0A%20%20%20%20defer%20func()%20%7B%0A%20%20%20%20%20%20%20%20if%20r%20%3A%3D%20recover()%3B%20r%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Server%20panic%3A%20%25v%22%2C%20r))%0A%20%20%20%20%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Robust%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%20%2F%2F%20Built-in%20panic%20recovery%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Setup%20signal%20handling%0A%20%20%20%20setupSignalHandling()%0A%0A%20%20%20%20%2F%2F%20Start%20server%20with%20retry%20logic%0A%20%20%20%20for%20attempts%20%3A%3D%200%3B%20attempts%20%3C%203%3B%20attempts%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Server%20attempt%20%25d%20failed%3A%20%25v%22%2C%20attempts%2B1%2C%20err))%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20attempts%20%3D%3D%202%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(time.Second%20*%20time.Duration(attempts%2B1))%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20setupSignalHandling()%20%7B%0A%20%20%20%20c%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(c%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20sig%20%3A%3D%20%3C-c%0A%20%20%20%20%20%20%20%20logToFile(fmt.Sprintf(%22Received%20signal%3A%20%25v%22%2C%20sig))%0A%20%20%20%20%20%20%20%20os.Exit(0)%0A%20%20%20%20%7D()%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%20Optimization%0A%0A%23%23%23%20Efficient%20Resource%20Usage%0A%0A%60%60%60go%0A%2F%2F%20Use%20connection%20pooling%20for%20database%20tools%0Avar%20dbPool%20*sql.DB%0A%0Afunc%20init()%20%7B%0A%20%20%20%20var%20err%20error%0A%20%20%20%20dbPool%2C%20err%20%3D%20sql.Open(%22sqlite3%22%2C%20%22data.db%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20dbPool.SetMaxOpenConns(10)%0A%20%20%20%20dbPool.SetMaxIdleConns(5)%0A%20%20%20%20dbPool.SetConnMaxLifetime(time.Hour)%0A%7D%0A%0A%2F%2F%20Cache%20frequently%20accessed%20data%0Avar%20fileCache%20%3D%20make(map%5Bstring%5DcacheEntry)%0Avar%20cacheMutex%20sync.RWMutex%0A%0Atype%20cacheEntry%20struct%20%7B%0A%20%20%20%20content%20%20%20string%0A%20%20%20%20timestamp%20time.Time%0A%7D%0A%0Afunc%20getCachedFile(path%20string)%20(string%2C%20bool)%20%7B%0A%20%20%20%20cacheMutex.RLock()%0A%20%20%20%20defer%20cacheMutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20entry%2C%20exists%20%3A%3D%20fileCache%5Bpath%5D%0A%20%20%20%20if%20!exists%20%7C%7C%20time.Since(entry.timestamp)%20%3E%205*time.Minute%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20entry.content%2C%20true%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Memory%20Management%0A%0A%60%60%60go%0Afunc%20handleLargeFile(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20path%20%3A%3D%20req.Params.Arguments%5B%22path%22%5D.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Stream%20large%20files%20instead%20of%20loading%20into%20memory%0A%20%20%20%20file%2C%20err%20%3A%3D%20os.Open(path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20file.Close()%0A%0A%20%20%20%20%2F%2F%20Process%20in%20chunks%0A%20%20%20%20const%20chunkSize%20%3D%2064%20*%201024%0A%20%20%20%20buffer%20%3A%3D%20make(%5B%5Dbyte%2C%20chunkSize)%0A%20%20%20%20%0A%20%20%20%20var%20result%20strings.Builder%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20n%2C%20err%20%3A%3D%20file.Read(buffer)%0A%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20io.EOF%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20chunk%0A%20%20%20%20%20%20%20%20processed%20%3A%3D%20processChunk(buffer%5B%3An%5D)%0A%20%20%20%20%20%20%20%20result.WriteString(processed)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20cancellation%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(result.String())%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BSSE%20Transport%5D(%2Ftransports%2Fsse)**%20-%20Learn%20about%20real-time%20web%20communication%0A-%20**%5BHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Explore%20traditional%20web%20service%20patterns%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Understand%20embedded%20scenarios",lastUpdatedAt:1749318811e3},{lazy:()=>H2(()=>import("./stdio-t7nxeO-T.js"),[]),path:"/transports/stdio.html",type:"mdx",filePath:"transports/stdio.mdx",content:"%23%20STDIO%20Transport%0A%0ASTDIO%20(Standard%20Input%2FOutput)%20transport%20is%20the%20most%20common%20MCP%20transport%20method%2C%20perfect%20for%20command-line%20tools%2C%20desktop%20applications%2C%20and%20local%20integrations.%0A%0A%23%23%20Use%20Cases%0A%0ASTDIO%20transport%20excels%20in%20scenarios%20where%3A%0A%0A-%20**Command-line%20tools**%3A%20CLI%20utilities%20that%20LLMs%20can%20invoke%0A-%20**Desktop%20applications**%3A%20IDE%20plugins%2C%20text%20editors%2C%20local%20tools%0A-%20**Subprocess%20communication**%3A%20Parent%20processes%20managing%20MCP%20servers%0A-%20**Local%20development**%3A%20Testing%20and%20debugging%20MCP%20implementations%0A-%20**Single-user%20scenarios**%3A%20Personal%20productivity%20tools%0A%0A**Example%20applications%3A**%0A-%20File%20system%20browsers%20for%20IDEs%0A-%20Local%20database%20query%20tools%0A-%20Git%20repository%20analyzers%0A-%20System%20monitoring%20utilities%0A-%20Development%20workflow%20automation%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20STDIO%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22os%22%0A%20%20%20%20%22path%2Ffilepath%22%0A%20%20%20%20%22strings%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22File%20Tools%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20file%20listing%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22list_files%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22List%20files%20in%20a%20directory%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22path%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Directory%20path%20to%20list%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithBoolean(%22recursive%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Default(false)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22List%20files%20recursively%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleListFiles%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20file%20content%20resource%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22file%3A%2F%2F%7Bpath%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22File%20Content%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Read%20file%20contents%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22text%2Fplain%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleFileContent%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20STDIO%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Fprintf(os.Stderr%2C%20%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleListFiles(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20path%2C%20err%20%3A%3D%20req.RequireString(%22path%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20recursive%2C%20err%20%3A%3D%20req.RequireBool(%22recursive%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Security%3A%20validate%20path%0A%20%20%20%20if%20!isValidPath(path)%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22invalid%20path%3A%20%25s%22%2C%20path))%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20files%2C%20err%20%3A%3D%20listFiles(path%2C%20recursive)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20list%20files%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22path%22%3A%20%20%20%20%20%20path%2C%0A%20%20%20%20%20%20%20%20%22files%22%3A%20%20%20%20%20files%2C%0A%20%20%20%20%20%20%20%20%22count%22%3A%20%20%20%20%20len(files)%2C%0A%20%20%20%20%20%20%20%20%22recursive%22%3A%20recursive%2C%0A%20%20%20%20%7D)%2C%20nil%0A%7D%0A%0Afunc%20handleFileContent(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20path%20from%20URI%3A%20%22file%3A%2F%2F%2Fpath%2Fto%2Ffile%22%20-%3E%20%22%2Fpath%2Fto%2Ffile%22%0A%20%20%20%20path%20%3A%3D%20extractPathFromURI(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20if%20!isValidPath(path)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20path%3A%20%25s%22%2C%20path)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%2C%20err%20%3A%3D%20os.ReadFile(path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20file%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20detectMIMEType(path)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(content)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20isValidPath(path%20string)%20bool%20%7B%0A%20%20%20%20%2F%2F%20Clean%20the%20path%20to%20resolve%20any%20.%20or%20..%20components%0A%20%20%20%20clean%20%3A%3D%20filepath.Clean(path)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20for%20directory%20traversal%20patterns%0A%20%20%20%20if%20strings.Contains(clean%2C%20%22..%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20absolute%20paths%2C%20ensure%20they're%20within%20a%20safe%20base%20directory%0A%20%20%20%20if%20filepath.IsAbs(clean)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Define%20safe%20base%20directories%20(adjust%20as%20needed%20for%20your%20use%20case)%0A%20%20%20%20%20%20%20%20safeBaseDirs%20%3A%3D%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2Ftmp%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2Fvar%2Ftmp%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2Fhome%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2FUsers%22%2C%20%2F%2F%20macOS%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20the%20path%20starts%20with%20any%20safe%20base%20directory%0A%20%20%20%20%20%20%20%20for%20_%2C%20baseDir%20%3A%3D%20range%20safeBaseDirs%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20strings.HasPrefix(clean%2C%20baseDir)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20relative%20paths%2C%20ensure%20they%20don't%20escape%20the%20current%20directory%0A%20%20%20%20return%20!strings.HasPrefix(clean%2C%20%22..%22)%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20examples%0Afunc%20listFiles(path%20string%2C%20recursive%20bool)%20(%5B%5Dstring%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20%5B%5Dstring%7B%22file1.txt%22%2C%20%22file2.txt%22%7D%2C%20nil%0A%7D%0A%0Afunc%20extractPathFromURI(uri%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Extract%20path%20from%20URI%3A%20%22file%3A%2F%2F%2Fpath%2Fto%2Ffile%22%20-%3E%20%22%2Fpath%2Fto%2Ffile%22%0A%20%20%20%20if%20strings.HasPrefix(uri%2C%20%22file%3A%2F%2F%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20strings.TrimPrefix(uri%2C%20%22file%3A%2F%2F%22)%0A%20%20%20%20%7D%0A%20%20%20%20return%20uri%0A%7D%0A%0Afunc%20detectMIMEType(path%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Simple%20MIME%20type%20detection%20based%20on%20extension%0A%20%20%20%20ext%20%3A%3D%20filepath.Ext(path)%0A%20%20%20%20switch%20ext%20%7B%0A%20%20%20%20case%20%22.txt%22%3A%0A%20%20%20%20%20%20%20%20return%20%22text%2Fplain%22%0A%20%20%20%20case%20%22.json%22%3A%0A%20%20%20%20%20%20%20%20return%20%22application%2Fjson%22%0A%20%20%20%20case%20%22.html%22%3A%0A%20%20%20%20%20%20%20%20return%20%22text%2Fhtml%22%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20%22application%2Foctet-stream%22%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20STDIO%20Server%0A%0A%60%60%60go%0Apackage%20main%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22os%22%0A%20%20%20%20%22os%2Fsignal%22%0A%20%20%20%20%22syscall%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Advanced%20CLI%20Tool%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithAllCapabilities()%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(%26server.Hooks%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20OnSessionStart%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20logToFile(fmt.Sprintf(%22Session%20started%3A%20%25s%22%2C%20sessionID))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20OnSessionEnd%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20logToFile(fmt.Sprintf(%22Session%20ended%3A%20%25s%22%2C%20sessionID))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20comprehensive%20tools%0A%20%20%20%20addSystemTools(s)%0A%20%20%20%20addFileTools(s)%0A%20%20%20%20addGitTools(s)%0A%20%20%20%20addDatabaseTools(s)%0A%0A%20%20%20%20%2F%2F%20Handle%20graceful%20shutdown%0A%20%20%20%20setupGracefulShutdown(s)%0A%0A%20%20%20%20%2F%2F%20Start%20with%20error%20handling%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Server%20error%3A%20%25v%22%2C%20err))%0A%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20advanced%20example%0Afunc%20logToFile(message%20string)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20log.Println(message)%0A%7D%0A%0Afunc%20logError(message%20string)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20log.Printf(%22ERROR%3A%20%25s%22%2C%20message)%0A%7D%0A%0Afunc%20addSystemTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20addFileTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20addGitTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20addDatabaseTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20setupGracefulShutdown(s%20*server.MCPServer)%20%7B%0A%20%20%20%20c%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(c%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%3C-c%0A%20%20%20%20%20%20%20%20logToFile(%22Received%20shutdown%20signal%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%205*time.Second)%0A%20%20%20%20%20%20%20%20defer%20cancel()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20s.Shutdown(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Shutdown%20error%3A%20%25v%22%2C%20err))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20os.Exit(0)%0A%20%20%20%20%7D()%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Integration%0A%0A%23%23%23%20How%20LLM%20Applications%20Connect%0A%0ALLM%20applications%20typically%20connect%20to%20STDIO%20MCP%20servers%20by%3A%0A%0A1.%20**Spawning%20the%20process**%3A%20Starting%20your%20server%20as%20a%20subprocess%0A2.%20**Pipe%20communication**%3A%20Using%20stdin%2Fstdout%20for%20JSON-RPC%20messages%0A3.%20**Lifecycle%20management**%3A%20Handling%20process%20startup%2C%20shutdown%2C%20and%20errors%0A%0A%23%23%23%20Claude%20Desktop%20Integration%0A%0AConfigure%20your%20STDIO%20server%20in%20Claude%20Desktop%3A%0A%0A%60%60%60json%0A%7B%0A%20%20%22mcpServers%22%3A%20%7B%0A%20%20%20%20%22file-tools%22%3A%20%7B%0A%20%20%20%20%20%20%22command%22%3A%20%22go%22%2C%0A%20%20%20%20%20%20%22args%22%3A%20%5B%22run%22%2C%20%22%2Fpath%2Fto%2Fyour%2Fserver%2Fmain.go%22%5D%2C%0A%20%20%20%20%20%20%22env%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22LOG_LEVEL%22%3A%20%22info%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A**macOS**%3A%20%60~%2FLibrary%2FApplication%20Support%2FClaude%2Fclaude_desktop_config.json%60%0A**Windows**%3A%20%60%25APPDATA%25%5CClaude%5Cclaude_desktop_config.json%60%0A%0A%23%23%23%20Custom%20Client%20Integration%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22log%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20STDIO%20client%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22-%20%25s%3A%20%25s%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20tool%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22list_files%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22path%22%3A%20%20%20%20%20%20%22.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22recursive%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%20Debugging%0A%0A%23%23%23%20Command%20Line%20Testing%0A%0ATest%20your%20STDIO%20server%20directly%20from%20the%20command%20line%3A%0A%0A%60%60%60bash%0A%23%20Start%20your%20server%0Ago%20run%20main.go%0A%0A%23%20Send%20initialization%20request%0Aecho%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A1%2C%22method%22%3A%22initialize%22%2C%22params%22%3A%7B%22protocolVersion%22%3A%222024-11-05%22%2C%22capabilities%22%3A%7B%22tools%22%3A%7B%7D%7D%2C%22clientInfo%22%3A%7B%22name%22%3A%22test%22%2C%22version%22%3A%221.0.0%22%7D%7D%7D'%20%7C%20go%20run%20main.go%0A%0A%23%20List%20tools%0Aecho%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A2%2C%22method%22%3A%22tools%2Flist%22%2C%22params%22%3A%7B%7D%7D'%20%7C%20go%20run%20main.go%0A%0A%23%20Call%20a%20tool%0Aecho%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A3%2C%22method%22%3A%22tools%2Fcall%22%2C%22params%22%3A%7B%22name%22%3A%22list_files%22%2C%22arguments%22%3A%7B%22path%22%3A%22.%22%2C%22recursive%22%3Afalse%7D%7D%7D'%20%7C%20go%20run%20main.go%0A%60%60%60%0A%0A%23%23%23%20Interactive%20Testing%20Script%0A%0A%60%60%60bash%0A%23!%2Fbin%2Fbash%0A%0A%23%20interactive_test.sh%0ASERVER_CMD%3D%22go%20run%20main.go%22%0A%0Aecho%20%22Starting%20MCP%20STDIO%20server%20test...%22%0A%0A%23%20Function%20to%20send%20JSON-RPC%20request%0Asend_request()%20%7B%0A%20%20%20%20local%20request%3D%22%241%22%0A%20%20%20%20echo%20%22Sending%3A%20%24request%22%0A%20%20%20%20echo%20%22%24request%22%20%7C%20%24SERVER_CMD%0A%20%20%20%20echo%20%22---%22%0A%7D%0A%0A%23%20Initialize%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A1%2C%22method%22%3A%22initialize%22%2C%22params%22%3A%7B%22protocolVersion%22%3A%222024-11-05%22%2C%22capabilities%22%3A%7B%22tools%22%3A%7B%7D%7D%2C%22clientInfo%22%3A%7B%22name%22%3A%22test%22%2C%22version%22%3A%221.0.0%22%7D%7D%7D'%0A%0A%23%20List%20tools%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A2%2C%22method%22%3A%22tools%2Flist%22%2C%22params%22%3A%7B%7D%7D'%0A%0A%23%20List%20resources%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A3%2C%22method%22%3A%22resources%2Flist%22%2C%22params%22%3A%7B%7D%7D'%0A%0A%23%20Call%20tool%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A4%2C%22method%22%3A%22tools%2Fcall%22%2C%22params%22%3A%7B%22name%22%3A%22list_files%22%2C%22arguments%22%3A%7B%22path%22%3A%22.%22%2C%22recursive%22%3Afalse%7D%7D%7D'%0A%0Aecho%20%22Test%20completed.%22%0A%60%60%60%0A%0A%23%23%23%20Debug%20Logging%0A%0AAdd%20debug%20logging%20to%20your%20STDIO%20server%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Setup%20debug%20logging%0A%20%20%20%20logFile%2C%20err%20%3A%3D%20os.OpenFile(%22mcp-server.log%22%2C%20os.O_CREATE%7Cos.O_WRONLY%7Cos.O_APPEND%2C%200666)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20logFile.Close()%0A%0A%20%20%20%20logger%20%3A%3D%20log.New(logFile%2C%20%22%5BMCP%5D%20%22%2C%20log.LstdFlags%7Clog.Lshortfile)%0A%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Debug%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(%26server.Hooks%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20OnSessionStart%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20logger.Printf(%22Session%20started%3A%20%25s%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20OnToolCall%3A%20func(sessionID%2C%20toolName%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20logger.Printf(%22Tool%20%25s%20failed%3A%20%25v%22%2C%20toolName%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20logger.Printf(%22Tool%20%25s%20completed%20in%20%25v%22%2C%20toolName%2C%20duration)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tools%20with%20debug%20logging%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22debug_echo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Echo%20with%20debug%20logging%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22message%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20message%20%3A%3D%20req.Params.Arguments%5B%22message%22%5D.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20logger.Printf(%22Echo%20tool%20called%20with%20message%3A%20%25s%22%2C%20message)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Echo%3A%20%25s%22%2C%20message))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%0A%20%20%20%20logger.Println(%22Starting%20STDIO%20server...%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20logger.Printf(%22Server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20MCP%20Inspector%20Integration%0A%0AUse%20the%20MCP%20Inspector%20for%20visual%20debugging%3A%0A%0A%60%60%60bash%0A%23%20Install%20MCP%20Inspector%0Anpm%20install%20-g%20%40modelcontextprotocol%2Finspector%0A%0A%23%20Run%20your%20server%20with%20inspector%0Amcp-inspector%20go%20run%20main.go%0A%60%60%60%0A%0AThis%20opens%20a%20web%20interface%20where%20you%20can%3A%0A-%20View%20available%20tools%20and%20resources%0A-%20Test%20tool%20calls%20interactively%0A-%20Inspect%20request%2Fresponse%20messages%0A-%20Debug%20protocol%20issues%0A%0A%23%23%20Error%20Handling%0A%0A%23%23%23%20Robust%20Error%20Handling%0A%0A%60%60%60go%0Afunc%20handleToolWithErrors(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Validate%20required%20parameters%0A%20%20%20%20path%2C%20ok%20%3A%3D%20req.Params.Arguments%5B%22path%22%5D.(string)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22path%20parameter%20is%20required%20and%20must%20be%20a%20string%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Validate%20path%20security%0A%20%20%20%20if%20!isValidPath(path)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20or%20unsafe%20path%3A%20%25s%22%2C%20path)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Check%20if%20path%20exists%0A%20%20%20%20if%20_%2C%20err%20%3A%3D%20os.Stat(path)%3B%20os.IsNotExist(err)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22path%20does%20not%20exist%3A%20%25s%22%2C%20path)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Handle%20context%20cancellation%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20default%3A%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Perform%20operation%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20performOperation(ctx%2C%20path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Log%20error%20for%20debugging%0A%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Operation%20failed%20for%20path%20%25s%3A%20%25v%22%2C%20path%2C%20err))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20user-friendly%20error%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.DeadlineExceeded)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22operation%20timed%20out%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22operation%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(result)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Process%20Management%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Handle%20panics%20gracefully%0A%20%20%20%20defer%20func()%20%7B%0A%20%20%20%20%20%20%20%20if%20r%20%3A%3D%20recover()%3B%20r%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Server%20panic%3A%20%25v%22%2C%20r))%0A%20%20%20%20%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Robust%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%20%2F%2F%20Built-in%20panic%20recovery%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Setup%20signal%20handling%0A%20%20%20%20setupSignalHandling()%0A%0A%20%20%20%20%2F%2F%20Start%20server%20with%20retry%20logic%0A%20%20%20%20for%20attempts%20%3A%3D%200%3B%20attempts%20%3C%203%3B%20attempts%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Server%20attempt%20%25d%20failed%3A%20%25v%22%2C%20attempts%2B1%2C%20err))%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20attempts%20%3D%3D%202%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(time.Second%20*%20time.Duration(attempts%2B1))%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20setupSignalHandling()%20%7B%0A%20%20%20%20c%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(c%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20sig%20%3A%3D%20%3C-c%0A%20%20%20%20%20%20%20%20logToFile(fmt.Sprintf(%22Received%20signal%3A%20%25v%22%2C%20sig))%0A%20%20%20%20%20%20%20%20os.Exit(0)%0A%20%20%20%20%7D()%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%20Optimization%0A%0A%23%23%23%20Efficient%20Resource%20Usage%0A%0A%60%60%60go%0A%2F%2F%20Use%20connection%20pooling%20for%20database%20tools%0Avar%20dbPool%20*sql.DB%0A%0Afunc%20init()%20%7B%0A%20%20%20%20var%20err%20error%0A%20%20%20%20dbPool%2C%20err%20%3D%20sql.Open(%22sqlite3%22%2C%20%22data.db%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20dbPool.SetMaxOpenConns(10)%0A%20%20%20%20dbPool.SetMaxIdleConns(5)%0A%20%20%20%20dbPool.SetConnMaxLifetime(time.Hour)%0A%7D%0A%0A%2F%2F%20Cache%20frequently%20accessed%20data%0Avar%20fileCache%20%3D%20make(map%5Bstring%5DcacheEntry)%0Avar%20cacheMutex%20sync.RWMutex%0A%0Atype%20cacheEntry%20struct%20%7B%0A%20%20%20%20content%20%20%20string%0A%20%20%20%20timestamp%20time.Time%0A%7D%0A%0Afunc%20getCachedFile(path%20string)%20(string%2C%20bool)%20%7B%0A%20%20%20%20cacheMutex.RLock()%0A%20%20%20%20defer%20cacheMutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20entry%2C%20exists%20%3A%3D%20fileCache%5Bpath%5D%0A%20%20%20%20if%20!exists%20%7C%7C%20time.Since(entry.timestamp)%20%3E%205*time.Minute%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20entry.content%2C%20true%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Memory%20Management%0A%0A%60%60%60go%0Afunc%20handleLargeFile(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20path%20%3A%3D%20req.Params.Arguments%5B%22path%22%5D.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Stream%20large%20files%20instead%20of%20loading%20into%20memory%0A%20%20%20%20file%2C%20err%20%3A%3D%20os.Open(path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20file.Close()%0A%0A%20%20%20%20%2F%2F%20Process%20in%20chunks%0A%20%20%20%20const%20chunkSize%20%3D%2064%20*%201024%0A%20%20%20%20buffer%20%3A%3D%20make(%5B%5Dbyte%2C%20chunkSize)%0A%20%20%20%20%0A%20%20%20%20var%20result%20strings.Builder%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20n%2C%20err%20%3A%3D%20file.Read(buffer)%0A%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20io.EOF%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20chunk%0A%20%20%20%20%20%20%20%20processed%20%3A%3D%20processChunk(buffer%5B%3An%5D)%0A%20%20%20%20%20%20%20%20result.WriteString(processed)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20cancellation%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(result.String())%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BSSE%20Transport%5D(%2Ftransports%2Fsse)**%20-%20Learn%20about%20real-time%20web%20communication%0A-%20**%5BHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Explore%20traditional%20web%20service%20patterns%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Understand%20embedded%20scenarios",lastUpdatedAt:1749318811e3}];var Hc={background5:"var(--vocs-color_background5)",border:"var(--vocs-color_border)",border2:"var(--vocs-color_border2)"},b3={default:"system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",mono:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},w3={default:"var(--vocs-fontFamily_default)",mono:"var(--vocs-fontFamily_mono)"},ti={4:"var(--vocs-space_4)",8:"var(--vocs-space_8)",24:"var(--vocs-space_24)"},ic={horizontalPadding:"var(--vocs-content_horizontalPadding)",verticalPadding:"var(--vocs-content_verticalPadding)",width:"var(--vocs-content_width)"};function ph(t){var n,i,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(n=0;n<l;n++)t[n]&&(i=ph(t[n]))&&(a&&(a+=" "),a+=i)}else for(i in t)t[i]&&(a&&(a+=" "),a+=i);return a}function l2(){for(var t,n,i=0,a="",l=arguments.length;i<l;i++)(t=arguments[i])&&(n=ph(t))&&(a&&(a+=" "),a+=n);return a}function T5(t){var n=t.match(/^var\((.*)\)$/);return n?n[1]:t}function Ie(t,n){var i={};{var a=t;for(var l in a){var A=a[l];A!=null&&(i[T5(l)]=A)}}return Object.defineProperty(i,"toString",{value:function(){return Object.keys(this).map(f=>"".concat(f,":").concat(this[f])).join(";")},writable:!1}),i}var R5="var(--vocs_ExternalLink_iconUrl)",b5="vocs_ExternalLink";const w5=g.forwardRef(({className:t,children:n,hideExternalIcon:i,href:a,...l},A)=>{const{basePath:u}=C0(),f=u;return h.jsx("a",{ref:A,className:l2(t,i||typeof n!="string"?void 0:b5),href:a,target:"_blank",rel:"noopener noreferrer",style:Ie({[R5]:`url(${f}/.vocs/icons/arrow-diagonal.svg)`}),...l,children:n})});var E3="vocs_Link",P3="vocs_Link_accent",M3="vocs_Link_styleless",jc=new Map,La=new WeakMap,N3=0,E5=void 0;function P5(t){return t?(La.has(t)||(N3+=1,La.set(t,N3.toString())),La.get(t)):"0"}function M5(t){return Object.keys(t).sort().filter(n=>t[n]!==void 0).map(n=>`${n}_${n==="root"?P5(t.root):t[n]}`).toString()}function N5(t){const n=M5(t);let i=jc.get(n);if(!i){const a=new Map;let l;const A=new IntersectionObserver(u=>{u.forEach(f=>{var C;const m=f.isIntersecting&&l.some(D=>f.intersectionRatio>=D);t.trackVisibility&&typeof f.isVisible>"u"&&(f.isVisible=m),(C=a.get(f.target))==null||C.forEach(D=>{D(m,f)})})},t);l=A.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),i={id:n,observer:A,elements:a},jc.set(n,i)}return i}function _5(t,n,i={},a=E5){if(typeof window.IntersectionObserver>"u"&&a!==void 0){const C=t.getBoundingClientRect();return n(a,{isIntersecting:a,target:t,intersectionRatio:typeof i.threshold=="number"?i.threshold:0,time:0,boundingClientRect:C,intersectionRect:C,rootBounds:C}),()=>{}}const{id:l,observer:A,elements:u}=N5(i),f=u.get(t)||[];return u.has(t)||u.set(t,f),f.push(n),A.observe(t),function(){f.splice(f.indexOf(n),1),f.length===0&&(u.delete(t),A.unobserve(t)),u.size===0&&(A.disconnect(),jc.delete(l))}}function hh({threshold:t,delay:n,trackVisibility:i,rootMargin:a,root:l,triggerOnce:A,skip:u,initialInView:f,fallbackInView:C,onChange:m}={}){var D;const[p,v]=g.useState(null),B=g.useRef(m),[y,x]=g.useState({inView:!!f,entry:void 0});B.current=m,g.useEffect(()=>{if(u||!p)return;let R;return R=_5(p,(P,N)=>{x({inView:P,entry:N}),B.current&&B.current(P,N),N.isIntersecting&&A&&R&&(R(),R=void 0)},{root:l,rootMargin:a,threshold:t,trackVisibility:i,delay:n},C),()=>{R&&R()}},[Array.isArray(t)?t.toString():t,p,l,a,A,u,i,C,n]);const S=(D=y.entry)==null?void 0:D.target,T=g.useRef(void 0);!p&&S&&!A&&!u&&T.current!==S&&(T.current=S,x({inView:!!f,entry:void 0}));const w=[v,y.inView,y.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}function k5(...t){return n=>{L5(n,...t)}}function L5(t,...n){n.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}const Mn=g.forwardRef((t,n)=>{const i=()=>{var A;return(A=Su.find(u=>u.path===t.to))==null?void 0:A.lazy()},{ref:a,inView:l}=hh();return g.useEffect(()=>{l&&i()},[l]),h.jsx(qn,{ref:k5(n,a),...t})}),xe=g.forwardRef((t,n)=>{const{hideExternalIcon:i,href:a,variant:l="accent"}=t,{pathname:A}=i0();if(a!=null&&a.match(/^(www|https?)/))return h.jsx(w5,{...t,ref:n,className:l2(t.className,E3,l==="accent"&&P3,l==="styleless"&&M3),hideExternalIcon:i});const[u,f]=(a||"").split("#"),C=`${u||A}${f?`#${f}`:""}`;return h.jsx(Mn,{...t,ref:n,className:l2(t.className,E3,l==="accent"&&P3,l==="styleless"&&M3),to:C})});var I5="vocs_NotFound",O5="vocs_NotFound_divider",q5="vocs_H1",Dh="vocs_Heading",gh="vocs_Heading_slugTarget";function Hn({level:t,...n}){const i=`h${t}`;return h.jsxs(i,{...n,id:void 0,className:l2(n.className,Dh),children:[h.jsx("div",{id:n.id,className:gh}),n.children]})}function vh(t){return h.jsx(Hn,{...t,className:l2(t.className,q5),level:1})}var H5="vocs_Paragraph";function Bh(t){return h.jsx("p",{...t,className:l2(t.className,H5)})}function j5(){return h.jsxs("div",{className:I5,children:[h.jsx(vh,{children:"Page Not Found"}),h.jsx("div",{style:{height:ti[24]}}),h.jsx("hr",{className:O5}),h.jsx("div",{style:{height:ti[24]}}),h.jsx(Bh,{children:"The page you were looking for could not be found."}),h.jsx("div",{style:{height:ti[8]}}),h.jsx(xe,{href:"/",children:"Go to Home Page"})]})}var U5="var(--vocs_Banner_bannerBackgroundColor)",z5="var(--vocs_Banner_bannerHeight)",W5="var(--vocs_Banner_bannerTextColor)",G5="vocs_Banner",V5="vocs_Banner_content",Y5="vocs_Banner_inner",$5="vocs_Banner_closeButton";const Z5=Object.getPrototypeOf(K5).constructor;async function K5(t,n){return new Z5(String(t))(n)}function X5(t,n){return new Function(String(t))(n)}function Lr(t,n){if(t==null)return{};var i={},a=Object.keys(t),l,A;for(A=0;A<a.length;A++)l=a[A],!(n.indexOf(l)>=0)&&(i[l]=t[l]);return i}var Q5=["color"],J5=g.forwardRef(function(t,n){var i=t.color,a=i===void 0?"currentColor":i,l=Lr(t,Q5);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),g.createElement("path",{d:"M6.85355 3.14645C7.04882 3.34171 7.04882 3.65829 6.85355 3.85355L3.70711 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H3.70711L6.85355 11.1464C7.04882 11.3417 7.04882 11.6583 6.85355 11.8536C6.65829 12.0488 6.34171 12.0488 6.14645 11.8536L2.14645 7.85355C1.95118 7.65829 1.95118 7.34171 2.14645 7.14645L6.14645 3.14645C6.34171 2.95118 6.65829 2.95118 6.85355 3.14645Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),eF=["color"],tF=g.forwardRef(function(t,n){var i=t.color,a=i===void 0?"currentColor":i,l=Lr(t,eF);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),g.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),rF=["color"],nF=g.forwardRef(function(t,n){var i=t.color,a=i===void 0?"currentColor":i,l=Lr(t,rF);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),g.createElement("path",{d:"M12.8536 2.85355C13.0488 2.65829 13.0488 2.34171 12.8536 2.14645C12.6583 1.95118 12.3417 1.95118 12.1464 2.14645L7.5 6.79289L2.85355 2.14645C2.65829 1.95118 2.34171 1.95118 2.14645 2.14645C1.95118 2.34171 1.95118 2.65829 2.14645 2.85355L6.79289 7.5L2.14645 12.1464C1.95118 12.3417 1.95118 12.6583 2.14645 12.8536C2.34171 13.0488 2.65829 13.0488 2.85355 12.8536L7.5 8.20711L12.1464 12.8536C12.3417 13.0488 12.6583 13.0488 12.8536 12.8536C13.0488 12.6583 13.0488 12.3417 12.8536 12.1464L8.20711 7.5L12.8536 2.85355Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),oF=["color"],iF=g.forwardRef(function(t,n){var i=t.color,a=i===void 0?"currentColor":i,l=Lr(t,oF);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),g.createElement("path",{d:"M3.5 2C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V6H8.5C8.22386 6 8 5.77614 8 5.5V2H3.5ZM9 2.70711L11.2929 5H9V2.70711ZM2 2.5C2 1.67157 2.67157 1 3.5 1H8.5C8.63261 1 8.75979 1.05268 8.85355 1.14645L12.8536 5.14645C12.9473 5.24021 13 5.36739 13 5.5V12.5C13 13.3284 12.3284 14 11.5 14H3.5C2.67157 14 2 13.3284 2 12.5V2.5Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),aF=["color"],sF=g.forwardRef(function(t,n){var i=t.color,a=i===void 0?"currentColor":i,l=Lr(t,aF);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),g.createElement("path",{d:"M1.5 5.25C1.91421 5.25 2.25 4.91421 2.25 4.5C2.25 4.08579 1.91421 3.75 1.5 3.75C1.08579 3.75 0.75 4.08579 0.75 4.5C0.75 4.91421 1.08579 5.25 1.5 5.25ZM4 4.5C4 4.22386 4.22386 4 4.5 4H13.5C13.7761 4 14 4.22386 14 4.5C14 4.77614 13.7761 5 13.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM4.5 7C4.22386 7 4 7.22386 4 7.5C4 7.77614 4.22386 8 4.5 8H13.5C13.7761 8 14 7.77614 14 7.5C14 7.22386 13.7761 7 13.5 7H4.5ZM4.5 10C4.22386 10 4 10.2239 4 10.5C4 10.7761 4.22386 11 4.5 11H13.5C13.7761 11 14 10.7761 14 10.5C14 10.2239 13.7761 10 13.5 10H4.5ZM2.25 7.5C2.25 7.91421 1.91421 8.25 1.5 8.25C1.08579 8.25 0.75 7.91421 0.75 7.5C0.75 7.08579 1.08579 6.75 1.5 6.75C1.91421 6.75 2.25 7.08579 2.25 7.5ZM1.5 11.25C1.91421 11.25 2.25 10.9142 2.25 10.5C2.25 10.0858 1.91421 9.75 1.5 9.75C1.08579 9.75 0.75 10.0858 0.75 10.5C0.75 10.9142 1.08579 11.25 1.5 11.25Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),lF=["color"],Tu=g.forwardRef(function(t,n){var i=t.color,a=i===void 0?"currentColor":i,l=Lr(t,lF);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),g.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),AF=["color"],cF=g.forwardRef(function(t,n){var i=t.color,a=i===void 0?"currentColor":i,l=Lr(t,AF);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),g.createElement("path",{d:"M12.1464 1.14645C12.3417 0.951184 12.6583 0.951184 12.8535 1.14645L14.8535 3.14645C15.0488 3.34171 15.0488 3.65829 14.8535 3.85355L10.9109 7.79618C10.8349 7.87218 10.7471 7.93543 10.651 7.9835L6.72359 9.94721C6.53109 10.0435 6.29861 10.0057 6.14643 9.85355C5.99425 9.70137 5.95652 9.46889 6.05277 9.27639L8.01648 5.34897C8.06455 5.25283 8.1278 5.16507 8.2038 5.08907L12.1464 1.14645ZM12.5 2.20711L8.91091 5.79618L7.87266 7.87267L8.12731 8.12732L10.2038 7.08907L13.7929 3.5L12.5 2.20711ZM9.99998 2L8.99998 3H4.9C4.47171 3 4.18056 3.00039 3.95552 3.01877C3.73631 3.03668 3.62421 3.06915 3.54601 3.10899C3.35785 3.20487 3.20487 3.35785 3.10899 3.54601C3.06915 3.62421 3.03669 3.73631 3.01878 3.95552C3.00039 4.18056 3 4.47171 3 4.9V11.1C3 11.5283 3.00039 11.8194 3.01878 12.0445C3.03669 12.2637 3.06915 12.3758 3.10899 12.454C3.20487 12.6422 3.35785 12.7951 3.54601 12.891C3.62421 12.9309 3.73631 12.9633 3.95552 12.9812C4.18056 12.9996 4.47171 13 4.9 13H11.1C11.5283 13 11.8194 12.9996 12.0445 12.9812C12.2637 12.9633 12.3758 12.9309 12.454 12.891C12.6422 12.7951 12.7951 12.6422 12.891 12.454C12.9309 12.3758 12.9633 12.2637 12.9812 12.0445C12.9996 11.8194 13 11.5283 13 11.1V6.99998L14 5.99998V11.1V11.1207C14 11.5231 14 11.8553 13.9779 12.1259C13.9549 12.407 13.9057 12.6653 13.782 12.908C13.5903 13.2843 13.2843 13.5903 12.908 13.782C12.6653 13.9057 12.407 13.9549 12.1259 13.9779C11.8553 14 11.5231 14 11.1207 14H11.1H4.9H4.87934C4.47686 14 4.14468 14 3.87409 13.9779C3.59304 13.9549 3.33469 13.9057 3.09202 13.782C2.7157 13.5903 2.40973 13.2843 2.21799 12.908C2.09434 12.6653 2.04506 12.407 2.0221 12.1259C1.99999 11.8553 1.99999 11.5231 2 11.1207V11.1206V11.1V4.9V4.87935V4.87932V4.87931C1.99999 4.47685 1.99999 4.14468 2.0221 3.87409C2.04506 3.59304 2.09434 3.33469 2.21799 3.09202C2.40973 2.71569 2.7157 2.40973 3.09202 2.21799C3.33469 2.09434 3.59304 2.04506 3.87409 2.0221C4.14468 1.99999 4.47685 1.99999 4.87932 2H4.87935H4.9H9.99998Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))});function Pr(t,n){if(typeof t!="object"||t===null)return t;if(Array.isArray(t))return t.map((a,l)=>Pr(a,l));const i=t.props.children?{...t.props,children:Pr(t.props.children)}:t.props;return n0.createElement(t.type,{...i,key:n})}function uF({hide:t}){const{banner:n}=C0(),i=g.useMemo(()=>{const a=(n==null?void 0:n.content)??"";if(!a)return null;if(typeof a!="string")return()=>Pr(a);const{default:l}=X5(a,{...cy,Fragment:g.Fragment});return l},[n]);return i?h.jsx("div",{className:l2(G5),style:Ie({[U5]:n==null?void 0:n.backgroundColor,[W5]:n==null?void 0:n.textColor}),children:h.jsxs("div",{className:l2(Y5),children:[h.jsx("div",{className:l2(V5),children:h.jsx(i,{})}),(n==null?void 0:n.dismissable)!=="false"&&h.jsx("button",{className:l2($5),onClick:t,type:"button",children:h.jsx(nF,{width:14,height:14})})]})}):null}var fF="vocs_Content";function yh({children:t,className:n}){return h.jsx("article",{className:l2(n,fF),children:t})}const dF=({children:t})=>t,mF=({children:t})=>t,Ru=({children:t})=>t;function xh({items:t,pathname:n}){const i=n.replace(/\.html$/,""),a=[];for(const l of t)(l.link&&i.startsWith(l.match||l.link)||l.items&&xh({items:l.items,pathname:n}).length>0)&&a.push(l.id);return a}function Ai({items:t,pathname:n}){return g.useMemo(()=>xh({items:t,pathname:n}),[t,n])}function rr(){const t=g.useContext(Fh);if(!t)throw new Error("`usePageData` must be used within `PageDataContext.Provider`.");return t}const Fh=g.createContext(void 0);function Fs(){const{pathname:t}=i0(),n=C0(),{sidebar:i}=n;if(!i)return{items:[]};if(Array.isArray(i))return{items:i};const a=g.useMemo(()=>{const l=Object.keys(i).filter(A=>t.startsWith(A));return l[l.length-1]},[i,t]);return a?Array.isArray(i[a])?{key:a,items:i[a]}:{...i[a],key:a}:{items:[]}}function nr(){const{aiCta:t}=C0(),n=Fs(),{frontmatter:i}=rr(),{layout:a,showLogo:l,showAiCta:A,showOutline:u,showSidebar:f,showTopNav:C}=i||{},m=a??"docs";return{layout:m,get showLogo(){return typeof l<"u"?l:!0},get showAiCta(){return typeof A<"u"?A:t===!1?!1:m==="docs"},get showOutline(){return typeof u<"u"?u:m==="docs"},get showSidebar(){return n.items.length===0?!1:typeof f<"u"?f:!(m==="minimal"||m==="landing")},get showTopNav(){return typeof C<"u"?C:!0}}}function C2(t,n,{checkForDefaultPrevented:i=!0}={}){return function(l){if(t==null||t(l),i===!1||!l.defaultPrevented)return n==null?void 0:n(l)}}function _3(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function ci(...t){return n=>{let i=!1;const a=t.map(l=>{const A=_3(l,n);return!i&&typeof A=="function"&&(i=!0),A});if(i)return()=>{for(let l=0;l<a.length;l++){const A=a[l];typeof A=="function"?A():_3(t[l],null)}}}}function o0(...t){return g.useCallback(ci(...t),t)}function CF(t,n){const i=g.createContext(n),a=A=>{const{children:u,...f}=A,C=g.useMemo(()=>f,Object.values(f));return h.jsx(i.Provider,{value:C,children:u})};a.displayName=t+"Provider";function l(A){const u=g.useContext(i);if(u)return u;if(n!==void 0)return n;throw new Error(`\`${A}\` must be used within \`${t}\``)}return[a,l]}function Oe(t,n=[]){let i=[];function a(A,u){const f=g.createContext(u),C=i.length;i=[...i,u];const m=p=>{var T;const{scope:v,children:B,...y}=p,x=((T=v==null?void 0:v[t])==null?void 0:T[C])||f,S=g.useMemo(()=>y,Object.values(y));return h.jsx(x.Provider,{value:S,children:B})};m.displayName=A+"Provider";function D(p,v){var x;const B=((x=v==null?void 0:v[t])==null?void 0:x[C])||f,y=g.useContext(B);if(y)return y;if(u!==void 0)return u;throw new Error(`\`${p}\` must be used within \`${A}\``)}return[m,D]}const l=()=>{const A=i.map(u=>g.createContext(u));return function(f){const C=(f==null?void 0:f[t])||A;return g.useMemo(()=>({[`__scope${t}`]:{...f,[t]:C}}),[f,C])}};return l.scopeName=t,[a,pF(l,...n)]}function pF(...t){const n=t[0];if(t.length===1)return n;const i=()=>{const a=t.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(A){const u=a.reduce((f,{useScope:C,scopeName:m})=>{const p=C(A)[`__scope${m}`];return{...f,...p}},{});return g.useMemo(()=>({[`__scope${n.scopeName}`]:u}),[u])}};return i.scopeName=n.scopeName,i}var Fe=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},hF=vs[" useId ".trim().toString()]||(()=>{}),DF=0;function Be(t){const[n,i]=g.useState(hF());return Fe(()=>{i(a=>a??String(DF++))},[t]),t||(n?`radix-${n}`:"")}var gF=vs[" useInsertionEffect ".trim().toString()]||Fe;function Qe({prop:t,defaultProp:n,onChange:i=()=>{},caller:a}){const[l,A,u]=vF({defaultProp:n,onChange:i}),f=t!==void 0,C=f?t:l;{const D=g.useRef(t!==void 0);g.useEffect(()=>{const p=D.current;p!==f&&console.warn(`${a} is changing from ${p?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),D.current=f},[f,a])}const m=g.useCallback(D=>{var p;if(f){const v=BF(D)?D(t):D;v!==t&&((p=u.current)==null||p.call(u,v))}else A(D)},[f,t,A,u]);return[C,m]}function vF({defaultProp:t,onChange:n}){const[i,a]=g.useState(t),l=g.useRef(i),A=g.useRef(n);return gF(()=>{A.current=n},[n]),g.useEffect(()=>{var u;l.current!==i&&((u=A.current)==null||u.call(A,i),l.current=i)},[i,l]),[i,a,A]}function BF(t){return typeof t=="function"}var bu=Op();const Sh=gs(bu);function Nn(t){const n=yF(t),i=g.forwardRef((a,l)=>{const{children:A,...u}=a,f=g.Children.toArray(A),C=f.find(FF);if(C){const m=C.props.children,D=f.map(p=>p===C?g.Children.count(m)>1?g.Children.only(null):g.isValidElement(m)?m.props.children:null:p);return h.jsx(n,{...u,ref:l,children:g.isValidElement(m)?g.cloneElement(m,void 0,D):null})}return h.jsx(n,{...u,ref:l,children:A})});return i.displayName=`${t}.Slot`,i}function yF(t){const n=g.forwardRef((i,a)=>{const{children:l,...A}=i;if(g.isValidElement(l)){const u=TF(l),f=SF(A,l.props);return l.type!==g.Fragment&&(f.ref=a?ci(a,u):u),g.cloneElement(l,f)}return g.Children.count(l)>1?g.Children.only(null):null});return n.displayName=`${t}.SlotClone`,n}var xF=Symbol("radix.slottable");function FF(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===xF}function SF(t,n){const i={...n};for(const a in n){const l=t[a],A=n[a];/^on[A-Z]/.test(a)?l&&A?i[a]=(...f)=>{const C=A(...f);return l(...f),C}:l&&(i[a]=l):a==="style"?i[a]={...l,...A}:a==="className"&&(i[a]=[l,A].filter(Boolean).join(" "))}return{...t,...i}}function TF(t){var a,l;let n=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?t.ref:(n=(l=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:l.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?t.props.ref:t.props.ref||t.ref)}var RF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],E2=RF.reduce((t,n)=>{const i=Nn(`Primitive.${n}`),a=g.forwardRef((l,A)=>{const{asChild:u,...f}=l,C=u?i:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(C,{...f,ref:A})});return a.displayName=`Primitive.${n}`,{...t,[n]:a}},{});function ss(t,n){t&&bu.flushSync(()=>t.dispatchEvent(n))}function I0(t){const n=g.useRef(t);return g.useEffect(()=>{n.current=t}),g.useMemo(()=>(...i)=>{var a;return(a=n.current)==null?void 0:a.call(n,...i)},[])}function bF(t,n=globalThis==null?void 0:globalThis.document){const i=I0(t);g.useEffect(()=>{const a=l=>{l.key==="Escape"&&i(l)};return n.addEventListener("keydown",a,{capture:!0}),()=>n.removeEventListener("keydown",a,{capture:!0})},[i,n])}var wF="DismissableLayer",Uc="dismissableLayer.update",EF="dismissableLayer.pointerDownOutside",PF="dismissableLayer.focusOutside",k3,Th=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ui=g.forwardRef((t,n)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:A,onInteractOutside:u,onDismiss:f,...C}=t,m=g.useContext(Th),[D,p]=g.useState(null),v=(D==null?void 0:D.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,B]=g.useState({}),y=o0(n,L=>p(L)),x=Array.from(m.layers),[S]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),T=x.indexOf(S),w=D?x.indexOf(D):-1,R=m.layersWithOutsidePointerEventsDisabled.size>0,P=w>=T,N=_F(L=>{const H=L.target,z=[...m.branches].some(r2=>r2.contains(H));!P||z||(l==null||l(L),u==null||u(L),L.defaultPrevented||f==null||f())},v),E=kF(L=>{const H=L.target;[...m.branches].some(r2=>r2.contains(H))||(A==null||A(L),u==null||u(L),L.defaultPrevented||f==null||f())},v);return bF(L=>{w===m.layers.size-1&&(a==null||a(L),!L.defaultPrevented&&f&&(L.preventDefault(),f()))},v),g.useEffect(()=>{if(D)return i&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(k3=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(D)),m.layers.add(D),L3(),()=>{i&&m.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=k3)}},[D,v,i,m]),g.useEffect(()=>()=>{D&&(m.layers.delete(D),m.layersWithOutsidePointerEventsDisabled.delete(D),L3())},[D,m]),g.useEffect(()=>{const L=()=>B({});return document.addEventListener(Uc,L),()=>document.removeEventListener(Uc,L)},[]),h.jsx(E2.div,{...C,ref:y,style:{pointerEvents:R?P?"auto":"none":void 0,...t.style},onFocusCapture:C2(t.onFocusCapture,E.onFocusCapture),onBlurCapture:C2(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:C2(t.onPointerDownCapture,N.onPointerDownCapture)})});ui.displayName=wF;var MF="DismissableLayerBranch",NF=g.forwardRef((t,n)=>{const i=g.useContext(Th),a=g.useRef(null),l=o0(n,a);return g.useEffect(()=>{const A=a.current;if(A)return i.branches.add(A),()=>{i.branches.delete(A)}},[i.branches]),h.jsx(E2.div,{...t,ref:l})});NF.displayName=MF;function _F(t,n=globalThis==null?void 0:globalThis.document){const i=I0(t),a=g.useRef(!1),l=g.useRef(()=>{});return g.useEffect(()=>{const A=f=>{if(f.target&&!a.current){let C=function(){Rh(EF,i,m,{discrete:!0})};const m={originalEvent:f};f.pointerType==="touch"?(n.removeEventListener("click",l.current),l.current=C,n.addEventListener("click",l.current,{once:!0})):C()}else n.removeEventListener("click",l.current);a.current=!1},u=window.setTimeout(()=>{n.addEventListener("pointerdown",A)},0);return()=>{window.clearTimeout(u),n.removeEventListener("pointerdown",A),n.removeEventListener("click",l.current)}},[n,i]),{onPointerDownCapture:()=>a.current=!0}}function kF(t,n=globalThis==null?void 0:globalThis.document){const i=I0(t),a=g.useRef(!1);return g.useEffect(()=>{const l=A=>{A.target&&!a.current&&Rh(PF,i,{originalEvent:A},{discrete:!1})};return n.addEventListener("focusin",l),()=>n.removeEventListener("focusin",l)},[n,i]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function L3(){const t=new CustomEvent(Uc);document.dispatchEvent(t)}function Rh(t,n,i,{discrete:a}){const l=i.originalEvent.target,A=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:i});n&&l.addEventListener(t,n,{once:!0}),a?ss(l,A):l.dispatchEvent(A)}var ac="focusScope.autoFocusOnMount",sc="focusScope.autoFocusOnUnmount",I3={bubbles:!1,cancelable:!0},LF="FocusScope",Ss=g.forwardRef((t,n)=>{const{loop:i=!1,trapped:a=!1,onMountAutoFocus:l,onUnmountAutoFocus:A,...u}=t,[f,C]=g.useState(null),m=I0(l),D=I0(A),p=g.useRef(null),v=o0(n,x=>C(x)),B=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(a){let x=function(R){if(B.paused||!f)return;const P=R.target;f.contains(P)?p.current=P:Xt(p.current,{select:!0})},S=function(R){if(B.paused||!f)return;const P=R.relatedTarget;P!==null&&(f.contains(P)||Xt(p.current,{select:!0}))},T=function(R){if(document.activeElement===document.body)for(const N of R)N.removedNodes.length>0&&Xt(f)};document.addEventListener("focusin",x),document.addEventListener("focusout",S);const w=new MutationObserver(T);return f&&w.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",S),w.disconnect()}}},[a,f,B.paused]),g.useEffect(()=>{if(f){q3.add(B);const x=document.activeElement;if(!f.contains(x)){const T=new CustomEvent(ac,I3);f.addEventListener(ac,m),f.dispatchEvent(T),T.defaultPrevented||(IF(UF(bh(f)),{select:!0}),document.activeElement===x&&Xt(f))}return()=>{f.removeEventListener(ac,m),setTimeout(()=>{const T=new CustomEvent(sc,I3);f.addEventListener(sc,D),f.dispatchEvent(T),T.defaultPrevented||Xt(x??document.body,{select:!0}),f.removeEventListener(sc,D),q3.remove(B)},0)}}},[f,m,D,B]);const y=g.useCallback(x=>{if(!i&&!a||B.paused)return;const S=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,T=document.activeElement;if(S&&T){const w=x.currentTarget,[R,P]=OF(w);R&&P?!x.shiftKey&&T===P?(x.preventDefault(),i&&Xt(R,{select:!0})):x.shiftKey&&T===R&&(x.preventDefault(),i&&Xt(P,{select:!0})):T===w&&x.preventDefault()}},[i,a,B.paused]);return h.jsx(E2.div,{tabIndex:-1,...u,ref:v,onKeyDown:y})});Ss.displayName=LF;function IF(t,{select:n=!1}={}){const i=document.activeElement;for(const a of t)if(Xt(a,{select:n}),document.activeElement!==i)return}function OF(t){const n=bh(t),i=O3(n,t),a=O3(n.reverse(),t);return[i,a]}function bh(t){const n=[],i=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const l=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||l?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)n.push(i.currentNode);return n}function O3(t,n){for(const i of t)if(!qF(i,{upTo:n}))return i}function qF(t,{upTo:n}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(n!==void 0&&t===n)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function HF(t){return t instanceof HTMLInputElement&&"select"in t}function Xt(t,{select:n=!1}={}){if(t&&t.focus){const i=document.activeElement;t.focus({preventScroll:!0}),t!==i&&HF(t)&&n&&t.select()}}var q3=jF();function jF(){let t=[];return{add(n){const i=t[0];n!==i&&(i==null||i.pause()),t=H3(t,n),t.unshift(n)},remove(n){var i;t=H3(t,n),(i=t[0])==null||i.resume()}}}function H3(t,n){const i=[...t],a=i.indexOf(n);return a!==-1&&i.splice(a,1),i}function UF(t){return t.filter(n=>n.tagName!=="A")}var zF="Portal",Ts=g.forwardRef((t,n)=>{var f;const{container:i,...a}=t,[l,A]=g.useState(!1);Fe(()=>A(!0),[]);const u=i||l&&((f=globalThis==null?void 0:globalThis.document)==null?void 0:f.body);return u?Sh.createPortal(h.jsx(E2.div,{...a,ref:n}),u):null});Ts.displayName=zF;function WF(t,n){return g.useReducer((i,a)=>n[i][a]??i,t)}var O0=t=>{const{present:n,children:i}=t,a=GF(n),l=typeof i=="function"?i({present:a.isPresent}):g.Children.only(i),A=o0(a.ref,VF(l));return typeof i=="function"||a.isPresent?g.cloneElement(l,{ref:A}):null};O0.displayName="Presence";function GF(t){const[n,i]=g.useState(),a=g.useRef(null),l=g.useRef(t),A=g.useRef("none"),u=t?"mounted":"unmounted",[f,C]=WF(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const m=Ia(a.current);A.current=f==="mounted"?m:"none"},[f]),Fe(()=>{const m=a.current,D=l.current;if(D!==t){const v=A.current,B=Ia(m);t?C("MOUNT"):B==="none"||(m==null?void 0:m.display)==="none"?C("UNMOUNT"):C(D&&v!==B?"ANIMATION_OUT":"UNMOUNT"),l.current=t}},[t,C]),Fe(()=>{if(n){let m;const D=n.ownerDocument.defaultView??window,p=B=>{const x=Ia(a.current).includes(B.animationName);if(B.target===n&&x&&(C("ANIMATION_END"),!l.current)){const S=n.style.animationFillMode;n.style.animationFillMode="forwards",m=D.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=S)})}},v=B=>{B.target===n&&(A.current=Ia(a.current))};return n.addEventListener("animationstart",v),n.addEventListener("animationcancel",p),n.addEventListener("animationend",p),()=>{D.clearTimeout(m),n.removeEventListener("animationstart",v),n.removeEventListener("animationcancel",p),n.removeEventListener("animationend",p)}}else C("ANIMATION_END")},[n,C]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:g.useCallback(m=>{a.current=m?getComputedStyle(m):null,i(m)},[])}}function Ia(t){return(t==null?void 0:t.animationName)||"none"}function VF(t){var a,l;let n=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?t.ref:(n=(l=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:l.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?t.props.ref:t.props.ref||t.ref)}var lc=0;function wu(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??j3()),document.body.insertAdjacentElement("beforeend",t[1]??j3()),lc++,()=>{lc===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),lc--}},[])}function j3(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var $e=function(){return $e=Object.assign||function(n){for(var i,a=1,l=arguments.length;a<l;a++){i=arguments[a];for(var A in i)Object.prototype.hasOwnProperty.call(i,A)&&(n[A]=i[A])}return n},$e.apply(this,arguments)};function wh(t,n){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(i[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(t);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(t,a[l])&&(i[a[l]]=t[a[l]]);return i}function YF(t,n,i){if(i||arguments.length===2)for(var a=0,l=n.length,A;a<l;a++)(A||!(a in n))&&(A||(A=Array.prototype.slice.call(n,0,a)),A[a]=n[a]);return t.concat(A||Array.prototype.slice.call(n))}var Qa="right-scroll-bar-position",Ja="width-before-scroll-bar",$F="with-scroll-bars-hidden",ZF="--removed-body-scroll-bar-size";function Ac(t,n){return typeof t=="function"?t(n):t&&(t.current=n),t}function KF(t,n){var i=g.useState(function(){return{value:t,callback:n,facade:{get current(){return i.value},set current(a){var l=i.value;l!==a&&(i.value=a,i.callback(a,l))}}}})[0];return i.callback=n,i.facade}var XF=typeof window<"u"?g.useLayoutEffect:g.useEffect,U3=new WeakMap;function QF(t,n){var i=KF(null,function(a){return t.forEach(function(l){return Ac(l,a)})});return XF(function(){var a=U3.get(i);if(a){var l=new Set(a),A=new Set(t),u=i.current;l.forEach(function(f){A.has(f)||Ac(f,null)}),A.forEach(function(f){l.has(f)||Ac(f,u)})}U3.set(i,t)},[t]),i}function JF(t){return t}function eS(t,n){n===void 0&&(n=JF);var i=[],a=!1,l={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:t},useMedium:function(A){var u=n(A,a);return i.push(u),function(){i=i.filter(function(f){return f!==u})}},assignSyncMedium:function(A){for(a=!0;i.length;){var u=i;i=[],u.forEach(A)}i={push:function(f){return A(f)},filter:function(){return i}}},assignMedium:function(A){a=!0;var u=[];if(i.length){var f=i;i=[],f.forEach(A),u=i}var C=function(){var D=u;u=[],D.forEach(A)},m=function(){return Promise.resolve().then(C)};m(),i={push:function(D){u.push(D),m()},filter:function(D){return u=u.filter(D),i}}}};return l}function tS(t){t===void 0&&(t={});var n=eS(null);return n.options=$e({async:!0,ssr:!1},t),n}var Eh=function(t){var n=t.sideCar,i=wh(t,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=n.read();if(!a)throw new Error("Sidecar medium not found");return g.createElement(a,$e({},i))};Eh.isSideCarExport=!0;function rS(t,n){return t.useMedium(n),Eh}var Ph=tS(),cc=function(){},Rs=g.forwardRef(function(t,n){var i=g.useRef(null),a=g.useState({onScrollCapture:cc,onWheelCapture:cc,onTouchMoveCapture:cc}),l=a[0],A=a[1],u=t.forwardProps,f=t.children,C=t.className,m=t.removeScrollBar,D=t.enabled,p=t.shards,v=t.sideCar,B=t.noRelative,y=t.noIsolation,x=t.inert,S=t.allowPinchZoom,T=t.as,w=T===void 0?"div":T,R=t.gapMode,P=wh(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=v,E=QF([i,n]),L=$e($e({},P),l);return g.createElement(g.Fragment,null,D&&g.createElement(N,{sideCar:Ph,removeScrollBar:m,shards:p,noRelative:B,noIsolation:y,inert:x,setCallbacks:A,allowPinchZoom:!!S,lockRef:i,gapMode:R}),u?g.cloneElement(g.Children.only(f),$e($e({},L),{ref:E})):g.createElement(w,$e({},L,{className:C,ref:E}),f))});Rs.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rs.classNames={fullWidth:Ja,zeroRight:Qa};var nS=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function oS(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var n=nS();return n&&t.setAttribute("nonce",n),t}function iS(t,n){t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}function aS(t){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(t)}var sS=function(){var t=0,n=null;return{add:function(i){t==0&&(n=oS())&&(iS(n,i),aS(n)),t++},remove:function(){t--,!t&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},lS=function(){var t=sS();return function(n,i){g.useEffect(function(){return t.add(n),function(){t.remove()}},[n&&i])}},Mh=function(){var t=lS(),n=function(i){var a=i.styles,l=i.dynamic;return t(a,l),null};return n},AS={left:0,top:0,right:0,gap:0},uc=function(t){return parseInt(t||"",10)||0},cS=function(t){var n=window.getComputedStyle(document.body),i=n[t==="padding"?"paddingLeft":"marginLeft"],a=n[t==="padding"?"paddingTop":"marginTop"],l=n[t==="padding"?"paddingRight":"marginRight"];return[uc(i),uc(a),uc(l)]},uS=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return AS;var n=cS(t),i=document.documentElement.clientWidth,a=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,a-i+n[2]-n[0])}},fS=Mh(),En="data-scroll-locked",dS=function(t,n,i,a){var l=t.left,A=t.top,u=t.right,f=t.gap;return i===void 0&&(i="margin"),`
  .`.concat($F,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(f,"px ").concat(a,`;
  }
  body[`).concat(En,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(a,";"),i==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(A,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(a,`;
    `),i==="padding"&&"padding-right: ".concat(f,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qa,` {
    right: `).concat(f,"px ").concat(a,`;
  }
  
  .`).concat(Ja,` {
    margin-right: `).concat(f,"px ").concat(a,`;
  }
  
  .`).concat(Qa," .").concat(Qa,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(Ja," .").concat(Ja,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(En,`] {
    `).concat(ZF,": ").concat(f,`px;
  }
`)},z3=function(){var t=parseInt(document.body.getAttribute(En)||"0",10);return isFinite(t)?t:0},mS=function(){g.useEffect(function(){return document.body.setAttribute(En,(z3()+1).toString()),function(){var t=z3()-1;t<=0?document.body.removeAttribute(En):document.body.setAttribute(En,t.toString())}},[])},CS=function(t){var n=t.noRelative,i=t.noImportant,a=t.gapMode,l=a===void 0?"margin":a;mS();var A=g.useMemo(function(){return uS(l)},[l]);return g.createElement(fS,{styles:dS(A,!n,l,i?"":"!important")})},zc=!1;if(typeof window<"u")try{var Oa=Object.defineProperty({},"passive",{get:function(){return zc=!0,!0}});window.addEventListener("test",Oa,Oa),window.removeEventListener("test",Oa,Oa)}catch{zc=!1}var xn=zc?{passive:!1}:!1,pS=function(t){return t.tagName==="TEXTAREA"},Nh=function(t,n){if(!(t instanceof Element))return!1;var i=window.getComputedStyle(t);return i[n]!=="hidden"&&!(i.overflowY===i.overflowX&&!pS(t)&&i[n]==="visible")},hS=function(t){return Nh(t,"overflowY")},DS=function(t){return Nh(t,"overflowX")},W3=function(t,n){var i=n.ownerDocument,a=n;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var l=_h(t,a);if(l){var A=kh(t,a),u=A[1],f=A[2];if(u>f)return!0}a=a.parentNode}while(a&&a!==i.body);return!1},gS=function(t){var n=t.scrollTop,i=t.scrollHeight,a=t.clientHeight;return[n,i,a]},vS=function(t){var n=t.scrollLeft,i=t.scrollWidth,a=t.clientWidth;return[n,i,a]},_h=function(t,n){return t==="v"?hS(n):DS(n)},kh=function(t,n){return t==="v"?gS(n):vS(n)},BS=function(t,n){return t==="h"&&n==="rtl"?-1:1},yS=function(t,n,i,a,l){var A=BS(t,window.getComputedStyle(n).direction),u=A*a,f=i.target,C=n.contains(f),m=!1,D=u>0,p=0,v=0;do{var B=kh(t,f),y=B[0],x=B[1],S=B[2],T=x-S-A*y;(y||T)&&_h(t,f)&&(p+=T,v+=y),f=f.parentNode.host||f.parentNode}while(!C&&f!==document.body||C&&(n.contains(f)||n===f));return(D&&Math.abs(p)<1||!D&&Math.abs(v)<1)&&(m=!0),m},qa=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},G3=function(t){return[t.deltaX,t.deltaY]},V3=function(t){return t&&"current"in t?t.current:t},xS=function(t,n){return t[0]===n[0]&&t[1]===n[1]},FS=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},SS=0,Fn=[];function TS(t){var n=g.useRef([]),i=g.useRef([0,0]),a=g.useRef(),l=g.useState(SS++)[0],A=g.useState(Mh)[0],u=g.useRef(t);g.useEffect(function(){u.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(l));var x=YF([t.lockRef.current],(t.shards||[]).map(V3),!0).filter(Boolean);return x.forEach(function(S){return S.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),x.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(l))})}}},[t.inert,t.lockRef.current,t.shards]);var f=g.useCallback(function(x,S){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!u.current.allowPinchZoom;var T=qa(x),w=i.current,R="deltaX"in x?x.deltaX:w[0]-T[0],P="deltaY"in x?x.deltaY:w[1]-T[1],N,E=x.target,L=Math.abs(R)>Math.abs(P)?"h":"v";if("touches"in x&&L==="h"&&E.type==="range")return!1;var H=W3(L,E);if(!H)return!0;if(H?N=L:(N=L==="v"?"h":"v",H=W3(L,E)),!H)return!1;if(!a.current&&"changedTouches"in x&&(R||P)&&(a.current=N),!N)return!0;var z=a.current||N;return yS(z,S,x,z==="h"?R:P)},[]),C=g.useCallback(function(x){var S=x;if(!(!Fn.length||Fn[Fn.length-1]!==A)){var T="deltaY"in S?G3(S):qa(S),w=n.current.filter(function(N){return N.name===S.type&&(N.target===S.target||S.target===N.shadowParent)&&xS(N.delta,T)})[0];if(w&&w.should){S.cancelable&&S.preventDefault();return}if(!w){var R=(u.current.shards||[]).map(V3).filter(Boolean).filter(function(N){return N.contains(S.target)}),P=R.length>0?f(S,R[0]):!u.current.noIsolation;P&&S.cancelable&&S.preventDefault()}}},[]),m=g.useCallback(function(x,S,T,w){var R={name:x,delta:S,target:T,should:w,shadowParent:RS(T)};n.current.push(R),setTimeout(function(){n.current=n.current.filter(function(P){return P!==R})},1)},[]),D=g.useCallback(function(x){i.current=qa(x),a.current=void 0},[]),p=g.useCallback(function(x){m(x.type,G3(x),x.target,f(x,t.lockRef.current))},[]),v=g.useCallback(function(x){m(x.type,qa(x),x.target,f(x,t.lockRef.current))},[]);g.useEffect(function(){return Fn.push(A),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:v}),document.addEventListener("wheel",C,xn),document.addEventListener("touchmove",C,xn),document.addEventListener("touchstart",D,xn),function(){Fn=Fn.filter(function(x){return x!==A}),document.removeEventListener("wheel",C,xn),document.removeEventListener("touchmove",C,xn),document.removeEventListener("touchstart",D,xn)}},[]);var B=t.removeScrollBar,y=t.inert;return g.createElement(g.Fragment,null,y?g.createElement(A,{styles:FS(l)}):null,B?g.createElement(CS,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function RS(t){for(var n=null;t!==null;)t instanceof ShadowRoot&&(n=t.host,t=t.host),t=t.parentNode;return n}const bS=rS(Ph,TS);var bs=g.forwardRef(function(t,n){return g.createElement(Rs,$e({},t,{ref:n,sideCar:bS}))});bs.classNames=Rs.classNames;var wS=function(t){if(typeof document>"u")return null;var n=Array.isArray(t)?t[0]:t;return n.ownerDocument.body},Sn=new WeakMap,Ha=new WeakMap,ja={},fc=0,Lh=function(t){return t&&(t.host||Lh(t.parentNode))},ES=function(t,n){return n.map(function(i){if(t.contains(i))return i;var a=Lh(i);return a&&t.contains(a)?a:(console.error("aria-hidden",i,"in not contained inside",t,". Doing nothing"),null)}).filter(function(i){return!!i})},PS=function(t,n,i,a){var l=ES(n,Array.isArray(t)?t:[t]);ja[i]||(ja[i]=new WeakMap);var A=ja[i],u=[],f=new Set,C=new Set(l),m=function(p){!p||f.has(p)||(f.add(p),m(p.parentNode))};l.forEach(m);var D=function(p){!p||C.has(p)||Array.prototype.forEach.call(p.children,function(v){if(f.has(v))D(v);else try{var B=v.getAttribute(a),y=B!==null&&B!=="false",x=(Sn.get(v)||0)+1,S=(A.get(v)||0)+1;Sn.set(v,x),A.set(v,S),u.push(v),x===1&&y&&Ha.set(v,!0),S===1&&v.setAttribute(i,"true"),y||v.setAttribute(a,"true")}catch(T){console.error("aria-hidden: cannot operate on ",v,T)}})};return D(n),f.clear(),fc++,function(){u.forEach(function(p){var v=Sn.get(p)-1,B=A.get(p)-1;Sn.set(p,v),A.set(p,B),v||(Ha.has(p)||p.removeAttribute(a),Ha.delete(p)),B||p.removeAttribute(i)}),fc--,fc||(Sn=new WeakMap,Sn=new WeakMap,Ha=new WeakMap,ja={})}},Eu=function(t,n,i){i===void 0&&(i="data-aria-hidden");var a=Array.from(Array.isArray(t)?t:[t]),l=wS(t);return l?(a.push.apply(a,Array.from(l.querySelectorAll("[aria-live], script"))),PS(a,l,i,"aria-hidden")):function(){return null}},ws="Dialog",[Ih,FN]=Oe(ws),[MS,qe]=Ih(ws),Oh=t=>{const{__scopeDialog:n,children:i,open:a,defaultOpen:l,onOpenChange:A,modal:u=!0}=t,f=g.useRef(null),C=g.useRef(null),[m,D]=Qe({prop:a,defaultProp:l??!1,onChange:A,caller:ws});return h.jsx(MS,{scope:n,triggerRef:f,contentRef:C,contentId:Be(),titleId:Be(),descriptionId:Be(),open:m,onOpenChange:D,onOpenToggle:g.useCallback(()=>D(p=>!p),[D]),modal:u,children:i})};Oh.displayName=ws;var qh="DialogTrigger",Hh=g.forwardRef((t,n)=>{const{__scopeDialog:i,...a}=t,l=qe(qh,i),A=o0(n,l.triggerRef);return h.jsx(E2.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":Nu(l.open),...a,ref:A,onClick:C2(t.onClick,l.onOpenToggle)})});Hh.displayName=qh;var Pu="DialogPortal",[NS,jh]=Ih(Pu,{forceMount:void 0}),Uh=t=>{const{__scopeDialog:n,forceMount:i,children:a,container:l}=t,A=qe(Pu,n);return h.jsx(NS,{scope:n,forceMount:i,children:g.Children.map(a,u=>h.jsx(O0,{present:i||A.open,children:h.jsx(Ts,{asChild:!0,container:l,children:u})}))})};Uh.displayName=Pu;var ls="DialogOverlay",zh=g.forwardRef((t,n)=>{const i=jh(ls,t.__scopeDialog),{forceMount:a=i.forceMount,...l}=t,A=qe(ls,t.__scopeDialog);return A.modal?h.jsx(O0,{present:a||A.open,children:h.jsx(kS,{...l,ref:n})}):null});zh.displayName=ls;var _S=Nn("DialogOverlay.RemoveScroll"),kS=g.forwardRef((t,n)=>{const{__scopeDialog:i,...a}=t,l=qe(ls,i);return h.jsx(bs,{as:_S,allowPinchZoom:!0,shards:[l.contentRef],children:h.jsx(E2.div,{"data-state":Nu(l.open),...a,ref:n,style:{pointerEvents:"auto",...a.style}})})}),Mr="DialogContent",Wh=g.forwardRef((t,n)=>{const i=jh(Mr,t.__scopeDialog),{forceMount:a=i.forceMount,...l}=t,A=qe(Mr,t.__scopeDialog);return h.jsx(O0,{present:a||A.open,children:A.modal?h.jsx(LS,{...l,ref:n}):h.jsx(IS,{...l,ref:n})})});Wh.displayName=Mr;var LS=g.forwardRef((t,n)=>{const i=qe(Mr,t.__scopeDialog),a=g.useRef(null),l=o0(n,i.contentRef,a);return g.useEffect(()=>{const A=a.current;if(A)return Eu(A)},[]),h.jsx(Gh,{...t,ref:l,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:C2(t.onCloseAutoFocus,A=>{var u;A.preventDefault(),(u=i.triggerRef.current)==null||u.focus()}),onPointerDownOutside:C2(t.onPointerDownOutside,A=>{const u=A.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0;(u.button===2||f)&&A.preventDefault()}),onFocusOutside:C2(t.onFocusOutside,A=>A.preventDefault())})}),IS=g.forwardRef((t,n)=>{const i=qe(Mr,t.__scopeDialog),a=g.useRef(!1),l=g.useRef(!1);return h.jsx(Gh,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:A=>{var u,f;(u=t.onCloseAutoFocus)==null||u.call(t,A),A.defaultPrevented||(a.current||(f=i.triggerRef.current)==null||f.focus(),A.preventDefault()),a.current=!1,l.current=!1},onInteractOutside:A=>{var C,m;(C=t.onInteractOutside)==null||C.call(t,A),A.defaultPrevented||(a.current=!0,A.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const u=A.target;((m=i.triggerRef.current)==null?void 0:m.contains(u))&&A.preventDefault(),A.detail.originalEvent.type==="focusin"&&l.current&&A.preventDefault()}})}),Gh=g.forwardRef((t,n)=>{const{__scopeDialog:i,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:A,...u}=t,f=qe(Mr,i),C=g.useRef(null),m=o0(n,C);return wu(),h.jsxs(h.Fragment,{children:[h.jsx(Ss,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:l,onUnmountAutoFocus:A,children:h.jsx(ui,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":Nu(f.open),...u,ref:m,onDismiss:()=>f.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(HS,{titleId:f.titleId}),h.jsx(US,{contentRef:C,descriptionId:f.descriptionId})]})]})}),Mu="DialogTitle",Vh=g.forwardRef((t,n)=>{const{__scopeDialog:i,...a}=t,l=qe(Mu,i);return h.jsx(E2.h2,{id:l.titleId,...a,ref:n})});Vh.displayName=Mu;var Yh="DialogDescription",OS=g.forwardRef((t,n)=>{const{__scopeDialog:i,...a}=t,l=qe(Yh,i);return h.jsx(E2.p,{id:l.descriptionId,...a,ref:n})});OS.displayName=Yh;var $h="DialogClose",qS=g.forwardRef((t,n)=>{const{__scopeDialog:i,...a}=t,l=qe($h,i);return h.jsx(E2.button,{type:"button",...a,ref:n,onClick:C2(t.onClick,()=>l.onOpenChange(!1))})});qS.displayName=$h;function Nu(t){return t?"open":"closed"}var Zh="DialogTitleWarning",[SN,Kh]=CF(Zh,{contentName:Mr,titleName:Mu,docsSlug:"dialog"}),HS=({titleId:t})=>{const n=Kh(Zh),i=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(i))},[i,t]),null},jS="DialogDescriptionWarning",US=({contentRef:t,descriptionId:n})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Kh(jS).contentName}}.`;return g.useEffect(()=>{var A;const l=(A=t.current)==null?void 0:A.getAttribute("aria-describedby");n&&l&&(document.getElementById(n)||console.warn(a))},[a,t,n]),null},Xh=Oh,Qh=Hh,zS=Uh,WS=zh,GS=Wh,VS=Vh;const YS=async()=>JSON.stringify(await(await fetch("/.vocs/search-index-853e7e4f.json")).json());var r0=function(){return r0=Object.assign||function(n){for(var i,a=1,l=arguments.length;a<l;a++){i=arguments[a];for(var A in i)Object.prototype.hasOwnProperty.call(i,A)&&(n[A]=i[A])}return n},r0.apply(this,arguments)};function $S(t,n,i,a){function l(A){return A instanceof i?A:new i(function(u){u(A)})}return new(i||(i=Promise))(function(A,u){function f(D){try{m(a.next(D))}catch(p){u(p)}}function C(D){try{m(a.throw(D))}catch(p){u(p)}}function m(D){D.done?A(D.value):l(D.value).then(f,C)}m((a=a.apply(t,[])).next())})}function ZS(t,n){var i={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},a,l,A,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(D){return C([m,D])}}function C(m){if(a)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(i=0)),i;)try{if(a=1,l&&(A=m[0]&2?l.return:m[0]?l.throw||((A=l.return)&&A.call(l),0):l.next)&&!(A=A.call(l,m[1])).done)return A;switch(l=0,A&&(m=[m[0]&2,A.value]),m[0]){case 0:case 1:A=m;break;case 4:return i.label++,{value:m[1],done:!1};case 5:i.label++,l=m[1],m=[0];continue;case 7:m=i.ops.pop(),i.trys.pop();continue;default:if(A=i.trys,!(A=A.length>0&&A[A.length-1])&&(m[0]===6||m[0]===2)){i=0;continue}if(m[0]===3&&(!A||m[1]>A[0]&&m[1]<A[3])){i.label=m[1];break}if(m[0]===6&&i.label<A[1]){i.label=A[1],A=m;break}if(A&&i.label<A[2]){i.label=A[2],i.ops.push(m);break}A[2]&&i.ops.pop(),i.trys.pop();continue}m=n.call(t,i)}catch(D){m=[6,D],l=0}finally{a=A=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function _2(t){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&t[n],a=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function D0(t,n){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var a=i.call(t),l,A=[],u;try{for(;(n===void 0||n-- >0)&&!(l=a.next()).done;)A.push(l.value)}catch(f){u={error:f}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return A}var KS="ENTRIES",Jh="KEYS",eD="VALUES",M0="",dc=function(){function t(n,i){var a=n._tree,l=Array.from(a.keys());this.set=n,this._type=i,this._path=l.length>0?[{node:a,keys:l}]:[]}return t.prototype.next=function(){var n=this.dive();return this.backtrack(),n},t.prototype.dive=function(){if(this._path.length===0)return{done:!0,value:void 0};var n=Tn(this._path),i=n.node,a=n.keys;if(Tn(a)===M0)return{done:!1,value:this.result()};var l=i.get(Tn(a));return this._path.push({node:l,keys:Array.from(l.keys())}),this.dive()},t.prototype.backtrack=function(){if(this._path.length!==0){var n=Tn(this._path).keys;n.pop(),!(n.length>0)&&(this._path.pop(),this.backtrack())}},t.prototype.key=function(){return this.set._prefix+this._path.map(function(n){var i=n.keys;return Tn(i)}).filter(function(n){return n!==M0}).join("")},t.prototype.value=function(){return Tn(this._path).node.get(M0)},t.prototype.result=function(){switch(this._type){case eD:return this.value();case Jh:return this.key();default:return[this.key(),this.value()]}},t.prototype[Symbol.iterator]=function(){return this},t}(),Tn=function(t){return t[t.length-1]},XS=function(t,n,i){var a=new Map;if(n===void 0)return a;for(var l=n.length+1,A=l+i,u=new Uint8Array(A*l).fill(i+1),f=0;f<l;++f)u[f]=f;for(var C=1;C<A;++C)u[C*l]=C;return tD(t,n,i,a,u,1,l,""),a},tD=function(t,n,i,a,l,A,u,f){var C,m,D=A*u;try{e:for(var p=_2(t.keys()),v=p.next();!v.done;v=p.next()){var B=v.value;if(B===M0){var y=l[D-1];y<=i&&a.set(f,[t.get(B),y])}else{for(var x=A,S=0;S<B.length;++S,++x){for(var T=B[S],w=u*x,R=w-u,P=l[w],N=Math.max(0,x-i-1),E=Math.min(u-1,x+i),L=N;L<E;++L){var H=T!==n[L],z=l[R+L]+ +H,r2=l[R+L+1]+1,c2=l[w+L]+1,s2=l[w+L+1]=Math.min(z,r2,c2);s2<P&&(P=s2)}if(P>i)continue e}tD(t.get(B),n,i,a,l,x,u,f+B)}}}catch(i2){C={error:i2}}finally{try{v&&!v.done&&(m=p.return)&&m.call(p)}finally{if(C)throw C.error}}},mc=function(){function t(n,i){n===void 0&&(n=new Map),i===void 0&&(i=""),this._size=void 0,this._tree=n,this._prefix=i}return t.prototype.atPrefix=function(n){var i,a;if(!n.startsWith(this._prefix))throw new Error("Mismatched prefix");var l=D0(As(this._tree,n.slice(this._prefix.length)),2),A=l[0],u=l[1];if(A===void 0){var f=D0(_u(u),2),C=f[0],m=f[1];try{for(var D=_2(C.keys()),p=D.next();!p.done;p=D.next()){var v=p.value;if(v!==M0&&v.startsWith(m)){var B=new Map;return B.set(v.slice(m.length),C.get(v)),new t(B,n)}}}catch(y){i={error:y}}finally{try{p&&!p.done&&(a=D.return)&&a.call(D)}finally{if(i)throw i.error}}}return new t(A,n)},t.prototype.clear=function(){this._size=void 0,this._tree.clear()},t.prototype.delete=function(n){return this._size=void 0,QS(this._tree,n)},t.prototype.entries=function(){return new dc(this,KS)},t.prototype.forEach=function(n){var i,a;try{for(var l=_2(this),A=l.next();!A.done;A=l.next()){var u=D0(A.value,2),f=u[0],C=u[1];n(f,C,this)}}catch(m){i={error:m}}finally{try{A&&!A.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}},t.prototype.fuzzyGet=function(n,i){return XS(this._tree,n,i)},t.prototype.get=function(n){var i=Wc(this._tree,n);return i!==void 0?i.get(M0):void 0},t.prototype.has=function(n){var i=Wc(this._tree,n);return i!==void 0&&i.has(M0)},t.prototype.keys=function(){return new dc(this,Jh)},t.prototype.set=function(n,i){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;var a=Cc(this._tree,n);return a.set(M0,i),this},Object.defineProperty(t.prototype,"size",{get:function(){if(this._size)return this._size;this._size=0;for(var n=this.entries();!n.next().done;)this._size+=1;return this._size},enumerable:!1,configurable:!0}),t.prototype.update=function(n,i){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;var a=Cc(this._tree,n);return a.set(M0,i(a.get(M0))),this},t.prototype.fetch=function(n,i){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;var a=Cc(this._tree,n),l=a.get(M0);return l===void 0&&a.set(M0,l=i()),l},t.prototype.values=function(){return new dc(this,eD)},t.prototype[Symbol.iterator]=function(){return this.entries()},t.from=function(n){var i,a,l=new t;try{for(var A=_2(n),u=A.next();!u.done;u=A.next()){var f=D0(u.value,2),C=f[0],m=f[1];l.set(C,m)}}catch(D){i={error:D}}finally{try{u&&!u.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}return l},t.fromObject=function(n){return t.from(Object.entries(n))},t}(),As=function(t,n,i){var a,l;if(i===void 0&&(i=[]),n.length===0||t==null)return[t,i];try{for(var A=_2(t.keys()),u=A.next();!u.done;u=A.next()){var f=u.value;if(f!==M0&&n.startsWith(f))return i.push([t,f]),As(t.get(f),n.slice(f.length),i)}}catch(C){a={error:C}}finally{try{u&&!u.done&&(l=A.return)&&l.call(A)}finally{if(a)throw a.error}}return i.push([t,n]),As(void 0,"",i)},Wc=function(t,n){var i,a;if(n.length===0||t==null)return t;try{for(var l=_2(t.keys()),A=l.next();!A.done;A=l.next()){var u=A.value;if(u!==M0&&n.startsWith(u))return Wc(t.get(u),n.slice(u.length))}}catch(f){i={error:f}}finally{try{A&&!A.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}},Cc=function(t,n){var i,a,l=n.length;e:for(var A=0;t&&A<l;){try{for(var u=(i=void 0,_2(t.keys())),f=u.next();!f.done;f=u.next()){var C=f.value;if(C!==M0&&n[A]===C[0]){for(var m=Math.min(l-A,C.length),D=1;D<m&&n[A+D]===C[D];)++D;var p=t.get(C);if(D===C.length)t=p;else{var v=new Map;v.set(C.slice(D),p),t.set(n.slice(A,A+D),v),t.delete(C),t=v}A+=D;continue e}}}catch(y){i={error:y}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}var B=new Map;return t.set(n.slice(A),B),B}return t},QS=function(t,n){var i=D0(As(t,n),2),a=i[0],l=i[1];if(a!==void 0){if(a.delete(M0),a.size===0)rD(l);else if(a.size===1){var A=D0(a.entries().next().value,2),u=A[0],f=A[1];nD(l,u,f)}}},rD=function(t){if(t.length!==0){var n=D0(_u(t),2),i=n[0],a=n[1];if(i.delete(a),i.size===0)rD(t.slice(0,-1));else if(i.size===1){var l=D0(i.entries().next().value,2),A=l[0],u=l[1];A!==M0&&nD(t.slice(0,-1),A,u)}}},nD=function(t,n,i){if(t.length!==0){var a=D0(_u(t),2),l=a[0],A=a[1];l.set(A+n,i),l.delete(A)}},_u=function(t){return t[t.length-1]},Ko,ku="or",oD="and",JS="and_not",e6=function(){function t(n){if((n==null?void 0:n.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');var i=n.autoVacuum==null||n.autoVacuum===!0?Dc:n.autoVacuum;this._options=r0(r0(r0({},hc),n),{autoVacuum:i,searchOptions:r0(r0({},Y3),n.searchOptions||{}),autoSuggestOptions:r0(r0({},i6),n.autoSuggestOptions||{})}),this._index=new mc,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=Vc,this.addFields(this._options.fields)}return t.prototype.add=function(n){var i,a,l,A,u,f,C=this._options,m=C.extractField,D=C.tokenize,p=C.processTerm,v=C.fields,B=C.idField,y=m(n,B);if(y==null)throw new Error('MiniSearch: document does not have ID field "'.concat(B,'"'));if(this._idToShortId.has(y))throw new Error("MiniSearch: duplicate ID ".concat(y));var x=this.addDocumentId(y);this.saveStoredFields(x,n);try{for(var S=_2(v),T=S.next();!T.done;T=S.next()){var w=T.value,R=m(n,w);if(R!=null){var P=D(R.toString(),w),N=this._fieldIds[w],E=new Set(P).size;this.addFieldLength(x,N,this._documentCount-1,E);try{for(var L=(l=void 0,_2(P)),H=L.next();!H.done;H=L.next()){var z=H.value,r2=p(z,w);if(Array.isArray(r2))try{for(var c2=(u=void 0,_2(r2)),s2=c2.next();!s2.done;s2=c2.next()){var i2=s2.value;this.addTerm(N,x,i2)}}catch(K){u={error:K}}finally{try{s2&&!s2.done&&(f=c2.return)&&f.call(c2)}finally{if(u)throw u.error}}else r2&&this.addTerm(N,x,r2)}}catch(K){l={error:K}}finally{try{H&&!H.done&&(A=L.return)&&A.call(L)}finally{if(l)throw l.error}}}}}catch(K){i={error:K}}finally{try{T&&!T.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}},t.prototype.addAll=function(n){var i,a;try{for(var l=_2(n),A=l.next();!A.done;A=l.next()){var u=A.value;this.add(u)}}catch(f){i={error:f}}finally{try{A&&!A.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}},t.prototype.addAllAsync=function(n,i){var a=this;i===void 0&&(i={});var l=i.chunkSize,A=l===void 0?10:l,u={chunk:[],promise:Promise.resolve()},f=n.reduce(function(D,p,v){var B=D.chunk,y=D.promise;return B.push(p),(v+1)%A===0?{chunk:[],promise:y.then(function(){return new Promise(function(x){return setTimeout(x,0)})}).then(function(){return a.addAll(B)})}:{chunk:B,promise:y}},u),C=f.chunk,m=f.promise;return m.then(function(){return a.addAll(C)})},t.prototype.remove=function(n){var i,a,l,A,u,f,C=this._options,m=C.tokenize,D=C.processTerm,p=C.extractField,v=C.fields,B=C.idField,y=p(n,B);if(y==null)throw new Error('MiniSearch: document does not have ID field "'.concat(B,'"'));var x=this._idToShortId.get(y);if(x==null)throw new Error("MiniSearch: cannot remove document with ID ".concat(y,": it is not in the index"));try{for(var S=_2(v),T=S.next();!T.done;T=S.next()){var w=T.value,R=p(n,w);if(R!=null){var P=m(R.toString(),w),N=this._fieldIds[w],E=new Set(P).size;this.removeFieldLength(x,N,this._documentCount,E);try{for(var L=(l=void 0,_2(P)),H=L.next();!H.done;H=L.next()){var z=H.value,r2=D(z,w);if(Array.isArray(r2))try{for(var c2=(u=void 0,_2(r2)),s2=c2.next();!s2.done;s2=c2.next()){var i2=s2.value;this.removeTerm(N,x,i2)}}catch(K){u={error:K}}finally{try{s2&&!s2.done&&(f=c2.return)&&f.call(c2)}finally{if(u)throw u.error}}else r2&&this.removeTerm(N,x,r2)}}catch(K){l={error:K}}finally{try{H&&!H.done&&(A=L.return)&&A.call(L)}finally{if(l)throw l.error}}}}}catch(K){i={error:K}}finally{try{T&&!T.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}this._storedFields.delete(x),this._documentIds.delete(x),this._idToShortId.delete(y),this._fieldLength.delete(x),this._documentCount-=1},t.prototype.removeAll=function(n){var i,a;if(n)try{for(var l=_2(n),A=l.next();!A.done;A=l.next()){var u=A.value;this.remove(u)}}catch(f){i={error:f}}finally{try{A&&!A.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new mc,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}},t.prototype.discard=function(n){var i=this,a=this._idToShortId.get(n);if(a==null)throw new Error("MiniSearch: cannot discard document with ID ".concat(n,": it is not in the index"));this._idToShortId.delete(n),this._documentIds.delete(a),this._storedFields.delete(a),(this._fieldLength.get(a)||[]).forEach(function(l,A){i.removeFieldLength(a,A,i._documentCount,l)}),this._fieldLength.delete(a),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()},t.prototype.maybeAutoVacuum=function(){if(this._options.autoVacuum!==!1){var n=this._options.autoVacuum,i=n.minDirtFactor,a=n.minDirtCount,l=n.batchSize,A=n.batchWait;this.conditionalVacuum({batchSize:l,batchWait:A},{minDirtCount:a,minDirtFactor:i})}},t.prototype.discardAll=function(n){var i,a,l=this._options.autoVacuum;try{this._options.autoVacuum=!1;try{for(var A=_2(n),u=A.next();!u.done;u=A.next()){var f=u.value;this.discard(f)}}catch(C){i={error:C}}finally{try{u&&!u.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}}finally{this._options.autoVacuum=l}this.maybeAutoVacuum()},t.prototype.replace=function(n){var i=this._options,a=i.idField,l=i.extractField,A=l(n,a);this.discard(A),this.add(n)},t.prototype.vacuum=function(n){return n===void 0&&(n={}),this.conditionalVacuum(n)},t.prototype.conditionalVacuum=function(n,i){var a=this;return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&i,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(function(){var l=a._enqueuedVacuumConditions;return a._enqueuedVacuumConditions=Vc,a.performVacuuming(n,l)}),this._enqueuedVacuum)):this.vacuumConditionsMet(i)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(n),this._currentVacuum)},t.prototype.performVacuuming=function(n,i){return $S(this,void 0,void 0,function(){var a,l,A,u,f,C,m,D,p,v,B,y,x,S,T,w,R,P,N,E,L,H,z,r2,c2;return ZS(this,function(s2){switch(s2.label){case 0:if(a=this._dirtCount,!this.vacuumConditionsMet(i))return[3,10];l=n.batchSize||Gc.batchSize,A=n.batchWait||Gc.batchWait,u=1,s2.label=1;case 1:s2.trys.push([1,7,8,9]),f=_2(this._index),C=f.next(),s2.label=2;case 2:if(C.done)return[3,6];m=D0(C.value,2),D=m[0],p=m[1];try{for(v=(H=void 0,_2(p)),B=v.next();!B.done;B=v.next()){y=D0(B.value,2),x=y[0],S=y[1];try{for(T=(r2=void 0,_2(S)),w=T.next();!w.done;w=T.next())R=D0(w.value,1),P=R[0],!this._documentIds.has(P)&&(S.size<=1?p.delete(x):S.delete(P))}catch(i2){r2={error:i2}}finally{try{w&&!w.done&&(c2=T.return)&&c2.call(T)}finally{if(r2)throw r2.error}}}}catch(i2){H={error:i2}}finally{try{B&&!B.done&&(z=v.return)&&z.call(v)}finally{if(H)throw H.error}}return this._index.get(D).size===0&&this._index.delete(D),u%l!==0?[3,4]:[4,new Promise(function(i2){return setTimeout(i2,A)})];case 3:s2.sent(),s2.label=4;case 4:u+=1,s2.label=5;case 5:return C=f.next(),[3,2];case 6:return[3,9];case 7:return N=s2.sent(),E={error:N},[3,9];case 8:try{C&&!C.done&&(L=f.return)&&L.call(f)}finally{if(E)throw E.error}return[7];case 9:this._dirtCount-=a,s2.label=10;case 10:return[4,null];case 11:return s2.sent(),this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null,[2]}})})},t.prototype.vacuumConditionsMet=function(n){if(n==null)return!0;var i=n.minDirtCount,a=n.minDirtFactor;return i=i||Dc.minDirtCount,a=a||Dc.minDirtFactor,this.dirtCount>=i&&this.dirtFactor>=a},Object.defineProperty(t.prototype,"isVacuuming",{get:function(){return this._currentVacuum!=null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dirtCount",{get:function(){return this._dirtCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dirtFactor",{get:function(){return this._dirtCount/(1+this._documentCount+this._dirtCount)},enumerable:!1,configurable:!0}),t.prototype.has=function(n){return this._idToShortId.has(n)},t.prototype.getStoredFields=function(n){var i=this._idToShortId.get(n);if(i!=null)return this._storedFields.get(i)},t.prototype.search=function(n,i){var a,l;i===void 0&&(i={});var A=this.executeQuery(n,i),u=[];try{for(var f=_2(A),C=f.next();!C.done;C=f.next()){var m=D0(C.value,2),D=m[0],p=m[1],v=p.score,B=p.terms,y=p.match,x=B.length||1,S={id:this._documentIds.get(D),score:v*x,terms:Object.keys(y),queryTerms:B,match:y};Object.assign(S,this._storedFields.get(D)),(i.filter==null||i.filter(S))&&u.push(S)}}catch(T){a={error:T}}finally{try{C&&!C.done&&(l=f.return)&&l.call(f)}finally{if(a)throw a.error}}return n===t.wildcard&&i.boostDocument==null&&this._options.searchOptions.boostDocument==null||u.sort(Z3),u},t.prototype.autoSuggest=function(n,i){var a,l,A,u;i===void 0&&(i={}),i=r0(r0({},this._options.autoSuggestOptions),i);var f=new Map;try{for(var C=_2(this.search(n,i)),m=C.next();!m.done;m=C.next()){var D=m.value,p=D.score,v=D.terms,B=v.join(" "),y=f.get(B);y!=null?(y.score+=p,y.count+=1):f.set(B,{score:p,terms:v,count:1})}}catch(N){a={error:N}}finally{try{m&&!m.done&&(l=C.return)&&l.call(C)}finally{if(a)throw a.error}}var x=[];try{for(var S=_2(f),T=S.next();!T.done;T=S.next()){var w=D0(T.value,2),y=w[0],R=w[1],p=R.score,v=R.terms,P=R.count;x.push({suggestion:y,terms:v,score:p/P})}}catch(N){A={error:N}}finally{try{T&&!T.done&&(u=S.return)&&u.call(S)}finally{if(A)throw A.error}}return x.sort(Z3),x},Object.defineProperty(t.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"termCount",{get:function(){return this._index.size},enumerable:!1,configurable:!0}),t.loadJSON=function(n,i){if(i==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(n),i)},t.getDefault=function(n){if(hc.hasOwnProperty(n))return pc(hc,n);throw new Error('MiniSearch: unknown option "'.concat(n,'"'))},t.loadJS=function(n,i){var a,l,A,u,f,C,m=n.index,D=n.documentCount,p=n.nextId,v=n.documentIds,B=n.fieldIds,y=n.fieldLength,x=n.averageFieldLength,S=n.storedFields,T=n.dirtCount,w=n.serializationVersion;if(w!==1&&w!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");var R=new t(i);R._documentCount=D,R._nextId=p,R._documentIds=Ua(v),R._idToShortId=new Map,R._fieldIds=B,R._fieldLength=Ua(y),R._avgFieldLength=x,R._storedFields=Ua(S),R._dirtCount=T||0,R._index=new mc;try{for(var P=_2(R._documentIds),N=P.next();!N.done;N=P.next()){var E=D0(N.value,2),L=E[0],H=E[1];R._idToShortId.set(H,L)}}catch(Z){a={error:Z}}finally{try{N&&!N.done&&(l=P.return)&&l.call(P)}finally{if(a)throw a.error}}try{for(var z=_2(m),r2=z.next();!r2.done;r2=z.next()){var c2=D0(r2.value,2),s2=c2[0],i2=c2[1],K=new Map;try{for(var u2=(f=void 0,_2(Object.keys(i2))),I=u2.next();!I.done;I=u2.next()){var V=I.value,Q=i2[V];w===1&&(Q=Q.ds),K.set(parseInt(V,10),Ua(Q))}}catch(Z){f={error:Z}}finally{try{I&&!I.done&&(C=u2.return)&&C.call(u2)}finally{if(f)throw f.error}}R._index.set(s2,K)}}catch(Z){A={error:Z}}finally{try{r2&&!r2.done&&(u=z.return)&&u.call(z)}finally{if(A)throw A.error}}return R},t.prototype.executeQuery=function(n,i){var a=this;if(i===void 0&&(i={}),n===t.wildcard)return this.executeWildcardQuery(i);if(typeof n!="string"){var l=r0(r0(r0({},i),n),{queries:void 0}),A=n.queries.map(function(S){return a.executeQuery(S,l)});return this.combineResults(A,l.combineWith)}var u=this._options,f=u.tokenize,C=u.processTerm,m=u.searchOptions,D=r0(r0({tokenize:f,processTerm:C},m),i),p=D.tokenize,v=D.processTerm,B=p(n).flatMap(function(S){return v(S)}).filter(function(S){return!!S}),y=B.map(o6(D)),x=y.map(function(S){return a.executeQuerySpec(S,D)});return this.combineResults(x,D.combineWith)},t.prototype.executeQuerySpec=function(n,i){var a,l,A,u,f=r0(r0({},this._options.searchOptions),i),C=(f.fields||this._options.fields).reduce(function(V,Q){var Z;return r0(r0({},V),(Z={},Z[Q]=pc(f.boost,Q)||1,Z))},{}),m=f.boostDocument,D=f.weights,p=f.maxFuzzy,v=f.bm25,B=r0(r0({},Y3.weights),D),y=B.fuzzy,x=B.prefix,S=this._index.get(n.term),T=this.termResults(n.term,n.term,1,S,C,m,v),w,R;if(n.prefix&&(w=this._index.atPrefix(n.term)),n.fuzzy){var P=n.fuzzy===!0?.2:n.fuzzy,N=P<1?Math.min(p,Math.round(n.term.length*P)):P;N&&(R=this._index.fuzzyGet(n.term,N))}if(w)try{for(var E=_2(w),L=E.next();!L.done;L=E.next()){var H=D0(L.value,2),z=H[0],r2=H[1],c2=z.length-n.term.length;if(c2){R==null||R.delete(z);var s2=x*z.length/(z.length+.3*c2);this.termResults(n.term,z,s2,r2,C,m,v,T)}}}catch(V){a={error:V}}finally{try{L&&!L.done&&(l=E.return)&&l.call(E)}finally{if(a)throw a.error}}if(R)try{for(var i2=_2(R.keys()),K=i2.next();!K.done;K=i2.next()){var z=K.value,u2=D0(R.get(z),2),I=u2[0],c2=u2[1];if(c2){var s2=y*z.length/(z.length+c2);this.termResults(n.term,z,s2,I,C,m,v,T)}}}catch(V){A={error:V}}finally{try{K&&!K.done&&(u=i2.return)&&u.call(i2)}finally{if(A)throw A.error}}return T},t.prototype.executeWildcardQuery=function(n){var i,a,l=new Map,A=r0(r0({},this._options.searchOptions),n);try{for(var u=_2(this._documentIds),f=u.next();!f.done;f=u.next()){var C=D0(f.value,2),m=C[0],D=C[1],p=A.boostDocument?A.boostDocument(D,"",this._storedFields.get(m)):1;l.set(m,{score:p,terms:[],match:{}})}}catch(v){i={error:v}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return l},t.prototype.combineResults=function(n,i){if(i===void 0&&(i=ku),n.length===0)return new Map;var a=i.toLowerCase();return n.reduce(t6[a])||new Map},t.prototype.toJSON=function(){var n,i,a,l,A=[];try{for(var u=_2(this._index),f=u.next();!f.done;f=u.next()){var C=D0(f.value,2),m=C[0],D=C[1],p={};try{for(var v=(a=void 0,_2(D)),B=v.next();!B.done;B=v.next()){var y=D0(B.value,2),x=y[0],S=y[1];p[x]=Object.fromEntries(S)}}catch(T){a={error:T}}finally{try{B&&!B.done&&(l=v.return)&&l.call(v)}finally{if(a)throw a.error}}A.push([m,p])}}catch(T){n={error:T}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:A,serializationVersion:2}},t.prototype.termResults=function(n,i,a,l,A,u,f,C){var m,D,p,v,B;if(C===void 0&&(C=new Map),l==null)return C;try{for(var y=_2(Object.keys(A)),x=y.next();!x.done;x=y.next()){var S=x.value,T=A[S],w=this._fieldIds[S],R=l.get(w);if(R!=null){var P=R.size,N=this._avgFieldLength[w];try{for(var E=(p=void 0,_2(R.keys())),L=E.next();!L.done;L=E.next()){var H=L.value;if(!this._documentIds.has(H)){this.removeTerm(w,H,i),P-=1;continue}var z=u?u(this._documentIds.get(H),i,this._storedFields.get(H)):1;if(z){var r2=R.get(H),c2=this._fieldLength.get(H)[w],s2=n6(r2,P,this._documentCount,c2,N,f),i2=a*T*z*s2,K=C.get(H);if(K){K.score+=i2,a6(K.terms,n);var u2=pc(K.match,i);u2?u2.push(S):K.match[i]=[S]}else C.set(H,{score:i2,terms:[n],match:(B={},B[i]=[S],B)})}}}catch(I){p={error:I}}finally{try{L&&!L.done&&(v=E.return)&&v.call(E)}finally{if(p)throw p.error}}}}}catch(I){m={error:I}}finally{try{x&&!x.done&&(D=y.return)&&D.call(y)}finally{if(m)throw m.error}}return C},t.prototype.addTerm=function(n,i,a){var l=this._index.fetch(a,K3),A=l.get(n);if(A==null)A=new Map,A.set(i,1),l.set(n,A);else{var u=A.get(i);A.set(i,(u||0)+1)}},t.prototype.removeTerm=function(n,i,a){if(!this._index.has(a)){this.warnDocumentChanged(i,n,a);return}var l=this._index.fetch(a,K3),A=l.get(n);A==null||A.get(i)==null?this.warnDocumentChanged(i,n,a):A.get(i)<=1?A.size<=1?l.delete(n):A.delete(i):A.set(i,A.get(i)-1),this._index.get(a).size===0&&this._index.delete(a)},t.prototype.warnDocumentChanged=function(n,i,a){var l,A;try{for(var u=_2(Object.keys(this._fieldIds)),f=u.next();!f.done;f=u.next()){var C=f.value;if(this._fieldIds[C]===i){this._options.logger("warn","MiniSearch: document with ID ".concat(this._documentIds.get(n),' has changed before removal: term "').concat(a,'" was not present in field "').concat(C,'". Removing a document after it has changed can corrupt the index!'),"version_conflict");return}}}catch(m){l={error:m}}finally{try{f&&!f.done&&(A=u.return)&&A.call(u)}finally{if(l)throw l.error}}},t.prototype.addDocumentId=function(n){var i=this._nextId;return this._idToShortId.set(n,i),this._documentIds.set(i,n),this._documentCount+=1,this._nextId+=1,i},t.prototype.addFields=function(n){for(var i=0;i<n.length;i++)this._fieldIds[n[i]]=i},t.prototype.addFieldLength=function(n,i,a,l){var A=this._fieldLength.get(n);A==null&&this._fieldLength.set(n,A=[]),A[i]=l;var u=this._avgFieldLength[i]||0,f=u*a+l;this._avgFieldLength[i]=f/(a+1)},t.prototype.removeFieldLength=function(n,i,a,l){if(a===1){this._avgFieldLength[i]=0;return}var A=this._avgFieldLength[i]*a-l;this._avgFieldLength[i]=A/(a-1)},t.prototype.saveStoredFields=function(n,i){var a,l,A=this._options,u=A.storeFields,f=A.extractField;if(!(u==null||u.length===0)){var C=this._storedFields.get(n);C==null&&this._storedFields.set(n,C={});try{for(var m=_2(u),D=m.next();!D.done;D=m.next()){var p=D.value,v=f(i,p);v!==void 0&&(C[p]=v)}}catch(B){a={error:B}}finally{try{D&&!D.done&&(l=m.return)&&l.call(m)}finally{if(a)throw a.error}}}},t.wildcard=Symbol("*"),t}(),pc=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)?t[n]:void 0},t6=(Ko={},Ko[ku]=function(t,n){var i,a;try{for(var l=_2(n.keys()),A=l.next();!A.done;A=l.next()){var u=A.value,f=t.get(u);if(f==null)t.set(u,n.get(u));else{var C=n.get(u),m=C.score,D=C.terms,p=C.match;f.score=f.score+m,f.match=Object.assign(f.match,p),$3(f.terms,D)}}}catch(v){i={error:v}}finally{try{A&&!A.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return t},Ko[oD]=function(t,n){var i,a,l=new Map;try{for(var A=_2(n.keys()),u=A.next();!u.done;u=A.next()){var f=u.value,C=t.get(f);if(C!=null){var m=n.get(f),D=m.score,p=m.terms,v=m.match;$3(C.terms,p),l.set(f,{score:C.score+D,terms:C.terms,match:Object.assign(C.match,v)})}}}catch(B){i={error:B}}finally{try{u&&!u.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}return l},Ko[JS]=function(t,n){var i,a;try{for(var l=_2(n.keys()),A=l.next();!A.done;A=l.next()){var u=A.value;t.delete(u)}}catch(f){i={error:f}}finally{try{A&&!A.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return t},Ko),r6={k:1.2,b:.7,d:.5},n6=function(t,n,i,a,l,A){var u=A.k,f=A.b,C=A.d,m=Math.log(1+(i-n+.5)/(n+.5));return m*(C+t*(u+1)/(t+u*(1-f+f*a/l)))},o6=function(t){return function(n,i,a){var l=typeof t.fuzzy=="function"?t.fuzzy(n,i,a):t.fuzzy||!1,A=typeof t.prefix=="function"?t.prefix(n,i,a):t.prefix===!0;return{term:n,fuzzy:l,prefix:A}}},hc={idField:"id",extractField:function(t,n){return t[n]},tokenize:function(t){return t.split(s6)},processTerm:function(t){return t.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[],logger:function(t,n){typeof(console==null?void 0:console[t])=="function"&&console[t](n)},autoVacuum:!0},Y3={combineWith:ku,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:r6},i6={combineWith:oD,prefix:function(t,n,i){return n===i.length-1}},Gc={batchSize:1e3,batchWait:10},Vc={minDirtFactor:.1,minDirtCount:20},Dc=r0(r0({},Gc),Vc),a6=function(t,n){t.includes(n)||t.push(n)},$3=function(t,n){var i,a;try{for(var l=_2(n),A=l.next();!A.done;A=l.next()){var u=A.value;t.includes(u)||t.push(u)}}catch(f){i={error:f}}finally{try{A&&!A.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}},Z3=function(t,n){var i=t.score,a=n.score;return a-i},K3=function(){return new Map},Ua=function(t){var n,i,a=new Map;try{for(var l=_2(Object.keys(t)),A=l.next();!A.done;A=l.next()){var u=A.value;a.set(parseInt(u,10),t[u])}}catch(f){n={error:f}}finally{try{A&&!A.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return a},s6=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;let gc;function iD(){const[t,n]=g.useState();return g.useEffect(()=>{(async()=>{gc||(gc=YS());const i=await gc,a=e6.loadJSON(i,{fields:["title","titles","text"],searchOptions:{boost:{title:4,text:2,titles:1},fuzzy:.2,prefix:!0},storeFields:["href","html","isPage","text","title","titles"]});n(a)})()},[]),g.useEffect(()=>{},[]),t}var l6="vocs_DesktopSearch_search",A6="vocs_DesktopSearch_searchCommand",c6="Label",aD=g.forwardRef((t,n)=>h.jsx(E2.label,{...t,ref:n,onMouseDown:i=>{var l;i.target.closest("button, input, select, textarea")||((l=t.onMouseDown)==null||l.call(t,i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));aD.displayName=c6;var u6=aD,es={exports:{}};/*!***************************************************
* mark.js v8.11.1
* https://markjs.io/
* Copyright (c) 2014–2018, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/var f6=es.exports,X3;function d6(){return X3||(X3=1,function(t,n){(function(i,a){t.exports=a()})(f6,function(){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},a=function(m,D){if(!(m instanceof D))throw new TypeError("Cannot call a class as a function")},l=function(){function m(D,p){for(var v=0;v<p.length;v++){var B=p[v];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(D,B.key,B)}}return function(D,p,v){return p&&m(D.prototype,p),v&&m(D,v),D}}(),A=Object.assign||function(m){for(var D=1;D<arguments.length;D++){var p=arguments[D];for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(m[v]=p[v])}return m},u=function(){function m(D){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;a(this,m),this.ctx=D,this.iframes=p,this.exclude=v,this.iframesTimeout=B}return l(m,[{key:"getContexts",value:function(){var p=void 0,v=[];return typeof this.ctx>"u"||!this.ctx?p=[]:NodeList.prototype.isPrototypeOf(this.ctx)?p=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?p=this.ctx:typeof this.ctx=="string"?p=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):p=[this.ctx],p.forEach(function(B){var y=v.filter(function(x){return x.contains(B)}).length>0;v.indexOf(B)===-1&&!y&&v.push(B)}),v}},{key:"getIframeContents",value:function(p,v){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},y=void 0;try{var x=p.contentWindow;if(y=x.document,!x||!y)throw new Error("iframe inaccessible")}catch{B()}y&&v(y)}},{key:"isIframeBlank",value:function(p){var v="about:blank",B=p.getAttribute("src").trim(),y=p.contentWindow.location.href;return y===v&&B!==v&&B}},{key:"observeIframeLoad",value:function(p,v,B){var y=this,x=!1,S=null,T=function w(){if(!x){x=!0,clearTimeout(S);try{y.isIframeBlank(p)||(p.removeEventListener("load",w),y.getIframeContents(p,v,B))}catch{B()}}};p.addEventListener("load",T),S=setTimeout(T,this.iframesTimeout)}},{key:"onIframeReady",value:function(p,v,B){try{p.contentWindow.document.readyState==="complete"?this.isIframeBlank(p)?this.observeIframeLoad(p,v,B):this.getIframeContents(p,v,B):this.observeIframeLoad(p,v,B)}catch{B()}}},{key:"waitForIframes",value:function(p,v){var B=this,y=0;this.forEachIframe(p,function(){return!0},function(x){y++,B.waitForIframes(x.querySelector("html"),function(){--y||v()})},function(x){x||v()})}},{key:"forEachIframe",value:function(p,v,B){var y=this,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},S=p.querySelectorAll("iframe"),T=S.length,w=0;S=Array.prototype.slice.call(S);var R=function(){--T<=0&&x(w)};T||R(),S.forEach(function(P){m.matches(P,y.exclude)?R():y.onIframeReady(P,function(N){v(P)&&(w++,B(N)),R()},R)})}},{key:"createIterator",value:function(p,v,B){return document.createNodeIterator(p,v,B,!1)}},{key:"createInstanceOnIframe",value:function(p){return new m(p.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(p,v,B){var y=p.compareDocumentPosition(B),x=Node.DOCUMENT_POSITION_PRECEDING;if(y&x)if(v!==null){var S=v.compareDocumentPosition(B),T=Node.DOCUMENT_POSITION_FOLLOWING;if(S&T)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(p){var v=p.previousNode(),B=void 0;return v===null?B=p.nextNode():B=p.nextNode()&&p.nextNode(),{prevNode:v,node:B}}},{key:"checkIframeFilter",value:function(p,v,B,y){var x=!1,S=!1;return y.forEach(function(T,w){T.val===B&&(x=w,S=T.handled)}),this.compareNodeIframe(p,v,B)?(x===!1&&!S?y.push({val:B,handled:!0}):x!==!1&&!S&&(y[x].handled=!0),!0):(x===!1&&y.push({val:B,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(p,v,B,y){var x=this;p.forEach(function(S){S.handled||x.getIframeContents(S.val,function(T){x.createInstanceOnIframe(T).forEachNode(v,B,y)})})}},{key:"iterateThroughNodes",value:function(p,v,B,y,x){for(var S=this,T=this.createIterator(v,p,y),w=[],R=[],P=void 0,N=void 0,E=function(){var H=S.getIteratorNode(T);return N=H.prevNode,P=H.node,P};E();)this.iframes&&this.forEachIframe(v,function(L){return S.checkIframeFilter(P,N,L,w)},function(L){S.createInstanceOnIframe(L).forEachNode(p,function(H){return R.push(H)},y)}),R.push(P);R.forEach(function(L){B(L)}),this.iframes&&this.handleOpenIframes(w,p,B,y),x()}},{key:"forEachNode",value:function(p,v,B){var y=this,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},S=this.getContexts(),T=S.length;T||x(),S.forEach(function(w){var R=function(){y.iterateThroughNodes(p,w,v,B,function(){--T<=0&&x()})};y.iframes?y.waitForIframes(w,R):R()})}}],[{key:"matches",value:function(p,v){var B=typeof v=="string"?[v]:v,y=p.matches||p.matchesSelector||p.msMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.webkitMatchesSelector;if(y){var x=!1;return B.every(function(S){return y.call(p,S)?(x=!0,!1):!0}),x}else return!1}}]),m}(),f=function(){function m(D){a(this,m),this.ctx=D,this.ie=!1;var p=window.navigator.userAgent;(p.indexOf("MSIE")>-1||p.indexOf("Trident")>-1)&&(this.ie=!0)}return l(m,[{key:"log",value:function(p){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"debug",B=this.opt.log;this.opt.debug&&(typeof B>"u"?"undefined":i(B))==="object"&&typeof B[v]=="function"&&B[v]("mark.js: "+p)}},{key:"escapeStr",value:function(p){return p.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(p){return this.opt.wildcards!=="disabled"&&(p=this.setupWildcardsRegExp(p)),p=this.escapeStr(p),Object.keys(this.opt.synonyms).length&&(p=this.createSynonymsRegExp(p)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(p=this.setupIgnoreJoinersRegExp(p)),this.opt.diacritics&&(p=this.createDiacriticsRegExp(p)),p=this.createMergedBlanksRegExp(p),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(p=this.createJoinersRegExp(p)),this.opt.wildcards!=="disabled"&&(p=this.createWildcardsRegExp(p)),p=this.createAccuracyRegExp(p),p}},{key:"createSynonymsRegExp",value:function(p){var v=this.opt.synonyms,B=this.opt.caseSensitive?"":"i",y=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var x in v)if(v.hasOwnProperty(x)){var S=v[x],T=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(x):this.escapeStr(x),w=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(S):this.escapeStr(S);T!==""&&w!==""&&(p=p.replace(new RegExp("("+this.escapeStr(T)+"|"+this.escapeStr(w)+")","gm"+B),y+("("+this.processSynomyms(T)+"|")+(this.processSynomyms(w)+")")+y))}return p}},{key:"processSynomyms",value:function(p){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(p=this.setupIgnoreJoinersRegExp(p)),p}},{key:"setupWildcardsRegExp",value:function(p){return p=p.replace(/(?:\\)*\?/g,function(v){return v.charAt(0)==="\\"?"?":""}),p.replace(/(?:\\)*\*/g,function(v){return v.charAt(0)==="\\"?"*":""})}},{key:"createWildcardsRegExp",value:function(p){var v=this.opt.wildcards==="withSpaces";return p.replace(/\u0001/g,v?"[\\S\\s]?":"\\S?").replace(/\u0002/g,v?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(p){return p.replace(/[^(|)\\]/g,function(v,B,y){var x=y.charAt(B+1);return/[(|)\\]/.test(x)||x===""?v:v+"\0"})}},{key:"createJoinersRegExp",value:function(p){var v=[],B=this.opt.ignorePunctuation;return Array.isArray(B)&&B.length&&v.push(this.escapeStr(B.join(""))),this.opt.ignoreJoiners&&v.push("\\u00ad\\u200b\\u200c\\u200d"),v.length?p.split(/\u0000+/).join("["+v.join("")+"]*"):p}},{key:"createDiacriticsRegExp",value:function(p){var v=this.opt.caseSensitive?"":"i",B=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],y=[];return p.split("").forEach(function(x){B.every(function(S){if(S.indexOf(x)!==-1){if(y.indexOf(S)>-1)return!1;p=p.replace(new RegExp("["+S+"]","gm"+v),"["+S+"]"),y.push(S)}return!0})}),p}},{key:"createMergedBlanksRegExp",value:function(p){return p.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(p){var v=this,B="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿",y=this.opt.accuracy,x=typeof y=="string"?y:y.value,S=typeof y=="string"?[]:y.limiters,T="";switch(S.forEach(function(w){T+="|"+v.escapeStr(w)}),x){case"partially":default:return"()("+p+")";case"complementary":return T="\\s"+(T||this.escapeStr(B)),"()([^"+T+"]*"+p+"[^"+T+"]*)";case"exactly":return"(^|\\s"+T+")("+p+")(?=$|\\s"+T+")"}}},{key:"getSeparatedKeywords",value:function(p){var v=this,B=[];return p.forEach(function(y){v.opt.separateWordSearch?y.split(" ").forEach(function(x){x.trim()&&B.indexOf(x)===-1&&B.push(x)}):y.trim()&&B.indexOf(y)===-1&&B.push(y)}),{keywords:B.sort(function(y,x){return x.length-y.length}),length:B.length}}},{key:"isNumeric",value:function(p){return Number(parseFloat(p))==p}},{key:"checkRanges",value:function(p){var v=this;if(!Array.isArray(p)||Object.prototype.toString.call(p[0])!=="[object Object]")return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(p),[];var B=[],y=0;return p.sort(function(x,S){return x.start-S.start}).forEach(function(x){var S=v.callNoMatchOnInvalidRanges(x,y),T=S.start,w=S.end,R=S.valid;R&&(x.start=T,x.length=w-T,B.push(x),y=w)}),B}},{key:"callNoMatchOnInvalidRanges",value:function(p,v){var B=void 0,y=void 0,x=!1;return p&&typeof p.start<"u"?(B=parseInt(p.start,10),y=B+parseInt(p.length,10),this.isNumeric(p.start)&&this.isNumeric(p.length)&&y-v>0&&y-B>0?x=!0:(this.log("Ignoring invalid or overlapping range: "+(""+JSON.stringify(p))),this.opt.noMatch(p))):(this.log("Ignoring invalid range: "+JSON.stringify(p)),this.opt.noMatch(p)),{start:B,end:y,valid:x}}},{key:"checkWhitespaceRanges",value:function(p,v,B){var y=void 0,x=!0,S=B.length,T=v-S,w=parseInt(p.start,10)-T;return w=w>S?S:w,y=w+parseInt(p.length,10),y>S&&(y=S,this.log("End range automatically set to the max value of "+S)),w<0||y-w<0||w>S||y>S?(x=!1,this.log("Invalid range: "+JSON.stringify(p)),this.opt.noMatch(p)):B.substring(w,y).replace(/\s+/g,"")===""&&(x=!1,this.log("Skipping whitespace only range: "+JSON.stringify(p)),this.opt.noMatch(p)),{start:w,end:y,valid:x}}},{key:"getTextNodes",value:function(p){var v=this,B="",y=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(x){y.push({start:B.length,end:(B+=x.textContent).length,node:x})},function(x){return v.matchesExclude(x.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){p({value:B,nodes:y})})}},{key:"matchesExclude",value:function(p){return u.matches(p,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(p,v,B){var y=this.opt.element?this.opt.element:"mark",x=p.splitText(v),S=x.splitText(B-v),T=document.createElement(y);return T.setAttribute("data-markjs","true"),this.opt.className&&T.setAttribute("class",this.opt.className),T.textContent=x.textContent,x.parentNode.replaceChild(T,x),S}},{key:"wrapRangeInMappedTextNode",value:function(p,v,B,y,x){var S=this;p.nodes.every(function(T,w){var R=p.nodes[w+1];if(typeof R>"u"||R.start>v){if(!y(T.node))return!1;var P=v-T.start,N=(B>T.end?T.end:B)-T.start,E=p.value.substr(0,T.start),L=p.value.substr(N+T.start);if(T.node=S.wrapRangeInTextNode(T.node,P,N),p.value=E+L,p.nodes.forEach(function(H,z){z>=w&&(p.nodes[z].start>0&&z!==w&&(p.nodes[z].start-=N),p.nodes[z].end-=N)}),B-=N,x(T.node.previousSibling,T.start),B>T.end)v=T.end;else return!1}return!0})}},{key:"wrapMatches",value:function(p,v,B,y,x){var S=this,T=v===0?0:v+1;this.getTextNodes(function(w){w.nodes.forEach(function(R){R=R.node;for(var P=void 0;(P=p.exec(R.textContent))!==null&&P[T]!=="";)if(B(P[T],R)){var N=P.index;if(T!==0)for(var E=1;E<T;E++)N+=P[E].length;R=S.wrapRangeInTextNode(R,N,N+P[T].length),y(R.previousSibling),p.lastIndex=0}}),x()})}},{key:"wrapMatchesAcrossElements",value:function(p,v,B,y,x){var S=this,T=v===0?0:v+1;this.getTextNodes(function(w){for(var R=void 0;(R=p.exec(w.value))!==null&&R[T]!=="";){var P=R.index;if(T!==0)for(var N=1;N<T;N++)P+=R[N].length;var E=P+R[T].length;S.wrapRangeInMappedTextNode(w,P,E,function(L){return B(R[T],L)},function(L,H){p.lastIndex=H,y(L)})}x()})}},{key:"wrapRangeFromIndex",value:function(p,v,B,y){var x=this;this.getTextNodes(function(S){var T=S.value.length;p.forEach(function(w,R){var P=x.checkWhitespaceRanges(w,T,S.value),N=P.start,E=P.end,L=P.valid;L&&x.wrapRangeInMappedTextNode(S,N,E,function(H){return v(H,w,S.value.substring(N,E),R)},function(H){B(H,w)})}),y()})}},{key:"unwrapMatches",value:function(p){for(var v=p.parentNode,B=document.createDocumentFragment();p.firstChild;)B.appendChild(p.removeChild(p.firstChild));v.replaceChild(B,p),this.ie?this.normalizeTextNode(v):v.normalize()}},{key:"normalizeTextNode",value:function(p){if(p){if(p.nodeType===3)for(;p.nextSibling&&p.nextSibling.nodeType===3;)p.nodeValue+=p.nextSibling.nodeValue,p.parentNode.removeChild(p.nextSibling);else this.normalizeTextNode(p.firstChild);this.normalizeTextNode(p.nextSibling)}}},{key:"markRegExp",value:function(p,v){var B=this;this.opt=v,this.log('Searching with expression "'+p+'"');var y=0,x="wrapMatches",S=function(w){y++,B.opt.each(w)};this.opt.acrossElements&&(x="wrapMatchesAcrossElements"),this[x](p,this.opt.ignoreGroups,function(T,w){return B.opt.filter(w,T,y)},S,function(){y===0&&B.opt.noMatch(p),B.opt.done(y)})}},{key:"mark",value:function(p,v){var B=this;this.opt=v;var y=0,x="wrapMatches",S=this.getSeparatedKeywords(typeof p=="string"?[p]:p),T=S.keywords,w=S.length,R=this.opt.caseSensitive?"":"i",P=function N(E){var L=new RegExp(B.createRegExp(E),"gm"+R),H=0;B.log('Searching with expression "'+L+'"'),B[x](L,1,function(z,r2){return B.opt.filter(r2,E,y,H)},function(z){H++,y++,B.opt.each(z)},function(){H===0&&B.opt.noMatch(E),T[w-1]===E?B.opt.done(y):N(T[T.indexOf(E)+1])})};this.opt.acrossElements&&(x="wrapMatchesAcrossElements"),w===0?this.opt.done(y):P(T[0])}},{key:"markRanges",value:function(p,v){var B=this;this.opt=v;var y=0,x=this.checkRanges(p);x&&x.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(x)),this.wrapRangeFromIndex(x,function(S,T,w,R){return B.opt.filter(S,T,w,R)},function(S,T){y++,B.opt.each(S,T)},function(){B.opt.done(y)})):this.opt.done(y)}},{key:"unmark",value:function(p){var v=this;this.opt=p;var B=this.opt.element?this.opt.element:"*";B+="[data-markjs]",this.opt.className&&(B+="."+this.opt.className),this.log('Removal selector "'+B+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(y){v.unwrapMatches(y)},function(y){var x=u.matches(y,B),S=v.matchesExclude(y);return!x||S?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(p){this._opt=A({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},p)},get:function(){return this._opt}},{key:"iterator",get:function(){return new u(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),m}();function C(m){var D=this,p=new f(m);return this.mark=function(v,B){return p.mark(v,B),D},this.markRegExp=function(v,B){return p.markRegExp(v,B),D},this.markRanges=function(v,B){return p.markRanges(v,B),D},this.unmark=function(v){return p.unmark(v),D},this}return C})}(es)),es.exports}var m6=d6();const C6=gs(m6);function p6(t,n){const[i,a]=g.useState(t);return g.useEffect(()=>{const l=setTimeout(()=>a(t),n);return()=>{clearTimeout(l)}},[t,n]),i}function Yc(t,n){const[i,a]=g.useState();g.useEffect(()=>{const A=h6(t);a(typeof A>"u"||A===null?typeof n=="function"?n():n:A)},[n,t]);const l=g.useCallback(A=>{a(u=>{let f;typeof A=="function"?f=A(u):f=A;try{localStorage.setItem(t,JSON.stringify(f))}catch{}return f})},[t]);return[i,l]}function h6(t){try{const n=localStorage.getItem(t);return typeof n=="string"?JSON.parse(n):void 0}catch{return}}var sD="vocs_utils_visuallyHidden",D6="vocs_Kbd";function lD(t){return h.jsx("kbd",{...t,className:l2(t.className,D6)})}var g6="vocs_KeyboardShortcut",v6="vocs_KeyboardShortcut_kbdGroup";function bn(t){const{description:n,keys:i}=t;return h.jsxs("span",{className:g6,children:[n,h.jsx("span",{className:v6,children:i.map(a=>h.jsx(lD,{children:a},a))})]})}var B6="vocs_SearchDialog",y6="vocs_SearchDialog_overlay",x6="vocs_SearchDialog_searchBox",F6="vocs_SearchDialog_searchInput",za="vocs_SearchDialog_searchInputIcon",S6="vocs_SearchDialog_searchInputIconDesktop",T6="vocs_SearchDialog_searchInputIconMobile",R6="vocs_SearchDialog_results",b6="vocs_SearchDialog_result",w6="vocs_SearchDialog_resultSelected",Q3="vocs_SearchDialog_resultIcon",E6="vocs_SearchDialog_titles",J3="vocs_SearchDialog_title",P6="vocs_SearchDialog_titleIcon",M6="vocs_SearchDialog_content",ep="vocs_SearchDialog_excerpt",N6="vocs_SearchDialog_searchShortcuts";function AD(t){const{search:n}=C0(),i=gu(),a=g.useRef(null),l=g.useRef(null),[A,u]=Yc("filterText",""),f=p6(A,200),C=iD(),[m,D]=g.useState(-1),[p,v]=g.useState(!1),[B,y]=Yc("showDetailView",!0),x=g.useMemo(()=>C?f?(D(0),C.search(f,n).slice(0,16)):(D(-1),[]):[],[C,n,f]),S=x.length,T=x[m],w=g.useCallback(()=>{var E,L,H;if(!l.current)return;const R=new Set;for(const z of x)for(const r2 in z.match)R.add(r2);const P=new C6(l.current);P.unmark({done(){P==null||P.markRegExp(_6(R))}});const N=l.current.querySelectorAll(`.${ep}`);for(const z of N)(E=z.querySelector('mark[data-markjs="true"]'))==null||E.scrollIntoView({block:"center"});(H=(L=l.current)==null?void 0:L.firstElementChild)==null||H.scrollIntoView({block:"start"})},[x]);return g.useEffect(()=>{if(!t.open)return;function R(P){var N;switch(P.key){case"ArrowDown":{P.preventDefault(),D(E=>{var z;let L=E+1;L>=S&&(L=0);const H=(z=l.current)==null?void 0:z.children[L];return H==null||H.scrollIntoView({block:"nearest"}),L}),v(!0);break}case"ArrowUp":{P.preventDefault(),D(E=>{var z;let L=E-1;L<0&&(L=S-1);const H=(z=l.current)==null?void 0:z.children[L];return H==null||H.scrollIntoView({block:"nearest"}),L}),v(!0);break}case"Backspace":{if(!P.metaKey)return;P.preventDefault(),u(""),(N=a.current)==null||N.focus();break}case"Enter":{if(P.target instanceof HTMLButtonElement&&P.target.type!=="submit"||!T)return;P.preventDefault(),i(T.href),t.onClose();break}}}return window.addEventListener("keydown",R),()=>{window.removeEventListener("keydown",R)}},[i,S,u,T,t.open,t.onClose]),g.useEffect(()=>{f!==""&&l.current&&w()},[w,f]),h.jsxs(zS,{children:[h.jsx(WS,{className:y6}),h.jsxs(GS,{onOpenAutoFocus:R=>{a.current&&(R.preventDefault(),a.current.focus()),w()},onCloseAutoFocus:()=>{D(0)},className:B6,"aria-describedby":void 0,children:[h.jsx(VS,{className:sD,children:"Search"}),h.jsxs("form",{className:x6,children:[h.jsx("button",{"aria-label":"Close search dialog",type:"button",onClick:()=>t.onClose(),className:T6,children:h.jsx(J5,{className:za,height:20,width:20})}),h.jsx(u6,{htmlFor:"search-input",children:h.jsx(Tu,{"aria-label":"Search",className:l2(za,S6),height:20,width:20})}),h.jsx("input",{ref:a,tabIndex:0,className:F6,id:"search-input",onChange:R=>u(R.target.value),placeholder:"Search",type:"search",value:A}),h.jsx("button",{"aria-label":"Toggle detail view",type:"button",onClick:()=>y(R=>!R),children:h.jsx(sF,{className:za,height:20,width:20})}),h.jsx("button",{"aria-label":"Reset search",type:"button",className:za,onClick:()=>{var R;u(""),(R=a.current)==null||R.focus()},children:"⌫"})]}),h.jsxs("ul",{className:R6,role:x.length?"listbox":void 0,onMouseMove:()=>v(!1),ref:l,children:[f&&x.length===0&&h.jsxs("li",{children:['No results for "',h.jsx("span",{children:f}),'"']}),x.map((R,P)=>{var N;return h.jsx("li",{role:"option",className:l2(b6,P===m&&w6),"aria-selected":P===m,"aria-label":[...R.titles.filter(E=>!!E),R.title].join(" > "),children:h.jsxs(qn,{to:R.href,onClick:E=>{E.metaKey||t.onClose()},onMouseEnter:()=>!p&&D(P),onFocus:()=>D(P),children:[h.jsxs("div",{className:E6,children:[R.isPage?h.jsx(iF,{className:Q3}):h.jsx("span",{className:Q3,children:"#"}),R.titles.filter(E=>!!E).map(E=>h.jsxs("span",{className:J3,children:[h.jsx("span",{dangerouslySetInnerHTML:{__html:E}}),h.jsx(tF,{className:P6})]},E)),h.jsx("span",{className:J3,children:h.jsx("span",{dangerouslySetInnerHTML:{__html:R.title}})})]}),B&&((N=R.text)==null?void 0:N.trim())&&h.jsx("div",{className:ep,children:h.jsx(yh,{className:M6,children:h.jsx("div",{dangerouslySetInnerHTML:{__html:R.html}})})})]})},R.id)})]}),h.jsxs("div",{className:N6,children:[h.jsx(bn,{description:"Navigate",keys:["↑","↓"]}),h.jsx(bn,{description:"Select",keys:["enter"]}),h.jsx(bn,{description:"Close",keys:["esc"]}),h.jsx(bn,{description:"Reset",keys:["⌘","⌫"]})]})]})]})}function _6(t){return new RegExp([...t].sort((n,i)=>i.length-n.length).map(n=>`(${n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")})`).join("|"),"gi")}function k6(){iD();const[t,n]=g.useState(!1);return g.useEffect(()=>{function i(a){const l=document.activeElement instanceof HTMLElement&&(["input","select","textarea"].includes(document.activeElement.tagName.toLowerCase())||document.activeElement.isContentEditable);a.key==="/"&&!t&&!l?(a.preventDefault(),n(!0)):a.metaKey===!0&&a.key==="k"&&(a.preventDefault(),n(A=>!A))}return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[t]),h.jsxs(Xh,{open:t,onOpenChange:n,children:[h.jsx(Qh,{asChild:!0,children:h.jsxs("button",{className:l6,type:"button",children:[h.jsx(Tu,{style:{marginTop:2}}),"Search...",h.jsx("div",{className:A6,children:h.jsx("div",{style:{background:"currentColor",transform:"rotate(45deg)",width:1.5,borderRadius:2,height:"100%"}})})]})}),h.jsx(AD,{open:t,onClose:()=>n(!1)})]})}var L6="vocs_DesktopTopNav",I6="vocs_DesktopTopNav_withLogo",O6="vocs_DesktopTopNav_content",q6="vocs_DesktopTopNav_curtain",H6="vocs_DesktopTopNav_group",tp="vocs_DesktopTopNav_item",j6="vocs_DesktopTopNav_logo",U6="vocs_DesktopTopNav_logoWrapper",rp="vocs_DesktopTopNav_section",vc="vocs_Logo",z6="vocs_Logo_logoDark",W6="vocs_Logo_logoLight";function G6({className:t}){const{logoUrl:n}=C0();return n?h.jsx(h.Fragment,{children:typeof n=="string"?h.jsx("img",{alt:"Logo",className:l2(t,vc),src:n}):h.jsxs(h.Fragment,{children:[h.jsx("img",{alt:"Logo",className:l2(t,vc,z6),src:n.dark}),h.jsx("img",{alt:"Logo",className:l2(t,vc,W6),src:n.light})]})}):null}var V6="vocs_NavLogo_logoImage",Y6="vocs_NavLogo_title";function Lu(){const t=C0();return t.logoUrl?h.jsx(G6,{className:V6}):h.jsx("div",{className:Y6,children:t.title})}var $6=g.createContext(void 0);function fi(t){const n=g.useContext($6);return t||n||"ltr"}function di(t){const n=t+"CollectionProvider",[i,a]=Oe(n),[l,A]=i(n,{collectionRef:{current:null},itemMap:new Map}),u=x=>{const{scope:S,children:T}=x,w=n0.useRef(null),R=n0.useRef(new Map).current;return h.jsx(l,{scope:S,itemMap:R,collectionRef:w,children:T})};u.displayName=n;const f=t+"CollectionSlot",C=Nn(f),m=n0.forwardRef((x,S)=>{const{scope:T,children:w}=x,R=A(f,T),P=o0(S,R.collectionRef);return h.jsx(C,{ref:P,children:w})});m.displayName=f;const D=t+"CollectionItemSlot",p="data-radix-collection-item",v=Nn(D),B=n0.forwardRef((x,S)=>{const{scope:T,children:w,...R}=x,P=n0.useRef(null),N=o0(S,P),E=A(D,T);return n0.useEffect(()=>(E.itemMap.set(P,{ref:P,...R}),()=>void E.itemMap.delete(P))),h.jsx(v,{[p]:"",ref:N,children:w})});B.displayName=D;function y(x){const S=A(t+"CollectionConsumer",x);return n0.useCallback(()=>{const w=S.collectionRef.current;if(!w)return[];const R=Array.from(w.querySelectorAll(`[${p}]`));return Array.from(S.itemMap.values()).sort((E,L)=>R.indexOf(E.ref.current)-R.indexOf(L.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:u,Slot:m,ItemSlot:B},y,a]}function Z6(t){const n=g.useRef({value:t,previous:t});return g.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}var K6=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),X6="VisuallyHidden",cD=g.forwardRef((t,n)=>h.jsx(E2.span,{...t,ref:n,style:{...K6,...t.style}}));cD.displayName=X6;var Q6=cD,Ir="NavigationMenu",[Iu,uD,J6]=di(Ir),[$c,e1,t1]=di(Ir),[Ou,TN]=Oe(Ir,[J6,t1]),[r1,Re]=Ou(Ir),[n1,o1]=Ou(Ir),fD=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,value:a,onValueChange:l,defaultValue:A,delayDuration:u=200,skipDelayDuration:f=300,orientation:C="horizontal",dir:m,...D}=t,[p,v]=g.useState(null),B=o0(n,z=>v(z)),y=fi(m),x=g.useRef(0),S=g.useRef(0),T=g.useRef(0),[w,R]=g.useState(!0),[P,N]=Qe({prop:a,onChange:z=>{const r2=z!=="",c2=f>0;r2?(window.clearTimeout(T.current),c2&&R(!1)):(window.clearTimeout(T.current),T.current=window.setTimeout(()=>R(!0),f)),l==null||l(z)},defaultProp:A??"",caller:Ir}),E=g.useCallback(()=>{window.clearTimeout(S.current),S.current=window.setTimeout(()=>N(""),150)},[N]),L=g.useCallback(z=>{window.clearTimeout(S.current),N(z)},[N]),H=g.useCallback(z=>{P===z?window.clearTimeout(S.current):x.current=window.setTimeout(()=>{window.clearTimeout(S.current),N(z)},u)},[P,N,u]);return g.useEffect(()=>()=>{window.clearTimeout(x.current),window.clearTimeout(S.current),window.clearTimeout(T.current)},[]),h.jsx(dD,{scope:i,isRootMenu:!0,value:P,dir:y,orientation:C,rootNavigationMenu:p,onTriggerEnter:z=>{window.clearTimeout(x.current),w?H(z):L(z)},onTriggerLeave:()=>{window.clearTimeout(x.current),E()},onContentEnter:()=>window.clearTimeout(S.current),onContentLeave:E,onItemSelect:z=>{N(r2=>r2===z?"":z)},onItemDismiss:()=>N(""),children:h.jsx(E2.nav,{"aria-label":"Main","data-orientation":C,dir:y,...D,ref:B})})});fD.displayName=Ir;var Zc="NavigationMenuSub",i1=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,value:a,onValueChange:l,defaultValue:A,orientation:u="horizontal",...f}=t,C=Re(Zc,i),[m,D]=Qe({prop:a,onChange:l,defaultProp:A??"",caller:Zc});return h.jsx(dD,{scope:i,isRootMenu:!1,value:m,dir:C.dir,orientation:u,rootNavigationMenu:C.rootNavigationMenu,onTriggerEnter:p=>D(p),onItemSelect:p=>D(p),onItemDismiss:()=>D(""),children:h.jsx(E2.div,{"data-orientation":u,...f,ref:n})})});i1.displayName=Zc;var dD=t=>{const{scope:n,isRootMenu:i,rootNavigationMenu:a,dir:l,orientation:A,children:u,value:f,onItemSelect:C,onItemDismiss:m,onTriggerEnter:D,onTriggerLeave:p,onContentEnter:v,onContentLeave:B}=t,[y,x]=g.useState(null),[S,T]=g.useState(new Map),[w,R]=g.useState(null);return h.jsx(r1,{scope:n,isRootMenu:i,rootNavigationMenu:a,value:f,previousValue:Z6(f),baseId:Be(),dir:l,orientation:A,viewport:y,onViewportChange:x,indicatorTrack:w,onIndicatorTrackChange:R,onTriggerEnter:I0(D),onTriggerLeave:I0(p),onContentEnter:I0(v),onContentLeave:I0(B),onItemSelect:I0(C),onItemDismiss:I0(m),onViewportContentChange:g.useCallback((P,N)=>{T(E=>(E.set(P,N),new Map(E)))},[]),onViewportContentRemove:g.useCallback(P=>{T(N=>N.has(P)?(N.delete(P),new Map(N)):N)},[]),children:h.jsx(Iu.Provider,{scope:n,children:h.jsx(n1,{scope:n,items:S,children:u})})})},mD="NavigationMenuList",CD=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,...a}=t,l=Re(mD,i),A=h.jsx(E2.ul,{"data-orientation":l.orientation,...a,ref:n});return h.jsx(E2.div,{style:{position:"relative"},ref:l.onIndicatorTrackChange,children:h.jsx(Iu.Slot,{scope:i,children:l.isRootMenu?h.jsx(xD,{asChild:!0,children:A}):A})})});CD.displayName=mD;var pD="NavigationMenuItem",[a1,hD]=Ou(pD),DD=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,value:a,...l}=t,A=Be(),u=a||A||"LEGACY_REACT_AUTO_VALUE",f=g.useRef(null),C=g.useRef(null),m=g.useRef(null),D=g.useRef(()=>{}),p=g.useRef(!1),v=g.useCallback((y="start")=>{if(f.current){D.current();const x=Xc(f.current);x.length&&ju(y==="start"?x:x.reverse())}},[]),B=g.useCallback(()=>{if(f.current){const y=Xc(f.current);y.length&&(D.current=C1(y))}},[]);return h.jsx(a1,{scope:i,value:u,triggerRef:C,contentRef:f,focusProxyRef:m,wasEscapeCloseRef:p,onEntryKeyDown:v,onFocusProxyEnter:v,onRootContentClose:B,onContentFocusOutside:B,children:h.jsx(E2.li,{...l,ref:n})})});DD.displayName=pD;var Kc="NavigationMenuTrigger",gD=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,disabled:a,...l}=t,A=Re(Kc,t.__scopeNavigationMenu),u=hD(Kc,t.__scopeNavigationMenu),f=g.useRef(null),C=o0(f,u.triggerRef,n),m=SD(A.baseId,u.value),D=TD(A.baseId,u.value),p=g.useRef(!1),v=g.useRef(!1),B=u.value===A.value;return h.jsxs(h.Fragment,{children:[h.jsx(Iu.ItemSlot,{scope:i,value:u.value,children:h.jsx(FD,{asChild:!0,children:h.jsx(E2.button,{id:m,disabled:a,"data-disabled":a?"":void 0,"data-state":Uu(B),"aria-expanded":B,"aria-controls":D,...l,ref:C,onPointerEnter:C2(t.onPointerEnter,()=>{v.current=!1,u.wasEscapeCloseRef.current=!1}),onPointerMove:C2(t.onPointerMove,cs(()=>{a||v.current||u.wasEscapeCloseRef.current||p.current||(A.onTriggerEnter(u.value),p.current=!0)})),onPointerLeave:C2(t.onPointerLeave,cs(()=>{a||(A.onTriggerLeave(),p.current=!1)})),onClick:C2(t.onClick,()=>{A.onItemSelect(u.value),v.current=B}),onKeyDown:C2(t.onKeyDown,y=>{const S={horizontal:"ArrowDown",vertical:A.dir==="rtl"?"ArrowLeft":"ArrowRight"}[A.orientation];B&&y.key===S&&(u.onEntryKeyDown(),y.preventDefault())})})})}),B&&h.jsxs(h.Fragment,{children:[h.jsx(Q6,{"aria-hidden":!0,tabIndex:0,ref:u.focusProxyRef,onFocus:y=>{const x=u.contentRef.current,S=y.relatedTarget,T=S===f.current,w=x==null?void 0:x.contains(S);(T||!w)&&u.onFocusProxyEnter(T?"start":"end")}}),A.viewport&&h.jsx("span",{"aria-owns":D})]})]})});gD.displayName=Kc;var s1="NavigationMenuLink",np="navigationMenu.linkSelect",vD=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,active:a,onSelect:l,...A}=t;return h.jsx(FD,{asChild:!0,children:h.jsx(E2.a,{"data-active":a?"":void 0,"aria-current":a?"page":void 0,...A,ref:n,onClick:C2(t.onClick,u=>{const f=u.target,C=new CustomEvent(np,{bubbles:!0,cancelable:!0});if(f.addEventListener(np,m=>l==null?void 0:l(m),{once:!0}),ss(f,C),!C.defaultPrevented&&!u.metaKey){const m=new CustomEvent(ts,{bubbles:!0,cancelable:!0});ss(f,m)}},{checkForDefaultPrevented:!1})})})});vD.displayName=s1;var qu="NavigationMenuIndicator",l1=g.forwardRef((t,n)=>{const{forceMount:i,...a}=t,l=Re(qu,t.__scopeNavigationMenu),A=!!l.value;return l.indicatorTrack?Sh.createPortal(h.jsx(O0,{present:i||A,children:h.jsx(A1,{...a,ref:n})}),l.indicatorTrack):null});l1.displayName=qu;var A1=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,...a}=t,l=Re(qu,i),A=uD(i),[u,f]=g.useState(null),[C,m]=g.useState(null),D=l.orientation==="horizontal",p=!!l.value;g.useEffect(()=>{var x;const y=(x=A().find(S=>S.value===l.value))==null?void 0:x.ref.current;y&&f(y)},[A,l.value]);const v=()=>{u&&m({size:D?u.offsetWidth:u.offsetHeight,offset:D?u.offsetLeft:u.offsetTop})};return Qc(u,v),Qc(l.indicatorTrack,v),C?h.jsx(E2.div,{"aria-hidden":!0,"data-state":p?"visible":"hidden","data-orientation":l.orientation,...a,ref:n,style:{position:"absolute",...D?{left:0,width:C.size+"px",transform:`translateX(${C.offset}px)`}:{top:0,height:C.size+"px",transform:`translateY(${C.offset}px)`},...a.style}}):null}),_n="NavigationMenuContent",BD=g.forwardRef((t,n)=>{const{forceMount:i,...a}=t,l=Re(_n,t.__scopeNavigationMenu),A=hD(_n,t.__scopeNavigationMenu),u=o0(A.contentRef,n),f=A.value===l.value,C={value:A.value,triggerRef:A.triggerRef,focusProxyRef:A.focusProxyRef,wasEscapeCloseRef:A.wasEscapeCloseRef,onContentFocusOutside:A.onContentFocusOutside,onRootContentClose:A.onRootContentClose,...a};return l.viewport?h.jsx(c1,{forceMount:i,...C,ref:u}):h.jsx(O0,{present:i||f,children:h.jsx(yD,{"data-state":Uu(f),...C,ref:u,onPointerEnter:C2(t.onPointerEnter,l.onContentEnter),onPointerLeave:C2(t.onPointerLeave,cs(l.onContentLeave)),style:{pointerEvents:!f&&l.isRootMenu?"none":void 0,...C.style}})})});BD.displayName=_n;var c1=g.forwardRef((t,n)=>{const i=Re(_n,t.__scopeNavigationMenu),{onViewportContentChange:a,onViewportContentRemove:l}=i;return Fe(()=>{a(t.value,{ref:n,...t})},[t,n,a]),Fe(()=>()=>l(t.value),[t.value,l]),null}),ts="navigationMenu.rootContentDismiss",yD=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,value:a,triggerRef:l,focusProxyRef:A,wasEscapeCloseRef:u,onRootContentClose:f,onContentFocusOutside:C,...m}=t,D=Re(_n,i),p=g.useRef(null),v=o0(p,n),B=SD(D.baseId,a),y=TD(D.baseId,a),x=uD(i),S=g.useRef(null),{onItemDismiss:T}=D;g.useEffect(()=>{const R=p.current;if(D.isRootMenu&&R){const P=()=>{var N;T(),f(),R.contains(document.activeElement)&&((N=l.current)==null||N.focus())};return R.addEventListener(ts,P),()=>R.removeEventListener(ts,P)}},[D.isRootMenu,t.value,l,T,f]);const w=g.useMemo(()=>{const P=x().map(r2=>r2.value);D.dir==="rtl"&&P.reverse();const N=P.indexOf(D.value),E=P.indexOf(D.previousValue),L=a===D.value,H=E===P.indexOf(a);if(!L&&!H)return S.current;const z=(()=>{if(N!==E){if(L&&E!==-1)return N>E?"from-end":"from-start";if(H&&N!==-1)return N>E?"to-start":"to-end"}return null})();return S.current=z,z},[D.previousValue,D.value,D.dir,x,a]);return h.jsx(xD,{asChild:!0,children:h.jsx(ui,{id:y,"aria-labelledby":B,"data-motion":w,"data-orientation":D.orientation,...m,ref:v,disableOutsidePointerEvents:!1,onDismiss:()=>{var P;const R=new Event(ts,{bubbles:!0,cancelable:!0});(P=p.current)==null||P.dispatchEvent(R)},onFocusOutside:C2(t.onFocusOutside,R=>{var N;C();const P=R.target;(N=D.rootNavigationMenu)!=null&&N.contains(P)&&R.preventDefault()}),onPointerDownOutside:C2(t.onPointerDownOutside,R=>{var L;const P=R.target,N=x().some(H=>{var z;return(z=H.ref.current)==null?void 0:z.contains(P)}),E=D.isRootMenu&&((L=D.viewport)==null?void 0:L.contains(P));(N||E||!D.isRootMenu)&&R.preventDefault()}),onKeyDown:C2(t.onKeyDown,R=>{var E;const P=R.altKey||R.ctrlKey||R.metaKey;if(R.key==="Tab"&&!P){const L=Xc(R.currentTarget),H=document.activeElement,z=L.findIndex(s2=>s2===H),c2=R.shiftKey?L.slice(0,z).reverse():L.slice(z+1,L.length);ju(c2)?R.preventDefault():(E=A.current)==null||E.focus()}}),onEscapeKeyDown:C2(t.onEscapeKeyDown,R=>{u.current=!0})})})}),Hu="NavigationMenuViewport",u1=g.forwardRef((t,n)=>{const{forceMount:i,...a}=t,A=!!Re(Hu,t.__scopeNavigationMenu).value;return h.jsx(O0,{present:i||A,children:h.jsx(f1,{...a,ref:n})})});u1.displayName=Hu;var f1=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,children:a,...l}=t,A=Re(Hu,i),u=o0(n,A.onViewportChange),f=o1(_n,t.__scopeNavigationMenu),[C,m]=g.useState(null),[D,p]=g.useState(null),v=C?(C==null?void 0:C.width)+"px":void 0,B=C?(C==null?void 0:C.height)+"px":void 0,y=!!A.value,x=y?A.value:A.previousValue;return Qc(D,()=>{D&&m({width:D.offsetWidth,height:D.offsetHeight})}),h.jsx(E2.div,{"data-state":Uu(y),"data-orientation":A.orientation,...l,ref:u,style:{pointerEvents:!y&&A.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":v,"--radix-navigation-menu-viewport-height":B,...l.style},onPointerEnter:C2(t.onPointerEnter,A.onContentEnter),onPointerLeave:C2(t.onPointerLeave,cs(A.onContentLeave)),children:Array.from(f.items).map(([T,{ref:w,forceMount:R,...P}])=>{const N=x===T;return h.jsx(O0,{present:R||N,children:h.jsx(yD,{...P,ref:ci(w,E=>{N&&E&&p(E)})})},T)})})}),d1="FocusGroup",xD=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,...a}=t,l=Re(d1,i);return h.jsx($c.Provider,{scope:i,children:h.jsx($c.Slot,{scope:i,children:h.jsx(E2.div,{dir:l.dir,...a,ref:n})})})}),op=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],m1="FocusGroupItem",FD=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,...a}=t,l=e1(i),A=Re(m1,i);return h.jsx($c.ItemSlot,{scope:i,children:h.jsx(E2.button,{...a,ref:n,onKeyDown:C2(t.onKeyDown,u=>{if(["Home","End",...op].includes(u.key)){let C=l().map(p=>p.ref.current);if([A.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(u.key)&&C.reverse(),op.includes(u.key)){const p=C.indexOf(u.currentTarget);C=C.slice(p+1)}setTimeout(()=>ju(C)),u.preventDefault()}})})})});function Xc(t){const n=[],i=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const l=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||l?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)n.push(i.currentNode);return n}function ju(t){const n=document.activeElement;return t.some(i=>i===n?!0:(i.focus(),document.activeElement!==n))}function C1(t){return t.forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")}),()=>{t.forEach(n=>{const i=n.dataset.tabindex;n.setAttribute("tabindex",i)})}}function Qc(t,n){const i=I0(n);Fe(()=>{let a=0;if(t){const l=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(i)});return l.observe(t),()=>{window.cancelAnimationFrame(a),l.unobserve(t)}}},[t,i])}function Uu(t){return t?"open":"closed"}function SD(t,n){return`${t}-trigger-${n}`}function TD(t,n){return`${t}-content-${n}`}function cs(t){return n=>n.pointerType==="mouse"?t(n):void 0}var p1=fD,h1=CD,D1=DD,g1=gD,v1=vD,B1=BD,y1="vocs_NavigationMenu",x1="vocs_NavigationMenu_list",F1="vocs_NavigationMenu_link",S1="vocs_NavigationMenu_item",T1="var(--vocs_NavigationMenu_chevronDownIcon)",R1="vocs_NavigationMenu_trigger vocs_NavigationMenu_link",b1="vocs_NavigationMenu_content";const RD=t=>h.jsx(p1,{...t,className:l2(t.className,y1)}),bD=t=>h.jsx(h1,{...t,className:l2(t.className,x1)}),Es=({active:t,children:n,className:i,href:a})=>h.jsx(v1,{asChild:!0,children:h.jsx(xe,{"data-active":t,className:l2(i,F1),href:a,variant:"styleless",children:n})}),wD=t=>h.jsx(D1,{...t,className:l2(t.className,S1)}),ED=({active:t,className:n,...i})=>{const{basePath:a}=C0(),l=a;return h.jsx(g1,{...i,"data-active":t,className:l2(n,R1),style:Ie({[T1]:`url(${l}/.vocs/icons/chevron-down.svg)`})})},PD=t=>h.jsx(B1,{...t,className:l2(t.className,b1)});Jc.Curtain=w1;function Jc(){var a;const t=C0(),{showLogo:n,showSidebar:i}=nr();return h.jsxs("div",{className:l2(L6,n&&!i&&I6),children:[h.jsx(k6,{}),n&&h.jsx("div",{className:U6,children:h.jsx("div",{className:j6,children:h.jsx(Mn,{to:"/",style:{alignItems:"center",display:"flex",height:"56px",marginTop:"4px"},children:h.jsx(Lu,{})})})}),h.jsx("div",{className:rp}),h.jsx("div",{className:rp,children:(((a=t.topNav)==null?void 0:a.length)||0)>0&&h.jsx("div",{className:H6,children:h.jsx(E1,{})})})]})}function w1(){return h.jsx("div",{className:q6})}function E1(){const{topNav:t}=C0();if(!t)return null;const{pathname:n}=i0(),i=Ai({pathname:n,items:t});return h.jsx(RD,{delayDuration:0,children:h.jsxs(bD,{children:[t.map((a,l)=>a.element?Pr(a.element):a.link?h.jsx(Es,{active:i.includes(a.id),className:tp,href:a.link,children:a.text},l):a.items?h.jsxs(wD,{className:tp,children:[h.jsx(ED,{active:i.includes(a.id),children:a.text}),h.jsx(PD,{className:O6,children:h.jsx(P1,{items:a.items})})]},l):null),h.jsx(Ru,{})]})})}function P1({items:t}){const{pathname:n}=i0(),i=Ai({pathname:n,items:t});return h.jsx("ul",{children:t==null?void 0:t.map((a,l)=>h.jsx(Es,{active:i.includes(a.id),href:a.link,children:a.text},l))})}function M1(){const t=rr(),n=C0();return g.useMemo(()=>{const{pattern:i="",text:a="Edit page"}=n.editLink??{};let l="";return typeof i=="function"?l="":t.filePath&&(l=i.replace(/:path/g,t.filePath)),{url:l,text:a}},[n.editLink,t.filePath])}function zu(){const[t,n]=g.useState(!1);return g.useEffect(()=>{n(!0)},[]),t}var N1="vocs_Footer",_1="vocs_Footer_container",k1="vocs_Footer_editLink",L1="vocs_Footer_lastUpdated",I1="vocs_Footer_navigation",ip="vocs_Footer_navigationIcon",O1="vocs_Footer_navigationIcon_left",q1="vocs_Footer_navigationIcon_right",ap="vocs_Footer_navigationItem",H1="vocs_Footer_navigationItem_left",j1="vocs_Footer_navigationItem_right",sp="vocs_Footer_navigationText",lp="vocs_Footer_navigationTextInner",eu="var(--vocs_Icon_size)",U1="vocs_Icon";function U0({className:t,label:n,icon:i,size:a,style:l}){return h.jsx("div",{"aria-label":n,className:l2(U1,t),role:"img",style:{...l,...Ie({[eu]:a})},children:h.jsx(i,{height:a,width:a})})}var z1="vocs_Socials",W1="vocs_Socials_button",G1="vocs_Socials_icon";function V1(){return h.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 127.14 96.36",children:[h.jsx("title",{children:"Discord"}),h.jsx("g",{id:"图层_2","data-name":"图层 2",children:h.jsx("g",{id:"Discord_Logos","data-name":"Discord Logos",children:h.jsx("g",{id:"Discord_Logo_-_Large_-_White","data-name":"Discord Logo - Large - White",children:h.jsx("path",{d:"M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z",fill:"currentColor"})})})})]})}function Y1(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 98 96",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"GitHub"}),h.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z",fill:"currentColor"})]})}function $1(){return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 50 50",children:[h.jsx("title",{children:"Telegram"}),h.jsx("path",{d:"M25 2c12.703 0 23 10.297 23 23S37.703 48 25 48 2 37.703 2 25 12.297 2 25 2zm7.934 32.375c.423-1.298 2.405-14.234 2.65-16.783.074-.772-.17-1.285-.648-1.514-.578-.278-1.434-.139-2.427.219-1.362.491-18.774 7.884-19.78 8.312-.954.405-1.856.847-1.856 1.487 0 .45.267.703 1.003.966.766.273 2.695.858 3.834 1.172 1.097.303 2.346.04 3.046-.395.742-.461 9.305-6.191 9.92-6.693.614-.502 1.104.141.602.644-.502.502-6.38 6.207-7.155 6.997-.941.959-.273 1.953.358 2.351.721.454 5.906 3.932 6.687 4.49.781.558 1.573.811 2.298.811.725 0 1.107-.955 1.468-2.064z",fill:"currentColor"})]})}function Z1(){return h.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"Warpcast"}),h.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.92028 31.9901H24.0698C28.4371 31.9901 31.9901 28.4373 31.9901 24.0699V7.92053C31.9901 3.55319 28.4371 0.000137329 24.0698 0.000137329H7.92028C3.55304 0.000137329 0 3.55319 0 7.92053V24.0699C0 28.4373 3.55304 31.9901 7.92028 31.9901ZM19.4134 16.048L20.9908 10.124H25.1383L21.2924 23.2218H17.7062L15.9951 17.1397L14.284 23.2218H10.7055L6.85115 10.124H10.999L12.5915 16.0916L14.1891 10.124H17.8309L19.4134 16.048Z",fill:"currentColor"})]})}function K1(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 1200 1227",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"X"}),h.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z",fill:"currentColor"})]})}const X1={discord:V1,github:Y1,telegram:$1,warpcast:Z1,x:K1},Q1={discord:"18px",github:"17px",telegram:"17px",warpcast:"17px",x:"16px"};function Wu(){const t=C0();return!t.socials||t.socials.length===0?null:h.jsx("div",{className:z1,children:t.socials.map((n,i)=>h.jsxs(g.Fragment,{children:[i!==0&&h.jsx("div",{style:{width:"1px",marginTop:ti[4],marginBottom:ti[4],backgroundColor:Hc.border}}),h.jsx("a",{className:W1,href:n.link,target:"_blank",rel:"noopener noreferrer",children:h.jsx(U0,{className:G1,label:n.label,icon:X1[n.icon],size:Q1[n.icon]||"20px"})})]},i))})}function J1(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 72 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"Arrow Left"}),h.jsx("path",{d:"M0.325684 29.7461C0.325684 30.8203 0.813963 31.8457 1.69286 32.6758L26.8882 57.8223C27.7671 58.6524 28.7437 59.043 29.7691 59.043C31.9175 59.043 33.5777 57.4317 33.5777 55.2344C33.5777 54.209 33.2359 53.1836 32.5035 52.5L25.7652 45.5176L9.26126 30.6738L8.38236 32.7734L21.3706 33.7012H67.4644C69.7593 33.7012 71.3706 32.041 71.3706 29.7461C71.3706 27.4512 69.7593 25.791 67.4644 25.791H21.3706L8.38236 26.7188L9.26126 28.8672L25.7652 13.9746L32.5035 6.99221C33.2359 6.30861 33.5777 5.28322 33.5777 4.25782C33.5777 2.06052 31.9175 0.449219 29.7691 0.449219C28.7437 0.449219 27.7671 0.839814 26.8882 1.66991L1.69286 26.8164C0.813963 27.6465 0.325684 28.6719 0.325684 29.7461Z",fill:"currentColor"})]})}function eT(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 72 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"Arrow Right"}),h.jsx("path",{d:"M71.3706 29.7461C71.3706 28.6719 70.8824 27.6465 70.0035 26.8164L44.8081 1.66991C43.9292 0.839814 42.9527 0.449219 41.9273 0.449219C39.7789 0.449219 38.1187 2.06052 38.1187 4.25782C38.1187 5.28322 38.4605 6.30861 39.1929 6.99221L45.9312 13.9746L62.4351 28.8672L63.314 26.7188L50.3257 25.791H4.23196C1.93706 25.791 0.325684 27.4512 0.325684 29.7461C0.325684 32.041 1.93706 33.7012 4.23196 33.7012H50.3257L63.314 32.7734L62.4351 30.6738L45.9312 45.5176L39.1929 52.5C38.4605 53.1836 38.1187 54.209 38.1187 55.2344C38.1187 57.4317 39.7789 59.043 41.9273 59.043C42.9527 59.043 43.9292 58.6524 44.8081 57.8223L70.0035 32.6758C70.8824 31.8457 71.3706 30.8203 71.3706 29.7461Z",fill:"currentColor"})]})}function tT(){const{layout:t}=nr(),n=zu(),i=rr(),a=g.useMemo(()=>i.lastUpdatedAt?new Date(i.lastUpdatedAt):void 0,[i.lastUpdatedAt]),l=g.useMemo(()=>a==null?void 0:a.toISOString(),[a]);return h.jsxs("footer",{className:N1,"data-layout":t,children:[t==="docs"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:_1,children:[h.jsx(rT,{}),n&&i.lastUpdatedAt&&h.jsxs("div",{className:L1,children:["Last updated:"," ",h.jsx("time",{dateTime:l,children:new Intl.DateTimeFormat(void 0,{dateStyle:"short",timeStyle:"short"}).format(a)})]})]}),h.jsx(nT,{})]}),t!=="docs"&&h.jsx(Wu,{}),h.jsx(mF,{})]})}function rT(){const t=M1();return t.url?h.jsx("div",{children:h.jsxs(xe,{className:k1,href:t.url,children:[h.jsx(cF,{})," ",t.text]})}):null}function nT(){const t=zu(),n=Fs(),{pathname:i}=i0(),a=g.useMemo(()=>MD(n.items||[]).filter(C=>C.link),[n]),l=g.useMemo(()=>a.findIndex(C=>C.link===i),[a,i]),[A,u]=g.useMemo(()=>l<0?[]:l===0?[null,a[l+1]]:l===a.length-1?[a[l-1],null]:[a[l-1],a[l+1]],[l,a]),f=gu();return g.useEffect(()=>{let C=l,m=!1;const D=v=>{if(v.code==="ShiftLeft"&&(m=!0),m){const B=a[C+1],y=a[C-1];v.code==="ArrowRight"&&(B!=null&&B.link)&&(!B.link.match(/^(\.*\/|#)/)?window.open(B.link,"noopener,noreferrer"):f(B.link),C++),v.code==="ArrowLeft"&&(y!=null&&y.link)&&(!y.link.match(/^(\.*\/|#)/)?window.open(y.link,"noopener,noreferrer"):f(y.link),C--)}},p=v=>{v.code==="ShiftLeft"&&(m=!1)};return window.addEventListener("keydown",D),window.addEventListener("keyup",p),()=>{window.removeEventListener("keydown",D),window.removeEventListener("keyup",p)}},[]),t?h.jsxs("div",{className:I1,children:[A?h.jsxs(xe,{className:l2(ap,H1),href:A.link,variant:"styleless",children:[h.jsxs("div",{className:sp,children:[h.jsx("div",{className:l2(ip,O1),style:Ie({[eu]:"0.75em"}),children:h.jsx(U0,{label:"Previous",icon:J1})}),h.jsx("div",{className:lp,children:A.text})]}),h.jsx(bn,{description:"Previous",keys:["shift","←"]})]}):h.jsx("div",{}),u?h.jsxs(xe,{className:l2(ap,j1),href:u.link,variant:"styleless",children:[h.jsxs("div",{className:sp,children:[h.jsx("div",{className:lp,style:{textAlign:"right"},children:u.text}),h.jsx("div",{className:l2(ip,q1),style:Ie({[eu]:"0.75em"}),children:h.jsx(U0,{label:"Next",icon:eT})})]}),h.jsx(bn,{description:"Next",keys:["shift","→"]})]}):h.jsx("div",{})]}):null}function MD(t){const n=[];for(const i of t)i.link&&n.push(i),i.items&&n.push(...MD(i.items));return n}var Ps="Collapsible",[oT,ND]=Oe(Ps),[iT,Gu]=oT(Ps),_D=g.forwardRef((t,n)=>{const{__scopeCollapsible:i,open:a,defaultOpen:l,disabled:A,onOpenChange:u,...f}=t,[C,m]=Qe({prop:a,defaultProp:l??!1,onChange:u,caller:Ps});return h.jsx(iT,{scope:i,disabled:A,contentId:Be(),open:C,onOpenToggle:g.useCallback(()=>m(D=>!D),[m]),children:h.jsx(E2.div,{"data-state":Yu(C),"data-disabled":A?"":void 0,...f,ref:n})})});_D.displayName=Ps;var kD="CollapsibleTrigger",LD=g.forwardRef((t,n)=>{const{__scopeCollapsible:i,...a}=t,l=Gu(kD,i);return h.jsx(E2.button,{type:"button","aria-controls":l.contentId,"aria-expanded":l.open||!1,"data-state":Yu(l.open),"data-disabled":l.disabled?"":void 0,disabled:l.disabled,...a,ref:n,onClick:C2(t.onClick,l.onOpenToggle)})});LD.displayName=kD;var Vu="CollapsibleContent",ID=g.forwardRef((t,n)=>{const{forceMount:i,...a}=t,l=Gu(Vu,t.__scopeCollapsible);return h.jsx(O0,{present:i||l.open,children:({present:A})=>h.jsx(aT,{...a,ref:n,present:A})})});ID.displayName=Vu;var aT=g.forwardRef((t,n)=>{const{__scopeCollapsible:i,present:a,children:l,...A}=t,u=Gu(Vu,i),[f,C]=g.useState(a),m=g.useRef(null),D=o0(n,m),p=g.useRef(0),v=p.current,B=g.useRef(0),y=B.current,x=u.open||f,S=g.useRef(x),T=g.useRef(void 0);return g.useEffect(()=>{const w=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(w)},[]),Fe(()=>{const w=m.current;if(w){T.current=T.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const R=w.getBoundingClientRect();p.current=R.height,B.current=R.width,S.current||(w.style.transitionDuration=T.current.transitionDuration,w.style.animationName=T.current.animationName),C(a)}},[u.open,a]),h.jsx(E2.div,{"data-state":Yu(u.open),"data-disabled":u.disabled?"":void 0,id:u.contentId,hidden:!x,...A,ref:D,style:{"--radix-collapsible-content-height":v?`${v}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...t.style},children:x&&l})});function Yu(t){return t?"open":"closed"}var sT=_D,lT=LD,AT=ID,He="Accordion",cT=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[$u,uT,fT]=di(He),[Ms,RN]=Oe(He,[fT,ND]),Zu=ND(),OD=n0.forwardRef((t,n)=>{const{type:i,...a}=t,l=a,A=a;return h.jsx($u.Provider,{scope:t.__scopeAccordion,children:i==="multiple"?h.jsx(pT,{...A,ref:n}):h.jsx(CT,{...l,ref:n})})});OD.displayName=He;var[qD,dT]=Ms(He),[HD,mT]=Ms(He,{collapsible:!1}),CT=n0.forwardRef((t,n)=>{const{value:i,defaultValue:a,onValueChange:l=()=>{},collapsible:A=!1,...u}=t,[f,C]=Qe({prop:i,defaultProp:a??"",onChange:l,caller:He});return h.jsx(qD,{scope:t.__scopeAccordion,value:n0.useMemo(()=>f?[f]:[],[f]),onItemOpen:C,onItemClose:n0.useCallback(()=>A&&C(""),[A,C]),children:h.jsx(HD,{scope:t.__scopeAccordion,collapsible:A,children:h.jsx(jD,{...u,ref:n})})})}),pT=n0.forwardRef((t,n)=>{const{value:i,defaultValue:a,onValueChange:l=()=>{},...A}=t,[u,f]=Qe({prop:i,defaultProp:a??[],onChange:l,caller:He}),C=n0.useCallback(D=>f((p=[])=>[...p,D]),[f]),m=n0.useCallback(D=>f((p=[])=>p.filter(v=>v!==D)),[f]);return h.jsx(qD,{scope:t.__scopeAccordion,value:u,onItemOpen:C,onItemClose:m,children:h.jsx(HD,{scope:t.__scopeAccordion,collapsible:!0,children:h.jsx(jD,{...A,ref:n})})})}),[hT,Ns]=Ms(He),jD=n0.forwardRef((t,n)=>{const{__scopeAccordion:i,disabled:a,dir:l,orientation:A="vertical",...u}=t,f=n0.useRef(null),C=o0(f,n),m=uT(i),p=fi(l)==="ltr",v=C2(t.onKeyDown,B=>{var H;if(!cT.includes(B.key))return;const y=B.target,x=m().filter(z=>{var r2;return!((r2=z.ref.current)!=null&&r2.disabled)}),S=x.findIndex(z=>z.ref.current===y),T=x.length;if(S===-1)return;B.preventDefault();let w=S;const R=0,P=T-1,N=()=>{w=S+1,w>P&&(w=R)},E=()=>{w=S-1,w<R&&(w=P)};switch(B.key){case"Home":w=R;break;case"End":w=P;break;case"ArrowRight":A==="horizontal"&&(p?N():E());break;case"ArrowDown":A==="vertical"&&N();break;case"ArrowLeft":A==="horizontal"&&(p?E():N());break;case"ArrowUp":A==="vertical"&&E();break}const L=w%T;(H=x[L].ref.current)==null||H.focus()});return h.jsx(hT,{scope:i,disabled:a,direction:l,orientation:A,children:h.jsx($u.Slot,{scope:i,children:h.jsx(E2.div,{...u,"data-orientation":A,ref:C,onKeyDown:a?void 0:v})})})}),us="AccordionItem",[DT,Ku]=Ms(us),UD=n0.forwardRef((t,n)=>{const{__scopeAccordion:i,value:a,...l}=t,A=Ns(us,i),u=dT(us,i),f=Zu(i),C=Be(),m=a&&u.value.includes(a)||!1,D=A.disabled||t.disabled;return h.jsx(DT,{scope:i,open:m,disabled:D,triggerId:C,children:h.jsx(sT,{"data-orientation":A.orientation,"data-state":YD(m),...f,...l,ref:n,disabled:D,open:m,onOpenChange:p=>{p?u.onItemOpen(a):u.onItemClose(a)}})})});UD.displayName=us;var zD="AccordionHeader",gT=n0.forwardRef((t,n)=>{const{__scopeAccordion:i,...a}=t,l=Ns(He,i),A=Ku(zD,i);return h.jsx(E2.h3,{"data-orientation":l.orientation,"data-state":YD(A.open),"data-disabled":A.disabled?"":void 0,...a,ref:n})});gT.displayName=zD;var tu="AccordionTrigger",WD=n0.forwardRef((t,n)=>{const{__scopeAccordion:i,...a}=t,l=Ns(He,i),A=Ku(tu,i),u=mT(tu,i),f=Zu(i);return h.jsx($u.ItemSlot,{scope:i,children:h.jsx(lT,{"aria-disabled":A.open&&!u.collapsible||void 0,"data-orientation":l.orientation,id:A.triggerId,...f,...a,ref:n})})});WD.displayName=tu;var GD="AccordionContent",VD=n0.forwardRef((t,n)=>{const{__scopeAccordion:i,...a}=t,l=Ns(He,i),A=Ku(GD,i),u=Zu(i);return h.jsx(AT,{role:"region","aria-labelledby":A.triggerId,"data-orientation":l.orientation,...u,...a,ref:n,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});VD.displayName=GD;function YD(t){return t?"open":"closed"}var vT=OD,BT=UD,yT=WD,xT=VD,FT="vocs_MobileSearch_searchButton";function ST(){const[t,n]=g.useState(!1);return h.jsxs(Xh,{open:t,onOpenChange:n,children:[h.jsx(Qh,{asChild:!0,children:h.jsx("button",{className:FT,type:"button","aria-label":"Search",children:h.jsx(Tu,{height:21,width:21})})}),h.jsx(AD,{open:t,onClose:()=>n(!1)})]})}var TT="vocs_MobileTopNav",RT="vocs_MobileTopNav_content",bT="vocs_MobileTopNav_curtain",Ap="vocs_MobileTopNav_curtainGroup",Bc="vocs_MobileTopNav_curtainItem",yc="vocs_MobileTopNav_group",wT="vocs_MobileTopNav_item",ET="vocs_MobileTopNav_logo",$D="vocs_MobileTopNav_menuTrigger",PT="vocs_MobileTopNav_menuTitle",MT="vocs_MobileTopNav_navigation_compact",ZD="vocs_MobileTopNav_navigation",NT="vocs_MobileTopNav_navigationContent",Wa="vocs_MobileTopNav_navigationItem",_T="var(--vocs_MobileTopNav_chevronDownIcon)",kT="var(--vocs_MobileTopNav_chevronUpIcon)",LT="vocs_MobileTopNav_trigger",cp="vocs_MobileTopNav_outlineTrigger",IT="vocs_MobileTopNav_outlinePopover",up="vocs_MobileTopNav_section",OT="vocs_MobileTopNav_separator",qT="vocs_MobileTopNav_sidebarPopover",HT="vocs_MobileTopNav_topNavPopover",jT="vocs_MobileTopNav_topNavPopoverFooter";function UT(t,n){let i=!1;return()=>{i=!0,setTimeout(()=>{i&&t(),i=!1},n)}}function zT(t){const[n,i]=g.useState(void 0);return Fe(()=>{if(t){i({width:t.offsetWidth,height:t.offsetHeight});const a=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const A=l[0];let u,f;if("borderBoxSize"in A){const C=A.borderBoxSize,m=Array.isArray(C)?C[0]:C;u=m.inlineSize,f=m.blockSize}else u=t.offsetWidth,f=t.offsetHeight;i({width:u,height:f})});return a.observe(t,{box:"border-box"}),()=>a.unobserve(t)}else i(void 0)},[t]),n}const WT=["top","right","bottom","left"],Jt=Math.min,se=Math.max,fs=Math.round,Ga=Math.floor,Ke=t=>({x:t,y:t}),GT={left:"right",right:"left",bottom:"top",top:"bottom"},VT={start:"end",end:"start"};function ru(t,n,i){return se(t,Jt(n,i))}function vt(t,n){return typeof t=="function"?t(n):t}function Bt(t){return t.split("-")[0]}function jn(t){return t.split("-")[1]}function Xu(t){return t==="x"?"y":"x"}function Qu(t){return t==="y"?"height":"width"}function gt(t){return["top","bottom"].includes(Bt(t))?"y":"x"}function Ju(t){return Xu(gt(t))}function YT(t,n,i){i===void 0&&(i=!1);const a=jn(t),l=Ju(t),A=Qu(l);let u=l==="x"?a===(i?"end":"start")?"right":"left":a==="start"?"bottom":"top";return n.reference[A]>n.floating[A]&&(u=ds(u)),[u,ds(u)]}function $T(t){const n=ds(t);return[nu(t),n,nu(n)]}function nu(t){return t.replace(/start|end/g,n=>VT[n])}function ZT(t,n,i){const a=["left","right"],l=["right","left"],A=["top","bottom"],u=["bottom","top"];switch(t){case"top":case"bottom":return i?n?l:a:n?a:l;case"left":case"right":return n?A:u;default:return[]}}function KT(t,n,i,a){const l=jn(t);let A=ZT(Bt(t),i==="start",a);return l&&(A=A.map(u=>u+"-"+l),n&&(A=A.concat(A.map(nu)))),A}function ds(t){return t.replace(/left|right|bottom|top/g,n=>GT[n])}function XT(t){return{top:0,right:0,bottom:0,left:0,...t}}function KD(t){return typeof t!="number"?XT(t):{top:t,right:t,bottom:t,left:t}}function ms(t){const{x:n,y:i,width:a,height:l}=t;return{width:a,height:l,top:i,left:n,right:n+a,bottom:i+l,x:n,y:i}}function fp(t,n,i){let{reference:a,floating:l}=t;const A=gt(n),u=Ju(n),f=Qu(u),C=Bt(n),m=A==="y",D=a.x+a.width/2-l.width/2,p=a.y+a.height/2-l.height/2,v=a[f]/2-l[f]/2;let B;switch(C){case"top":B={x:D,y:a.y-l.height};break;case"bottom":B={x:D,y:a.y+a.height};break;case"right":B={x:a.x+a.width,y:p};break;case"left":B={x:a.x-l.width,y:p};break;default:B={x:a.x,y:a.y}}switch(jn(n)){case"start":B[u]-=v*(i&&m?-1:1);break;case"end":B[u]+=v*(i&&m?-1:1);break}return B}const QT=async(t,n,i)=>{const{placement:a="bottom",strategy:l="absolute",middleware:A=[],platform:u}=i,f=A.filter(Boolean),C=await(u.isRTL==null?void 0:u.isRTL(n));let m=await u.getElementRects({reference:t,floating:n,strategy:l}),{x:D,y:p}=fp(m,a,C),v=a,B={},y=0;for(let x=0;x<f.length;x++){const{name:S,fn:T}=f[x],{x:w,y:R,data:P,reset:N}=await T({x:D,y:p,initialPlacement:a,placement:v,strategy:l,middlewareData:B,rects:m,platform:u,elements:{reference:t,floating:n}});D=w??D,p=R??p,B={...B,[S]:{...B[S],...P}},N&&y<=50&&(y++,typeof N=="object"&&(N.placement&&(v=N.placement),N.rects&&(m=N.rects===!0?await u.getElementRects({reference:t,floating:n,strategy:l}):N.rects),{x:D,y:p}=fp(m,v,C)),x=-1)}return{x:D,y:p,placement:v,strategy:l,middlewareData:B}};async function oi(t,n){var i;n===void 0&&(n={});const{x:a,y:l,platform:A,rects:u,elements:f,strategy:C}=t,{boundary:m="clippingAncestors",rootBoundary:D="viewport",elementContext:p="floating",altBoundary:v=!1,padding:B=0}=vt(n,t),y=KD(B),S=f[v?p==="floating"?"reference":"floating":p],T=ms(await A.getClippingRect({element:(i=await(A.isElement==null?void 0:A.isElement(S)))==null||i?S:S.contextElement||await(A.getDocumentElement==null?void 0:A.getDocumentElement(f.floating)),boundary:m,rootBoundary:D,strategy:C})),w=p==="floating"?{x:a,y:l,width:u.floating.width,height:u.floating.height}:u.reference,R=await(A.getOffsetParent==null?void 0:A.getOffsetParent(f.floating)),P=await(A.isElement==null?void 0:A.isElement(R))?await(A.getScale==null?void 0:A.getScale(R))||{x:1,y:1}:{x:1,y:1},N=ms(A.convertOffsetParentRelativeRectToViewportRelativeRect?await A.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:w,offsetParent:R,strategy:C}):w);return{top:(T.top-N.top+y.top)/P.y,bottom:(N.bottom-T.bottom+y.bottom)/P.y,left:(T.left-N.left+y.left)/P.x,right:(N.right-T.right+y.right)/P.x}}const JT=t=>({name:"arrow",options:t,async fn(n){const{x:i,y:a,placement:l,rects:A,platform:u,elements:f,middlewareData:C}=n,{element:m,padding:D=0}=vt(t,n)||{};if(m==null)return{};const p=KD(D),v={x:i,y:a},B=Ju(l),y=Qu(B),x=await u.getDimensions(m),S=B==="y",T=S?"top":"left",w=S?"bottom":"right",R=S?"clientHeight":"clientWidth",P=A.reference[y]+A.reference[B]-v[B]-A.floating[y],N=v[B]-A.reference[B],E=await(u.getOffsetParent==null?void 0:u.getOffsetParent(m));let L=E?E[R]:0;(!L||!await(u.isElement==null?void 0:u.isElement(E)))&&(L=f.floating[R]||A.floating[y]);const H=P/2-N/2,z=L/2-x[y]/2-1,r2=Jt(p[T],z),c2=Jt(p[w],z),s2=r2,i2=L-x[y]-c2,K=L/2-x[y]/2+H,u2=ru(s2,K,i2),I=!C.arrow&&jn(l)!=null&&K!==u2&&A.reference[y]/2-(K<s2?r2:c2)-x[y]/2<0,V=I?K<s2?K-s2:K-i2:0;return{[B]:v[B]+V,data:{[B]:u2,centerOffset:K-u2-V,...I&&{alignmentOffset:V}},reset:I}}}),eR=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(n){var i,a;const{placement:l,middlewareData:A,rects:u,initialPlacement:f,platform:C,elements:m}=n,{mainAxis:D=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:B="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:x=!0,...S}=vt(t,n);if((i=A.arrow)!=null&&i.alignmentOffset)return{};const T=Bt(l),w=gt(f),R=Bt(f)===f,P=await(C.isRTL==null?void 0:C.isRTL(m.floating)),N=v||(R||!x?[ds(f)]:$T(f)),E=y!=="none";!v&&E&&N.push(...KT(f,x,y,P));const L=[f,...N],H=await oi(n,S),z=[];let r2=((a=A.flip)==null?void 0:a.overflows)||[];if(D&&z.push(H[T]),p){const u2=YT(l,u,P);z.push(H[u2[0]],H[u2[1]])}if(r2=[...r2,{placement:l,overflows:z}],!z.every(u2=>u2<=0)){var c2,s2;const u2=(((c2=A.flip)==null?void 0:c2.index)||0)+1,I=L[u2];if(I){var i2;const Q=p==="alignment"?w!==gt(I):!1,Z=((i2=r2[0])==null?void 0:i2.overflows[0])>0;if(!Q||Z)return{data:{index:u2,overflows:r2},reset:{placement:I}}}let V=(s2=r2.filter(Q=>Q.overflows[0]<=0).sort((Q,Z)=>Q.overflows[1]-Z.overflows[1])[0])==null?void 0:s2.placement;if(!V)switch(B){case"bestFit":{var K;const Q=(K=r2.filter(Z=>{if(E){const M=gt(Z.placement);return M===w||M==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(M=>M>0).reduce((M,X)=>M+X,0)]).sort((Z,M)=>Z[1]-M[1])[0])==null?void 0:K[0];Q&&(V=Q);break}case"initialPlacement":V=f;break}if(l!==V)return{reset:{placement:V}}}return{}}}};function dp(t,n){return{top:t.top-n.height,right:t.right-n.width,bottom:t.bottom-n.height,left:t.left-n.width}}function mp(t){return WT.some(n=>t[n]>=0)}const tR=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(n){const{rects:i}=n,{strategy:a="referenceHidden",...l}=vt(t,n);switch(a){case"referenceHidden":{const A=await oi(n,{...l,elementContext:"reference"}),u=dp(A,i.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:mp(u)}}}case"escaped":{const A=await oi(n,{...l,altBoundary:!0}),u=dp(A,i.floating);return{data:{escapedOffsets:u,escaped:mp(u)}}}default:return{}}}}};async function rR(t,n){const{placement:i,platform:a,elements:l}=t,A=await(a.isRTL==null?void 0:a.isRTL(l.floating)),u=Bt(i),f=jn(i),C=gt(i)==="y",m=["left","top"].includes(u)?-1:1,D=A&&C?-1:1,p=vt(n,t);let{mainAxis:v,crossAxis:B,alignmentAxis:y}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return f&&typeof y=="number"&&(B=f==="end"?y*-1:y),C?{x:B*D,y:v*m}:{x:v*m,y:B*D}}const nR=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(n){var i,a;const{x:l,y:A,placement:u,middlewareData:f}=n,C=await rR(n,t);return u===((i=f.offset)==null?void 0:i.placement)&&(a=f.arrow)!=null&&a.alignmentOffset?{}:{x:l+C.x,y:A+C.y,data:{...C,placement:u}}}}},oR=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(n){const{x:i,y:a,placement:l}=n,{mainAxis:A=!0,crossAxis:u=!1,limiter:f={fn:S=>{let{x:T,y:w}=S;return{x:T,y:w}}},...C}=vt(t,n),m={x:i,y:a},D=await oi(n,C),p=gt(Bt(l)),v=Xu(p);let B=m[v],y=m[p];if(A){const S=v==="y"?"top":"left",T=v==="y"?"bottom":"right",w=B+D[S],R=B-D[T];B=ru(w,B,R)}if(u){const S=p==="y"?"top":"left",T=p==="y"?"bottom":"right",w=y+D[S],R=y-D[T];y=ru(w,y,R)}const x=f.fn({...n,[v]:B,[p]:y});return{...x,data:{x:x.x-i,y:x.y-a,enabled:{[v]:A,[p]:u}}}}}},iR=function(t){return t===void 0&&(t={}),{options:t,fn(n){const{x:i,y:a,placement:l,rects:A,middlewareData:u}=n,{offset:f=0,mainAxis:C=!0,crossAxis:m=!0}=vt(t,n),D={x:i,y:a},p=gt(l),v=Xu(p);let B=D[v],y=D[p];const x=vt(f,n),S=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(C){const R=v==="y"?"height":"width",P=A.reference[v]-A.floating[R]+S.mainAxis,N=A.reference[v]+A.reference[R]-S.mainAxis;B<P?B=P:B>N&&(B=N)}if(m){var T,w;const R=v==="y"?"width":"height",P=["top","left"].includes(Bt(l)),N=A.reference[p]-A.floating[R]+(P&&((T=u.offset)==null?void 0:T[p])||0)+(P?0:S.crossAxis),E=A.reference[p]+A.reference[R]+(P?0:((w=u.offset)==null?void 0:w[p])||0)-(P?S.crossAxis:0);y<N?y=N:y>E&&(y=E)}return{[v]:B,[p]:y}}}},aR=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(n){var i,a;const{placement:l,rects:A,platform:u,elements:f}=n,{apply:C=()=>{},...m}=vt(t,n),D=await oi(n,m),p=Bt(l),v=jn(l),B=gt(l)==="y",{width:y,height:x}=A.floating;let S,T;p==="top"||p==="bottom"?(S=p,T=v===(await(u.isRTL==null?void 0:u.isRTL(f.floating))?"start":"end")?"left":"right"):(T=p,S=v==="end"?"top":"bottom");const w=x-D.top-D.bottom,R=y-D.left-D.right,P=Jt(x-D[S],w),N=Jt(y-D[T],R),E=!n.middlewareData.shift;let L=P,H=N;if((i=n.middlewareData.shift)!=null&&i.enabled.x&&(H=R),(a=n.middlewareData.shift)!=null&&a.enabled.y&&(L=w),E&&!v){const r2=se(D.left,0),c2=se(D.right,0),s2=se(D.top,0),i2=se(D.bottom,0);B?H=y-2*(r2!==0||c2!==0?r2+c2:se(D.left,D.right)):L=x-2*(s2!==0||i2!==0?s2+i2:se(D.top,D.bottom))}await C({...n,availableWidth:H,availableHeight:L});const z=await u.getDimensions(f.floating);return y!==z.width||x!==z.height?{reset:{rects:!0}}:{}}}};function _s(){return typeof window<"u"}function Un(t){return XD(t)?(t.nodeName||"").toLowerCase():"#document"}function le(t){var n;return(t==null||(n=t.ownerDocument)==null?void 0:n.defaultView)||window}function Je(t){var n;return(n=(XD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:n.documentElement}function XD(t){return _s()?t instanceof Node||t instanceof le(t).Node:!1}function R0(t){return _s()?t instanceof Element||t instanceof le(t).Element:!1}function Xe(t){return _s()?t instanceof HTMLElement||t instanceof le(t).HTMLElement:!1}function Cs(t){return!_s()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof le(t).ShadowRoot}function mi(t){const{overflow:n,overflowX:i,overflowY:a,display:l}=Se(t);return/auto|scroll|overlay|hidden|clip/.test(n+a+i)&&!["inline","contents"].includes(l)}function sR(t){return["table","td","th"].includes(Un(t))}function ks(t){return[":popover-open",":modal"].some(n=>{try{return t.matches(n)}catch{return!1}})}function ef(t){const n=tf(),i=R0(t)?Se(t):t;return["transform","translate","scale","rotate","perspective"].some(a=>i[a]?i[a]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!n&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!n&&(i.filter?i.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(i.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(i.contain||"").includes(a))}function lR(t){let n=er(t);for(;Xe(n)&&!kn(n);){if(ef(n))return n;if(ks(n))return null;n=er(n)}return null}function tf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function kn(t){return["html","body","#document"].includes(Un(t))}function Se(t){return le(t).getComputedStyle(t)}function Ls(t){return R0(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function er(t){if(Un(t)==="html")return t;const n=t.assignedSlot||t.parentNode||Cs(t)&&t.host||Je(t);return Cs(n)?n.host:n}function QD(t){const n=er(t);return kn(n)?t.ownerDocument?t.ownerDocument.body:t.body:Xe(n)&&mi(n)?n:QD(n)}function ii(t,n,i){var a;n===void 0&&(n=[]),i===void 0&&(i=!0);const l=QD(t),A=l===((a=t.ownerDocument)==null?void 0:a.body),u=le(l);if(A){const f=ou(u);return n.concat(u,u.visualViewport||[],mi(l)?l:[],f&&i?ii(f):[])}return n.concat(l,ii(l,[],i))}function ou(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function JD(t){const n=Se(t);let i=parseFloat(n.width)||0,a=parseFloat(n.height)||0;const l=Xe(t),A=l?t.offsetWidth:i,u=l?t.offsetHeight:a,f=fs(i)!==A||fs(a)!==u;return f&&(i=A,a=u),{width:i,height:a,$:f}}function rf(t){return R0(t)?t:t.contextElement}function Pn(t){const n=rf(t);if(!Xe(n))return Ke(1);const i=n.getBoundingClientRect(),{width:a,height:l,$:A}=JD(n);let u=(A?fs(i.width):i.width)/a,f=(A?fs(i.height):i.height)/l;return(!u||!Number.isFinite(u))&&(u=1),(!f||!Number.isFinite(f))&&(f=1),{x:u,y:f}}const AR=Ke(0);function eg(t){const n=le(t);return!tf()||!n.visualViewport?AR:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function cR(t,n,i){return n===void 0&&(n=!1),!i||n&&i!==le(t)?!1:n}function Nr(t,n,i,a){n===void 0&&(n=!1),i===void 0&&(i=!1);const l=t.getBoundingClientRect(),A=rf(t);let u=Ke(1);n&&(a?R0(a)&&(u=Pn(a)):u=Pn(t));const f=cR(A,i,a)?eg(A):Ke(0);let C=(l.left+f.x)/u.x,m=(l.top+f.y)/u.y,D=l.width/u.x,p=l.height/u.y;if(A){const v=le(A),B=a&&R0(a)?le(a):a;let y=v,x=ou(y);for(;x&&a&&B!==y;){const S=Pn(x),T=x.getBoundingClientRect(),w=Se(x),R=T.left+(x.clientLeft+parseFloat(w.paddingLeft))*S.x,P=T.top+(x.clientTop+parseFloat(w.paddingTop))*S.y;C*=S.x,m*=S.y,D*=S.x,p*=S.y,C+=R,m+=P,y=le(x),x=ou(y)}}return ms({width:D,height:p,x:C,y:m})}function nf(t,n){const i=Ls(t).scrollLeft;return n?n.left+i:Nr(Je(t)).left+i}function tg(t,n,i){i===void 0&&(i=!1);const a=t.getBoundingClientRect(),l=a.left+n.scrollLeft-(i?0:nf(t,a)),A=a.top+n.scrollTop;return{x:l,y:A}}function uR(t){let{elements:n,rect:i,offsetParent:a,strategy:l}=t;const A=l==="fixed",u=Je(a),f=n?ks(n.floating):!1;if(a===u||f&&A)return i;let C={scrollLeft:0,scrollTop:0},m=Ke(1);const D=Ke(0),p=Xe(a);if((p||!p&&!A)&&((Un(a)!=="body"||mi(u))&&(C=Ls(a)),Xe(a))){const B=Nr(a);m=Pn(a),D.x=B.x+a.clientLeft,D.y=B.y+a.clientTop}const v=u&&!p&&!A?tg(u,C,!0):Ke(0);return{width:i.width*m.x,height:i.height*m.y,x:i.x*m.x-C.scrollLeft*m.x+D.x+v.x,y:i.y*m.y-C.scrollTop*m.y+D.y+v.y}}function fR(t){return Array.from(t.getClientRects())}function dR(t){const n=Je(t),i=Ls(t),a=t.ownerDocument.body,l=se(n.scrollWidth,n.clientWidth,a.scrollWidth,a.clientWidth),A=se(n.scrollHeight,n.clientHeight,a.scrollHeight,a.clientHeight);let u=-i.scrollLeft+nf(t);const f=-i.scrollTop;return Se(a).direction==="rtl"&&(u+=se(n.clientWidth,a.clientWidth)-l),{width:l,height:A,x:u,y:f}}function mR(t,n){const i=le(t),a=Je(t),l=i.visualViewport;let A=a.clientWidth,u=a.clientHeight,f=0,C=0;if(l){A=l.width,u=l.height;const m=tf();(!m||m&&n==="fixed")&&(f=l.offsetLeft,C=l.offsetTop)}return{width:A,height:u,x:f,y:C}}function CR(t,n){const i=Nr(t,!0,n==="fixed"),a=i.top+t.clientTop,l=i.left+t.clientLeft,A=Xe(t)?Pn(t):Ke(1),u=t.clientWidth*A.x,f=t.clientHeight*A.y,C=l*A.x,m=a*A.y;return{width:u,height:f,x:C,y:m}}function Cp(t,n,i){let a;if(n==="viewport")a=mR(t,i);else if(n==="document")a=dR(Je(t));else if(R0(n))a=CR(n,i);else{const l=eg(t);a={x:n.x-l.x,y:n.y-l.y,width:n.width,height:n.height}}return ms(a)}function rg(t,n){const i=er(t);return i===n||!R0(i)||kn(i)?!1:Se(i).position==="fixed"||rg(i,n)}function pR(t,n){const i=n.get(t);if(i)return i;let a=ii(t,[],!1).filter(f=>R0(f)&&Un(f)!=="body"),l=null;const A=Se(t).position==="fixed";let u=A?er(t):t;for(;R0(u)&&!kn(u);){const f=Se(u),C=ef(u);!C&&f.position==="fixed"&&(l=null),(A?!C&&!l:!C&&f.position==="static"&&!!l&&["absolute","fixed"].includes(l.position)||mi(u)&&!C&&rg(t,u))?a=a.filter(D=>D!==u):l=f,u=er(u)}return n.set(t,a),a}function hR(t){let{element:n,boundary:i,rootBoundary:a,strategy:l}=t;const u=[...i==="clippingAncestors"?ks(n)?[]:pR(n,this._c):[].concat(i),a],f=u[0],C=u.reduce((m,D)=>{const p=Cp(n,D,l);return m.top=se(p.top,m.top),m.right=Jt(p.right,m.right),m.bottom=Jt(p.bottom,m.bottom),m.left=se(p.left,m.left),m},Cp(n,f,l));return{width:C.right-C.left,height:C.bottom-C.top,x:C.left,y:C.top}}function DR(t){const{width:n,height:i}=JD(t);return{width:n,height:i}}function gR(t,n,i){const a=Xe(n),l=Je(n),A=i==="fixed",u=Nr(t,!0,A,n);let f={scrollLeft:0,scrollTop:0};const C=Ke(0);function m(){C.x=nf(l)}if(a||!a&&!A)if((Un(n)!=="body"||mi(l))&&(f=Ls(n)),a){const B=Nr(n,!0,A,n);C.x=B.x+n.clientLeft,C.y=B.y+n.clientTop}else l&&m();A&&!a&&l&&m();const D=l&&!a&&!A?tg(l,f):Ke(0),p=u.left+f.scrollLeft-C.x-D.x,v=u.top+f.scrollTop-C.y-D.y;return{x:p,y:v,width:u.width,height:u.height}}function xc(t){return Se(t).position==="static"}function pp(t,n){if(!Xe(t)||Se(t).position==="fixed")return null;if(n)return n(t);let i=t.offsetParent;return Je(t)===i&&(i=i.ownerDocument.body),i}function ng(t,n){const i=le(t);if(ks(t))return i;if(!Xe(t)){let l=er(t);for(;l&&!kn(l);){if(R0(l)&&!xc(l))return l;l=er(l)}return i}let a=pp(t,n);for(;a&&sR(a)&&xc(a);)a=pp(a,n);return a&&kn(a)&&xc(a)&&!ef(a)?i:a||lR(t)||i}const vR=async function(t){const n=this.getOffsetParent||ng,i=this.getDimensions,a=await i(t.floating);return{reference:gR(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function BR(t){return Se(t).direction==="rtl"}const yR={convertOffsetParentRelativeRectToViewportRelativeRect:uR,getDocumentElement:Je,getClippingRect:hR,getOffsetParent:ng,getElementRects:vR,getClientRects:fR,getDimensions:DR,getScale:Pn,isElement:R0,isRTL:BR};function og(t,n){return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}function xR(t,n){let i=null,a;const l=Je(t);function A(){var f;clearTimeout(a),(f=i)==null||f.disconnect(),i=null}function u(f,C){f===void 0&&(f=!1),C===void 0&&(C=1),A();const m=t.getBoundingClientRect(),{left:D,top:p,width:v,height:B}=m;if(f||n(),!v||!B)return;const y=Ga(p),x=Ga(l.clientWidth-(D+v)),S=Ga(l.clientHeight-(p+B)),T=Ga(D),R={rootMargin:-y+"px "+-x+"px "+-S+"px "+-T+"px",threshold:se(0,Jt(1,C))||1};let P=!0;function N(E){const L=E[0].intersectionRatio;if(L!==C){if(!P)return u();L?u(!1,L):a=setTimeout(()=>{u(!1,1e-7)},1e3)}L===1&&!og(m,t.getBoundingClientRect())&&u(),P=!1}try{i=new IntersectionObserver(N,{...R,root:l.ownerDocument})}catch{i=new IntersectionObserver(N,R)}i.observe(t)}return u(!0),A}function FR(t,n,i,a){a===void 0&&(a={});const{ancestorScroll:l=!0,ancestorResize:A=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:C=!1}=a,m=rf(t),D=l||A?[...m?ii(m):[],...ii(n)]:[];D.forEach(T=>{l&&T.addEventListener("scroll",i,{passive:!0}),A&&T.addEventListener("resize",i)});const p=m&&f?xR(m,i):null;let v=-1,B=null;u&&(B=new ResizeObserver(T=>{let[w]=T;w&&w.target===m&&B&&(B.unobserve(n),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var R;(R=B)==null||R.observe(n)})),i()}),m&&!C&&B.observe(m),B.observe(n));let y,x=C?Nr(t):null;C&&S();function S(){const T=Nr(t);x&&!og(x,T)&&i(),x=T,y=requestAnimationFrame(S)}return i(),()=>{var T;D.forEach(w=>{l&&w.removeEventListener("scroll",i),A&&w.removeEventListener("resize",i)}),p==null||p(),(T=B)==null||T.disconnect(),B=null,C&&cancelAnimationFrame(y)}}const SR=nR,TR=oR,RR=eR,bR=aR,wR=tR,hp=JT,ER=iR,PR=(t,n,i)=>{const a=new Map,l={platform:yR,...i},A={...l.platform,_c:a};return QT(t,n,{...l,platform:A})};var rs=typeof document<"u"?g.useLayoutEffect:g.useEffect;function ps(t,n){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(typeof t=="function"&&t.toString()===n.toString())return!0;let i,a,l;if(t&&n&&typeof t=="object"){if(Array.isArray(t)){if(i=t.length,i!==n.length)return!1;for(a=i;a--!==0;)if(!ps(t[a],n[a]))return!1;return!0}if(l=Object.keys(t),i=l.length,i!==Object.keys(n).length)return!1;for(a=i;a--!==0;)if(!{}.hasOwnProperty.call(n,l[a]))return!1;for(a=i;a--!==0;){const A=l[a];if(!(A==="_owner"&&t.$$typeof)&&!ps(t[A],n[A]))return!1}return!0}return t!==t&&n!==n}function ig(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Dp(t,n){const i=ig(t);return Math.round(n*i)/i}function Fc(t){const n=g.useRef(t);return rs(()=>{n.current=t}),n}function ag(t){t===void 0&&(t={});const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:l,elements:{reference:A,floating:u}={},transform:f=!0,whileElementsMounted:C,open:m}=t,[D,p]=g.useState({x:0,y:0,strategy:i,placement:n,middlewareData:{},isPositioned:!1}),[v,B]=g.useState(a);ps(v,a)||B(a);const[y,x]=g.useState(null),[S,T]=g.useState(null),w=g.useCallback(Q=>{Q!==E.current&&(E.current=Q,x(Q))},[]),R=g.useCallback(Q=>{Q!==L.current&&(L.current=Q,T(Q))},[]),P=A||y,N=u||S,E=g.useRef(null),L=g.useRef(null),H=g.useRef(D),z=C!=null,r2=Fc(C),c2=Fc(l),s2=Fc(m),i2=g.useCallback(()=>{if(!E.current||!L.current)return;const Q={placement:n,strategy:i,middleware:v};c2.current&&(Q.platform=c2.current),PR(E.current,L.current,Q).then(Z=>{const M={...Z,isPositioned:s2.current!==!1};K.current&&!ps(H.current,M)&&(H.current=M,bu.flushSync(()=>{p(M)}))})},[v,n,i,c2,s2]);rs(()=>{m===!1&&H.current.isPositioned&&(H.current.isPositioned=!1,p(Q=>({...Q,isPositioned:!1})))},[m]);const K=g.useRef(!1);rs(()=>(K.current=!0,()=>{K.current=!1}),[]),rs(()=>{if(P&&(E.current=P),N&&(L.current=N),P&&N){if(r2.current)return r2.current(P,N,i2);i2()}},[P,N,i2,r2,z]);const u2=g.useMemo(()=>({reference:E,floating:L,setReference:w,setFloating:R}),[w,R]),I=g.useMemo(()=>({reference:P,floating:N}),[P,N]),V=g.useMemo(()=>{const Q={position:i,left:0,top:0};if(!I.floating)return Q;const Z=Dp(I.floating,D.x),M=Dp(I.floating,D.y);return f?{...Q,transform:"translate("+Z+"px, "+M+"px)",...ig(I.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:Z,top:M}},[i,f,I.floating,D.x,D.y]);return g.useMemo(()=>({...D,update:i2,refs:u2,elements:I,floatingStyles:V}),[D,i2,u2,I,V])}const MR=t=>{function n(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:t,fn(i){const{element:a,padding:l}=typeof t=="function"?t(i):t;return a&&n(a)?a.current!=null?hp({element:a.current,padding:l}).fn(i):{}:a?hp({element:a,padding:l}).fn(i):{}}}},sg=(t,n)=>({...SR(t),options:[t,n]}),lg=(t,n)=>({...TR(t),options:[t,n]}),NR=(t,n)=>({...ER(t),options:[t,n]}),_R=(t,n)=>({...RR(t),options:[t,n]}),kR=(t,n)=>({...bR(t),options:[t,n]}),LR=(t,n)=>({...wR(t),options:[t,n]}),Ag=(t,n)=>({...MR(t),options:[t,n]});var IR="Arrow",cg=g.forwardRef((t,n)=>{const{children:i,width:a=10,height:l=5,...A}=t;return h.jsx(E2.svg,{...A,ref:n,width:a,height:l,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?i:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});cg.displayName=IR;var OR=cg,of="Popper",[ug,Is]=Oe(of),[qR,fg]=ug(of),dg=t=>{const{__scopePopper:n,children:i}=t,[a,l]=g.useState(null);return h.jsx(qR,{scope:n,anchor:a,onAnchorChange:l,children:i})};dg.displayName=of;var mg="PopperAnchor",Cg=g.forwardRef((t,n)=>{const{__scopePopper:i,virtualRef:a,...l}=t,A=fg(mg,i),u=g.useRef(null),f=o0(n,u);return g.useEffect(()=>{A.onAnchorChange((a==null?void 0:a.current)||u.current)}),a?null:h.jsx(E2.div,{...l,ref:f})});Cg.displayName=mg;var af="PopperContent",[HR,jR]=ug(af),pg=g.forwardRef((t,n)=>{var G2,y2,M2,z2,f0,N0;const{__scopePopper:i,side:a="bottom",sideOffset:l=0,align:A="center",alignOffset:u=0,arrowPadding:f=0,avoidCollisions:C=!0,collisionBoundary:m=[],collisionPadding:D=0,sticky:p="partial",hideWhenDetached:v=!1,updatePositionStrategy:B="optimized",onPlaced:y,...x}=t,S=fg(af,i),[T,w]=g.useState(null),R=o0(n,be=>w(be)),[P,N]=g.useState(null),E=zT(P),L=(E==null?void 0:E.width)??0,H=(E==null?void 0:E.height)??0,z=a+(A!=="center"?"-"+A:""),r2=typeof D=="number"?D:{top:0,right:0,bottom:0,left:0,...D},c2=Array.isArray(m)?m:[m],s2=c2.length>0,i2={padding:r2,boundary:c2.filter(zR),altBoundary:s2},{refs:K,floatingStyles:u2,placement:I,isPositioned:V,middlewareData:Q}=ag({strategy:"fixed",placement:z,whileElementsMounted:(...be)=>FR(...be,{animationFrame:B==="always"}),elements:{reference:S.anchor},middleware:[sg({mainAxis:l+H,alignmentAxis:u}),C&&lg({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?NR():void 0,...i2}),C&&_R({...i2}),kR({...i2,apply:({elements:be,rects:W0,availableWidth:zn,availableHeight:Wn})=>{const{width:q0,height:Gn}=W0.reference,et=be.floating.style;et.setProperty("--radix-popper-available-width",`${zn}px`),et.setProperty("--radix-popper-available-height",`${Wn}px`),et.setProperty("--radix-popper-anchor-width",`${q0}px`),et.setProperty("--radix-popper-anchor-height",`${Gn}px`)}}),P&&Ag({element:P,padding:f}),WR({arrowWidth:L,arrowHeight:H}),v&&LR({strategy:"referenceHidden",...i2})]}),[Z,M]=gg(I),X=I0(y);Fe(()=>{V&&(X==null||X())},[V,X]);const e2=(G2=Q.arrow)==null?void 0:G2.x,o2=(y2=Q.arrow)==null?void 0:y2.y,f2=((M2=Q.arrow)==null?void 0:M2.centerOffset)!==0,[x2,p2]=g.useState();return Fe(()=>{T&&p2(window.getComputedStyle(T).zIndex)},[T]),h.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...u2,transform:V?u2.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:x2,"--radix-popper-transform-origin":[(z2=Q.transformOrigin)==null?void 0:z2.x,(f0=Q.transformOrigin)==null?void 0:f0.y].join(" "),...((N0=Q.hide)==null?void 0:N0.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(HR,{scope:i,placedSide:Z,onArrowChange:N,arrowX:e2,arrowY:o2,shouldHideArrow:f2,children:h.jsx(E2.div,{"data-side":Z,"data-align":M,...x,ref:R,style:{...x.style,animation:V?void 0:"none"}})})})});pg.displayName=af;var hg="PopperArrow",UR={top:"bottom",right:"left",bottom:"top",left:"right"},Dg=g.forwardRef(function(n,i){const{__scopePopper:a,...l}=n,A=jR(hg,a),u=UR[A.placedSide];return h.jsx("span",{ref:A.onArrowChange,style:{position:"absolute",left:A.arrowX,top:A.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[A.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[A.placedSide],visibility:A.shouldHideArrow?"hidden":void 0},children:h.jsx(OR,{...l,ref:i,style:{...l.style,display:"block"}})})});Dg.displayName=hg;function zR(t){return t!==null}var WR=t=>({name:"transformOrigin",options:t,fn(n){var S,T,w;const{placement:i,rects:a,middlewareData:l}=n,u=((S=l.arrow)==null?void 0:S.centerOffset)!==0,f=u?0:t.arrowWidth,C=u?0:t.arrowHeight,[m,D]=gg(i),p={start:"0%",center:"50%",end:"100%"}[D],v=(((T=l.arrow)==null?void 0:T.x)??0)+f/2,B=(((w=l.arrow)==null?void 0:w.y)??0)+C/2;let y="",x="";return m==="bottom"?(y=u?p:`${v}px`,x=`${-C}px`):m==="top"?(y=u?p:`${v}px`,x=`${a.floating.height+C}px`):m==="right"?(y=`${-C}px`,x=u?p:`${B}px`):m==="left"&&(y=`${a.floating.width+C}px`,x=u?p:`${B}px`),{data:{x:y,y:x}}}});function gg(t){const[n,i="center"]=t.split("-");return[n,i]}var vg=dg,sf=Cg,Bg=pg,yg=Dg,Sc="rovingFocusGroup.onEntryFocus",GR={bubbles:!1,cancelable:!0},Ci="RovingFocusGroup",[iu,xg,VR]=di(Ci),[YR,Os]=Oe(Ci,[VR]),[$R,ZR]=YR(Ci),Fg=g.forwardRef((t,n)=>h.jsx(iu.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(iu.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(KR,{...t,ref:n})})}));Fg.displayName=Ci;var KR=g.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:i,orientation:a,loop:l=!1,dir:A,currentTabStopId:u,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:C,onEntryFocus:m,preventScrollOnEntryFocus:D=!1,...p}=t,v=g.useRef(null),B=o0(n,v),y=fi(A),[x,S]=Qe({prop:u,defaultProp:f??null,onChange:C,caller:Ci}),[T,w]=g.useState(!1),R=I0(m),P=xg(i),N=g.useRef(!1),[E,L]=g.useState(0);return g.useEffect(()=>{const H=v.current;if(H)return H.addEventListener(Sc,R),()=>H.removeEventListener(Sc,R)},[R]),h.jsx($R,{scope:i,orientation:a,dir:y,loop:l,currentTabStopId:x,onItemFocus:g.useCallback(H=>S(H),[S]),onItemShiftTab:g.useCallback(()=>w(!0),[]),onFocusableItemAdd:g.useCallback(()=>L(H=>H+1),[]),onFocusableItemRemove:g.useCallback(()=>L(H=>H-1),[]),children:h.jsx(E2.div,{tabIndex:T||E===0?-1:0,"data-orientation":a,...p,ref:B,style:{outline:"none",...t.style},onMouseDown:C2(t.onMouseDown,()=>{N.current=!0}),onFocus:C2(t.onFocus,H=>{const z=!N.current;if(H.target===H.currentTarget&&z&&!T){const r2=new CustomEvent(Sc,GR);if(H.currentTarget.dispatchEvent(r2),!r2.defaultPrevented){const c2=P().filter(I=>I.focusable),s2=c2.find(I=>I.active),i2=c2.find(I=>I.id===x),u2=[s2,i2,...c2].filter(Boolean).map(I=>I.ref.current);Rg(u2,D)}}N.current=!1}),onBlur:C2(t.onBlur,()=>w(!1))})})}),Sg="RovingFocusGroupItem",Tg=g.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:i,focusable:a=!0,active:l=!1,tabStopId:A,children:u,...f}=t,C=Be(),m=A||C,D=ZR(Sg,i),p=D.currentTabStopId===m,v=xg(i),{onFocusableItemAdd:B,onFocusableItemRemove:y,currentTabStopId:x}=D;return g.useEffect(()=>{if(a)return B(),()=>y()},[a,B,y]),h.jsx(iu.ItemSlot,{scope:i,id:m,focusable:a,active:l,children:h.jsx(E2.span,{tabIndex:p?0:-1,"data-orientation":D.orientation,...f,ref:n,onMouseDown:C2(t.onMouseDown,S=>{a?D.onItemFocus(m):S.preventDefault()}),onFocus:C2(t.onFocus,()=>D.onItemFocus(m)),onKeyDown:C2(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){D.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const T=JR(S,D.orientation,D.dir);if(T!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let R=v().filter(P=>P.focusable).map(P=>P.ref.current);if(T==="last")R.reverse();else if(T==="prev"||T==="next"){T==="prev"&&R.reverse();const P=R.indexOf(S.currentTarget);R=D.loop?eb(R,P+1):R.slice(P+1)}setTimeout(()=>Rg(R))}}),children:typeof u=="function"?u({isCurrentTabStop:p,hasTabStop:x!=null}):u})})});Tg.displayName=Sg;var XR={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function QR(t,n){return n!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function JR(t,n,i){const a=QR(t.key,i);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return XR[a]}function Rg(t,n=!1){const i=document.activeElement;for(const a of t)if(a===i||(a.focus({preventScroll:n}),document.activeElement!==i))return}function eb(t,n){return t.map((i,a)=>t[(n+a)%t.length])}var bg=Fg,wg=Tg,au=["Enter"," "],tb=["ArrowDown","PageUp","Home"],Eg=["ArrowUp","PageDown","End"],rb=[...tb,...Eg],nb={ltr:[...au,"ArrowRight"],rtl:[...au,"ArrowLeft"]},ob={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pi="Menu",[ai,ib,ab]=di(pi),[Or,Pg]=Oe(pi,[ab,Is,Os]),qs=Is(),Mg=Os(),[sb,qr]=Or(pi),[lb,hi]=Or(pi),Ng=t=>{const{__scopeMenu:n,open:i=!1,children:a,dir:l,onOpenChange:A,modal:u=!0}=t,f=qs(n),[C,m]=g.useState(null),D=g.useRef(!1),p=I0(A),v=fi(l);return g.useEffect(()=>{const B=()=>{D.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>D.current=!1;return document.addEventListener("keydown",B,{capture:!0}),()=>{document.removeEventListener("keydown",B,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),h.jsx(vg,{...f,children:h.jsx(sb,{scope:n,open:i,onOpenChange:p,content:C,onContentChange:m,children:h.jsx(lb,{scope:n,onClose:g.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:D,dir:v,modal:u,children:a})})})};Ng.displayName=pi;var Ab="MenuAnchor",lf=g.forwardRef((t,n)=>{const{__scopeMenu:i,...a}=t,l=qs(i);return h.jsx(sf,{...l,...a,ref:n})});lf.displayName=Ab;var Af="MenuPortal",[cb,_g]=Or(Af,{forceMount:void 0}),kg=t=>{const{__scopeMenu:n,forceMount:i,children:a,container:l}=t,A=qr(Af,n);return h.jsx(cb,{scope:n,forceMount:i,children:h.jsx(O0,{present:i||A.open,children:h.jsx(Ts,{asChild:!0,container:l,children:a})})})};kg.displayName=Af;var ye="MenuContent",[ub,cf]=Or(ye),Lg=g.forwardRef((t,n)=>{const i=_g(ye,t.__scopeMenu),{forceMount:a=i.forceMount,...l}=t,A=qr(ye,t.__scopeMenu),u=hi(ye,t.__scopeMenu);return h.jsx(ai.Provider,{scope:t.__scopeMenu,children:h.jsx(O0,{present:a||A.open,children:h.jsx(ai.Slot,{scope:t.__scopeMenu,children:u.modal?h.jsx(fb,{...l,ref:n}):h.jsx(db,{...l,ref:n})})})})}),fb=g.forwardRef((t,n)=>{const i=qr(ye,t.__scopeMenu),a=g.useRef(null),l=o0(n,a);return g.useEffect(()=>{const A=a.current;if(A)return Eu(A)},[]),h.jsx(uf,{...t,ref:l,trapFocus:i.open,disableOutsidePointerEvents:i.open,disableOutsideScroll:!0,onFocusOutside:C2(t.onFocusOutside,A=>A.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>i.onOpenChange(!1)})}),db=g.forwardRef((t,n)=>{const i=qr(ye,t.__scopeMenu);return h.jsx(uf,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>i.onOpenChange(!1)})}),mb=Nn("MenuContent.ScrollLock"),uf=g.forwardRef((t,n)=>{const{__scopeMenu:i,loop:a=!1,trapFocus:l,onOpenAutoFocus:A,onCloseAutoFocus:u,disableOutsidePointerEvents:f,onEntryFocus:C,onEscapeKeyDown:m,onPointerDownOutside:D,onFocusOutside:p,onInteractOutside:v,onDismiss:B,disableOutsideScroll:y,...x}=t,S=qr(ye,i),T=hi(ye,i),w=qs(i),R=Mg(i),P=ib(i),[N,E]=g.useState(null),L=g.useRef(null),H=o0(n,L,S.onContentChange),z=g.useRef(0),r2=g.useRef(""),c2=g.useRef(0),s2=g.useRef(null),i2=g.useRef("right"),K=g.useRef(0),u2=y?bs:g.Fragment,I=y?{as:mb,allowPinchZoom:!0}:void 0,V=Z=>{var G2,y2;const M=r2.current+Z,X=P().filter(M2=>!M2.disabled),e2=document.activeElement,o2=(G2=X.find(M2=>M2.ref.current===e2))==null?void 0:G2.textValue,f2=X.map(M2=>M2.textValue),x2=Tb(f2,M,o2),p2=(y2=X.find(M2=>M2.textValue===x2))==null?void 0:y2.ref.current;(function M2(z2){r2.current=z2,window.clearTimeout(z.current),z2!==""&&(z.current=window.setTimeout(()=>M2(""),1e3))})(M),p2&&setTimeout(()=>p2.focus())};g.useEffect(()=>()=>window.clearTimeout(z.current),[]),wu();const Q=g.useCallback(Z=>{var X,e2;return i2.current===((X=s2.current)==null?void 0:X.side)&&bb(Z,(e2=s2.current)==null?void 0:e2.area)},[]);return h.jsx(ub,{scope:i,searchRef:r2,onItemEnter:g.useCallback(Z=>{Q(Z)&&Z.preventDefault()},[Q]),onItemLeave:g.useCallback(Z=>{var M;Q(Z)||((M=L.current)==null||M.focus(),E(null))},[Q]),onTriggerLeave:g.useCallback(Z=>{Q(Z)&&Z.preventDefault()},[Q]),pointerGraceTimerRef:c2,onPointerGraceIntentChange:g.useCallback(Z=>{s2.current=Z},[]),children:h.jsx(u2,{...I,children:h.jsx(Ss,{asChild:!0,trapped:l,onMountAutoFocus:C2(A,Z=>{var M;Z.preventDefault(),(M=L.current)==null||M.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:h.jsx(ui,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:m,onPointerDownOutside:D,onFocusOutside:p,onInteractOutside:v,onDismiss:B,children:h.jsx(bg,{asChild:!0,...R,dir:T.dir,orientation:"vertical",loop:a,currentTabStopId:N,onCurrentTabStopIdChange:E,onEntryFocus:C2(C,Z=>{T.isUsingKeyboardRef.current||Z.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(Bg,{role:"menu","aria-orientation":"vertical","data-state":Qg(S.open),"data-radix-menu-content":"",dir:T.dir,...w,...x,ref:H,style:{outline:"none",...x.style},onKeyDown:C2(x.onKeyDown,Z=>{const X=Z.target.closest("[data-radix-menu-content]")===Z.currentTarget,e2=Z.ctrlKey||Z.altKey||Z.metaKey,o2=Z.key.length===1;X&&(Z.key==="Tab"&&Z.preventDefault(),!e2&&o2&&V(Z.key));const f2=L.current;if(Z.target!==f2||!rb.includes(Z.key))return;Z.preventDefault();const p2=P().filter(G2=>!G2.disabled).map(G2=>G2.ref.current);Eg.includes(Z.key)&&p2.reverse(),Fb(p2)}),onBlur:C2(t.onBlur,Z=>{Z.currentTarget.contains(Z.target)||(window.clearTimeout(z.current),r2.current="")}),onPointerMove:C2(t.onPointerMove,si(Z=>{const M=Z.target,X=K.current!==Z.clientX;if(Z.currentTarget.contains(M)&&X){const e2=Z.clientX>K.current?"right":"left";i2.current=e2,K.current=Z.clientX}}))})})})})})})});Lg.displayName=ye;var Cb="MenuGroup",ff=g.forwardRef((t,n)=>{const{__scopeMenu:i,...a}=t;return h.jsx(E2.div,{role:"group",...a,ref:n})});ff.displayName=Cb;var pb="MenuLabel",Ig=g.forwardRef((t,n)=>{const{__scopeMenu:i,...a}=t;return h.jsx(E2.div,{...a,ref:n})});Ig.displayName=pb;var hs="MenuItem",gp="menu.itemSelect",Hs=g.forwardRef((t,n)=>{const{disabled:i=!1,onSelect:a,...l}=t,A=g.useRef(null),u=hi(hs,t.__scopeMenu),f=cf(hs,t.__scopeMenu),C=o0(n,A),m=g.useRef(!1),D=()=>{const p=A.current;if(!i&&p){const v=new CustomEvent(gp,{bubbles:!0,cancelable:!0});p.addEventListener(gp,B=>a==null?void 0:a(B),{once:!0}),ss(p,v),v.defaultPrevented?m.current=!1:u.onClose()}};return h.jsx(Og,{...l,ref:C,disabled:i,onClick:C2(t.onClick,D),onPointerDown:p=>{var v;(v=t.onPointerDown)==null||v.call(t,p),m.current=!0},onPointerUp:C2(t.onPointerUp,p=>{var v;m.current||(v=p.currentTarget)==null||v.click()}),onKeyDown:C2(t.onKeyDown,p=>{const v=f.searchRef.current!=="";i||v&&p.key===" "||au.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Hs.displayName=hs;var Og=g.forwardRef((t,n)=>{const{__scopeMenu:i,disabled:a=!1,textValue:l,...A}=t,u=cf(hs,i),f=Mg(i),C=g.useRef(null),m=o0(n,C),[D,p]=g.useState(!1),[v,B]=g.useState("");return g.useEffect(()=>{const y=C.current;y&&B((y.textContent??"").trim())},[A.children]),h.jsx(ai.ItemSlot,{scope:i,disabled:a,textValue:l??v,children:h.jsx(wg,{asChild:!0,...f,focusable:!a,children:h.jsx(E2.div,{role:"menuitem","data-highlighted":D?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...A,ref:m,onPointerMove:C2(t.onPointerMove,si(y=>{a?u.onItemLeave(y):(u.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:C2(t.onPointerLeave,si(y=>u.onItemLeave(y))),onFocus:C2(t.onFocus,()=>p(!0)),onBlur:C2(t.onBlur,()=>p(!1))})})})}),hb="MenuCheckboxItem",qg=g.forwardRef((t,n)=>{const{checked:i=!1,onCheckedChange:a,...l}=t;return h.jsx(Wg,{scope:t.__scopeMenu,checked:i,children:h.jsx(Hs,{role:"menuitemcheckbox","aria-checked":Ds(i)?"mixed":i,...l,ref:n,"data-state":mf(i),onSelect:C2(l.onSelect,()=>a==null?void 0:a(Ds(i)?!0:!i),{checkForDefaultPrevented:!1})})})});qg.displayName=hb;var Hg="MenuRadioGroup",[Db,gb]=Or(Hg,{value:void 0,onValueChange:()=>{}}),jg=g.forwardRef((t,n)=>{const{value:i,onValueChange:a,...l}=t,A=I0(a);return h.jsx(Db,{scope:t.__scopeMenu,value:i,onValueChange:A,children:h.jsx(ff,{...l,ref:n})})});jg.displayName=Hg;var Ug="MenuRadioItem",zg=g.forwardRef((t,n)=>{const{value:i,...a}=t,l=gb(Ug,t.__scopeMenu),A=i===l.value;return h.jsx(Wg,{scope:t.__scopeMenu,checked:A,children:h.jsx(Hs,{role:"menuitemradio","aria-checked":A,...a,ref:n,"data-state":mf(A),onSelect:C2(a.onSelect,()=>{var u;return(u=l.onValueChange)==null?void 0:u.call(l,i)},{checkForDefaultPrevented:!1})})})});zg.displayName=Ug;var df="MenuItemIndicator",[Wg,vb]=Or(df,{checked:!1}),Gg=g.forwardRef((t,n)=>{const{__scopeMenu:i,forceMount:a,...l}=t,A=vb(df,i);return h.jsx(O0,{present:a||Ds(A.checked)||A.checked===!0,children:h.jsx(E2.span,{...l,ref:n,"data-state":mf(A.checked)})})});Gg.displayName=df;var Bb="MenuSeparator",Vg=g.forwardRef((t,n)=>{const{__scopeMenu:i,...a}=t;return h.jsx(E2.div,{role:"separator","aria-orientation":"horizontal",...a,ref:n})});Vg.displayName=Bb;var yb="MenuArrow",Yg=g.forwardRef((t,n)=>{const{__scopeMenu:i,...a}=t,l=qs(i);return h.jsx(yg,{...l,...a,ref:n})});Yg.displayName=yb;var xb="MenuSub",[bN,$g]=Or(xb),Jo="MenuSubTrigger",Zg=g.forwardRef((t,n)=>{const i=qr(Jo,t.__scopeMenu),a=hi(Jo,t.__scopeMenu),l=$g(Jo,t.__scopeMenu),A=cf(Jo,t.__scopeMenu),u=g.useRef(null),{pointerGraceTimerRef:f,onPointerGraceIntentChange:C}=A,m={__scopeMenu:t.__scopeMenu},D=g.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return g.useEffect(()=>D,[D]),g.useEffect(()=>{const p=f.current;return()=>{window.clearTimeout(p),C(null)}},[f,C]),h.jsx(lf,{asChild:!0,...m,children:h.jsx(Og,{id:l.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":l.contentId,"data-state":Qg(i.open),...t,ref:ci(n,l.onTriggerChange),onClick:p=>{var v;(v=t.onClick)==null||v.call(t,p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),i.open||i.onOpenChange(!0))},onPointerMove:C2(t.onPointerMove,si(p=>{A.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!i.open&&!u.current&&(A.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{i.onOpenChange(!0),D()},100))})),onPointerLeave:C2(t.onPointerLeave,si(p=>{var B,y;D();const v=(B=i.content)==null?void 0:B.getBoundingClientRect();if(v){const x=(y=i.content)==null?void 0:y.dataset.side,S=x==="right",T=S?-5:5,w=v[S?"left":"right"],R=v[S?"right":"left"];A.onPointerGraceIntentChange({area:[{x:p.clientX+T,y:p.clientY},{x:w,y:v.top},{x:R,y:v.top},{x:R,y:v.bottom},{x:w,y:v.bottom}],side:x}),window.clearTimeout(f.current),f.current=window.setTimeout(()=>A.onPointerGraceIntentChange(null),300)}else{if(A.onTriggerLeave(p),p.defaultPrevented)return;A.onPointerGraceIntentChange(null)}})),onKeyDown:C2(t.onKeyDown,p=>{var B;const v=A.searchRef.current!=="";t.disabled||v&&p.key===" "||nb[a.dir].includes(p.key)&&(i.onOpenChange(!0),(B=i.content)==null||B.focus(),p.preventDefault())})})})});Zg.displayName=Jo;var Kg="MenuSubContent",Xg=g.forwardRef((t,n)=>{const i=_g(ye,t.__scopeMenu),{forceMount:a=i.forceMount,...l}=t,A=qr(ye,t.__scopeMenu),u=hi(ye,t.__scopeMenu),f=$g(Kg,t.__scopeMenu),C=g.useRef(null),m=o0(n,C);return h.jsx(ai.Provider,{scope:t.__scopeMenu,children:h.jsx(O0,{present:a||A.open,children:h.jsx(ai.Slot,{scope:t.__scopeMenu,children:h.jsx(uf,{id:f.contentId,"aria-labelledby":f.triggerId,...l,ref:m,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:D=>{var p;u.isUsingKeyboardRef.current&&((p=C.current)==null||p.focus()),D.preventDefault()},onCloseAutoFocus:D=>D.preventDefault(),onFocusOutside:C2(t.onFocusOutside,D=>{D.target!==f.trigger&&A.onOpenChange(!1)}),onEscapeKeyDown:C2(t.onEscapeKeyDown,D=>{u.onClose(),D.preventDefault()}),onKeyDown:C2(t.onKeyDown,D=>{var B;const p=D.currentTarget.contains(D.target),v=ob[u.dir].includes(D.key);p&&v&&(A.onOpenChange(!1),(B=f.trigger)==null||B.focus(),D.preventDefault())})})})})})});Xg.displayName=Kg;function Qg(t){return t?"open":"closed"}function Ds(t){return t==="indeterminate"}function mf(t){return Ds(t)?"indeterminate":t?"checked":"unchecked"}function Fb(t){const n=document.activeElement;for(const i of t)if(i===n||(i.focus(),document.activeElement!==n))return}function Sb(t,n){return t.map((i,a)=>t[(n+a)%t.length])}function Tb(t,n,i){const l=n.length>1&&Array.from(n).every(m=>m===n[0])?n[0]:n,A=i?t.indexOf(i):-1;let u=Sb(t,Math.max(A,0));l.length===1&&(u=u.filter(m=>m!==i));const C=u.find(m=>m.toLowerCase().startsWith(l.toLowerCase()));return C!==i?C:void 0}function Rb(t,n){const{x:i,y:a}=t;let l=!1;for(let A=0,u=n.length-1;A<n.length;u=A++){const f=n[A],C=n[u],m=f.x,D=f.y,p=C.x,v=C.y;D>a!=v>a&&i<(p-m)*(a-D)/(v-D)+m&&(l=!l)}return l}function bb(t,n){if(!n)return!1;const i={x:t.clientX,y:t.clientY};return Rb(i,n)}function si(t){return n=>n.pointerType==="mouse"?t(n):void 0}var wb=Ng,Eb=lf,Pb=kg,Mb=Lg,Nb=ff,_b=Ig,kb=Hs,Lb=qg,Ib=jg,Ob=zg,qb=Gg,Hb=Vg,jb=Yg,Ub=Zg,zb=Xg,js="DropdownMenu",[Wb,wN]=Oe(js,[Pg]),z0=Pg(),[Gb,Jg]=Wb(js),e7=t=>{const{__scopeDropdownMenu:n,children:i,dir:a,open:l,defaultOpen:A,onOpenChange:u,modal:f=!0}=t,C=z0(n),m=g.useRef(null),[D,p]=Qe({prop:l,defaultProp:A??!1,onChange:u,caller:js});return h.jsx(Gb,{scope:n,triggerId:Be(),triggerRef:m,contentId:Be(),open:D,onOpenChange:p,onOpenToggle:g.useCallback(()=>p(v=>!v),[p]),modal:f,children:h.jsx(wb,{...C,open:D,onOpenChange:p,dir:a,modal:f,children:i})})};e7.displayName=js;var t7="DropdownMenuTrigger",r7=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,disabled:a=!1,...l}=t,A=Jg(t7,i),u=z0(i);return h.jsx(Eb,{asChild:!0,...u,children:h.jsx(E2.button,{type:"button",id:A.triggerId,"aria-haspopup":"menu","aria-expanded":A.open,"aria-controls":A.open?A.contentId:void 0,"data-state":A.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...l,ref:ci(n,A.triggerRef),onPointerDown:C2(t.onPointerDown,f=>{!a&&f.button===0&&f.ctrlKey===!1&&(A.onOpenToggle(),A.open||f.preventDefault())}),onKeyDown:C2(t.onKeyDown,f=>{a||(["Enter"," "].includes(f.key)&&A.onOpenToggle(),f.key==="ArrowDown"&&A.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(f.key)&&f.preventDefault())})})})});r7.displayName=t7;var Vb="DropdownMenuPortal",n7=t=>{const{__scopeDropdownMenu:n,...i}=t,a=z0(n);return h.jsx(Pb,{...a,...i})};n7.displayName=Vb;var o7="DropdownMenuContent",i7=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=Jg(o7,i),A=z0(i),u=g.useRef(!1);return h.jsx(Mb,{id:l.contentId,"aria-labelledby":l.triggerId,...A,...a,ref:n,onCloseAutoFocus:C2(t.onCloseAutoFocus,f=>{var C;u.current||(C=l.triggerRef.current)==null||C.focus(),u.current=!1,f.preventDefault()}),onInteractOutside:C2(t.onInteractOutside,f=>{const C=f.detail.originalEvent,m=C.button===0&&C.ctrlKey===!0,D=C.button===2||m;(!l.modal||D)&&(u.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});i7.displayName=o7;var Yb="DropdownMenuGroup",$b=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return h.jsx(Nb,{...l,...a,ref:n})});$b.displayName=Yb;var Zb="DropdownMenuLabel",Kb=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return h.jsx(_b,{...l,...a,ref:n})});Kb.displayName=Zb;var Xb="DropdownMenuItem",a7=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return h.jsx(kb,{...l,...a,ref:n})});a7.displayName=Xb;var Qb="DropdownMenuCheckboxItem",Jb=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return h.jsx(Lb,{...l,...a,ref:n})});Jb.displayName=Qb;var ew="DropdownMenuRadioGroup",tw=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return h.jsx(Ib,{...l,...a,ref:n})});tw.displayName=ew;var rw="DropdownMenuRadioItem",nw=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return h.jsx(Ob,{...l,...a,ref:n})});nw.displayName=rw;var ow="DropdownMenuItemIndicator",iw=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return h.jsx(qb,{...l,...a,ref:n})});iw.displayName=ow;var aw="DropdownMenuSeparator",sw=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return h.jsx(Hb,{...l,...a,ref:n})});sw.displayName=aw;var lw="DropdownMenuArrow",Aw=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return h.jsx(jb,{...l,...a,ref:n})});Aw.displayName=lw;var cw="DropdownMenuSubTrigger",uw=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return h.jsx(Ub,{...l,...a,ref:n})});uw.displayName=cw;var fw="DropdownMenuSubContent",dw=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return h.jsx(zb,{...l,...a,ref:n,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});dw.displayName=fw;var mw=e7,Cw=r7,pw=n7,hw=i7,Dw=a7,Us="Popover",[s7,EN]=Oe(Us,[Is]),Di=Is(),[gw,or]=s7(Us),l7=t=>{const{__scopePopover:n,children:i,open:a,defaultOpen:l,onOpenChange:A,modal:u=!1}=t,f=Di(n),C=g.useRef(null),[m,D]=g.useState(!1),[p,v]=Qe({prop:a,defaultProp:l??!1,onChange:A,caller:Us});return h.jsx(vg,{...f,children:h.jsx(gw,{scope:n,contentId:Be(),triggerRef:C,open:p,onOpenChange:v,onOpenToggle:g.useCallback(()=>v(B=>!B),[v]),hasCustomAnchor:m,onCustomAnchorAdd:g.useCallback(()=>D(!0),[]),onCustomAnchorRemove:g.useCallback(()=>D(!1),[]),modal:u,children:i})})};l7.displayName=Us;var A7="PopoverAnchor",vw=g.forwardRef((t,n)=>{const{__scopePopover:i,...a}=t,l=or(A7,i),A=Di(i),{onCustomAnchorAdd:u,onCustomAnchorRemove:f}=l;return g.useEffect(()=>(u(),()=>f()),[u,f]),h.jsx(sf,{...A,...a,ref:n})});vw.displayName=A7;var c7="PopoverTrigger",u7=g.forwardRef((t,n)=>{const{__scopePopover:i,...a}=t,l=or(c7,i),A=Di(i),u=o0(n,l.triggerRef),f=h.jsx(E2.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":p7(l.open),...a,ref:u,onClick:C2(t.onClick,l.onOpenToggle)});return l.hasCustomAnchor?f:h.jsx(sf,{asChild:!0,...A,children:f})});u7.displayName=c7;var Cf="PopoverPortal",[Bw,yw]=s7(Cf,{forceMount:void 0}),f7=t=>{const{__scopePopover:n,forceMount:i,children:a,container:l}=t,A=or(Cf,n);return h.jsx(Bw,{scope:n,forceMount:i,children:h.jsx(O0,{present:i||A.open,children:h.jsx(Ts,{asChild:!0,container:l,children:a})})})};f7.displayName=Cf;var Ln="PopoverContent",d7=g.forwardRef((t,n)=>{const i=yw(Ln,t.__scopePopover),{forceMount:a=i.forceMount,...l}=t,A=or(Ln,t.__scopePopover);return h.jsx(O0,{present:a||A.open,children:A.modal?h.jsx(Fw,{...l,ref:n}):h.jsx(Sw,{...l,ref:n})})});d7.displayName=Ln;var xw=Nn("PopoverContent.RemoveScroll"),Fw=g.forwardRef((t,n)=>{const i=or(Ln,t.__scopePopover),a=g.useRef(null),l=o0(n,a),A=g.useRef(!1);return g.useEffect(()=>{const u=a.current;if(u)return Eu(u)},[]),h.jsx(bs,{as:xw,allowPinchZoom:!0,children:h.jsx(m7,{...t,ref:l,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:C2(t.onCloseAutoFocus,u=>{var f;u.preventDefault(),A.current||(f=i.triggerRef.current)==null||f.focus()}),onPointerDownOutside:C2(t.onPointerDownOutside,u=>{const f=u.detail.originalEvent,C=f.button===0&&f.ctrlKey===!0,m=f.button===2||C;A.current=m},{checkForDefaultPrevented:!1}),onFocusOutside:C2(t.onFocusOutside,u=>u.preventDefault(),{checkForDefaultPrevented:!1})})})}),Sw=g.forwardRef((t,n)=>{const i=or(Ln,t.__scopePopover),a=g.useRef(!1),l=g.useRef(!1);return h.jsx(m7,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:A=>{var u,f;(u=t.onCloseAutoFocus)==null||u.call(t,A),A.defaultPrevented||(a.current||(f=i.triggerRef.current)==null||f.focus(),A.preventDefault()),a.current=!1,l.current=!1},onInteractOutside:A=>{var C,m;(C=t.onInteractOutside)==null||C.call(t,A),A.defaultPrevented||(a.current=!0,A.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const u=A.target;((m=i.triggerRef.current)==null?void 0:m.contains(u))&&A.preventDefault(),A.detail.originalEvent.type==="focusin"&&l.current&&A.preventDefault()}})}),m7=g.forwardRef((t,n)=>{const{__scopePopover:i,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:A,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:C,onFocusOutside:m,onInteractOutside:D,...p}=t,v=or(Ln,i),B=Di(i);return wu(),h.jsx(Ss,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:l,onUnmountAutoFocus:A,children:h.jsx(ui,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:D,onEscapeKeyDown:f,onPointerDownOutside:C,onFocusOutside:m,onDismiss:()=>v.onOpenChange(!1),children:h.jsx(Bg,{"data-state":p7(v.open),role:"dialog",id:v.contentId,...B,...p,ref:n,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),C7="PopoverClose",Tw=g.forwardRef((t,n)=>{const{__scopePopover:i,...a}=t,l=or(C7,i);return h.jsx(E2.button,{type:"button",...a,ref:n,onClick:C2(t.onClick,()=>l.onOpenChange(!1))})});Tw.displayName=C7;var Rw="PopoverArrow",bw=g.forwardRef((t,n)=>{const{__scopePopover:i,...a}=t,l=Di(i);return h.jsx(yg,{...l,...a,ref:n})});bw.displayName=Rw;function p7(t){return t?"open":"closed"}var ww=l7,Ew=u7,Pw=f7,Mw=d7,zs="Tabs",[Nw,PN]=Oe(zs,[Os]),h7=Os(),[_w,pf]=Nw(zs),D7=g.forwardRef((t,n)=>{const{__scopeTabs:i,value:a,onValueChange:l,defaultValue:A,orientation:u="horizontal",dir:f,activationMode:C="automatic",...m}=t,D=fi(f),[p,v]=Qe({prop:a,onChange:l,defaultProp:A??"",caller:zs});return h.jsx(_w,{scope:i,baseId:Be(),value:p,onValueChange:v,orientation:u,dir:D,activationMode:C,children:h.jsx(E2.div,{dir:D,"data-orientation":u,...m,ref:n})})});D7.displayName=zs;var g7="TabsList",v7=g.forwardRef((t,n)=>{const{__scopeTabs:i,loop:a=!0,...l}=t,A=pf(g7,i),u=h7(i);return h.jsx(bg,{asChild:!0,...u,orientation:A.orientation,dir:A.dir,loop:a,children:h.jsx(E2.div,{role:"tablist","aria-orientation":A.orientation,...l,ref:n})})});v7.displayName=g7;var B7="TabsTrigger",y7=g.forwardRef((t,n)=>{const{__scopeTabs:i,value:a,disabled:l=!1,...A}=t,u=pf(B7,i),f=h7(i),C=S7(u.baseId,a),m=T7(u.baseId,a),D=a===u.value;return h.jsx(wg,{asChild:!0,...f,focusable:!l,active:D,children:h.jsx(E2.button,{type:"button",role:"tab","aria-selected":D,"aria-controls":m,"data-state":D?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:C,...A,ref:n,onMouseDown:C2(t.onMouseDown,p=>{!l&&p.button===0&&p.ctrlKey===!1?u.onValueChange(a):p.preventDefault()}),onKeyDown:C2(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&u.onValueChange(a)}),onFocus:C2(t.onFocus,()=>{const p=u.activationMode!=="manual";!D&&!l&&p&&u.onValueChange(a)})})})});y7.displayName=B7;var x7="TabsContent",F7=g.forwardRef((t,n)=>{const{__scopeTabs:i,value:a,forceMount:l,children:A,...u}=t,f=pf(x7,i),C=S7(f.baseId,a),m=T7(f.baseId,a),D=a===f.value,p=g.useRef(D);return g.useEffect(()=>{const v=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(v)},[]),h.jsx(O0,{present:l||D,children:({present:v})=>h.jsx(E2.div,{"data-state":D?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":C,hidden:!v,id:m,tabIndex:0,...u,ref:n,style:{...t.style,animationDuration:p.current?"0s":void 0},children:v&&A})})});F7.displayName=x7;function S7(t,n){return`${t}-trigger-${n}`}function T7(t,n){return`${t}-content-${n}`}var kw=D7,Lw=v7,Iw=y7,Ow=F7,qw="vocs_AiCtaDropdown",vp="vocs_AiCtaDropdown_buttonLeft vocs_AiCtaDropdown_button vocs_Button_button",Hw="vocs_AiCtaDropdown_buttonRight vocs_AiCtaDropdown_button vocs_Button_button",jw="vocs_AiCtaDropdown_dropdownMenuContent",Uw="vocs_AiCtaDropdown_dropdownMenuItem",Tc="vocs_Button_button",MN="vocs_Button_button_accent";function R7(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"Check"}),h.jsx("path",{d:"M7.49991 0.877045C3.84222 0.877045 0.877075 3.84219 0.877075 7.49988C0.877075 11.1575 3.84222 14.1227 7.49991 14.1227C11.1576 14.1227 14.1227 11.1575 14.1227 7.49988C14.1227 3.84219 11.1576 0.877045 7.49991 0.877045ZM1.82708 7.49988C1.82708 4.36686 4.36689 1.82704 7.49991 1.82704C10.6329 1.82704 13.1727 4.36686 13.1727 7.49988C13.1727 10.6329 10.6329 13.1727 7.49991 13.1727C4.36689 13.1727 1.82708 10.6329 1.82708 7.49988ZM10.1589 5.53774C10.3178 5.31191 10.2636 5.00001 10.0378 4.84109C9.81194 4.68217 9.50004 4.73642 9.34112 4.96225L6.51977 8.97154L5.35681 7.78706C5.16334 7.59002 4.84677 7.58711 4.64973 7.78058C4.45268 7.97404 4.44978 8.29061 4.64325 8.48765L6.22658 10.1003C6.33054 10.2062 6.47617 10.2604 6.62407 10.2483C6.77197 10.2363 6.90686 10.1591 6.99226 10.0377L10.1589 5.53774Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function b7(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"Chevron Down"}),h.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function w7(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"Copy"}),h.jsx("path",{d:"M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function zw(){return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",children:[h.jsx("title",{children:"OpenAI"}),h.jsx("path",{fill:"currentColor",d:"M22.282 9.821a6 6 0 0 0-.516-4.91a6.05 6.05 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a6 6 0 0 0-3.998 2.9a6.05 6.05 0 0 0 .743 7.097a5.98 5.98 0 0 0 .51 4.911a6.05 6.05 0 0 0 6.515 2.9A6 6 0 0 0 13.26 24a6.06 6.06 0 0 0 5.772-4.206a6 6 0 0 0 3.997-2.9a6.06 6.06 0 0 0-.747-7.073M13.26 22.43a4.48 4.48 0 0 1-2.876-1.04l.141-.081l4.779-2.758a.8.8 0 0 0 .392-.681v-6.737l2.02 1.168a.07.07 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494M3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085l4.783 2.759a.77.77 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646M2.34 7.896a4.5 4.5 0 0 1 2.366-1.973V11.6a.77.77 0 0 0 .388.677l5.815 3.354l-2.02 1.168a.08.08 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.872zm16.597 3.855l-5.833-3.387L15.119 7.2a.08.08 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667m2.01-3.023l-.141-.085l-4.774-2.782a.78.78 0 0 0-.785 0L9.409 9.23V6.897a.07.07 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.8.8 0 0 0-.393.681zm1.097-2.365l2.602-1.5l2.607 1.5v2.999l-2.597 1.5l-2.607-1.5Z"})]})}function Ww(){const{content:t}=rr(),{aiCta:n}=C0(),i=i0(),[a,l]=g.useState(!1);g.useEffect(()=>{if(!a)return;const f=setTimeout(()=>l(!1),1e3);return()=>clearTimeout(f)},[a]);const A=g.useCallback(()=>{l(!0),navigator.clipboard.writeText(t??"")},[t]),u=g.useMemo(()=>{const f=window.location.origin+i.pathname;return typeof n=="object"?n.query({location:f}):`Please research and analyze this page: ${f} so I can ask you questions about it. Once you have read it, prompt me with any questions I have. Do not post content from the page in your response. Any of my follow up questions must reference the site I gave you.`},[n,i.pathname]);return h.jsxs("div",{className:qw,children:[a?h.jsxs("div",{className:l2(Tc,vp),children:[h.jsx("div",{style:{width:"14px",height:"14px"},children:h.jsx(R7,{})}),"Copied"]}):h.jsxs(xe,{className:l2(Tc,vp),href:`https://chatgpt.com?hints=search&q=${encodeURIComponent(u)}`,variant:"styleless",children:[h.jsx("div",{style:{width:"14px",height:"14px"},children:h.jsx(zw,{})}),"Ask in ChatGPT"]}),h.jsxs(mw,{children:[h.jsx(Cw,{asChild:!0,children:h.jsx("button",{className:l2(Tc,Hw),type:"button",children:h.jsx("div",{style:{width:"14px",height:"14px"},children:h.jsx(b7,{})})})}),h.jsx(pw,{children:h.jsx(hw,{align:"end",className:jw,sideOffset:4,children:h.jsxs(Dw,{className:Uw,onClick:A,children:[h.jsx("div",{style:{width:"14px",height:"14px"},children:h.jsx(w7,{})}),"Copy page for LLMs"]})})})]})]})}var Gw="vocs_Outline",Vw="vocs_Outline_nav",Yw="vocs_Outline_heading",$w="vocs_Outline_items",Zw="vocs_Outline_item",Kw="vocs_Outline_link";function E7({minLevel:t=2,maxLevel:n=3,highlightActive:i=!0,onClickItem:a,showTitle:l=!0}={}){const{outlineFooter:A}=C0(),{showOutline:u,showAiCta:f}=nr(),C=typeof u=="number"?t+u-1:n,m=g.useRef(!0),{pathname:D,hash:p}=i0(),[v,B]=g.useState([]);g.useEffect(()=>{if(typeof window>"u")return;const w=Array.from(document.querySelectorAll(`.${Dh}`));B(w)},[D]);const y=g.useMemo(()=>v?v.map(w=>{const R=w.querySelector(`.${gh}`);if(!R)return null;const P=R.getBoundingClientRect(),N=R.id,E=Number(w.tagName[1]),L=w.textContent,H=window.scrollY+P.top;return E<t||E>C?null:{id:N,level:E,slugTargetElement:R,text:L,topOffset:H}}).filter(Boolean):[],[v,C,t]),[x,S]=g.useState(p.replace("#",""));if(g.useEffect(()=>{if(typeof window>"u")return;const w=new IntersectionObserver(([R])=>{var N;if(!m.current)return;const P=R.target.id;if(R.isIntersecting)S(P);else{if(!(R.target.getBoundingClientRect().top>0))return;const H=y.findIndex(r2=>r2.id===x),z=(N=y[H-1])==null?void 0:N.id;S(z)}},{rootMargin:"0px 0px -95% 0px"});for(const R of y)w.observe(R.slugTargetElement);return()=>w.disconnect()},[x,y]),g.useEffect(()=>{if(typeof window>"u")return;const w=new IntersectionObserver(([R])=>{var N;if(!m.current)return;const P=(N=y[y.length-1])==null?void 0:N.id;R.isIntersecting?S(P):x===P&&S(y[y.length-2].id)});return w.observe(document.querySelector("[data-bottom-observer]")),()=>w.disconnect()},[x,y]),g.useEffect(()=>{if(typeof window>"u")return;const w=UT(()=>{var R,P,N;if(m.current){if(window.scrollY===0){S((R=y[0])==null?void 0:R.id);return}if(window.scrollY+document.documentElement.clientHeight>=document.documentElement.scrollHeight){S((P=y[y.length-1])==null?void 0:P.id);return}for(let E=0;E<y.length;E++){const L=y[E];if(window.scrollY<L.topOffset){S((N=y[E-1])==null?void 0:N.id);break}}}},100);return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)},[y]),y.length===0)return null;const T=y.filter(w=>w.level===t);return h.jsxs("aside",{className:Gw,children:[f&&h.jsx(Ww,{}),h.jsxs("nav",{className:Vw,children:[l&&h.jsx("h2",{className:Yw,children:"On this page"}),h.jsx(P7,{activeId:i?x:null,items:y,onClickItem:()=>{a==null||a(),m.current=!1,setTimeout(()=>{m.current=!0},500)},levelItems:T,setActiveId:S})]}),Pr(A)]})}function P7({activeId:t,items:n,levelItems:i,onClickItem:a,setActiveId:l}){return h.jsx("ul",{className:$w,children:i.map(({id:A,level:u,text:f})=>{const C=`#${A}`,m=t===A,D=(()=>{var x;const v=n.findIndex(S=>S.id===A)+1,B=(x=n[v])==null?void 0:x.level;if(B<=u)return null;const y=[];for(let S=v;S<n.length;S++){const T=n[S];if(T.level!==B)break;y.push(T)}return y})();return h.jsxs(g.Fragment,{children:[h.jsx("li",{className:Zw,children:h.jsx(qn,{"data-active":m,to:C,onClick:()=>{a==null||a(),l(A)},className:Kw,children:f})}),D&&h.jsx(P7,{activeId:t,levelItems:D,items:n,onClickItem:a,setActiveId:l})]},A)})})}var Xw="vocs_Popover";Le.Root=ww;Le.Trigger=Ew;function Le({children:t,className:n}){return h.jsx(Pw,{children:h.jsx(Mw,{className:l2(Xw,n),sideOffset:12,children:t})})}var Qw="vocs_Sidebar",Jw="vocs_Sidebar_backLink",eE="vocs_Sidebar_divider",tE="vocs_Sidebar_navigation",rE="vocs_Sidebar_group",nE="vocs_Sidebar_logo",oE="vocs_Sidebar_logoWrapper",M7="vocs_Sidebar_section",iE="vocs_Sidebar_level",aE="vocs_Sidebar_levelCollapsed",sE="vocs_Sidebar_levelInset",lE="vocs_Sidebar_footer",AE="vocs_Sidebar_footerContent",cE="vocs_Sidebar_footerCurtain",N7="vocs_Sidebar_items",ei="vocs_Sidebar_item",Va="vocs_Sidebar_disabledItem",uE="vocs_Sidebar_sectionHeader",fE="vocs_Sidebar_sectionHeaderActive",Bp="vocs_Sidebar_sectionTitle",dE="vocs_Sidebar_sectionTitleLink",mE="vocs_Sidebar_sectionCollapse",CE="vocs_Sidebar_sectionCollapseActive";function pE(){const[t,n]=g.useState(()=>{if(!(typeof window>"u")){if(localStorage.getItem("vocs.theme")){const i=localStorage.getItem("vocs.theme");if(i)return i}return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}});return g.useEffect(()=>{t&&localStorage.setItem("vocs.theme",t),t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),{setTheme:n,theme:t,toggle(){n(i=>i==="light"?"dark":"light")}}}var hE="vocs_ThemeToggle",yp="vocs_ThemeToggle_themeToggleButton";function DE(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"Moon"}),h.jsx("path",{d:"M2.89998 0.499976C2.89998 0.279062 2.72089 0.0999756 2.49998 0.0999756C2.27906 0.0999756 2.09998 0.279062 2.09998 0.499976V1.09998H1.49998C1.27906 1.09998 1.09998 1.27906 1.09998 1.49998C1.09998 1.72089 1.27906 1.89998 1.49998 1.89998H2.09998V2.49998C2.09998 2.72089 2.27906 2.89998 2.49998 2.89998C2.72089 2.89998 2.89998 2.72089 2.89998 2.49998V1.89998H3.49998C3.72089 1.89998 3.89998 1.72089 3.89998 1.49998C3.89998 1.27906 3.72089 1.09998 3.49998 1.09998H2.89998V0.499976ZM5.89998 3.49998C5.89998 3.27906 5.72089 3.09998 5.49998 3.09998C5.27906 3.09998 5.09998 3.27906 5.09998 3.49998V4.09998H4.49998C4.27906 4.09998 4.09998 4.27906 4.09998 4.49998C4.09998 4.72089 4.27906 4.89998 4.49998 4.89998H5.09998V5.49998C5.09998 5.72089 5.27906 5.89998 5.49998 5.89998C5.72089 5.89998 5.89998 5.72089 5.89998 5.49998V4.89998H6.49998C6.72089 4.89998 6.89998 4.72089 6.89998 4.49998C6.89998 4.27906 6.72089 4.09998 6.49998 4.09998H5.89998V3.49998ZM1.89998 6.49998C1.89998 6.27906 1.72089 6.09998 1.49998 6.09998C1.27906 6.09998 1.09998 6.27906 1.09998 6.49998V7.09998H0.499976C0.279062 7.09998 0.0999756 7.27906 0.0999756 7.49998C0.0999756 7.72089 0.279062 7.89998 0.499976 7.89998H1.09998V8.49998C1.09998 8.72089 1.27906 8.89997 1.49998 8.89997C1.72089 8.89997 1.89998 8.72089 1.89998 8.49998V7.89998H2.49998C2.72089 7.89998 2.89998 7.72089 2.89998 7.49998C2.89998 7.27906 2.72089 7.09998 2.49998 7.09998H1.89998V6.49998ZM8.54406 0.98184L8.24618 0.941586C8.03275 0.917676 7.90692 1.1655 8.02936 1.34194C8.17013 1.54479 8.29981 1.75592 8.41754 1.97445C8.91878 2.90485 9.20322 3.96932 9.20322 5.10022C9.20322 8.37201 6.82247 11.0878 3.69887 11.6097C3.45736 11.65 3.20988 11.6772 2.96008 11.6906C2.74563 11.702 2.62729 11.9535 2.77721 12.1072C2.84551 12.1773 2.91535 12.2458 2.98667 12.3128L3.05883 12.3795L3.31883 12.6045L3.50684 12.7532L3.62796 12.8433L3.81491 12.9742L3.99079 13.089C4.11175 13.1651 4.23536 13.2375 4.36157 13.3059L4.62496 13.4412L4.88553 13.5607L5.18837 13.6828L5.43169 13.7686C5.56564 13.8128 5.70149 13.8529 5.83857 13.8885C5.94262 13.9155 6.04767 13.9401 6.15405 13.9622C6.27993 13.9883 6.40713 14.0109 6.53544 14.0298L6.85241 14.0685L7.11934 14.0892C7.24637 14.0965 7.37436 14.1002 7.50322 14.1002C11.1483 14.1002 14.1032 11.1453 14.1032 7.50023C14.1032 7.25044 14.0893 7.00389 14.0623 6.76131L14.0255 6.48407C13.991 6.26083 13.9453 6.04129 13.8891 5.82642C13.8213 5.56709 13.7382 5.31398 13.6409 5.06881L13.5279 4.80132L13.4507 4.63542L13.3766 4.48666C13.2178 4.17773 13.0353 3.88295 12.8312 3.60423L12.6782 3.40352L12.4793 3.16432L12.3157 2.98361L12.1961 2.85951L12.0355 2.70246L11.8134 2.50184L11.4925 2.24191L11.2483 2.06498L10.9562 1.87446L10.6346 1.68894L10.3073 1.52378L10.1938 1.47176L9.95488 1.3706L9.67791 1.2669L9.42566 1.1846L9.10075 1.09489L8.83599 1.03486L8.54406 0.98184ZM10.4032 5.30023C10.4032 4.27588 10.2002 3.29829 9.83244 2.40604C11.7623 3.28995 13.1032 5.23862 13.1032 7.50023C13.1032 10.593 10.596 13.1002 7.50322 13.1002C6.63646 13.1002 5.81597 12.9036 5.08355 12.5522C6.5419 12.0941 7.81081 11.2082 8.74322 10.0416C8.87963 10.2284 9.10028 10.3497 9.34928 10.3497C9.76349 10.3497 10.0993 10.0139 10.0993 9.59971C10.0993 9.24256 9.84965 8.94373 9.51535 8.86816C9.57741 8.75165 9.63653 8.63334 9.6926 8.51332C9.88358 8.63163 10.1088 8.69993 10.35 8.69993C11.0403 8.69993 11.6 8.14028 11.6 7.44993C11.6 6.75976 11.0406 6.20024 10.3505 6.19993C10.3853 5.90487 10.4032 5.60464 10.4032 5.30023Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function gE(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",children:[h.jsx("title",{children:"Sun"}),h.jsx("path",{d:"M7.5 0C7.77614 0 8 0.223858 8 0.5V2.5C8 2.77614 7.77614 3 7.5 3C7.22386 3 7 2.77614 7 2.5V0.5C7 0.223858 7.22386 0 7.5 0ZM2.1967 2.1967C2.39196 2.00144 2.70854 2.00144 2.90381 2.1967L4.31802 3.61091C4.51328 3.80617 4.51328 4.12276 4.31802 4.31802C4.12276 4.51328 3.80617 4.51328 3.61091 4.31802L2.1967 2.90381C2.00144 2.70854 2.00144 2.39196 2.1967 2.1967ZM0.5 7C0.223858 7 0 7.22386 0 7.5C0 7.77614 0.223858 8 0.5 8H2.5C2.77614 8 3 7.77614 3 7.5C3 7.22386 2.77614 7 2.5 7H0.5ZM2.1967 12.8033C2.00144 12.608 2.00144 12.2915 2.1967 12.0962L3.61091 10.682C3.80617 10.4867 4.12276 10.4867 4.31802 10.682C4.51328 10.8772 4.51328 11.1938 4.31802 11.3891L2.90381 12.8033C2.70854 12.9986 2.39196 12.9986 2.1967 12.8033ZM12.5 7C12.2239 7 12 7.22386 12 7.5C12 7.77614 12.2239 8 12.5 8H14.5C14.7761 8 15 7.77614 15 7.5C15 7.22386 14.7761 7 14.5 7H12.5ZM10.682 4.31802C10.4867 4.12276 10.4867 3.80617 10.682 3.61091L12.0962 2.1967C12.2915 2.00144 12.608 2.00144 12.8033 2.1967C12.9986 2.39196 12.9986 2.70854 12.8033 2.90381L11.3891 4.31802C11.1938 4.51328 10.8772 4.51328 10.682 4.31802ZM8 12.5C8 12.2239 7.77614 12 7.5 12C7.22386 12 7 12.2239 7 12.5V14.5C7 14.7761 7.22386 15 7.5 15C7.77614 15 8 14.7761 8 14.5V12.5ZM10.682 10.682C10.8772 10.4867 11.1938 10.4867 11.3891 10.682L12.8033 12.0962C12.9986 12.2915 12.9986 12.608 12.8033 12.8033C12.608 12.9986 12.2915 12.9986 12.0962 12.8033L10.682 11.3891C10.4867 11.1938 10.4867 10.8772 10.682 10.682ZM5.5 7.5C5.5 6.39543 6.39543 5.5 7.5 5.5C8.60457 5.5 9.5 6.39543 9.5 7.5C9.5 8.60457 8.60457 9.5 7.5 9.5C6.39543 9.5 5.5 8.60457 5.5 7.5ZM7.5 4.5C5.84315 4.5 4.5 5.84315 4.5 7.5C4.5 9.15685 5.84315 10.5 7.5 10.5C9.15685 10.5 10.5 9.15685 10.5 7.5C10.5 5.84315 9.15685 4.5 7.5 4.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function _7(){const{theme:t,setTheme:n}=pE();return!zu()||!t?null:h.jsxs("div",{className:hE,children:[h.jsx("button",{"data-active":t==="light",type:"button",className:yp,onClick:()=>n("light"),children:h.jsx(U0,{label:"Light Mode",icon:gE,size:"16px"})}),h.jsx("button",{"data-active":t==="dark",type:"button",className:yp,onClick:()=>n("dark"),children:h.jsx(U0,{label:"Dark Mode",icon:DE,size:"16px"})})]})}function k7(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"Chevron Right"}),h.jsx("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function L7(t){var D;const{className:n,onClickItem:i}=t,{theme:a}=C0(),{previousPath:l}=rr(),A=g.useRef(null),u=Fs(),[f,C]=g.useState("/");if(g.useEffect(()=>{typeof window>"u"||l&&C(l)},[u.key,u.backLink]),!u)return null;const m=vE(u.items);return h.jsxs("aside",{ref:A,className:l2(Qw,n),children:[h.jsxs("div",{children:[h.jsxs("div",{className:oE,children:[h.jsx("div",{className:nE,children:h.jsx(Mn,{to:"/",style:{alignItems:"center",display:"flex",height:"100%"},children:h.jsx(Lu,{})})}),h.jsx("div",{className:eE})]}),h.jsx("nav",{className:tE,children:h.jsxs("div",{className:rE,children:[u.backLink&&h.jsx("section",{className:M7,children:h.jsx("div",{className:N7,children:h.jsxs(Mn,{className:l2(ei,Jw),to:f,children:["←"," ",typeof history<"u"&&((D=history.state)!=null&&D.key)&&f!=="/"?"Back":"Home"]})})}),m.map((p,v)=>h.jsx(O7,{depth:0,item:p,onClick:i,sidebarRef:A},`${p.text}${v}`))]})})]}),h.jsxs("div",{className:lE,children:[h.jsx("div",{className:cE}),h.jsxs("div",{className:AE,children:[h.jsx(Wu,{}),a!=null&&a.colorScheme?null:h.jsx(_7,{})]})]})]},u.key)}function vE(t){const n=[];let i=0;for(const a of t){if(a.items){i=n.push(a);continue}n[i]?n[i].items.push(a):n.push({text:"",items:[a]})}return n}function I7(t,n){return t.find(i=>Er(n,i.link??"")||i.link===n?!0:i.items?I7(i.items,n):!1)}function O7(t){const{depth:n,item:i,onClick:a,sidebarRef:l}=t,A=g.useRef(null),{pathname:u}=i0(),f=gx(i.link||""),C=g.useMemo(()=>i.items?!!I7(i.items,u):!1,[i.items,u]),[m,D]=g.useState(()=>i.link&&f||!i.items||C?!1:!!i.collapsed),p=i.collapsed!==void 0&&i.items!==void 0,v=g.useCallback(x=>{"key"in x&&x.key!=="Enter"||D(S=>!S)},[]),B=g.useCallback(x=>{"key"in x&&x.key!=="Enter"||D(S=>!S)},[]),y=g.useRef(!0);return g.useEffect(()=>{!y.current||(y.current=!1,!Er(u,i.link??""))||requestAnimationFrame(()=>{var w,R,P;const S=((w=A.current)==null?void 0:w.offsetTop)??0,T=((R=l==null?void 0:l.current)==null?void 0:R.clientHeight)??0;S<T||(P=l==null?void 0:l.current)==null||P.scrollTo({top:S-100})})},[i,u,l]),i.items?h.jsxs("section",{ref:A,className:l2(M7,n===0&&i.text&&iE,n===0&&i.text&&m&&aE),children:[i.text&&h.jsxs("div",{className:uE,...p&&!i.link?{role:"button",tabIndex:0,onClick:v,onKeyDown:v}:{},children:[i.text&&(i.link?h.jsx(xe,{"data-active":!!f,onClick:x=>{a==null||a(x),v(x)},className:l2(n===0?[Bp,dE]:ei,C&&fE,i.disabled&&Va),href:i.link,variant:"styleless",children:i.text}):h.jsx("div",{className:l2(n===0?Bp:ei,i.disabled&&Va),children:i.text})),p&&h.jsx("div",{role:"button",tabIndex:0,onClick:B,onKeyDown:B,children:h.jsx(U0,{className:l2(mE,m&&CE),label:"toggle section",icon:k7,size:"16px"})})]}),!m&&h.jsx("div",{className:l2(N7,n!==0&&sE),children:i.items&&i.items.length>0&&n<5&&i.items.map((x,S)=>h.jsx(O7,{depth:n+1,item:x,onClick:a,sidebarRef:l},`${x.text}${S}`))})]}):h.jsx(h.Fragment,{children:i.link?h.jsx(xe,{ref:A,"data-active":!!f,onClick:a,className:l2(ei,i.disabled&&Va),href:i.link,variant:"styleless",children:i.text}):h.jsx("div",{className:l2(ei,i.disabled&&Va),children:i.text})})}function BE(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"Chevron Up"}),h.jsx("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function q7(){return h.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 79 48",fill:"none",children:[h.jsx("title",{children:"Menu"}),h.jsx("path",{fill:"currentColor",d:"M19.528 47.232h40.87c1.952 0 3.515-1.562 3.515-3.564a3.5 3.5 0 0 0-3.516-3.516H19.528a3.501 3.501 0 0 0-3.515 3.516c0 2.002 1.562 3.564 3.515 3.564ZM12.057 27.262h55.81a3.501 3.501 0 0 0 3.516-3.516 3.501 3.501 0 0 0-3.515-3.515h-55.81a3.501 3.501 0 0 0-3.516 3.515 3.501 3.501 0 0 0 3.515 3.516ZM4.391 7.34H75.29c2.002 0 3.515-1.563 3.515-3.516 0-2.002-1.513-3.564-3.515-3.564H4.39C2.438.26.876 1.822.876 3.824A3.501 3.501 0 0 0 4.39 7.34Z"})]})}su.Curtain=SE;function su(){const t=C0(),{showLogo:n}=nr();return h.jsxs("div",{className:TT,children:[h.jsxs("div",{className:up,children:[n&&h.jsx("div",{className:yc,children:h.jsx("div",{className:ET,children:h.jsx(Mn,{to:"/",style:{alignItems:"center",display:"flex",height:"100%"},children:h.jsx(Lu,{})})})}),t.topNav&&h.jsxs("div",{className:yc,children:[h.jsx(yE,{items:t.topNav}),h.jsx(FE,{items:t.topNav})]})]}),h.jsx("div",{className:up,children:h.jsx("div",{className:yc,style:{marginRight:"-8px"},children:h.jsx(ST,{})})})]})}function yE({items:t}){const{pathname:n}=i0(),i=Ai({pathname:n,items:t});return h.jsx(RD,{className:ZD,children:h.jsxs(bD,{children:[t.map((a,l)=>a.element?Pr(a.element):a.link?h.jsx(Es,{active:i==null?void 0:i.includes(a.id),href:a.link,children:a.text},l):h.jsxs(wD,{className:wT,children:[h.jsx(ED,{active:i==null?void 0:i.includes(a.id),children:a.text}),h.jsx(PD,{className:RT,children:h.jsx(xE,{items:a.items||[]})})]},l)),h.jsx(Ru,{})]})})}function xE({items:t}){const{pathname:n}=i0(),i=Ai({pathname:n,items:t});return h.jsx("ul",{children:t==null?void 0:t.map((a,l)=>h.jsx(Es,{active:i.includes(a.id),href:a.link,children:a.text},l))})}function FE({items:t}){const[n,i]=g.useState(!1),{showSidebar:a}=nr(),{pathname:l}=i0(),A=Ai({pathname:l,items:t}),u=t.filter(D=>D.id===A[0])[0],{basePath:f,theme:C}=C0(),m=f;return h.jsx("div",{className:l2(ZD,MT),children:h.jsxs(Le.Root,{modal:!0,open:n,onOpenChange:i,children:[h.jsx(Le.Trigger,{className:l2($D,Wa),children:a||u?h.jsxs(h.Fragment,{children:[(u==null?void 0:u.text)??"Menu",h.jsx(U0,{label:"Menu",icon:b7,size:"16px"})]}):h.jsx(U0,{label:"Menu",icon:q7,size:"16px"})}),h.jsxs(Le,{className:HT,children:[h.jsxs(vT,{type:"single",collapsible:!0,style:{display:"flex",flexDirection:"column"},children:[t.map((D,p)=>{var v;return D.element?Pr(D.element):D.link?h.jsx(xe,{"data-active":A.includes(D.id),className:Wa,href:D.link,onClick:()=>i(!1),variant:"styleless",children:D.text},p):h.jsxs(BT,{value:p.toString(),children:[h.jsx(yT,{className:l2(Wa,LT),"data-active":A.includes(D.id),style:Ie({[_T]:`url(${m}/.vocs/icons/chevron-down.svg)`,[kT]:`url(${m}/.vocs/icons/chevron-up.svg)`}),children:D.text}),h.jsx(xT,{className:NT,children:(v=D.items)==null?void 0:v.map((B,y)=>h.jsx(xe,{className:Wa,href:B.link,onClick:()=>i(!1),variant:"styleless",children:B.text},y))})]},p)}),h.jsx(Ru,{})]}),h.jsxs("div",{className:jT,children:[h.jsx(Wu,{}),C!=null&&C.colorScheme?null:h.jsx(_7,{})]})]})]})})}function SE({enableScrollToTop:t}){const{pathname:n}=i0(),{layout:i,showSidebar:a}=nr(),{frontmatter:l={}}=rr(),A=Fs(),[u,f]=g.useState(!1),[C,m]=g.useState(!1),D=g.useMemo(()=>{if(!A||i==="minimal")return;const B=H7({sidebarItems:A.items,pathname:n});return B==null?void 0:B.text},[i,n,A]),p=g.useMemo(()=>{var B;if(!(typeof window>"u"))return(B=document.querySelector(".vocs_Content h1"))==null?void 0:B.textContent},[]),v=D||l.title||p;return h.jsxs("div",{className:bT,children:[h.jsx("div",{className:Ap,children:h.jsx("div",{className:Bc,children:a?h.jsxs(Le.Root,{modal:!0,open:C,onOpenChange:m,children:[h.jsxs(Le.Trigger,{className:$D,children:[h.jsx(U0,{label:"Menu",icon:q7,size:"13px"}),h.jsx("div",{className:PT,children:v})]}),h.jsx(Le,{className:qT,children:h.jsx(L7,{onClickItem:()=>m(!1)})})]}):v})}),h.jsxs("div",{className:Ap,children:[t&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:Bc,children:h.jsxs("button",{className:cp,onClick:()=>window.scrollTo({behavior:"smooth",top:0}),type:"button",children:["Top",h.jsx(U0,{label:"Scroll to top",icon:BE,size:"16px"})]})}),h.jsx("div",{className:OT})]}),i==="docs"&&h.jsx("div",{className:Bc,children:h.jsxs(Le.Root,{modal:!0,open:u,onOpenChange:f,children:[h.jsxs(Le.Trigger,{className:cp,children:["On this page",h.jsx(U0,{label:"On this page",icon:k7,size:"16px"})]}),h.jsx(Le,{className:IT,children:h.jsx(E7,{onClickItem:()=>f(!1),showTitle:!1})})]})})]})]})}function H7({sidebarItems:t,pathname:n}){const i=n.replace(/(.+)\/$/,"$1");for(const a of t){if((a==null?void 0:a.link)===i)return a;if(a.items){const l=H7({sidebarItems:a.items,pathname:i});if(l)return l}}}var TE="vocs_SkipLink";const j7="vocs-content";function RE(){const{pathname:t}=i0();return h.jsx("a",{className:l2(TE,sD),href:`${t}#${j7}`,children:"Skip to content"})}var bE="vocs_DocsLayout",wE="vocs_DocsLayout_content",EE="vocs_DocsLayout_content_withTopNav",PE="vocs_DocsLayout_content_withSidebar",ME="vocs_DocsLayout_gutterLeft",NE="vocs_DocsLayout_gutterTop",_E="vocs_DocsLayout_gutterTop_offsetLeftGutter",kE="vocs_DocsLayout_gutterTop_sticky",LE="vocs_DocsLayout_gutterTopCurtain",IE="vocs_DocsLayout_gutterTopCurtain_hidden",OE="vocs_DocsLayout_gutterTopCurtain_withSidebar",qE="vocs_DocsLayout_gutterRight",HE="vocs_DocsLayout_gutterRight_withSidebar",jE="vocs_DocsLayout_sidebar";function lu({children:t}){var B,y;const{banner:n,font:i}=C0(),{frontmatter:a={}}=rr(),{content:l}=a,{layout:A,showOutline:u,showSidebar:f,showTopNav:C}=nr(),{ref:m,inView:D}=hh({initialInView:!0,rootMargin:"100px 0px 0px 0px"}),[p,v]=Yc("banner",!0);return h.jsxs("div",{className:bE,"data-layout":A,style:Ie({[z5]:p?n==null?void 0:n.height:void 0,[w3.default]:(B=i==null?void 0:i.default)!=null&&B.google?`${i.default.google}, ${b3.default}`:void 0,[w3.mono]:(y=i==null?void 0:i.mono)!=null&&y.google?`${i.mono.google}, ${b3.mono}`:void 0}),children:[h.jsx(RE,{}),p&&h.jsx(uF,{hide:()=>v(!1)}),f&&h.jsx("div",{className:ME,children:h.jsx(L7,{className:jE})}),C&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{ref:m,className:l2(NE,f&&_E,(A==="minimal"||A==="landing")&&kE),children:[h.jsx(Jc,{}),h.jsx(su,{})]}),h.jsxs("div",{className:l2(LE,f&&OE,(A==="minimal"||A==="landing")&&IE),children:[h.jsx(Jc.Curtain,{}),h.jsx(su.Curtain,{enableScrollToTop:!D})]})]}),u&&h.jsx("div",{className:l2(qE,f&&HE),children:h.jsx(E7,{})}),h.jsxs("div",{id:j7,className:l2(wE,f&&PE,C&&EE),style:Ie({[ic.horizontalPadding]:l==null?void 0:l.horizontalPadding,[ic.width]:l==null?void 0:l.width,[ic.verticalPadding]:l==null?void 0:l.verticalPadding}),children:[h.jsx(yh,{children:t}),h.jsx(tT,{})]}),h.jsx("div",{"data-bottom-observer":!0})]})}const Au={},U7=n0.createContext(Au);function UE(t){const n=n0.useContext(U7);return n0.useMemo(function(){return typeof t=="function"?t(n):{...n,...t}},[n,t])}function zE(t){let n;return t.disableParentContext?n=typeof t.components=="function"?t.components(Au):t.components||Au:n=UE(t.components),n0.createElement(U7.Provider,{value:n},t.children)}var Rc="vocs_Anchor",WE="vocs_Autolink";function GE(t){return t.href?h.jsx(qn,{...t,className:l2(t.className,WE),to:t.href}):null}function VE(t){const{children:n,href:i}=t,{pathname:a}=i0();return n&&typeof n=="object"&&"props"in n&&n.props["data-autolink-icon"]?h.jsx(GE,{className:l2(t.className,Rc),...t}):i!=null&&i.match(/^#/)?h.jsx("a",{className:l2(t.className,Rc),...t,href:`${a}${i}`}):h.jsx(xe,{className:l2(t.className,Rc),...t,hideExternalIcon:!0})}var z7="vocs_Callout",W7="vocs_Callout_content",G7="vocs_Callout_icon",YE="vocs_Callout_note",$E="vocs_Callout_info",ZE="vocs_Callout_warning",KE="vocs_Callout_danger",XE="vocs_Callout_tip",QE="vocs_Callout_success";const JE=Object.freeze(Object.defineProperty({__proto__:null,content:W7,danger:KE,icon:G7,info:$E,note:YE,root:z7,success:QE,tip:XE,warning:ZE},Symbol.toStringTag,{value:"Module"}));function xp(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"Exclamation"}),h.jsx("path",{d:"M8.4449 0.608765C8.0183 -0.107015 6.9817 -0.107015 6.55509 0.608766L0.161178 11.3368C-0.275824 12.07 0.252503 13 1.10608 13H13.8939C14.7475 13 15.2758 12.07 14.8388 11.3368L8.4449 0.608765ZM7.4141 1.12073C7.45288 1.05566 7.54712 1.05566 7.5859 1.12073L13.9798 11.8488C14.0196 11.9154 13.9715 12 13.8939 12H1.10608C1.02849 12 0.980454 11.9154 1.02018 11.8488L7.4141 1.12073ZM6.8269 4.48611C6.81221 4.10423 7.11783 3.78663 7.5 3.78663C7.88217 3.78663 8.18778 4.10423 8.1731 4.48612L8.01921 8.48701C8.00848 8.766 7.7792 8.98664 7.5 8.98664C7.2208 8.98664 6.99151 8.766 6.98078 8.48701L6.8269 4.48611ZM8.24989 10.476C8.24989 10.8902 7.9141 11.226 7.49989 11.226C7.08567 11.226 6.74989 10.8902 6.74989 10.476C6.74989 10.0618 7.08567 9.72599 7.49989 9.72599C7.9141 9.72599 8.24989 10.0618 8.24989 10.476Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function Fp(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"Info"}),h.jsx("path",{d:"M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function eP(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"Lightning Bolt"}),h.jsx("path",{d:"M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function tP({className:t,children:n,type:i}){return h.jsxs("aside",{className:l2(t,z7,JE[i]),children:[h.jsxs("div",{className:G7,children:[i==="note"&&h.jsx(Fp,{}),i==="info"&&h.jsx(Fp,{}),i==="warning"&&h.jsx(xp,{}),i==="danger"&&h.jsx(xp,{}),i==="tip"&&h.jsx(eP,{}),i==="success"&&h.jsx(R7,{})]}),h.jsx("div",{className:W7,children:n})]})}var rP="vocs_Aside";function nP(t){const n=l2(t.className,rP);return"data-callout"in t?h.jsx(tP,{className:n,type:t["data-callout"],children:t.children}):h.jsx("aside",{...t,className:n})}var oP="vocs_Blockquote";function iP(t){return h.jsx("blockquote",{...t,className:l2(t.className,oP)})}var aP="vocs_Code";function sP(t){const n=lP(t.children);return h.jsx("code",{...t,className:l2(t.className,aP),children:n})}function lP(t){return Array.isArray(t)?t.map((n,i)=>{var a,l,A;return n.props&&"data-line"in n.props&&typeof n.props.children=="string"&&n.props.children.trim()===""&&((A=(l=(a=t[i+1])==null?void 0:a.props)==null?void 0:l.className)!=null&&A.includes("twoslash-tag-line"))?null:n}).filter(Boolean):t}var AP="vocs_Details";function cP(t){return h.jsx("details",{...t,className:l2(t.className,AP)})}var uP="vocs_Authors",fP="vocs_Authors_authors",dP="vocs_Authors_link",Sp="vocs_Authors_separator";function V7(t){const{frontmatter:n}=rr(),{authors:i=n==null?void 0:n.authors,date:a=n==null?void 0:n.date}=t,l=g.useMemo(()=>{if(i)return Array.isArray(i)?i:i.split(",").map(u=>u.trim())},[i]),A=g.useMemo(()=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,[a]);return h.jsxs("div",{className:uP,children:[A,l&&(A?" by ":"By "),h.jsx("span",{className:fP,children:l==null?void 0:l.map((u,f)=>{const{text:C,url:m}=mP(u);return h.jsxs(g.Fragment,{children:[m?h.jsx("a",{className:dP,href:m,target:"_blank",rel:"noopener noreferrer",children:C}):C,f<l.length-2&&h.jsx("span",{className:Sp,children:", "}),f<l.length-1&&h.jsx("span",{className:Sp,children:" & "})]},f)})})]})}function mP(t){const n=t.match(/\[(.+)\]\((.+)\)/);return n?{text:n[1],url:n[2]}:{text:t,url:void 0}}const Tp=[];var CP="vocs_BlogPosts",pP="vocs_BlogPosts_description",hP="vocs_BlogPosts_divider",DP="vocs_BlogPosts_post",gP="vocs_BlogPosts_readMore",vP="vocs_BlogPosts_title";function BP(){return h.jsx("div",{className:CP,children:Tp.map((t,n)=>h.jsxs(g.Fragment,{children:[h.jsx("div",{className:DP,children:h.jsxs(Mn,{to:t.path,children:[h.jsx("h2",{className:vP,children:t.title}),h.jsx(V7,{authors:t.authors,date:t.date}),h.jsxs("p",{className:pP,children:[t.description," ",h.jsx("span",{className:gP,children:"[→]"})]})]})}),n<Tp.length-1&&h.jsx("hr",{className:hP})]},n))})}var yP="var(--vocs_Sponsors_columns)",xP="var(--vocs_Sponsors_height)",FP="vocs_Sponsors",SP="vocs_Sponsors_title",TP="vocs_Sponsors_row",RP="vocs_Sponsors_column",bP="vocs_Sponsors_sponsor",wP="vocs_Sponsors_image";function EP(){const{sponsors:t}=C0();return h.jsx("div",{className:FP,children:t==null?void 0:t.map((n,i)=>h.jsxs(g.Fragment,{children:[h.jsx("div",{className:SP,children:n.name}),n.items.map((a,l)=>{var A;return h.jsx("div",{className:TP,style:Ie({[yP]:a.length.toString(),[xP]:`${((A=n.height)==null?void 0:A.toString())??"40"}px`}),children:a.map((u,f)=>h.jsx(xe,{className:l2(RP,u?bP:void 0),href:u==null?void 0:u.link,hideExternalIcon:!0,variant:"styleless",children:(u==null?void 0:u.image)&&h.jsx("img",{className:wP,src:u==null?void 0:u.image,alt:u==null?void 0:u.name})},f))},l)})]},i))})}var PP="var(--vocs_AutolinkIcon_iconUrl)",MP="vocs_AutolinkIcon";function NP(t){const{basePath:n}=C0(),i=n;return h.jsx("div",{...t,className:l2(t.className,MP),style:Ie({[PP]:`url(${i}/.vocs/icons/link.svg)`})})}var _P="vocs_Tabs",kP="vocs_Tabs_list",LP="vocs_Tabs_trigger",IP="vocs_Tabs_content";function OP(t){return h.jsx(kw,{...t,className:l2(t.className,_P)})}function qP(t){return h.jsx(Lw,{...t,className:l2(t.className,kP)})}function HP(t){return h.jsx(Iw,{...t,className:l2(t.className,LP)})}function jP(t){return h.jsx(Ow,{...t,className:l2(t.className,IP)})}var UP="vocs_CodeGroup";function zP({children:t}){if(!Array.isArray(t))return null;const n=t.map(i=>{const a=i.props["data-title"]?i:i.props.children,{props:l}=a,A=l["data-title"],u=l.children;return{title:A,content:u}});return h.jsxs(OP,{className:UP,defaultValue:n[0].title,children:[h.jsx(qP,{"aria-label":"Code group",children:n.map(({title:i},a)=>h.jsx(HP,{value:i||a.toString(),children:i},i||a.toString()))}),n.map(({title:i,content:a},l)=>{var u,f,C,m;const A=(m=(C=(f=(u=a.props)==null?void 0:u.children)==null?void 0:f.props)==null?void 0:C.className)==null?void 0:m.includes("shiki");return h.jsx(jP,{"data-shiki":A,value:i||l.toString(),children:a},i||l.toString())})]})}var WP="vocs_Div",GP="vocs_Step",Y7="vocs_Step_title",VP="vocs_Step_content",YP="vocs_H2";function $7(t){return h.jsx(Hn,{...t,className:l2(t.className,YP),level:2})}var $P="vocs_H3";function Z7(t){return h.jsx(Hn,{...t,className:l2(t.className,$P),level:3})}var ZP="vocs_H4";function K7(t){return h.jsx(Hn,{...t,className:l2(t.className,ZP),level:4})}var KP="vocs_H5";function X7(t){return h.jsx(Hn,{...t,className:l2(t.className,KP),level:5})}var XP="vocs_H6";function Q7(t){return h.jsx(Hn,{...t,className:l2(t.className,XP),level:6})}function QP({children:t,className:n,title:i,titleLevel:a=2}){const l=(()=>{if(a===2)return $7;if(a===3)return Z7;if(a===4)return K7;if(a===5)return X7;if(a===6)return Q7;throw new Error("Invalid.")})();return h.jsxs("div",{className:l2(n,GP),children:[typeof i=="string"?h.jsx(l,{className:Y7,children:i}):i,h.jsx("div",{className:VP,children:t})]})}var JP="vocs_Steps";function eM({children:t,className:n}){return h.jsx("div",{className:l2(n,JP),children:t})}function tM({children:t}){return Array.isArray(t)?h.jsx(eM,{children:t.map(({props:n},i)=>{const[a,...l]=Array.isArray(n.children)?n.children:[n.children];return h.jsx(QP,{title:g.cloneElement(a,{className:Y7}),children:l},i)})}):null}var rM="vocs_Subtitle";function nM({children:t}){return h.jsx("div",{className:rM,children:t})}function oM(t){const{layout:n}=nr(),i=l2(t.className,WP);return t.className==="code-group"?h.jsx(zP,{...t,className:i}):"data-authors"in t?h.jsx(V7,{}):"data-blog-posts"in t?h.jsx(BP,{}):"data-sponsors"in t?h.jsx(EP,{}):"data-autolink-icon"in t&&n==="docs"?h.jsx(NP,{...t,className:i}):"data-vocs-steps"in t?h.jsx(tM,{...t,className:i}):t.role==="doc-subtitle"?h.jsx(nM,{...t}):h.jsx("div",{...t,className:i})}var iM="vocs_Figcaption";function aM(t){const n=l2(t.className,iM);return h.jsx("figcaption",{...t,className:n})}var sM="vocs_Figure";function lM(t){const n=l2(t.className,sM);return h.jsx("figure",{...t,className:n})}var AM="vocs_Header";function cM(t){return h.jsx("header",{...t,className:l2(t.className,AM)})}var uM="vocs_HorizontalRule";function fM(t){return h.jsx("hr",{...t,className:l2(t.className,uM)})}var dM="vocs_List",mM="vocs_List_ordered",CM="vocs_List_unordered";function Rp({ordered:t,...n}){const i=t?"ol":"ul";return h.jsx(i,{...n,className:l2(n.className,dM,t?mM:CM)})}var pM="vocs_ListItem";function hM(t){return h.jsx("li",{...t,className:l2(t.className,pM)})}function DM(){const t=g.useRef(null),[n,i]=g.useState(!1);g.useEffect(()=>{if(!n)return;const l=setTimeout(()=>i(!1),1e3);return()=>clearTimeout(l)},[n]);function a(){var u;i(!0);const l=(u=t.current)==null?void 0:u.cloneNode(!0),A=l==null?void 0:l.querySelectorAll("button,.line.diff.remove,.twoslash-popup-info-hover,.twoslash-popup-info,.twoslash-meta-line,.twoslash-tag-line");for(const f of A??[])f.remove();navigator.clipboard.writeText(l==null?void 0:l.textContent)}return{copied:n,copy:a,ref:t}}var gM="vocs_CopyButton",vM="vocs_CopyButton_copied";function BM(){return h.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 68 67",children:[h.jsx("title",{children:"Checkmark"}),h.jsx("path",{fill:"currentColor",d:"M26.175 66.121c1.904 0 3.418-.83 4.492-2.49L66.263 7.332c.83-1.27 1.123-2.295 1.123-3.32 0-2.393-1.563-4.004-4.004-4.004-1.758 0-2.734.586-3.809 2.295L25.98 56.209 8.304 32.381c-1.123-1.514-2.198-2.149-3.809-2.149-2.441 0-4.2 1.71-4.2 4.15 0 1.026.44 2.15 1.27 3.224l19.971 25.927c1.367 1.758 2.734 2.588 4.639 2.588Z"})]})}function yM({copy:t,copied:n}){return h.jsx("button",{className:gM,"data-copied":n,onClick:t,type:"button",children:n?h.jsx(U0,{label:"Copied",size:"14px",className:vM,icon:BM}):h.jsx(U0,{label:"Copy",size:"18px",icon:w7})})}var xM="vocs_CodeBlock";function FM(t){return h.jsx("div",{...t,className:l2(t.className,xM)})}function SM(){return h.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("title",{children:"File"}),h.jsx("path",{d:"M4.2 1H4.17741H4.1774C3.86936 0.999988 3.60368 0.999978 3.38609 1.02067C3.15576 1.04257 2.92825 1.09113 2.71625 1.22104C2.51442 1.34472 2.34473 1.51442 2.22104 1.71625C2.09113 1.92825 2.04257 2.15576 2.02067 2.38609C1.99998 2.60367 1.99999 2.86935 2 3.17738V3.1774V3.2V11.8V11.8226V11.8226C1.99999 12.1307 1.99998 12.3963 2.02067 12.6139C2.04257 12.8442 2.09113 13.0717 2.22104 13.2837C2.34473 13.4856 2.51442 13.6553 2.71625 13.779C2.92825 13.9089 3.15576 13.9574 3.38609 13.9793C3.60368 14 3.86937 14 4.17741 14H4.2H10.8H10.8226C11.1306 14 11.3963 14 11.6139 13.9793C11.8442 13.9574 12.0717 13.9089 12.2837 13.779C12.4856 13.6553 12.6553 13.4856 12.779 13.2837C12.9089 13.0717 12.9574 12.8442 12.9793 12.6139C13 12.3963 13 12.1306 13 11.8226V11.8V3.2V3.17741C13 2.86936 13 2.60368 12.9793 2.38609C12.9574 2.15576 12.9089 1.92825 12.779 1.71625C12.6553 1.51442 12.4856 1.34472 12.2837 1.22104C12.0717 1.09113 11.8442 1.04257 11.6139 1.02067C11.3963 0.999978 11.1306 0.999988 10.8226 1H10.8H4.2ZM3.23875 2.07368C3.26722 2.05623 3.32362 2.03112 3.48075 2.01618C3.64532 2.00053 3.86298 2 4.2 2H10.8C11.137 2 11.3547 2.00053 11.5193 2.01618C11.6764 2.03112 11.7328 2.05623 11.7613 2.07368C11.8285 2.11491 11.8851 2.17147 11.9263 2.23875C11.9438 2.26722 11.9689 2.32362 11.9838 2.48075C11.9995 2.64532 12 2.86298 12 3.2V11.8C12 12.137 11.9995 12.3547 11.9838 12.5193C11.9689 12.6764 11.9438 12.7328 11.9263 12.7613C11.8851 12.8285 11.8285 12.8851 11.7613 12.9263C11.7328 12.9438 11.6764 12.9689 11.5193 12.9838C11.3547 12.9995 11.137 13 10.8 13H4.2C3.86298 13 3.64532 12.9995 3.48075 12.9838C3.32362 12.9689 3.26722 12.9438 3.23875 12.9263C3.17147 12.8851 3.11491 12.8285 3.07368 12.7613C3.05624 12.7328 3.03112 12.6764 3.01618 12.5193C3.00053 12.3547 3 12.137 3 11.8V3.2C3 2.86298 3.00053 2.64532 3.01618 2.48075C3.03112 2.32362 3.05624 2.26722 3.07368 2.23875C3.11491 2.17147 3.17147 2.11491 3.23875 2.07368ZM5 10C4.72386 10 4.5 10.2239 4.5 10.5C4.5 10.7761 4.72386 11 5 11H8C8.27614 11 8.5 10.7761 8.5 10.5C8.5 10.2239 8.27614 10 8 10H5ZM4.5 7.5C4.5 7.22386 4.72386 7 5 7H10C10.2761 7 10.5 7.22386 10.5 7.5C10.5 7.77614 10.2761 8 10 8H5C4.72386 8 4.5 7.77614 4.5 7.5ZM5 4C4.72386 4 4.5 4.22386 4.5 4.5C4.5 4.77614 4.72386 5 5 5H10C10.2761 5 10.5 4.77614 10.5 4.5C10.5 4.22386 10.2761 4 10 4H5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function TM(){return h.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 79 95",fill:"none",children:[h.jsx("title",{children:"Terminal"}),h.jsx("path",{fill:"currentColor",d:"M38.281 34.033c0-1.074-.39-2.05-1.22-2.88L6.885 1.171C6.152.39 5.175 0 4.053 0 1.758 0 0 1.709 0 4.004c0 1.074.488 2.1 1.172 2.88l27.295 27.15L1.172 61.181C.488 61.962 0 62.939 0 64.062c0 2.295 1.758 4.004 4.053 4.004 1.123 0 2.1-.39 2.832-1.172l30.176-29.98c.83-.83 1.22-1.807 1.22-2.88Z"}),h.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"8px",d:"M36 75h55"})]})}var RM="vocs_CodeTitle";function bM({children:t,className:n,language:i,...a}){return h.jsxs("div",{...a,className:l2(n,RM),children:[i==="bash"?h.jsx(U0,{label:"Terminal",size:"14px",icon:TM,style:{marginTop:3}}):t.match(/\.(.*)$/)?h.jsx(U0,{label:"File",size:"14px",icon:SM,style:{marginTop:1}}):null,t]})}var wM="vocs_Pre",EM="vocs_Pre_wrapper";function PM({children:t,className:n,...i}){const{copied:a,copy:l,ref:A}=DM();function u(m){return!m||typeof m!="object"?m:"props"in m?{...m,props:{...m.props,children:Array.isArray(m.props.children)?m.props.children.map(u):u(m.props.children)}}:m}const f=g.useMemo(()=>u(t),[t]);return(m=>n!=null&&n.includes("shiki")?h.jsxs(FM,{children:[i["data-title"]&&h.jsx(bM,{language:i["data-lang"],children:i["data-title"]}),m]}):m)(h.jsx("div",{className:l2(EM),children:h.jsxs("pre",{ref:A,...i,className:l2(n,wM),children:[h.jsx(yM,{copied:a,copy:l}),f]})}))}var MM="vocs_Footnotes";function NM(t){return h.jsx("section",{...t,className:l2(t.className,MM)})}var bp="vocs_Section";function _M(t){return"data-footnotes"in t?h.jsx(NM,{...t,className:l2(t.className,bp)}):h.jsx("section",{...t,className:l2(t.className,bp)})}var wp="vocs_Span";function kM(t,n){if(!t||!n)return!1;const i=n.getRootNode==null?void 0:n.getRootNode();if(t.contains(n))return!0;if(i&&Cs(i)){let a=n;for(;a;){if(t===a)return!0;a=a.parentNode||a.host}}return!1}function Ya(t){return(t==null?void 0:t.ownerDocument)||document}function cu(t,n){const i=["mouse","pen"];return i.push("",void 0),i.includes(t)}var _r=typeof document<"u"?g.useLayoutEffect:g.useEffect;const LM={...vs};function $a(t){const n=g.useRef(t);return _r(()=>{n.current=t}),n}const IM=LM.useInsertionEffect,OM=IM||(t=>t());function ns(t){const n=g.useRef(()=>{});return OM(()=>{n.current=t}),g.useCallback(function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return n.current==null?void 0:n.current(...a)},[])}const qM="data-floating-ui-focusable",Ep="active",Pp="selected",HM={...vs};let Mp=!1,jM=0;const Np=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+jM++;function UM(){const[t,n]=g.useState(()=>Mp?Np():void 0);return _r(()=>{t==null&&n(Np())},[]),g.useEffect(()=>{Mp=!0},[]),t}const zM=HM.useId,J7=zM||UM,WM=g.forwardRef(function(n,i){const{context:{placement:a,elements:{floating:l},middlewareData:{arrow:A,shift:u}},width:f=14,height:C=7,tipRadius:m=0,strokeWidth:D=0,staticOffset:p,stroke:v,d:B,style:{transform:y,...x}={},...S}=n,T=J7(),[w,R]=g.useState(!1);if(_r(()=>{if(!l)return;Se(l).direction==="rtl"&&R(!0)},[l]),!l)return null;const[P,N]=a.split("-"),E=P==="top"||P==="bottom";let L=p;(E&&u!=null&&u.x||!E&&u!=null&&u.y)&&(L=null);const H=D*2,z=H/2,r2=f/2*(m/-8+1),c2=C/2*m/4,s2=!!B,i2=L&&N==="end"?"bottom":"top";let K=L&&N==="end"?"right":"left";L&&w&&(K=N==="end"?"left":"right");const u2=(A==null?void 0:A.x)!=null?L||A.x:"",I=(A==null?void 0:A.y)!=null?L||A.y:"",V=B||"M0,0"+(" H"+f)+(" L"+(f-r2)+","+(C-c2))+(" Q"+f/2+","+C+" "+r2+","+(C-c2))+" Z",Q={top:s2?"rotate(180deg)":"",left:s2?"rotate(90deg)":"rotate(-90deg)",bottom:s2?"":"rotate(180deg)",right:s2?"rotate(-90deg)":"rotate(90deg)"}[P];return h.jsxs("svg",{...S,"aria-hidden":!0,ref:i,width:s2?f:f+H,height:f,viewBox:"0 0 "+f+" "+(C>f?C:f),style:{position:"absolute",pointerEvents:"none",[K]:u2,[i2]:I,[P]:E||s2?"100%":"calc(100% - "+H/2+"px)",transform:[Q,y].filter(Z=>!!Z).join(" "),...x},children:[H>0&&h.jsx("path",{clipPath:"url(#"+T+")",fill:"none",stroke:v,strokeWidth:H+(B?0:1),d:V}),h.jsx("path",{stroke:H&&!B?S.fill:"none",d:V}),h.jsx("clipPath",{id:T,children:h.jsx("rect",{x:-z,y:z*(s2?-1:1),width:f+H,height:f})})]})});function GM(){const t=new Map;return{emit(n,i){var a;(a=t.get(n))==null||a.forEach(l=>l(i))},on(n,i){t.has(n)||t.set(n,new Set),t.get(n).add(i)},off(n,i){var a;(a=t.get(n))==null||a.delete(i)}}}const VM=g.createContext(null),YM=g.createContext(null),ev=()=>{var t;return((t=g.useContext(VM))==null?void 0:t.id)||null},tv=()=>g.useContext(YM);function $M(t){return"data-floating-ui-"+t}function ke(t){t.current!==-1&&(clearTimeout(t.current),t.current=-1)}const _p=$M("safe-polygon");function bc(t,n,i){if(i&&!cu(i))return 0;if(typeof t=="number")return t;if(typeof t=="function"){const a=t();return typeof a=="number"?a:a==null?void 0:a[n]}return t==null?void 0:t[n]}function wc(t){return typeof t=="function"?t():t}function ZM(t,n){n===void 0&&(n={});const{open:i,onOpenChange:a,dataRef:l,events:A,elements:u}=t,{enabled:f=!0,delay:C=0,handleClose:m=null,mouseOnly:D=!1,restMs:p=0,move:v=!0}=n,B=tv(),y=ev(),x=$a(m),S=$a(C),T=$a(i),w=$a(p),R=g.useRef(),P=g.useRef(-1),N=g.useRef(),E=g.useRef(-1),L=g.useRef(!0),H=g.useRef(!1),z=g.useRef(()=>{}),r2=g.useRef(!1),c2=g.useCallback(()=>{var V;const Q=(V=l.current.openEvent)==null?void 0:V.type;return(Q==null?void 0:Q.includes("mouse"))&&Q!=="mousedown"},[l]);g.useEffect(()=>{if(!f)return;function V(Q){let{open:Z}=Q;Z||(ke(P),ke(E),L.current=!0,r2.current=!1)}return A.on("openchange",V),()=>{A.off("openchange",V)}},[f,A]),g.useEffect(()=>{if(!f||!x.current||!i)return;function V(Z){c2()&&a(!1,Z,"hover")}const Q=Ya(u.floating).documentElement;return Q.addEventListener("mouseleave",V),()=>{Q.removeEventListener("mouseleave",V)}},[u.floating,i,a,f,x,c2]);const s2=g.useCallback(function(V,Q,Z){Q===void 0&&(Q=!0),Z===void 0&&(Z="hover");const M=bc(S.current,"close",R.current);M&&!N.current?(ke(P),P.current=window.setTimeout(()=>a(!1,V,Z),M)):Q&&(ke(P),a(!1,V,Z))},[S,a]),i2=ns(()=>{z.current(),N.current=void 0}),K=ns(()=>{if(H.current){const V=Ya(u.floating).body;V.style.pointerEvents="",V.removeAttribute(_p),H.current=!1}}),u2=ns(()=>l.current.openEvent?["click","mousedown"].includes(l.current.openEvent.type):!1);g.useEffect(()=>{if(!f)return;function V(e2){if(ke(P),L.current=!1,D&&!cu(R.current)||wc(w.current)>0&&!bc(S.current,"open"))return;const o2=bc(S.current,"open",R.current);o2?P.current=window.setTimeout(()=>{T.current||a(!0,e2,"hover")},o2):i||a(!0,e2,"hover")}function Q(e2){if(u2()){K();return}z.current();const o2=Ya(u.floating);if(ke(E),r2.current=!1,x.current&&l.current.floatingContext){i||ke(P),N.current=x.current({...l.current.floatingContext,tree:B,x:e2.clientX,y:e2.clientY,onClose(){K(),i2(),u2()||s2(e2,!0,"safe-polygon")}});const x2=N.current;o2.addEventListener("mousemove",x2),z.current=()=>{o2.removeEventListener("mousemove",x2)};return}(R.current==="touch"?!kM(u.floating,e2.relatedTarget):!0)&&s2(e2)}function Z(e2){u2()||l.current.floatingContext&&(x.current==null||x.current({...l.current.floatingContext,tree:B,x:e2.clientX,y:e2.clientY,onClose(){K(),i2(),u2()||s2(e2)}})(e2))}function M(){ke(P)}function X(e2){u2()||s2(e2,!1)}if(R0(u.domReference)){const e2=u.domReference,o2=u.floating;return i&&e2.addEventListener("mouseleave",Z),v&&e2.addEventListener("mousemove",V,{once:!0}),e2.addEventListener("mouseenter",V),e2.addEventListener("mouseleave",Q),o2&&(o2.addEventListener("mouseleave",Z),o2.addEventListener("mouseenter",M),o2.addEventListener("mouseleave",X)),()=>{i&&e2.removeEventListener("mouseleave",Z),v&&e2.removeEventListener("mousemove",V),e2.removeEventListener("mouseenter",V),e2.removeEventListener("mouseleave",Q),o2&&(o2.removeEventListener("mouseleave",Z),o2.removeEventListener("mouseenter",M),o2.removeEventListener("mouseleave",X))}}},[u,f,t,D,v,s2,i2,K,a,i,T,B,S,x,l,u2,w]),_r(()=>{var V;if(f&&i&&(V=x.current)!=null&&V.__options.blockPointerEvents&&c2()){H.current=!0;const Z=u.floating;if(R0(u.domReference)&&Z){var Q;const M=Ya(u.floating).body;M.setAttribute(_p,"");const X=u.domReference,e2=B==null||(Q=B.nodesRef.current.find(o2=>o2.id===y))==null||(Q=Q.context)==null?void 0:Q.elements.floating;return e2&&(e2.style.pointerEvents=""),M.style.pointerEvents="none",X.style.pointerEvents="auto",Z.style.pointerEvents="auto",()=>{M.style.pointerEvents="",X.style.pointerEvents="",Z.style.pointerEvents=""}}}},[f,i,y,u,B,x,c2]),_r(()=>{i||(R.current=void 0,r2.current=!1,i2(),K())},[i,i2,K]),g.useEffect(()=>()=>{i2(),ke(P),ke(E),K()},[f,u.domReference,i2,K]);const I=g.useMemo(()=>{function V(Q){R.current=Q.pointerType}return{onPointerDown:V,onPointerEnter:V,onMouseMove(Q){const{nativeEvent:Z}=Q;function M(){!L.current&&!T.current&&a(!0,Z,"hover")}D&&!cu(R.current)||i||wc(w.current)===0||r2.current&&Q.movementX**2+Q.movementY**2<2||(ke(E),R.current==="touch"?M():(r2.current=!0,E.current=window.setTimeout(M,wc(w.current))))}}},[D,a,i,T,w]);return g.useMemo(()=>f?{reference:I}:{},[f,I])}function Ec(t,n){if(!t||!n)return!1;const i=n.getRootNode==null?void 0:n.getRootNode();if(t.contains(n))return!0;if(i&&Cs(i)){let a=n;for(;a;){if(t===a)return!0;a=a.parentNode||a.host}}return!1}function KM(t){return"composedPath"in t?t.composedPath()[0]:t.target}function XM(t){const{open:n=!1,onOpenChange:i,elements:a}=t,l=J7(),A=g.useRef({}),[u]=g.useState(()=>GM()),f=ev()!=null,[C,m]=g.useState(a.reference),D=ns((B,y,x)=>{A.current.openEvent=B?y:void 0,u.emit("openchange",{open:B,event:y,reason:x,nested:f}),i==null||i(B,y,x)}),p=g.useMemo(()=>({setPositionReference:m}),[]),v=g.useMemo(()=>({reference:C||a.reference||null,floating:a.floating||null,domReference:a.reference}),[C,a.reference,a.floating]);return g.useMemo(()=>({dataRef:A,open:n,onOpenChange:D,elements:v,events:u,floatingId:l,refs:p}),[n,D,v,u,l,p])}function QM(t){t===void 0&&(t={});const{nodeId:n}=t,i=XM({...t,elements:{reference:null,floating:null,...t.elements}}),a=t.rootContext||i,l=a.elements,[A,u]=g.useState(null),[f,C]=g.useState(null),D=(l==null?void 0:l.domReference)||A,p=g.useRef(null),v=tv();_r(()=>{D&&(p.current=D)},[D]);const B=ag({...t,elements:{...l,...f&&{reference:f}}}),y=g.useCallback(R=>{const P=R0(R)?{getBoundingClientRect:()=>R.getBoundingClientRect(),getClientRects:()=>R.getClientRects(),contextElement:R}:R;C(P),B.refs.setReference(P)},[B.refs]),x=g.useCallback(R=>{(R0(R)||R===null)&&(p.current=R,u(R)),(R0(B.refs.reference.current)||B.refs.reference.current===null||R!==null&&!R0(R))&&B.refs.setReference(R)},[B.refs]),S=g.useMemo(()=>({...B.refs,setReference:x,setPositionReference:y,domReference:p}),[B.refs,x,y]),T=g.useMemo(()=>({...B.elements,domReference:D}),[B.elements,D]),w=g.useMemo(()=>({...B,...a,refs:S,elements:T,nodeId:n}),[B,S,T,n,a]);return _r(()=>{a.dataRef.current.floatingContext=w;const R=v==null?void 0:v.nodesRef.current.find(P=>P.id===n);R&&(R.context=w)}),g.useMemo(()=>({...B,context:w,refs:S,elements:T}),[B,S,T,w])}function Pc(t,n,i){const a=new Map,l=i==="item";let A=t;if(l&&t){const{[Ep]:u,[Pp]:f,...C}=t;A=C}return{...i==="floating"&&{tabIndex:-1,[qM]:""},...A,...n.map(u=>{const f=u?u[i]:null;return typeof f=="function"?t?f(t):null:f}).concat(t).reduce((u,f)=>(f&&Object.entries(f).forEach(C=>{let[m,D]=C;if(!(l&&[Ep,Pp].includes(m)))if(m.indexOf("on")===0){if(a.has(m)||a.set(m,[]),typeof D=="function"){var p;(p=a.get(m))==null||p.push(D),u[m]=function(){for(var v,B=arguments.length,y=new Array(B),x=0;x<B;x++)y[x]=arguments[x];return(v=a.get(m))==null?void 0:v.map(S=>S(...y)).find(S=>S!==void 0)}}}else u[m]=D}),u),{})}}function JM(t){t===void 0&&(t=[]);const n=t.map(f=>f==null?void 0:f.reference),i=t.map(f=>f==null?void 0:f.floating),a=t.map(f=>f==null?void 0:f.item),l=g.useCallback(f=>Pc(f,t,"reference"),n),A=g.useCallback(f=>Pc(f,t,"floating"),i),u=g.useCallback(f=>Pc(f,t,"item"),a);return g.useMemo(()=>({getReferenceProps:l,getFloatingProps:A,getItemProps:u}),[l,A,u])}function eN(t,n,i){i===void 0&&(i=!0);let a=t.filter(A=>{var u;return A.parentId===n&&((u=A.context)==null?void 0:u.open)}),l=a;for(;l.length;)l=i?t.filter(A=>{var u;return(u=l)==null?void 0:u.some(f=>{var C;return A.parentId===f.id&&((C=A.context)==null?void 0:C.open)})}):t,a=a.concat(l);return a}function kp(t,n){const[i,a]=t;let l=!1;const A=n.length;for(let u=0,f=A-1;u<A;f=u++){const[C,m]=n[u]||[0,0],[D,p]=n[f]||[0,0];m>=a!=p>=a&&i<=(D-C)*(a-m)/(p-m)+C&&(l=!l)}return l}function tN(t,n){return t[0]>=n.x&&t[0]<=n.x+n.width&&t[1]>=n.y&&t[1]<=n.y+n.height}function rN(t){t===void 0&&(t={});const{buffer:n=.5,blockPointerEvents:i=!1,requireIntent:a=!0}=t;let l,A=!1,u=null,f=null,C=performance.now();function m(p,v){const B=performance.now(),y=B-C;if(u===null||f===null||y===0)return u=p,f=v,C=B,null;const x=p-u,S=v-f,w=Math.sqrt(x*x+S*S)/y;return u=p,f=v,C=B,w}const D=p=>{let{x:v,y:B,placement:y,elements:x,onClose:S,nodeId:T,tree:w}=p;return function(P){function N(){clearTimeout(l),S()}if(clearTimeout(l),!x.domReference||!x.floating||y==null||v==null||B==null)return;const{clientX:E,clientY:L}=P,H=[E,L],z=KM(P),r2=P.type==="mouseleave",c2=Ec(x.floating,z),s2=Ec(x.domReference,z),i2=x.domReference.getBoundingClientRect(),K=x.floating.getBoundingClientRect(),u2=y.split("-")[0],I=v>K.right-K.width/2,V=B>K.bottom-K.height/2,Q=tN(H,i2),Z=K.width>i2.width,M=K.height>i2.height,X=(Z?i2:K).left,e2=(Z?i2:K).right,o2=(M?i2:K).top,f2=(M?i2:K).bottom;if(c2&&(A=!0,!r2))return;if(s2&&(A=!1),s2&&!r2){A=!0;return}if(r2&&R0(P.relatedTarget)&&Ec(x.floating,P.relatedTarget)||w&&eN(w.nodesRef.current,T).some(G2=>{let{context:y2}=G2;return y2==null?void 0:y2.open}))return;if(u2==="top"&&B>=i2.bottom-1||u2==="bottom"&&B<=i2.top+1||u2==="left"&&v>=i2.right-1||u2==="right"&&v<=i2.left+1)return N();let x2=[];switch(u2){case"top":x2=[[X,i2.top+1],[X,K.bottom-1],[e2,K.bottom-1],[e2,i2.top+1]];break;case"bottom":x2=[[X,K.top+1],[X,i2.bottom-1],[e2,i2.bottom-1],[e2,K.top+1]];break;case"left":x2=[[K.right-1,f2],[K.right-1,o2],[i2.left+1,o2],[i2.left+1,f2]];break;case"right":x2=[[i2.right-1,f2],[i2.right-1,o2],[K.left+1,o2],[K.left+1,f2]];break}function p2(G2){let[y2,M2]=G2;switch(u2){case"top":{const z2=[Z?y2+n/2:I?y2+n*4:y2-n*4,M2+n+1],f0=[Z?y2-n/2:I?y2+n*4:y2-n*4,M2+n+1],N0=[[K.left,I||Z?K.bottom-n:K.top],[K.right,I?Z?K.bottom-n:K.top:K.bottom-n]];return[z2,f0,...N0]}case"bottom":{const z2=[Z?y2+n/2:I?y2+n*4:y2-n*4,M2-n],f0=[Z?y2-n/2:I?y2+n*4:y2-n*4,M2-n],N0=[[K.left,I||Z?K.top+n:K.bottom],[K.right,I?Z?K.top+n:K.bottom:K.top+n]];return[z2,f0,...N0]}case"left":{const z2=[y2+n+1,M?M2+n/2:V?M2+n*4:M2-n*4],f0=[y2+n+1,M?M2-n/2:V?M2+n*4:M2-n*4];return[...[[V||M?K.right-n:K.left,K.top],[V?M?K.right-n:K.left:K.right-n,K.bottom]],z2,f0]}case"right":{const z2=[y2-n,M?M2+n/2:V?M2+n*4:M2-n*4],f0=[y2-n,M?M2-n/2:V?M2+n*4:M2-n*4],N0=[[V||M?K.left+n:K.right,K.top],[V?M?K.left+n:K.right:K.left+n,K.bottom]];return[z2,f0,...N0]}}}if(!kp([E,L],x2)){if(A&&!Q)return N();if(!r2&&a){const G2=m(P.clientX,P.clientY);if(G2!==null&&G2<.1)return N()}kp([E,L],p2([v,B]))?!A&&a&&(l=window.setTimeout(N,40)):N()}}};return D.__options={blockPointerEvents:i},D}function nN({children:t,...n}){const[i,a]=t,l=g.useRef(null),[A,u]=g.useState(!1),{context:f,refs:C,floatingStyles:m}=QM({middleware:[Ag({element:l}),sg(8),lg()],open:A,onOpenChange:u,placement:"bottom-start"}),D=ZM(f,{handleClose:rN()}),{getReferenceProps:p,getFloatingProps:v}=JM([D]),B=a.props.children,y=i.props.children;return h.jsxs("span",{...n,children:[h.jsx("span",{className:"twoslash-target",ref:C.setReference,...p(),children:B}),A&&h.jsxs("div",{className:"twoslash-popup-info-hover",ref:C.setFloating,style:m,...v(),children:[h.jsx(WM,{ref:l,context:f,fill:Hc.background5,height:3,stroke:Hc.border2,strokeWidth:1,width:7}),h.jsx("div",{className:"twoslash-popup-scroll-container",children:y})]})]})}function oN(t){var i;const n=l2(t.className,wp);return(i=t.className)!=null&&i.includes("twoslash-hover")?h.jsx(nN,{...t,className:n}):h.jsx("span",{...t,className:l2(t.className,wp)})}var iN="vocs_Strong";function aN(t){return h.jsx("strong",{...t,className:l2(t.className,iN)})}var sN="vocs_Summary";function lN(t){return h.jsx("summary",{...t,className:l2(t.className,sN)})}var AN="vocs_Table";function cN(t){return h.jsx("table",{...t,className:l2(t.className,AN)})}var uN="vocs_TableCell";function fN(t){return h.jsx("td",{...t,className:l2(t.className,uN)})}var dN="vocs_TableHeader";function mN(t){return h.jsx("th",{...t,className:l2(t.className,dN)})}var CN="vocs_TableRow";function pN(t){return h.jsx("tr",{...t,className:l2(t.className,CN)})}const hN={a:VE,aside:nP,blockquote:iP,code:sP,details:cP,div:oM,pre:PM,header:cM,figcaption:aM,figure:lM,h1:vh,h2:$7,h3:Z7,h4:K7,h5:X7,h6:Q7,hr:fM,kd:lD,li:hM,ol:t=>h.jsx(Rp,{ordered:!0,...t}),p:Bh,section:_M,span:oN,strong:aN,summary:lN,table:cN,td:fN,th:mN,tr:pN,ul:t=>h.jsx(Rp,{ordered:!1,...t})};function DN(){const{pathname:t}=i0(),n=C0(),{ogImageUrl:i}=n;if(!i)return;if(typeof i=="string")return i;const a=g.useMemo(()=>{const l=Object.keys(i).filter(A=>t.startsWith(A));return l[l.length-1]},[i,t]);if(a)return i[a]}function uu(t){const{children:n,content:i,filePath:a,frontmatter:l,lastUpdatedAt:A,path:u}=t,{pathname:f}=i0(),C=g.useRef(void 0);return g.useEffect(()=>{C.current=f}),h.jsxs(h.Fragment,{children:[h.jsx(gN,{frontmatter:l}),typeof window<"u"&&h.jsx(uh,{}),h.jsx(zE,{components:hN,children:h.jsx(dF,{frontmatter:l,path:u,children:h.jsx(Fh.Provider,{value:{content:i,filePath:a,frontmatter:l,lastUpdatedAt:A,previousPath:C.current},children:n})})})]})}function gN({frontmatter:t}){var v,B,y,x,S,T;const n=C0(),i=DN(),{baseUrl:a,font:l,iconUrl:A,logoUrl:u}=n,f=(t==null?void 0:t.description)??n.description,C=(t==null?void 0:t.title)??n.title,m=(()=>{if(n.title&&!C.includes(n.title))return n.titleTemplate})(),D=typeof window<"u"&&window.location.hostname==="localhost",p=m?m.replace("%s",C):C;return h.jsxs(h.Fragment,{children:[p&&h.jsx("title",{children:p}),a&&!0&&!D&&h.jsx("base",{href:a}),f!=="undefined"&&h.jsx("meta",{name:"description",content:f}),A&&typeof A=="string"&&h.jsx("link",{rel:"icon",href:A,type:Mc(A)}),A&&typeof A!="string"&&h.jsx("link",{rel:"icon",href:A.light,type:Mc(A.light)}),A&&typeof A!="string"&&h.jsx("link",{rel:"icon",href:A.dark,type:Mc(A.dark),media:"(prefers-color-scheme: dark)"}),h.jsx("meta",{property:"og:type",content:"website"}),h.jsx("meta",{property:"og:title",content:C||n.title}),a&&h.jsx("meta",{property:"og:url",content:a}),f!=="undefined"&&h.jsx("meta",{property:"og:description",content:f}),i&&h.jsx("meta",{property:"og:image",content:i.replace("%logo",`${a||""}${typeof u=="string"?u:(u==null?void 0:u.dark)||""}`).replace("%title",C||"").replace("%description",(f!=="undefined"?f:"")||"")}),(((v=l==null?void 0:l.default)==null?void 0:v.google)||((B=l==null?void 0:l.mono)==null?void 0:B.google))&&h.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(((y=l==null?void 0:l.default)==null?void 0:y.google)||((x=l==null?void 0:l.mono)==null?void 0:x.google))&&h.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),((S=l==null?void 0:l.default)==null?void 0:S.google)&&h.jsx("link",{href:`https://fonts.googleapis.com/css2?family=${l.default.google}:wght@300;400;500&display=swap`,rel:"stylesheet"}),((T=l==null?void 0:l.mono)==null?void 0:T.google)&&h.jsx("link",{href:`https://fonts.googleapis.com/css2?family=${l.mono.google}:wght@300;400;500&display=swap`,rel:"stylesheet"}),h.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),i&&h.jsx("meta",{property:"twitter:image",content:i.replace("%logo",`${a||""}${typeof u=="string"?u:(u==null?void 0:u.dark)||""}`).replace("%title",C?encodeURIComponent(C):"").replace("%description",f?encodeURIComponent(f):"")})]})}function Mc(t){if(t.endsWith(".svg"))return"image/svg+xml";if(t.endsWith(".png"))return"image/png";if(t.endsWith(".jpg"))return"image/jpeg";if(t.endsWith(".ico"))return"image/x-icon";if(t.endsWith(".webp"))return"image/webp"}const vN=(()=>{const t=Su.find(({path:n})=>n==="*");return t?{path:t.path,lazy:async()=>{const{frontmatter:n,...i}=await t.lazy();return{...i,element:h.jsx(uu,{frontmatter:n,path:t.path,children:h.jsx(lu,{children:h.jsx(i.default,{})})})}}}:{path:"*",lazy:void 0,element:h.jsx(uu,{frontmatter:{layout:"minimal"},path:"*",children:h.jsx(lu,{children:h.jsx(j5,{})})})}})(),Lp=[...Su.filter(({path:t})=>t!=="*").map(t=>({path:t.path,lazy:async()=>{const{frontmatter:n,...i}=await t.lazy();return{...i,element:h.jsx(uu,{content:decodeURIComponent(t.content??""),filePath:t.filePath,frontmatter:n,lastUpdatedAt:t.lastUpdatedAt,path:t.path,children:h.jsx(lu,{children:h.jsx(i.default,{})})})}}})),vN];async function BN(t,n){var a;const i=(a=Dt(t,window.location,n))==null?void 0:a.filter(l=>l.route.lazy);i&&(i==null?void 0:i.length)>0&&await Promise.all(i.map(async l=>{const A=await l.route.lazy();Object.assign(l.route,{...A,lazy:void 0})}))}function yN(){const t=document.querySelectorAll('style[data-vocs-temp-style="true"]');for(const n of t)n.remove()}xN();async function xN(){const t=Ch().basePath;await BN(Lp,t),yN();const n=A5(Lp,{basename:t});hy.hydrateRoot(document.getElementById("app"),h.jsx(S5,{children:h.jsx(Lx,{router:n})}))}export{jP as C,xe as L,OP as R,HP as T,MN as a,Tc as b,l2 as c,C0 as d,G6 as e,qP as f,h as j,UE as u};
